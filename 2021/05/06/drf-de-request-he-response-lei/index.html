<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="https:&#x2F;&#x2F;www.django-rest-framework.org&#x2F;api-guide&#x2F;requests&#x2F;#data REST framework 传入视图的request对象不再是Django默认的HttpRequest对象，而是REST framework提供的扩展了django原生HttpRequest类的Request类的对象。 比如更加灵活的请求解析（request parsin">
<meta property="og:type" content="article">
<meta property="og:title" content="DRF视图开发RESTful API接口的方式">
<meta property="og:url" content="https://bubbleboy11.github.io/2021/05/06/drf-de-request-he-response-lei/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="https:&#x2F;&#x2F;www.django-rest-framework.org&#x2F;api-guide&#x2F;requests&#x2F;#data REST framework 传入视图的request对象不再是Django默认的HttpRequest对象，而是REST framework提供的扩展了django原生HttpRequest类的Request类的对象。 比如更加灵活的请求解析（request parsin">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-05T16:21:41.000Z">
<meta property="article:modified_time" content="2021-06-23T02:12:09.997Z">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/2021/05/06/drf-de-request-he-response-lei/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://bubbleboy11.github.io/2021/05/06/drf-de-request-he-response-lei/","path":"2021/05/06/drf-de-request-he-response-lei/","title":"DRF视图开发RESTful API接口的方式"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>DRF视图开发RESTful API接口的方式 | 外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Response"><span class="nav-text">Response()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments%E5%8F%82%E6%95%B0"><span class="nav-text">Arguments参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Attributes%E5%B1%9E%E6%80%A7"><span class="nav-text">Attributes属性</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">338</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/05/06/drf-de-request-he-response-lei/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          DRF视图开发RESTful API接口的方式
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-05 16:21:41" itemprop="dateCreated datePublished" datetime="2021-05-05T16:21:41Z">2021-05-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-23 02:12:09" itemprop="dateModified" datetime="2021-06-23T02:12:09Z">2021-06-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><a target="_blank" rel="noopener" href="https://www.django-rest-framework.org/api-guide/requests/#data">https://www.django-rest-framework.org/api-guide/requests/#data</a></p>
<p>REST framework 传入视图的request对象不再是Django默认的HttpRequest对象，而是REST framework提供的扩展了django原生<code>HttpRequest</code>类的<code>Request</code>类的对象。</p>
<p>比如更加灵活的请求解析（request parsing）和认证（request authentication）。</p>
<p>REST framework 提供了Parser解析器，在接收到请求后会自动根据Content-Type指明的请求数据类型（如JSON、表单等）将请求数据进行parse解析，解析为类字典[QueryDict]对象保存到Request对象中。</p>
<p><strong>Request对象的数据是自动根据前端发送数据的格式进行解析之后的结果。</strong></p>
<p>无论前端发送的哪种格式的数据，我们都可以以统一的方式读取数据。</p>
<ul>
<li><p><code>request.data</code>  <code>&lt;class 'dict'&gt;</code><br>返回请求主体的解析内容，类似Django中标准的<code>request.POST</code>和<code>request.FILES</code>属性，具体如下：</p>
<ul>
<li>它包括所有已解析的内容，包括文件和非文件输入；</li>
<li>它支持解析HTTP方法不只是<code>POST</code>，这意味着您可以访问<code>PUT</code>和<code>PATCH</code>请求的内容；</li>
<li>它支持REST框架的灵活请求解析器parsers，而不仅仅是支持表单数据。例如，可以以处理传入表单数据的相同方式处理传入JSON数据。</li>
</ul>
</li>
<li><p><code>request.query_params</code><br>等同于Django标准的<code>request.GET</code>，有助于使代码库更加正确和明显，这样那够让你的代码更加明显的体现出 —-任何HTTP方法类型都可能包括查询参数，而不仅仅是GET请求。</p>
</li>
<li><p><code>request.parsers</code> <code>APIView</code> 类或者 <code>@api_view</code> 装饰器将根据视图上设置的 parser_classes 或 settings 文件中的 DEFAULT_PARSER_CLASSES 设置来确保此属性（.parsers）自动设置为 Parser 实例列表。用于解析数据。通常不需要关注该属性……DRF包括许多内置的Parser类，以保证可以接收各种媒体类型的请求并解析，包括JSONParser、FormParser、MultiPartParser等。还支持定义自己的自定义解析器，这使您可以灵活地设计API接受的媒体类型。</p>
</li>
<li><p><code>request.user</code>通常会返回的实例django.contrib.auth.models.User，尽管其行为取决于所使用的身份验证策略。</p>
</li>
</ul>
<p>drf 二次封装后的 request 对象</p>
<p>怎么拿到请求传递过来的数据（url 拼接的数据，数据包传过来的数据）</p>
<p>源码</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="comment"># Note: Views are made CSRF exempt from within `as_view` as to prevent</span></span><br><span class="line">    <span class="comment"># accidental removal of this exemption in cases where `dispatch` needs to</span></span><br><span class="line">    <span class="comment"># be overridden.</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dispatch</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        `.dispatch()` is pretty much the same as Django's regular dispatch,</span></span><br><span class="line"><span class="string">        but with extra hooks for startup, finalize, and exception handling.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.args = args</span><br><span class="line">        self.kwargs = kwargs</span><br><span class="line">        <span class="comment"># 请求模块</span></span><br><span class="line">        request = self.initialize_request(request, *args, **kwargs)</span><br><span class="line">        self.request = request</span><br><span class="line">        self.headers = self.default_response_headers  <span class="comment"># deprecate?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 三大认证模块</span></span><br><span class="line">            self.initial(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Get the appropriate handler method</span></span><br><span class="line">            <span class="keyword">if</span> request.method.lower() <span class="keyword">in</span> self.http_method_names:</span><br><span class="line">                handler = getattr(self, request.method.lower(),</span><br><span class="line">                                  self.http_method_not_allowed)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                handler = self.http_method_not_allowed</span><br><span class="line"></span><br><span class="line">            response = handler(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> exc:</span><br><span class="line">            response = self.handle_exception(exc)</span><br><span class="line"></span><br><span class="line">        self.response = self.finalize_response(request, response, *args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> self.response</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dispatch methods</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initialize_request</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns the initial request object.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        parser_context = self.get_parser_context(request)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Request(  <span class="comment"># 对应下面的__init__</span></span><br><span class="line">            request,</span><br><span class="line">            parsers=self.get_parsers(),</span><br><span class="line">            authenticators=self.get_authenticators(),</span><br><span class="line">            negotiator=self.get_content_negotiator(),</span><br><span class="line">            parser_context=parser_context</span><br><span class="line">        )</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Wrapper allowing to enhance a standard `HttpRequest` instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Kwargs:</span></span><br><span class="line"><span class="string">        - request(HttpRequest). The original request instance.</span></span><br><span class="line"><span class="string">        - parsers(list/tuple). The parsers to use for parsing the</span></span><br><span class="line"><span class="string">          request content.</span></span><br><span class="line"><span class="string">        - authenticators(list/tuple). The authenticators used to try</span></span><br><span class="line"><span class="string">          authenticating the request's user.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, request, parsers=None, authenticators=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 negotiator=None, parser_context=None</span>):</span></span><br><span class="line">        <span class="keyword">assert</span> isinstance(request, HttpRequest), (</span><br><span class="line">            <span class="string">'The `request` argument must be an instance of '</span></span><br><span class="line">            <span class="string">'`django.http.HttpRequest`, not `{}.{}`.'</span></span><br><span class="line">            .format(request.__class__.__module__, request.__class__.__name__)</span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># 二次封装 request，将原生 request 作为 drf request 对象的 _request 属性</span></span><br><span class="line">        self._request = request</span><br><span class="line">        <span class="comment"># 虽然 drf 对 request 对象做了二次封装，但是它也做了完全兼容（见下面的 __getattr__ 方法）</span></span><br><span class="line"></span><br><span class="line">        self.parsers = parsers <span class="keyword">or</span> ()</span><br><span class="line">        self.authenticators = authenticators <span class="keyword">or</span> ()</span><br><span class="line">        self.negotiator = negotiator <span class="keyword">or</span> self._default_negotiator()</span><br><span class="line">        self.parser_context = parser_context</span><br><span class="line">        self._data = Empty</span><br><span class="line">        self._files = Empty</span><br><span class="line">        self._full_data = Empty</span><br><span class="line">        self._content_type = Empty</span><br><span class="line">        self._stream = Empty</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.parser_context <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.parser_context = {}</span><br><span class="line">        self.parser_context[<span class="string">'request'</span>] = self</span><br><span class="line">        self.parser_context[<span class="string">'encoding'</span>] = request.encoding <span class="keyword">or</span> settings.DEFAULT_CHARSET</span><br><span class="line"></span><br><span class="line">        force_user = getattr(request, <span class="string">'_force_auth_user'</span>, <span class="literal">None</span>)</span><br><span class="line">        force_token = getattr(request, <span class="string">'_force_auth_token'</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> force_user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">or</span> force_token <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            forced_auth = ForcedAuthentication(force_user, force_token)</span><br><span class="line">            self.authenticators = (forced_auth,)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span>(<span class="params">self, attr</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        If an attribute does not exist on this instance, then we also attempt</span></span><br><span class="line"><span class="string">        to proxy it to the underlying HttpRequest object.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 对原有的 request 做了完全兼容</span></span><br><span class="line">            <span class="keyword">return</span> getattr(self._request, attr)</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            <span class="keyword">return</span> self.__getattribute__(attr)</span><br></pre></td></tr></tbody></table></figure>

<p>url 拼接的参数都可以用 request.query_params 来取<br>所有请求的数据包方式数据都可以用 request.data 来取，所有数据方式（from-data、json…）它都做解析了</p>
<p>在 APIView 视图类的方法中</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>(<span class="params">APIView</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="comment"># 获取 url 拼接的参数</span></span><br><span class="line">        print(request._request.GET)  <span class="comment"># 二次封装</span></span><br><span class="line">        print(request.GET)  <span class="comment"># 兼容</span></span><br><span class="line">        print(request.query_params)  <span class="comment"># 扩展，推荐用这个</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">"drf get ok."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="comment"># 获取 url 拼接的参数 (所有请求方式都可以携带这个)</span></span><br><span class="line">        print(request._request.GET)</span><br><span class="line">        print(request.GET)  <span class="comment"># 兼容</span></span><br><span class="line">        print(request.query_params)  <span class="comment"># 扩展，推荐用这个</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 获取 post 参数</span></span><br><span class="line">        print(request._request.POST)  <span class="comment"># 拿不到 json 的数据 </span></span><br><span class="line">        print(request.POST)  <span class="comment"># 兼容，拿不到 json 的数据</span></span><br><span class="line">        print(request.data)  <span class="comment"># 扩展，兼容性最强，三种数据方式都可以，推荐用这个</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">"drf post ok"</span>)</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>drf 对原生 request 做了二次封装，<code>request._request</code> 就是原生 <code>request</code></li>
<li>原生 request 对象的属性和方法都可以被 drf 的 request 对象直接访问（向下兼容）</li>
<li>drf 请求的所有 url 拼接参数都被解析到 <code>request.query_params</code> 中，所有数据包数据都被解析到 <code>request.data</code> 中<br>任何请求都可以通过 url 拼接参数来传递参数，同样通过 <code>request.query_params</code> 获取</li>
</ul>
<h2 id="Response"><a href="#Response" class="headerlink" title="Response()"></a>Response()</h2><p><a target="_blank" rel="noopener" href="https://www.django-rest-framework.org/api-guide/responses/">https://www.django-rest-framework.org/api-guide/responses/</a></p>
<p>DRF通过提供一个Response类来支持HTTP内容协商，该类允许您根据客户端请求返回可以呈现为多种内容类型的内容。</p>
<p>也可以根据需要从视图中返回常规<code>HttpResponse</code>或<code>StreamingHttpResponse</code>对象。使用<code>Response</code>类只是为返回内容协商的Web API响应提供了一个更好的接口，该响应可以呈现为多种格式。</p>
<p>构造方法: <code>Response(data, status=None, template_name=None, headers=None, content_type=None)</code></p>
<p>与普通 HttpResponse 对象不同，您不会使用渲染的内容实例化 Response 对象。相反，您传递的是未渲染的数据，可能包含任何 Python 对象。</p>
<p>由于 Response 类使用的渲染器不能处理复杂的数据类型（比如 Django 的模型实例），所以需要在创建 <code>Response</code> 对象之前将数据序列化为基本的数据类型。</p>
<p>你可以使用 REST framework 的 Serializer 类来执行序列化的操作，也可以用自己的方式来序列化。</p>
<h4 id="Arguments参数"><a href="#Arguments参数" class="headerlink" title="Arguments参数"></a>Arguments参数</h4><p>data： 为响应准备的序列化后的数据。<br>status： 响应的状态代码。默认为200。<br>template_name： 选择 HTMLRenderer 时使用的模板名称。<br>headers： 设置 HTTP header，字典类型。<br>content_type： 响应的内容类型，通常渲染器会根据内容协商的结果自动设置，但有些时候需要手动指定。</p>
<h4 id="Attributes属性"><a href="#Attributes属性" class="headerlink" title="Attributes属性"></a>Attributes属性</h4><p><code>.data</code>还没有渲染，但已经序列化的响应数据。</p>
<p><code>.status_code</code> 状态码</p>
<p>.content<br>将会返回的响应内容，必须先调用 <code>.render()</code>方法，才能访问 <code>.content</code> 。</p>
<p>.template_name</p>
<p>只有在 response 的渲染器是 HTMLRenderer 或其他自定义模板渲染器时才需要提供。</p>
<p>.accepted_renderer</p>
<p>用于将会返回的响应内容的渲染器实例。</p>
<p>从视图返回响应之前由 APIView 或 @api_view 自动设置。</p>
<p>.accepted_media_type</p>
<p>内容协商阶段选择的媒体类型。</p>
<p>从视图返回响应之前由 APIView 或 @api_view 自动设置。</p>
<p>.renderer_context</p>
<p>将传递给渲染器的 .render() 方法的附加的上下文信息字典。</p>
<p>从视图返回响应之前由 APIView 或 @api_view 自动设置。</p>
<p>标准 HttpResponse 属性</p>
<p>Response 类扩展于 SimpleTemplateResponse，并且响应中也提供了所有常用的属性和方法。例如，您可以用标准方式在响应中设置 header：</p>
<p>response = Response()<br>response[‘Cache-Control’] = ‘no-cache’<br>.render()</p>
<p>与其他任何 TemplateResponse 一样，调用此方法将响应的序列化数据呈现为最终响应内容。响应内容将设置为在 accepted_renderer 实例上调用 .render(data，accepted_media_type，renderer_context) 方法的结果。</p>
<p>通常不需要自己调用 .render() ，因为它是由 Django 处理的。</p>
<p>一般都用 Response 对象来做返回（最后一定是打包成符合 HTTP 协议的数据格式来传输，Response 类做了一系列处理，所以这里我们只需要关注下它的那些参数即可）</p>
<p>响应类构造器</p>
<p>源码</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Response</span>(<span class="params">SimpleTemplateResponse</span>):</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    An HttpResponse that allows its data to be rendered into</span></span><br><span class="line"><span class="string">    arbitrary media types.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, data=None, status=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                    template_name=None, headers=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                    exception=False, content_type=None</span>):</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Alters the init arguments slightly.</span></span><br><span class="line"><span class="string">        For example, drop 'template_name', and instead use 'data'.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Setting 'renderer' and 'media_type' will typically be deferred,</span></span><br><span class="line"><span class="string">        For example being set automatically by the `APIView`.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            :param data: 响应数据</span></span><br><span class="line"><span class="string">            :param status: http响应状态码</span></span><br><span class="line"><span class="string">            :param template_name: drf也可以渲染页面，渲染的页面模板地址（不用了解）</span></span><br><span class="line"><span class="string">            :param headers: 响应头</span></span><br><span class="line"><span class="string">            :param exception: 是否异常了</span></span><br><span class="line"><span class="string">            :param content_type: 响应的数据格式（一般不用处理，响应头中带了，且默认是json）</span></span><br><span class="line"><span class="string">        """</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="comment"># status就是解释一堆 数字 网络状态码的模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一般情况下只需要返回数据，status和headers都有默认值</span></span><br><span class="line"><span class="keyword">return</span> Response(data={数据}, status=status.HTTP_200_OK, headers={设置的响应头})</span><br></pre></td></tr></tbody></table></figure>

<p>models.py</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModel</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">    is_delete = models.BooleanFiled(default=Flase)</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        abstract = <span class="literal">True</span>  <span class="comment"># *****</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    name = models.CharFiled(max_length=<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_name</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 自定义字段：可以连表，可以完成数据相关的逻辑</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'插拔式字段的值'</span></span><br></pre></td></tr></tbody></table></figure>

<p>serializes.py</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarModelSerializer</span>(<span class="params">ModelSerializer</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Car</span><br><span class="line">        fields = (<span class="string">'name'</span>, )</span><br><span class="line">        extra_kwargs = {<span class="string">'name'</span>: {<span class="string">'write_only|read_only'</span>: <span class="literal">True</span>}}</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 局部钩子、全局钩子</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重点：ListSerializer与ModelSerializer建立关联的是：</span></span><br><span class="line"><span class="comment"># ModelSerializer的Meta类的 - list_serializer_class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V2BookListSerializer</span>(<span class="params">ListSerializer</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span>(<span class="params">self, instance, validated_data</span>):</span></span><br><span class="line">        <span class="comment"># print(instance)  # 要更新的对象们</span></span><br><span class="line">        <span class="comment"># print(validated_data)  # 更新的对象对应的数据们</span></span><br><span class="line">        <span class="comment"># print(self.child)  # 服务的模型序列化类 - V2BookModelSerializer</span></span><br><span class="line">        <span class="keyword">for</span> index, obj <span class="keyword">in</span> enumerate(instance):</span><br><span class="line">            self.child.update(obj, validated_data[index])</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line"><span class="comment"># 原模型序列化类变化</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V2BookModelSerializer</span>(<span class="params">ModelSerializer</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line">        <span class="comment"># 群改，需要设置 自定义ListSerializer，重写群改的 update 方法</span></span><br><span class="line">        list_serializer_class = V2BookListSerializer</span><br><span class="line">    <span class="comment"># ...</span></span><br></pre></td></tr></tbody></table></figure>

<p>views.py</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">    ser_obj = CarModelSerializer(数据)  <span class="comment"># 产生序列化类对象(可能参与序列化，也可能参与反序列化)</span></span><br><span class="line">    ser_obj.data  <span class="comment"># 序列化的数据</span></span><br><span class="line">    ser_obj.is_valid()  <span class="comment"># 启动序列化校验规则（系统内容=&gt;局部钩子=&gt;全局钩子）</span></span><br><span class="line">    ser_obj.save()  <span class="comment"># 序列化校验后的数据操作（保存、修改）</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V2Book</span>(<span class="params">APIView</span>):</span></span><br><span class="line">    <span class="comment"># 单整体改: 对 v2/books/(pk)/ 传的数据是与model对应的字典{name|price|publish|authors}</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        request_data = request.data</span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        old_book_obj = models.Book.objects.filter(pk=pk).first()</span><br><span class="line">        <span class="comment"># 目的：将众多数据的校验交给序列化类来处理 - 让序列化类扮演反序列化角色，校验成功后，序列化类来帮你入库</span></span><br><span class="line">        book_ser = serializers.V2BookModelSerializer(instance=old_book_obj, data=request_data, partial=<span class="literal">False</span>)</span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># 校验通过，完成数据的更新：要更新的目标，用来更新的新数据</span></span><br><span class="line">        book_obj = book_ser.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response({</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.V2BookModelSerializer(book_obj).data</span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 单局部改：对 v2/books/(pk)/ 传的数据，数据字段key都是选填</span></span><br><span class="line">    <span class="comment"># 群局部改：对 v2/books/ </span></span><br><span class="line">    <span class="comment"># 请求数据 - [{pk:1, name:123}, {pk:3, price:7}, {pk:7, publish:2}]</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">patch</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        request_data = request.data</span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将单改，群改的数据都格式化成 pks=[要需要的对象主键标识] | request_data=[每个要修改的对象对应的修改数据]</span></span><br><span class="line">        <span class="keyword">if</span> pk <span class="keyword">and</span> isinstance(request_data, dict):  <span class="comment"># 单改</span></span><br><span class="line">            pks = [pk, ]</span><br><span class="line">            request_data = [request_data, ]</span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> pk <span class="keyword">and</span> isinstance(request_data, list): <span class="comment"># 群改</span></span><br><span class="line">            pks = []</span><br><span class="line">            <span class="keyword">for</span> dic <span class="keyword">in</span> request_data:  <span class="comment"># 遍历前台数据[{pk:1, name:123}, {pk:3, price:7}, {pk:7, publish:2}]，拿一个个字典</span></span><br><span class="line">                pk = dic.pop(<span class="string">'pk'</span>, <span class="literal">None</span>)</span><br><span class="line">                <span class="keyword">if</span> pk:</span><br><span class="line">                    pks.append(pk)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">return</span> Response({</span><br><span class="line">                        <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="string">'msg'</span>: <span class="string">'数据有误'</span>,</span><br><span class="line">                    })</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response({</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'数据有误'</span>,</span><br><span class="line">            })</span><br><span class="line"></span><br><span class="line">        <span class="comment"># pks与request_data数据筛选，</span></span><br><span class="line">        <span class="comment"># 1）将pks中的没有对应数据的pk与数据已删除的pk移除，request_data对应索引位上的数据也移除</span></span><br><span class="line">        <span class="comment"># 2）将合理的pks转换为 objs</span></span><br><span class="line">        objs = []</span><br><span class="line">        new_request_data = []</span><br><span class="line">        <span class="keyword">for</span> index, pk <span class="keyword">in</span> enumerate(pks):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># pk对应的数据合理，将合理的对象存储</span></span><br><span class="line">                obj = models.Book.objects.get(pk=pk)</span><br><span class="line">                objs.append(obj)</span><br><span class="line">                <span class="comment"># 对应索引的数据就需要保存下来</span></span><br><span class="line">                new_request_data.append(request_data[index])</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="comment"># 重点：反面教材 - pk对应的数据有误，将对应索引的data中request_data中移除</span></span><br><span class="line">                <span class="comment"># index = pks.index(pk)</span></span><br><span class="line">                <span class="comment"># request_data.pop(index)</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        book_ser = serializers.V2BookModelSerializer(instance=objs, data=new_request_data, partial=<span class="literal">True</span>, many=<span class="literal">True</span>)</span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        book_objs = book_ser.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response({</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.V2BookModelSerializer(book_objs, many=<span class="literal">True</span>).data</span><br><span class="line">        })</span><br></pre></td></tr></tbody></table></figure>


<ol>
<li>单整体改，说明前台要提供修改的数据，那么数据就需要校验，校验的数据应该在实例化“序列化类对象”时，赋值给data<br>2）修改，就必须明确被修改的模型类对象，并在实例化“序列化类对象”时，赋值给instance<br>3）整体修改，所有校验规则有required=True的字段，都必须提供，因为在实例化“序列化类对象”时，参数partial默认为False</li>
</ol>
<p>注：如果partial值设置为True，就是可以局部改<br>1）单整体修改，一般用put请求：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">V2BookModelSerializer(</span><br><span class="line">    instance=要被更新的对象,</span><br><span class="line">    data=用来更新的数据,</span><br><span class="line">    partial=默认<span class="literal">False</span>，必须的字段全部参与校验</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>2）单局部修改，一般用patch请求：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">V2BookModelSerializer(</span><br><span class="line">    instance=要被更新的对象,</span><br><span class="line">    data=用来更新的数据,</span><br><span class="line">    partial=设置<span class="literal">True</span>，必须的字段都变为选填字段</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/05/06/django-shi-tu-kai-fa-restful-api-jie-kou/" rel="prev" title="原生 django视图序列化RESTful API接口">
                  <i class="fa fa-chevron-left"></i> 原生 django视图序列化RESTful API接口
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/05/08/rocket-mq/" rel="next" title="rocket mq">
                  rocket mq <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
