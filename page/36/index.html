<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/36/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/36/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/36/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">357</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-yi-chang/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-yi-chang/" class="post-title-link" itemprop="url">python异常</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-06 09:13:43" itemprop="dateModified" datetime="2021-07-06T09:13:43Z">2021-07-06</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="异常是class"><a href="#异常是class" class="headerlink" title="异常是class"></a>异常是class</h3><p>错误是业务过程的一部分，而异常不是 。</p>
<p>错误就是可以预先知道的出错的可能出现的情况，可能出现问题的地方出现了问题，比如打开一个文件时失败、参数检查， 数据库访问不了，这种情况在人们的意料之中 ；<br>即便程序的语法是正确的，在运行它的时候，也有可能发生错误。</p>
<p>异常指的是不应该出现、运行期检测到的错误、不可预知的问题的地方出现了问题，比如引用了空指针，这种情况在人们的意料之外。<br>程序员写的代码不严谨造成的某个地方在某种情况下产生了异常</p>
<p>大多数的异常都不会被程序处理，都以错误信息的形式展现在这里</p>
<p>捕获一个错误就是捕获到该class的一个实例<br>每个异常都是某个类的实例<br>发生了异常如果不捕获，则程序将终止执行</p>
<h3 id="Python内置的异常类-（有些语言使用错误码）"><a href="#Python内置的异常类-（有些语言使用错误码）" class="headerlink" title="Python内置的异常类 （有些语言使用错误码）"></a>Python内置的异常类 （有些语言使用错误码）</h3><ul>
<li>BaseException 所有异常的父类</li>
<li>ExceptionException    常规错误的基类</li>
<li>AttributeError    对象没有这个属性</li>
<li>不过有时报错显示的位置是有问题的，</li>
<li>并列跟系统相关异常：<br>SystemExit 解释器请求退出、KeyboardInterrupt<br>用户中断执行(通常是输入^C)、GeneratorExit<br>生成器(generator)发生异常来通知退出、OSError<br>操作系统错误</li>
</ul>
<p>这种情况通常的原因都是前面某一行的括号或者引号有问题，<br>而导致后面的代码错乱，试着往前看一看。</p>
<h3 id="使用异常的常见场景"><a href="#使用异常的常见场景" class="headerlink" title="使用异常的常见场景"></a>使用异常的常见场景</h3><p>什么时候需要捕获处理异常呢？看Python 内置异常类型</p>
<ul>
<li>网络请求（超时、链接错误等）</li>
<li>资源访问（权限问题、资源不存在）</li>
<li>代码逻辑（越界访问、KeyError等）</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python异常处理几个关键字</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># func  # 可能会抛出异常的代码，如果执行出错，那么 try 子句余下的部分将被忽略不会继续执行</span></span><br><span class="line"><span class="keyword">except</span> (Exception1, Exception2) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment"># 可以捕获多个异常并处理，如果异常的类型和 except 之后的名称相符</span></span><br><span class="line">    <span class="comment"># 异常处理的代码</span></span><br><span class="line">    <span class="comment"># 如果一个异常在 try 子句里（或者在 except 和 else 子句里）被抛出，而又没有任何的 except 把它捕获，</span></span><br><span class="line">    <span class="comment"># 那么这个异常会在 finally 子句执行后被抛出，那么它会一层一层的往上传递，程序将终止执行</span></span><br><span class="line">    <span class="comment"># 如果不想在异常发生时结束你的程序，只需在try里捕获它，可以跨越多层调用</span></span><br><span class="line">    <span class="comment"># 一个 try 语句可能包含多个except子句，分别来处理、捕获不同的特定的异常。</span></span><br><span class="line">    <span class="comment"># 最多只有一个分支会被执行。</span></span><br><span class="line">    <span class="comment"># 处理程序将只针对对应的 try 子句中的异常进行处理，</span></span><br><span class="line">    <span class="comment"># 而不是其他的 try 的处理程序中的异常。</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># 异常没有发生的时候代码逻辑</span></span><br><span class="line">    <span class="comment"># 使用 else 子句比把所有的语句都放在 try 子句里面要好，</span></span><br><span class="line">    <span class="comment"># 可以避免一些意想不到，而 except 又无法捕获的异常。</span></span><br><span class="line">    <span class="comment"># 异常处理并不仅仅处理那些直接发生在 try 子句中的异常，</span></span><br><span class="line">    <span class="comment"># 而且还能处理子句中调用的函数（甚至间接调用的函数）里抛出的异常。</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># 无论异常有没有发生都会执行的代码，一般处理资源的关闭和释放</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="如何自定义自己的异常？-为什么需要定义自己的异常"><a href="#如何自定义自己的异常？-为什么需要定义自己的异常" class="headerlink" title="如何自定义自己的异常？ 为什么需要定义自己的异常"></a>如何自定义自己的异常？ 为什么需要定义自己的异常</h3><ul>
<li>异常类继承自 Exception 类实现自定义异常，可以直接继承，或者间接继承，<br>( 为什么不是BaseException,如果继承了像KeyboardInterrupt这个异常,那么捕获的时候,Ctrl+c就会被作为异常捕获，就结束不了了）</li>
<li>给异常加上一些附加信息（比如代码业务相关信息等）</li>
<li>创建一个新的异常类来拥有自己的异常。（raise MyException）<br>大多数的异常的名字都以”Error”结尾，就跟标准的异常命名一样。</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span>(<span class="params">Exception</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyException(<span class="string">'my exception'</span>)  <span class="comment"># raise显示引发异常</span></span><br><span class="line"><span class="comment"># except MyException as e:      # 继承自定义异常</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e: <span class="comment"># 捕获一个父类异常时候，所有的子类异常都在捕获之内。</span></span><br><span class="line">    print(e)</span><br><span class="line"><span class="comment"># 输出结果：my exception</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = x / y</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        print(<span class="string">"division by zero!"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"result is"</span>, result)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        print(<span class="string">"executing finally clause"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">divide(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># result is 2.0</span></span><br><span class="line"><span class="comment"># executing finally clause</span></span><br><span class="line">divide(<span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># division by zero!</span></span><br><span class="line"><span class="comment"># executing finally clause</span></span><br><span class="line">divide(<span class="string">"2"</span>, <span class="string">"1"</span>)</span><br><span class="line"><span class="comment"># executing finally clause</span></span><br><span class="line"><span class="comment"># Traceback(most recent call last):</span></span><br><span class="line"><span class="comment"># File "&lt;stdin&gt;", line 18, in &lt;module&gt; divide("2","1")</span></span><br><span class="line"><span class="comment"># File "&lt;stdin&gt;", line 3, in divide result = x / y</span></span><br><span class="line"><span class="comment"># TypeError: unsupported operand type(s) for /: 'str' and 'str'</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果要抛出错误，首先根据需要，<br>可以定义一个错误的class，选择好继承关系，<br>用raise语句抛出一个指定的异常。<br>raise语句如果不带参数，就会把当前错误原样抛出。<br>raise 唯一的一个参数指定了要被抛出的异常。它必须是一个异常的实例或者是异常的类（也就是 Exception 的子类）。<br>如果你只想知道这是否抛出了一个异常，并不想去处理它，那么一个简单的 raise 语句就可以再次把它抛出。</p>
<p>在except中raise一个Error，还可以把一种类型的错误转化成另一种类型</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div</span>(<span class="params">num1, num2</span>):</span></span><br><span class="line">    <span class="string">""" 当除数为0时 """</span></span><br><span class="line">    <span class="keyword">return</span> num1 / num2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># rest = test_div(5, 0)</span></span><br><span class="line">        rest = div(<span class="number">5</span>, <span class="string">"s"</span>)</span><br><span class="line">        print(rest)</span><br><span class="line">    <span class="keyword">except</span> (ZeroDivisionError, TypeError) <span class="keyword">as</span> err:</span><br><span class="line">        print(<span class="string">'反正就是报错了'</span>)</span><br><span class="line">        print(err)</span><br><span class="line">    <span class="keyword">except</span> TypeError:</span><br><span class="line">        print(<span class="string">'报错了，请输入数字'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># rest = test_div(5, 's')</span></span><br><span class="line">    <span class="comment"># print(rest)</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="comment"># 在除法函数中判断我们被除数(b)是否为0</span></span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>, <span class="string">"被除数不能为0"</span></span><br><span class="line">        <span class="comment"># raise Exception("被除数不能为0") # 异常</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># dict访问了一个不存在的key， 在list中对空的list进行了data[0]</span></span><br><span class="line">    user_info_dict = {</span><br><span class="line">        <span class="string">"name"</span>: <span class="string">"bobby"</span>,</span><br><span class="line">        <span class="string">"age"</span>: <span class="number">18</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> <span class="string">"weight"</span> <span class="keyword">in</span> user_info_dict:</span><br><span class="line">        user_info_dict[<span class="string">"weight"</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 如果每个地方都这样写那代码中的if就太多了，那就是你的bug，这种问题就一定要早发现</span></span><br><span class="line">    <span class="keyword">return</span> a / b, <span class="literal">None</span></span><br><span class="line"><span class="comment"># 如果你的这个函数-div返回的是None这个时候调用者不会出问题</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/hong-bao/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/hong-bao/" class="post-title-link" itemprop="url">红包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-05 14:08:07" itemprop="dateModified" datetime="2021-07-05T14:08:07Z">2021-07-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>所谓红包?<br>不过是定量的数量和金额的红包序列</p>
<p>红包是具备虚拟资金特征的特殊商品<br>收/发红包实际上是资金的交易过程<br>资金交易是资金从一个账户转向另一个账户的过程</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/sdk-he-api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/sdk-he-api/" class="post-title-link" itemprop="url">SDK和API</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-09-04 02:59:46" itemprop="dateModified" datetime="2021-09-04T02:59:46Z">2021-09-04</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="软件开发工具包-SDK-Software-Development-Kit"><a href="#软件开发工具包-SDK-Software-Development-Kit" class="headerlink" title="软件开发工具包 SDK Software Development Kit"></a>软件开发工具包 SDK Software Development Kit</h3><p>辅助开发某一类软件的相关文档说明书、范例和工具的集合都可以叫做SDK。</p>
<p>SDK被开发出来是为了减少程序员工作量，越容易开发越好</p>
<p>比如——</p>
<p>有公司开发出某种软件的某一功能，把它封装成SDK（比如数据分析SDK就是能够实现数据分析功能的SDK），出售给其他公司做开发用，其他公司如果想要给软件开发出某种功能，但又不想从头开始搞开发，直接付钱省事。</p>
<p>SDK想象成一个虚拟的程序包，在这个程序包中有一份做好的软件功能，这份程序包几乎是全封闭的，只有一个小小接口可以联通外界，这个接口就是API。</p>
<p>这个SDK提供了这么多API<br>SDK 是可以下载的。API 是写在文档里的</p>
<p>你是个男的<br>你要开发一个BABY<br>SDK<br>就是房间、床、你老婆等一系列相关的工具、文档<br>API<br>就是你老婆开放的接口</p>
<p>有一杯密封饮料，它的名字叫做“SDK”。<br>饮料上插着吸管，吸管的名字叫“API”。</p>
<p>把你叫做“XX系统”。<br>如果你想喝到SDK里的饮料（让系统拥有SDK中的功能），你必须通过API这根吸管来实现（通过API连接你的系统和SDK工具包），否则你就喝不到饮料。</p>
<h3 id="API-Application-Programming-Interface-应用程序编程接口"><a href="#API-Application-Programming-Interface-应用程序编程接口" class="headerlink" title="API Application Programming Interface  应用程序编程接口"></a>API Application Programming Interface  应用程序编程接口</h3><p>是一些预先定义的函数，<br>目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，<br>而又无需访问源码，或理解内部工作机制的细节。</p>
<ul>
<li><p>预先定义好的程序代码</p>
</li>
<li><p>屏蔽实现的细节</p>
</li>
<li><p>被调用来获取信息或实现某些功能</p>
</li>
<li><p>我有一些功能</p>
</li>
<li><p>你们呢不用关心我是怎么实现的</p>
</li>
<li><p>我给你一个访问地址</p>
</li>
<li><p>你通过地址来找我，按照我规定的格式提供我需要的信息</p>
</li>
<li><p>我会给你你需要的信息反馈</p>
</li>
</ul>
<p>连接前端后端及移动端，系统与系统、模块与模块、服务与服务直接相互调用的入口，<br>开发者分工协作封装成接口，其他开发者只要按照对应格式，发送一些必要参数，就能使用功能</p>
<p>接口是一个对象的对外能力的展现，我们使用一个对象时，往往不需要知道一个对象的内部复杂实现，通过它暴露出来的接口，就知道了这个对象具备哪些能力以及如何使用这个能力。</p>
<p>我们常说「佛有千面」，不同的人看到的佛并不一样。一个复杂的复合对象常常也可以是一个多面手，它具备多种能力，在形式上实现了多种接口。「弱水三千，只取一瓢」，使用时我们根据不同的场合来挑选满足需要的接口能力来使用这个对象即可。</p>
<p><img src="/2020/08/21/sdk-he-api/%E6%8E%A5%E5%8F%A3.png" alt="description"></p>
<p>常见接口类型</p>
<ul>
<li>HTTP接口 传输文本表单数据、json类型的对象、xml类似的数据</li>
<li>RPC 远程方法调用，使用分布式系统，调用部署到其他服务器，远程调用希望像本地调用一样方便，让调用者感知不到远程调用的逻辑，不需要搞一串发起http请求的代码</li>
<li>SOAP - Simple Object Access Protocol 简单面向对象访问协议，一种协议规范，是一种轻量的，简单的，基于HTTP协议，使用XML作为默认的存储格式。</li>
</ul>
<p>SOAP与REST区别：</p>
<ul>
<li><p>安全性：SOAP会好于REST</p>
</li>
<li><p>效率和易用性：REST更胜一筹</p>
</li>
<li><p>成熟度：总的来说SOAP在成熟度上优于REST</p>
</li>
<li><p>Web Servicez 是一种跨编程语言 和 跨操作系统平台的远程调用技术。基于SOAP协议的PRC实践方案，可以拿到远程对象并调用其属性和方法，</p>
</li>
<li><p>REST API</p>
</li>
</ul>
<p>ndk Natvie Software Development Kit 原生工具开发包</p>
<p>API 是应用程序编程接口（Application Programming Interface）的缩写。维基百科指出，“总的来说，它是各种组件之间的一组明确定义的通信方法”。它可以是软件框架或库的接口，也可以是操作系统为原生系统软件（如 POSIX）开发人员公开的底层接口。</p>
<p>现如今，当人们谈论 API 时，他们通常指的是通过 HTTP 端点公开的远程接口。</p>
<p>我们通过底层设计范式（如查询、RPC 或 RESTful）或协议（如 SOAP、gRPC 或 GraphQL）进一步对远程 API（或 Web API）进行分类。除此之外，我们还通过目标受众来区分 API，将它们分为公共、合作伙伴或私有 / 内部 API。</p>
<p>API 的两面性</p>
<p>严格来说，API 仅用来描述接口，也就是客户端和服务器、API 消费者和 API 提供者之间用于交换信息的语言。对于 API 消费者来说，API 只不过是对接口和端点 URL 或 URL 集的描述。URL 是 Web 的基本构建块之一，客户端可以在不知道服务器性质或位置的情况下访问信息或服务。只要客户能够收到响应，它根本不管 URL 是指向隐藏在某个地下室的 Raspberry Pi 还是位于某个大陆数据中心的全球交付网络。这也是 API 能够如此令人感到兴奋的一个方面，因为各种开发人员可以利用其他人构建和公开的基础设施来增强其应用程序的附加功能。</p>
<p>但是，API 提供者不仅要设计、实现和文档化 API，还要考虑它背后的基础设施。在云计算时代，可能不需要购买硬件和租用数据中心。相反，API 提供者可以选择各种“XX 即服务”产品——从虚拟机或容器的托管集群到完全无服务器的代码托管环境。无论选择了什么样的基础设施，他们都需要部署 API。</p>
<p>我这里说的部署 API 是指部署暴露 API 所必需的代码和基础设施。从提供者的角度来看，API 并不是一个神奇的大门，而是需要在某个地方运行的有形资产。而且，随着公司转向微服务架构，这种资产就会变成微服务或一组微服务。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-bao/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-bao/" class="post-title-link" itemprop="url">python包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-11 02:51:51" itemprop="dateModified" datetime="2021-07-11T02:51:51Z">2021-07-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>python没有package说明自己属于什么package 和包名以及文件的名称<br>文件名就是包名，不需要声明包名<br>每多一个文件就多了一个package</p>
<p>import一个包中的函数或变量</p>
<p><code>as</code>别名 可以简化名字，可以避免不同文件重名的函数或变量</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> calc.add <span class="keyword">import</span> add1 <span class="keyword">as</span> add_int</span><br><span class="line"><span class="keyword">from</span> calc <span class="keyword">import</span> add</span><br><span class="line"><span class="keyword">from</span> calc.add_float <span class="keyword">import</span> add1 <span class="keyword">as</span> add_float</span><br><span class="line"></span><br><span class="line">print(add.add1(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">print(add_int(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">print(add_int(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__all__ =[<span class="string">'name'</span>,] <span class="comment"># 在from xx import * 的时候只暴露指定的函数或变量</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> calc.add <span class="keyword">import</span> add1</span><br><span class="line"><span class="keyword">from</span> calc <span class="keyword">import</span> add</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub</span>(<span class="params">x: int, y:int</span>) -&gt; int :</span></span><br><span class="line">    print(add1(x, y))</span><br><span class="line">    print(add.add1(x, y))</span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"></span><br><span class="line"><span class="comment">#每多一个文件就多了一个package</span></span><br><span class="line"></span><br><span class="line">print(sub(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/mi-gong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/mi-gong/" class="post-title-link" itemprop="url">迷宫</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-09-08 03:25:47" itemprop="dateModified" datetime="2021-09-08T03:25:47Z">2021-09-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由空地和墙组成的迷宫中有一个球。球可以向上下左右四个方向滚动，但在遇到墙壁前不会停止滚动。当球停下时，可以选择下一个方向。</p>
<p>给定球的起始位置，目的地和迷宫，判断球能否在目的地停下。</p>
<p>迷宫由一个0和1的二维数组表示。 1表示墙壁，0表示空地。你可以假定迷宫的边缘都是墙壁。起始位置和目的地的坐标通过行号和列号给出。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">go</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>py</span><br><span class="line">class Solution:</span><br><span class="line">    def hasPath(self, maze: List[List[<span class="keyword">int</span>]], start: List[<span class="keyword">int</span>], destination: List[<span class="keyword">int</span>]) -&gt; <span class="keyword">bool</span>:</span><br><span class="line">        visited = set()</span><br><span class="line">        dirs = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>]</span><br><span class="line">        row, col = <span class="built_in">len</span>(maze), <span class="built_in">len</span>(maze[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        # DFS</span><br><span class="line">        def dfs(i, j):</span><br><span class="line">            <span class="keyword">if</span> i == destination[<span class="number">0</span>] and j == destination[<span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">return</span> True</span><br><span class="line">            <span class="keyword">for</span> k in <span class="keyword">range</span>(<span class="number">4</span>):</span><br><span class="line">                move_i, move_j = i, j</span><br><span class="line">                while <span class="number">0</span> &lt;= (t1 := move_i + dirs[k]) &lt; row and <span class="number">0</span> &lt;= (t2 := move_j + dirs[k + <span class="number">1</span>]) &lt; col and maze[t1][t2] != <span class="number">1</span>:</span><br><span class="line">                    move_i, move_j = t1, t2</span><br><span class="line">                <span class="keyword">if</span> i == move_i and j == move_j: <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">if</span> (move_i, move_j) not in visited:</span><br><span class="line">                    visited.add((move_i, move_j))</span><br><span class="line">                    <span class="keyword">if</span> dfs(move_i, move_j): <span class="keyword">return</span> True</span><br><span class="line">            <span class="keyword">return</span> False</span><br><span class="line"></span><br><span class="line">        # DFS</span><br><span class="line">        def bfs(i, j):</span><br><span class="line">            queue = collections.deque([[i, j]])</span><br><span class="line">            visited.add((i, j))</span><br><span class="line">            while queue:</span><br><span class="line">                i, j = queue.pop()</span><br><span class="line">                <span class="keyword">if</span> [i, j] == destination: <span class="keyword">return</span> True</span><br><span class="line">                <span class="keyword">for</span> k in <span class="keyword">range</span>(<span class="number">4</span>):</span><br><span class="line">                    move_i, move_j = i, j</span><br><span class="line">                    while <span class="number">0</span> &lt;= (t1 := move_i + dirs[k]) &lt; row and <span class="number">0</span> &lt;= (t2 := move_j + dirs[k + <span class="number">1</span>]) &lt; col and maze[t1][t2] != <span class="number">1</span>:</span><br><span class="line">                        move_i, move_j = t1, t2</span><br><span class="line">                    <span class="keyword">if</span> move_i == i and move_j == j: <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> (move_i, move_j) not in visited:</span><br><span class="line">                        visited.add((move_i, move_j))</span><br><span class="line">                        queue.appendleft([move_i, move_j])</span><br><span class="line">            <span class="keyword">return</span> False</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dfs(start[<span class="number">0</span>], start[<span class="number">1</span>]) # bfs(start[<span class="number">0</span>], start[<span class="number">1</span>])</span><br></pre></td></tr></tbody></table></figure>


<hr>
<p>设有一个6行5列的迷宫，从左上角出发到达右下角，只能横向或纵向走，1为墙，0为出路，问如何走出去</p>
<p>maze.in</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0 1 0 0 0</span><br><span class="line">0 0 0 1 0</span><br><span class="line">0 1 0 1 0</span><br><span class="line">1 1 1 0 0</span><br><span class="line">0 1 0 0 1</span><br><span class="line">0 1 0 0 0</span><br></pre></td></tr></tbody></table></figure>

<p>广度优先搜索走迷宫</p>
<ul>
<li>用循环创建二维 slice</li>
<li>使用 slice 来实现队列</li>
<li>用 Fscanf 读取文件</li>
<li>对 Point 的抽象</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从文件中读出迷宫</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readMaze</span><span class="params">(filename <span class="keyword">string</span>)</span> [][]<span class="title">int</span></span> {</span><br><span class="line">    file, err := os.Open(filename)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="built_in">panic</span>(err) <span class="comment">// 这里先不做处理</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">var</span> row, col <span class="keyword">int</span> <span class="comment">// 行 列</span></span><br><span class="line">    <span class="comment">// 第一行，读出值返回</span></span><br><span class="line">    fmt.Fscanf(file, <span class="string">"%d %d"</span>, &amp;row, &amp;col) <span class="comment">// 这里要给row col赋值，所以取地址 从文件读取数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读出迷宫所在的行，6行5列</span></span><br><span class="line">    maze := <span class="built_in">make</span>([][]<span class="keyword">int</span>, row) <span class="comment">// 二维数组：slice的元素是 装int的slice</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> maze { <span class="comment">// row行</span></span><br><span class="line">        maze[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, col) <span class="comment">// 每行col个</span></span><br><span class="line">        <span class="keyword">for</span> j := <span class="keyword">range</span> maze[i] { <span class="comment">// 赋值</span></span><br><span class="line">            fmt.Fscanf(file, <span class="string">"%d"</span>, &amp;maze[i][j])</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> maze</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> point <span class="keyword">struct</span> {</span><br><span class="line">    i, j <span class="keyword">int</span> <span class="comment">// 和y轴方向不一样</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dirs = [<span class="number">4</span>]point{ <span class="comment">// 初始位置0，0的上左下右四周点位</span></span><br><span class="line">    {<span class="number">-1</span>, <span class="number">0</span>}, {<span class="number">0</span>, <span class="number">-1</span>}, {<span class="number">1</span>, <span class="number">0</span>}, {<span class="number">0</span>, <span class="number">1</span>},</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从当前位置向周围走一步</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p point)</span> <span class="title">add</span><span class="params">(r point)</span> <span class="title">point</span></span> {</span><br><span class="line">    <span class="keyword">return</span> point{p.i + r.i, p.j + r.j}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p point)</span> <span class="title">at</span><span class="params">(grid [][]<span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">bool</span>)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> p.i &lt; <span class="number">0</span> || p.i &gt;= <span class="built_in">len</span>(grid) { <span class="comment">// 往上， 往下越界</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> p.j &lt; <span class="number">0</span> || p.j &gt;= <span class="built_in">len</span>(grid[p.i]) { <span class="comment">// 往左， 往右越界</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> grid[p.i][p.j], <span class="literal">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">walk</span><span class="params">(maze [][]<span class="keyword">int</span>, start, end point)</span> [][]<span class="title">int</span></span> {</span><br><span class="line">    steps := <span class="built_in">make</span>([][]<span class="keyword">int</span>, <span class="built_in">len</span>(maze))</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> steps {</span><br><span class="line">        steps[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(maze[i])) <span class="comment">// 每个元素初始为0</span></span><br><span class="line">    }</span><br><span class="line">    Q := []point{start} <span class="comment">// 队列 并且把那个起点放进去</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">len</span>(Q) &gt; <span class="number">0</span> {</span><br><span class="line">        cur := Q[<span class="number">0</span>] <span class="comment">// 取出队列头的数据</span></span><br><span class="line">        Q = Q[<span class="number">1</span>:]</span><br><span class="line">        <span class="keyword">if</span> cur == end {</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> _, dir := <span class="keyword">range</span> dirs {</span><br><span class="line">            next := cur.add(dir)</span><br><span class="line"></span><br><span class="line">            val, ok := next.at(maze)</span><br><span class="line">            <span class="keyword">if</span> !ok || val == <span class="number">1</span> { <span class="comment">// maze.val = 0 可以走</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            val, ok = next.at(steps)</span><br><span class="line">            <span class="keyword">if</span> !ok || val != <span class="number">0</span> { <span class="comment">// steps.val = 0从来没走过</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> next == start { <span class="comment">// next != start 没有回到了起点</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            curSteps, _ := cur.at(steps)</span><br><span class="line">            steps[next.i][next.j] = curSteps + <span class="number">1</span></span><br><span class="line">            Q = <span class="built_in">append</span>(Q, next)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> steps</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    maze := readMaze(<span class="string">"lang/maze/maze.in"</span>)</span><br><span class="line"></span><br><span class="line">    steps := walk(maze, point{<span class="number">0</span>, <span class="number">0</span>},</span><br><span class="line">        point{<span class="built_in">len</span>(maze) - <span class="number">1</span>, <span class="built_in">len</span>(maze[<span class="number">0</span>]) - <span class="number">1</span>})</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, row := <span class="keyword">range</span> steps {</span><br><span class="line">        <span class="keyword">for</span> _, val := <span class="keyword">range</span> row {</span><br><span class="line">            fmt.Printf(<span class="string">"%3d"</span>, val) <span class="comment">// 3 位右对齐</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Println()</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> construct path from steps</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  0  0  4  5  6</span></span><br><span class="line"><span class="comment">  1  2  3  0  7</span></span><br><span class="line"><span class="comment">  2  0  4  0  8</span></span><br><span class="line"><span class="comment">  0  0  0 10  9</span></span><br><span class="line"><span class="comment">  0  0 12 11  0</span></span><br><span class="line"><span class="comment">  0  0 13 12 13</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure>

<p>调试</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/06/30/hai-xiang-yun-suan-fu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/30/hai-xiang-yun-suan-fu/" class="post-title-link" itemprop="url">海象运算符</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-29 16:21:41" itemprop="dateCreated datePublished" datetime="2020-06-29T16:21:41Z">2020-06-29</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-31 07:56:45" itemprop="dateModified" datetime="2021-07-31T07:56:45Z">2021-07-31</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>python3.8提供了一个新的运算符 - 海象运算符 Assignment Expresions ，<br>即 赋值表达式。</p>
<p>由一个 : 和 一个 = 组成，即：<code>:=</code> 。我们一般称作 walrus operator（海象运算符），因为它看起来就是一个海象旋转 90° 而成。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(variable_name := expression <span class="keyword">or</span> value)</span><br></pre></td></tr></tbody></table></figure>

<p>即一个变量名后跟一个表达式或者一个值，这个和赋值运算符 = 类似，可以看作是一种新的赋值运算符。<br>可以将两行代码变成一行</p>
<h4 id="用于-if-else-条件表达式"><a href="#用于-if-else-条件表达式" class="headerlink" title="用于 if-else 条件表达式"></a>用于 if-else 条件表达式</h4><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">course_list = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># len(course_list)要执行两次</span></span><br><span class="line"><span class="keyword">if</span> len(course_list) &gt;= <span class="number">3</span>:</span><br><span class="line">    print(<span class="string">"课程较多， 课程数量： {}"</span>.format(len(course_list)))</span><br><span class="line">    <span class="comment"># 课程较多， 课程数量： 3</span></span><br><span class="line"></span><br><span class="line">course_size = len(course_list)  <span class="comment"># 多了一行</span></span><br><span class="line"><span class="keyword">if</span> course_size &gt;= <span class="number">3</span>:</span><br><span class="line">    print(<span class="string">"课程较多， 课程数量： {}"</span>.format(course_size))</span><br><span class="line">    <span class="comment"># 课程较多， 课程数量： 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> course_size := len(course_list) &gt;= <span class="number">3</span>:</span><br><span class="line">    <span class="comment"># if course_size := (len(course_list) &gt;= 3): 因为&gt;=的优先级高于:=</span></span><br><span class="line">    print(<span class="string">"课程较多， 课程数量： {}"</span>.format(course_size))</span><br><span class="line">    <span class="comment"># 课程较多， 课程数量： True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (course_size := len(course_list)) &gt;= <span class="number">3</span>:</span><br><span class="line">    print(<span class="string">"课程较多， 课程数量： {}"</span>.format(course_size))</span><br><span class="line">    <span class="comment"># 课程较多， 课程数量： 3</span></span><br><span class="line"></span><br><span class="line">course_size = len(course_list)</span><br><span class="line">powers = [course_size, course_size**<span class="number">2</span>, course_size**<span class="number">3</span>]</span><br><span class="line">print(powers)  <span class="comment"># [3, 9, 27]</span></span><br><span class="line"></span><br><span class="line">powers = [course_size := len(course_list), course_size**<span class="number">2</span>, course_size**<span class="number">3</span>]</span><br><span class="line">print(powers)  <span class="comment"># [3, 9, 27]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">desc = <span class="string">"bobby:18"</span></span><br><span class="line"></span><br><span class="line">m = re.match(<span class="string">"bobby:(.*)"</span>, desc)</span><br><span class="line"><span class="keyword">if</span> m:</span><br><span class="line">    age = m.group(<span class="number">1</span>)</span><br><span class="line">    print(age)  <span class="comment"># 18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> m := re.match(<span class="string">"bobby:(.*)"</span>, desc):</span><br><span class="line">    age = m.group(<span class="number">1</span>)</span><br><span class="line">    print(age)  <span class="comment"># 18</span></span><br><span class="line"></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="comment"># 海象运算符不能赋值，go可以</span></span><br><span class="line"><span class="comment"># age := 18  # SyntaxError: invalid syntax</span></span><br><span class="line">age += <span class="number">5</span></span><br><span class="line"><span class="comment"># 海象运算符不能加减，go可以</span></span><br><span class="line"><span class="comment"># age :+= 5  # SyntaxError: invalid syntax</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="用于-while-循环"><a href="#用于-while-循环" class="headerlink" title="用于 while 循环"></a>用于 while 循环</h4><p>常规写法：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">6</span></span><br><span class="line"><span class="keyword">while</span> n:</span><br><span class="line">    print(<span class="string">'hello word!'</span>)</span><br><span class="line">    n -= <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<p>海象运算符：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">6</span></span><br><span class="line"><span class="keyword">while</span> (n := n - <span class="number">1</span>) + <span class="number">1</span>: <span class="comment"># 需要加1是因为执行输出前n就减1了</span></span><br><span class="line">    print(<span class="string">'hello word!'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>读取文件：</p>
<p>常规写法：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fp = open(<span class="string">"test.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    line = fp.readline()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    print(line.strip())</span><br><span class="line">fp.close()</span><br></pre></td></tr></tbody></table></figure>

<p>海象运算符：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp = open(<span class="string">"test.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line"><span class="keyword">while</span> line := fp.readline():</span><br><span class="line">    print(line.strip())</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/04/08/python-cheng-xu-ru-kou-name-main/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/08/python-cheng-xu-ru-kou-name-main/" class="post-title-link" itemprop="url">Python程序入口 __name__ == '__main__'</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-04-07 16:21:41" itemprop="dateCreated datePublished" datetime="2020-04-07T16:21:41Z">2020-04-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-28 14:20:23" itemprop="dateModified" datetime="2021-06-28T14:20:23Z">2021-06-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Python的文件头：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash/python3  # 在代码被执行时，主动说明该选哪个路径下的编译器</span></span><br></pre></td></tr></tbody></table></figure>

<p>Python程序入口 <strong>name</strong> == ‘<strong>main</strong>‘</p>
<p>既没有写一个被调用的库和多进程的容易错误地认为「程序的入口」没什么用、是编码习惯。<br>事实上程序的入口非常有用，绝非可有可无，例如在Python自带的多线程库要求必须把主进程写在 if入口内部才能正常运行</p>
<p>直接写在Python最左端没有缩进的代码，在这个 <code>*.py</code> 文件被直接运行、或者被调用时会被执行</p>
<p>Python用这个方法来判断当前的模块是<strong>被直接运行</strong>还是<strong>被调用</strong><br>一个模块中有<code>__name__</code> 是当前模块名，</p>
<ul>
<li>当 <code>*.py</code> 文件模块被直接运行时，<code>模块名</code>为 <code>__main__</code>，即<code>__name__</code>置为 <code>__main__</code>，<code>if __name__ == '__main__'</code>之下的代码块将被运行。</li>
<li>当 <code>*.py</code> 文件模块以模块形式被导入调用时，在终端命令行运行时， <code>__name__</code> 为被调用模块的 模块名，<code>if __name__ == '__main__'</code>之下的代码块不被运行。</li>
</ul>
<p>这种if测试可以让一个模块通过命令行运行时执行一些额外的代码，最常见的就是运行测试。</p>
<p>假如你叫小明.py，在朋友眼中，你是小明(<strong>name</strong> == ‘小明’)；<br>在你自己眼中，你是你自己(<strong>name</strong> == ‘<strong>main</strong>‘)。</p>
<p>main文件不能直接用相对路径导入，加个-m</p>
<ul>
<li>把不想在被调用时执行的代码放在程序入口的if内部，比如自检程序。</li>
<li>把多线程的主线程写在程序入口的if内部。只能这么做，避免自己调用自己时重复执行主进程，下面会详细解释。</li>
</ul>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python的程序入口</span></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">'__main__'</span>: <span class="comment"># 它对多进程非常重要</span></span><br><span class="line">    <span class="comment"># 这里是主程序</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># C语言的程序入口</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="comment">/* 这里是主程序 */</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Java的程序入口</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>{</span><br><span class="line">    <span class="comment">// 这里是主程序</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个名为【run1.py】的文件，填入下方代码</span></span><br><span class="line"><span class="comment"># 然后在终端输入【python3 run1.py】并运行</span></span><br><span class="line"></span><br><span class="line">print(__name__, <span class="string">'run1-outside'</span>)  <span class="comment"># __main__ run1-outside</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(__name__, <span class="string">'run1-inside'</span>)  <span class="comment"># __main__ run1-inside</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建另一个名为【run2.py】的文件，填入下方代码，并放在与【run1.py】的相同目录下，</span></span><br><span class="line"><span class="comment"># 然后在终端命令行输入【python3 run2.py】并运行。用run2 调用run1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> run1  <span class="comment"># 这一行代码调用了外部的代码 run1，它只会print出：</span></span><br><span class="line"><span class="comment"># run1 run1-outside # 它只print出这一行东西，并且run1.py的【__main__】变成了【run1】</span></span><br><span class="line"><span class="comment"># run1 run1-inside  # 写在run1【if】缩进里的东西都没有被执行</span></span><br><span class="line"></span><br><span class="line">print(__name__, <span class="string">'run2-outside'</span>)  <span class="comment"># __main__ run2-outside</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(__name__, <span class="string">'run2-inside'</span>)  <span class="comment"># __main__ run2-inside</span></span><br></pre></td></tr></tbody></table></figure>


<p>程序入口与自检程序<br>当一个开发者编写一个库时（例如把它命名为 utils.py），如</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个库（模块）被命名为 utils.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C1</span>:</span></span><br><span class="line">   ...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">   ...</span><br><span class="line"></span><br><span class="line">c1 = C1()  <span class="comment"># 这是错误的做法，应该挪到 程序入口if内部</span></span><br><span class="line">func1()    <span class="comment"># 这是错误的做法，应该挪到 程序入口if内部</span></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">'__main__'</span>:</span><br><span class="line">    c = C1()</span><br><span class="line">    func1()</span><br></pre></td></tr></tbody></table></figure>
<p>当其他人只想调用 <code>C1</code> 或者 <code>func1</code> 时，他在另一个Python文件中，用 <code>import utils</code> 导入 <code>utils</code> 这个库时就不会运行程序入口if内部的任何代码了。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/35/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><span class="page-number current">36</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
