<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/3/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">341</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/05/go-han-shu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/05/go-han-shu/" class="post-title-link" itemprop="url">go函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-04 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-04T16:21:41Z">2021-07-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-03 09:02:59" itemprop="dateModified" datetime="2021-08-03T09:02:59Z">2021-08-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>函数<br>为了完成某个具体功能封装起来的功能的集合，构成了代码执行的逻辑结构，在Go语言中，函数的基本组成为：关键字 func、函数名、参数列表、返回值、函数体和返回语句，每一个程序都包含很多的函数，函数是基本的代码块。</p>
<p>因为Go语言是编译型语言，所以函数编写的顺序是无关紧要的，<br>Go 语言最少有个 main() 函数。<br>鉴于可读性的需求，最好把 main() 函数写在文件的前面，其他函数按照一定逻辑顺序进行编写（例如函数被调用的顺序）。</p>
<p>编写多个函数的主要目的是将一个需要很多行代码的复杂问题分解为一系列简单的任务来解决，通过函数来划分不同功能，逻辑上每个函数执行的是指定的任务，同一个任务（函数）可以被多次调用，有助于代码重用（事实上，好的程序是非常注意 DRY 原则的，即不要重复你自己（Don’t Repeat Yourself），意思是执行特定任务的代码只能在程序里面出现一次）。</p>
<p>当函数执行到代码块最后一行<code>}</code>之前或者 return 语句的时候会退出，其中 return 语句可以带有零个或多个参数，这些参数将作为返回值供调用者使用，简单的 return 语句也可以用来结束 for 的死循环，或者结束一个协程（goroutine）。</p>
<p>Go语言里面拥三种类型的函数：</p>
<ul>
<li>普通的带有名字的函数</li>
<li>匿名函数或者 lambda 函数</li>
<li>方法</li>
</ul>
<p>空白标识符<code>_</code>在函数中的使用，忽略函数返回值，可以强调某个参数未被使用。</p>
<p>没有默认参数、可选参数</p>
<h3 id="普通函数声明定义"><a href="#普通函数声明定义" class="headerlink" title="普通函数声明定义"></a>普通函数声明定义</h3><p>函数声明包括函数名、形式参数列表、返回值列表（可省略）以及函数体。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> 函数名<span class="params">(形式参数列表)</span><span class="params">(返回值列表)</span></span>{</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">function_name</span><span class="params">( [parameter list] )</span> [<span class="title">return</span> <span class="title">list</span>]</span> {</span><br><span class="line">    <span class="comment">//函数体</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>func：函数由 func 开始声明<br>function_name：函数名称，参数列表和返回值类型构成了函数签名。<br>parameter list：形式参数列表，参数就像一个占位符，当函数被调用时，你可以将值传递给参数，这个值被称为实际参数。形式参数列表指定的是参数名以及参数类型、顺序、及参数个数。参数是可选的，也就是说函数也可以不包含参数，这些参数作为局部变量，其值由参数调用者提供，</p>
<p>返回值列表描述了函数返回值的变量名以及类型，如果函数返回一个无名变量或者没有返回值，返回值列表的括号是可以省略的。<br>如果一个函数声明不包括返回值列表，那么函数体执行完毕后，不会返回任何值，</p>
<p>函数体：函数定义的代码集合。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    fmt.Println(hypot(<span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// 5</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hypot</span><span class="params">(x, y <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> {</span><br><span class="line">    <span class="keyword">return</span> math.Sqrt(x*x + y*y)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>x 和 y 是形参名，3 和 4 是调用时的传入的实数，函数返回了一个 float64 类型的值，返回值也可以像形式参数一样被命名，在这种情况下，每个返回值被声明成一个局部变量，并根据该返回值的类型，将其初始化为 0。</p>
<p>如果一个函数在声明时，包含返回值列表，那么该函数必须以 return 语句结尾，除非函数明显无法运行到结尾处，例如函数在结尾时调用了 panic 异常或函数中存在无限循环。</p>
<p>函数的类型被称为函数的标识符，如果两个函数形式参数列表和返回值列表中的变量类型一一对应，那么这两个函数被认为有相同的类型和标识符，形参和返回值的变量名不影响函数标识符也不影响它们是否可以以省略参数类型的形式表示。</p>
<p>每一次函数在调用时都必须按照声明顺序为所有参数提供实参（参数值），<br>在函数调用时，Go语言没有默认参数值，也没有任何方法可以通过参数名指定形参，<br>因此形参和返回值的变量名对于函数调用者而言没有意义。</p>
<p>在函数中，实参通过值传递的方式进行传递，因此函数的形参是实参的拷贝，对形参进行修改不会影响实参，<br>但是，如果实参包括引用类型，如指针、slice(切片)、map、function、channel 等类型，实参可能会由于函数的间接引用被修改。</p>
<p>我们给出 4 种方法声明拥有 2 个 int 型参数和 1 个 int 型返回值的函数，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="keyword">int</span>, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> {<span class="keyword">return</span> x + y}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(z <span class="keyword">int</span>)</span></span> { z = x - y; <span class="keyword">return</span>}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">first</span><span class="params">(x <span class="keyword">int</span>, _ <span class="keyword">int</span>)</span> <span class="title">int</span></span> { <span class="keyword">return</span> x }</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zero</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span> { <span class="keyword">return</span> <span class="number">0</span> }</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, add) <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, sub) <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, first) <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, zero) <span class="comment">// "func(int, int) int"</span></span><br></pre></td></tr></tbody></table></figure>

<p>函数第一种定义方法</p>
<p>如果一组形参或返回值有相同的类型，我们不必为每个形参都写出参数类型，则可在最后一个参数中书写类型 下面 2 个声明是等价的：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i, j, k <span class="keyword">int</span>, s, t <span class="keyword">string</span>)</span></span> { <span class="comment">/* ... */</span> }</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i <span class="keyword">int</span>, j <span class="keyword">int</span>, k <span class="keyword">int</span>, s <span class="keyword">string</span>, t <span class="keyword">string</span>)</span></span> { <span class="comment">/* ... */</span> }</span><br></pre></td></tr></tbody></table></figure>

<p>函数返回值名称可指定，可忽略</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">var</span> sum <span class="keyword">int</span></span><br><span class="line">    sum = a + b</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>函数的第二种定义方法</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    sum = a + b</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>函数的第三种定义方法<br>指定函数返回值名称时，可直接 return</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add3</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    sum = a + b</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">eval</span><span class="params">(a, b <span class="keyword">int</span>, op <span class="keyword">string</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> op {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"+"</span>:</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"-"</span>:</span><br><span class="line">        <span class="keyword">return</span> a - b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"*"</span>:</span><br><span class="line">        <span class="keyword">return</span> a * b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"/"</span>:</span><br><span class="line">        q, _ := div(a, b)</span><br><span class="line">        <span class="keyword">return</span> q</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">"unsupported operation: %s"</span> + op)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">    fmt.Println(eval(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"*"</span>)) <span class="comment">// 12</span></span><br><span class="line">    fmt.Println(eval(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"/"</span>)) <span class="comment">// 0</span></span><br><span class="line">    <span class="comment">//fmt.Println(eval(3, 4, "x")) // panic: unsupported operation: %sx</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h3><p>多返回值能方便地获得函数执行后的多个返回参数</p>
<p>多返回值中的最后一个返回参数返回函数执行中可能发生的错误，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">evalError</span><span class="params">(a, b <span class="keyword">int</span>, op <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> op {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"+"</span>:</span><br><span class="line">        <span class="keyword">return</span> a + b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"-"</span>:</span><br><span class="line">        <span class="keyword">return</span> a - b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"*"</span>:</span><br><span class="line">        <span class="keyword">return</span> a * b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"/"</span>:</span><br><span class="line">        <span class="keyword">return</span> a / b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, fmt.Errorf(<span class="string">"unsupported operation: %s"</span>, op)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result, err := evalError(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"*"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result) <span class="comment">// 12</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result, err := evalError(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"/"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result) <span class="comment">// 0</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result, err := evalError(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"x"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result) <span class="comment">// unsupported operation: x</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(evalError(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"x"</span>)) <span class="comment">// 0 unsupported operation: x</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 被除数等于0</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> {</span><br><span class="line">    <span class="keyword">var</span> result <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> err error</span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span> {</span><br><span class="line">        err = errors.New(<span class="string">"被除数不能为0"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        result = a / b</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result, err</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div2</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(result <span class="keyword">int</span>, err error)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span> {</span><br><span class="line">        err = errors.New(<span class="string">"被除数不能为0"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        result = a / b</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    result, err := div(<span class="number">12</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result) <span class="comment">// 4</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    result1, err := div(<span class="number">12</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err) <span class="comment">// 被除数不能为0</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result1)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    result2, err := div2(<span class="number">12</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result2) <span class="comment">// 4</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    result3, err := div2(<span class="number">12</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err) <span class="comment">// 被除数不能为0</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(result3)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn, err := connectToNetwork()</span><br></pre></td></tr></tbody></table></figure>

<p>在这段代码中，connectToNetwork 返回两个参数，conn 表示连接对象，err 返回错误信息。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//func actionVariables(var1 int,var2 int)(int,int) {</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables</span><span class="params">(var1, var2 <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> var1 + var2, var1 - var2</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sum <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> minus <span class="keyword">int</span></span><br><span class="line">    sum, minus = actionVariables(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    sum1, minus1 := actionVariables(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fmt.Println(sum, minus) <span class="comment">// 3 -1</span></span><br><span class="line">    fmt.Println(sum1, minus1) <span class="comment">// 3 -1</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables2</span><span class="params">(var1, var2 <span class="keyword">int</span>)</span> <span class="params">(sum, minus <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    sum = var1 + var2</span><br><span class="line">    minus = var1 - var2</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sum <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> minus <span class="keyword">int</span></span><br><span class="line">    sum, minus = actionVariables2(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fmt.Println(sum, minus)       <span class="comment">// 3 -1</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="同一种类型返回值"><a href="#同一种类型返回值" class="headerlink" title="同一种类型返回值"></a>同一种类型返回值</h4><p>如果返回值是同一种类型，则用括号将多个返回值类型括起来，用逗号分隔每个返回值的类型。<br>纯类型的返回值对于代码可读性不是很友好，特别是在同类型的返回值出现时，无法区分每个返回参数的意义。</p>
<p>使用 return 语句返回时，值列表的顺序需要与函数声明的返回值类型一致，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">typedTwoValues</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := typedTwoValues()</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 1 2</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="带有变量名的返回值"><a href="#带有变量名的返回值" class="headerlink" title="带有变量名的返回值"></a>带有变量名的返回值</h4><p>Go语言支持对返回值进行命名，这样返回值就和参数一样拥有参数变量名和类型。<br>当函数使用命名返回值时，可以在 return 中不填写返回值列表，如果填写也是可行的</p>
<p>命名的返回值变量的默认值为类型的默认值，即数值为 0，字符串为空字符串，布尔为 false、指针为 nil 等。</p>
<p>下面代码中的函数拥有两个整型返回值，函数声明时将返回值命名为 a 和 b，因此可以在函数体中直接对函数返回值进行赋值，在命名的返回值方式的函数体中，在函数结束前需要显式地使用 return 语句进行返回，代码如下：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对两个整型返回值进行命名，分别为 a 和 b。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">namedRetValues</span><span class="params">()</span> <span class="params">(a, b <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="comment">// 命名返回值的变量与这个函数的布局变量的效果一致，可以对返回值进行赋值和值获取。</span></span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    b = <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(namedRetValues()) <span class="comment">// 1 2</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// func namedRetValues() (a int, b int) {</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">namedRetValues</span><span class="params">()</span> <span class="params">(a, b <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a, <span class="number">2</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>同一种类型返回值和命名返回值两种形式只能二选一，混用时将会发生编译错误，例如下面的代码：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">namedRetValues</span><span class="params">()</span> <span class="params">(a, b <span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a, <span class="number">2</span></span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">syntax error: mixed named and unnamed function parameters</span><br></pre></td></tr></tbody></table></figure>

<p>意思是：在函数参数中混合使用了命名和非命名参数。</p>
<h3 id="不定参数（可变参数）"><a href="#不定参数（可变参数）" class="headerlink" title="不定参数（可变参数）"></a>不定参数（可变参数）</h3><p>通过省略号去动态设置不定个参数</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(numbers ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    s := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> numbers {</span><br><span class="line">        s += numbers[i]</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"1+2+...+5 ="</span>, sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)) <span class="comment">// 1+2+...+5 = 15</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables3</span><span class="params">(args ...<span class="keyword">interface</span>{})</span></span> {</span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> args {</span><br><span class="line">        <span class="keyword">switch</span> value.(<span class="keyword">type</span>) {</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">            fmt.Println(value, <span class="string">"int"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">            fmt.Println(value, <span class="string">"string"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">            fmt.Println(value, <span class="string">"float64"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">bool</span>:</span><br><span class="line">            fmt.Println(value, <span class="string">"bool"</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(value, <span class="string">"unknow"</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    actionVariables3(<span class="number">1</span>, <span class="string">"我是波哥"</span>, <span class="number">3.14</span>, <span class="literal">true</span>)</span><br><span class="line">    <span class="comment">// 1 int</span></span><br><span class="line">    <span class="comment">// 我是波哥 string</span></span><br><span class="line">    <span class="comment">// 3.14 float64</span></span><br><span class="line">    <span class="comment">// true bool</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables5</span><span class="params">(args ...<span class="keyword">interface</span>{})</span></span> {</span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> args {</span><br><span class="line">        fmt.Println(key, value)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">    actionVariables5(<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="comment">//0 1</span></span><br><span class="line">    <span class="comment">//1 1</span></span><br><span class="line">    <span class="comment">//2 3</span></span><br><span class="line">    <span class="comment">//3 4</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    judgeVariablesType(<span class="number">1</span>, <span class="string">"hello"</span>, <span class="literal">true</span>, <span class="number">3.14</span>)</span><br><span class="line">    <span class="comment">//x is a int  1</span></span><br><span class="line">    <span class="comment">//x is a string  hello</span></span><br><span class="line">    <span class="comment">//x is a bool true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">judgeVariablesType</span><span class="params">(variables ...<span class="keyword">interface</span>{})</span></span> {</span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> variables {</span><br><span class="line">        <span class="keyword">if</span> x, ok := value.(<span class="keyword">int</span>); ok {</span><br><span class="line">            fmt.Println(<span class="string">"x is a int "</span>, x)</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> x, ok := value.(<span class="keyword">string</span>); ok {</span><br><span class="line">            fmt.Println(<span class="string">"x is a string "</span>, x)</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> x, ok := value.(<span class="keyword">bool</span>); ok {</span><br><span class="line">            fmt.Println(<span class="string">"x is a bool"</span>, x)</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            fmt.Println(<span class="string">"未知的类型"</span>) <span class="comment">// 未知的类型</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><p>函数在定义后，可以通过调用的方式，让当前代码跳转到被调用的函数中进行执行，调用前的函数局部变量都会被保存起来不会丢失，被调用的函数运行结束后，恢复到调用函数的下一行继续执行代码，之前的局部变量也能继续访问。</p>
<p>函数内的局部变量只能在函数体中使用，函数调用结束后，这些局部变量都会被释放并且失效。</p>
<p>Go语言的函数调用格式如下：</p>
<figure class="highlight fix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">返回值变量列表 </span>=<span class="string"> 函数名(参数列表)</span></span><br></pre></td></tr></tbody></table></figure>

<p>下面是对各个部分的说明：<br>函数名：需要调用的函数名。<br>参数列表：参数变量以逗号分隔，尾部无须以分号结尾。<br>返回值变量列表：多个返回值使用逗号分隔。</p>
<ul>
<li><p>将函数视为“一等公民”</p>
<ul>
<li>函数可以赋值给变量</li>
<li>函数可以作为函数的参数</li>
<li>函数可以作为函数的返回值</li>
</ul>
</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> sub <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span> // <span class="title">sub</span>就等同于<span class="title">int</span> <span class="title">map</span>是一种类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subImpl</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">filter</span><span class="params">(score []<span class="keyword">int</span>, f <span class="keyword">func</span>(<span class="keyword">int</span>)</span> <span class="title">bool</span>) []<span class="title">int</span></span> {</span><br><span class="line">    returnSlice := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> score {</span><br><span class="line">        <span class="keyword">if</span> f(v) {</span><br><span class="line">            returnSlice = <span class="built_in">append</span>(returnSlice, v)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> returnSlice</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    slice := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">    fmt.Println(add(slice...)) <span class="comment">// 15</span></span><br><span class="line">    fmt.Println(slice)         <span class="comment">// [9 2 3 4 5]</span></span><br><span class="line"></span><br><span class="line">    slice1 := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">    fmt.Println(add1(slice1)) <span class="comment">// 15</span></span><br><span class="line">    fmt.Println(slice1)       <span class="comment">// [9 2 3 4 5]</span></span><br><span class="line">    <span class="comment">//这种效果slice</span></span><br><span class="line">    <span class="comment">//区别，slice是一种类型， 还是引用传递， 我们要慎重</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//省略号的用途 1. 函数参数不定长 2. 将slice打散 3.</span></span><br><span class="line">    arr := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">    fmt.Printf(<span class="string">"%T\n"</span>, arr) <span class="comment">// [3]int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//匿名函数</span></span><br><span class="line">    myFunc := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    }</span><br><span class="line">    myFunc(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fmt.Printf(<span class="string">"%T"</span>, myFunc) <span class="comment">// func(int, int) int</span></span><br><span class="line"></span><br><span class="line">    result := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    }(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fmt.Println(result)      <span class="comment">// 3</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T"</span>, myFunc) <span class="comment">// func(int, int) int</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    }(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//myFunc := add</span></span><br><span class="line">    <span class="comment">//fmt.Printf("%T", myFunc) // func(...int) int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//函数也可以当做参数传递给一个函数</span></span><br><span class="line">    <span class="keyword">var</span> mySub sub = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        <span class="keyword">return</span> a - b</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(mySub(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//将函数作为另一个函数的参数</span></span><br><span class="line">    <span class="comment">//写一个函数用于过滤一部分数据</span></span><br><span class="line">    score := []<span class="keyword">int</span>{<span class="number">10</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">85</span>}</span><br><span class="line">    <span class="comment">//写一个函数过滤掉不合格的成绩</span></span><br><span class="line">    fmt.Println(filter(score, <span class="function"><span class="keyword">func</span><span class="params">(a <span class="keyword">int</span>)</span> <span class="title">bool</span></span> {</span><br><span class="line">        <span class="keyword">if</span> a &gt;= <span class="number">90</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">    })) <span class="comment">// [90]</span></span><br><span class="line">    <span class="comment">//gin, python的装饰器</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="函数做为一种类型，在函数参数中使用"><a href="#函数做为一种类型，在函数参数中使用" class="headerlink" title="函数做为一种类型，在函数参数中使用"></a>函数做为一种类型，在函数参数中使用</h3><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    sum, minus = funcAsArgs(actionVariables4, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    fmt.Println(sum, minus) <span class="comment">// 3 -1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables4</span><span class="params">(var1, var2 <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>, minus <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    sum = var1 + var2</span><br><span class="line">    minus = var1 - var2</span><br><span class="line">    <span class="comment">//return sum,minus</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcAsArgs</span><span class="params">(funcName <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span>, <span class="title">var1</span>, <span class="title">var2</span> <span class="title">int</span>) <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> funcName(var1, var2)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>go语言官方推荐函数返回值命名，go提供了生成文档的工具，文档是给团队中其他人看的，有助于理解与团队合作</p>
<h3 id="函数作为实参值在函数参数中使用，实现回调"><a href="#函数作为实参值在函数参数中使用，实现回调" class="headerlink" title="函数作为实参值在函数参数中使用，实现回调"></a>函数作为实参值在函数参数中使用，实现回调</h3><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// 函数做为值 type</span></span><br><span class="line">    slice := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line"></span><br><span class="line">    evenSlice := judgeSlice(slice, isEven)</span><br><span class="line">    oddSlice := judgeSlice(slice, isOdd)</span><br><span class="line">    fmt.Println(<span class="string">"偶数："</span>, evenSlice) <span class="comment">// 偶数： [2 4 6]</span></span><br><span class="line">    fmt.Println(<span class="string">"奇数："</span>, oddSlice)  <span class="comment">// 奇数： [1 3 5 7]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个函数类型</span></span><br><span class="line"><span class="keyword">type</span> Boolean <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否为偶数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isEven</span><span class="params">(integer <span class="keyword">int</span>)</span> <span class="title">bool</span></span> {</span><br><span class="line">    <span class="keyword">if</span> integer%<span class="number">2</span> == <span class="number">0</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否为奇数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isOdd</span><span class="params">(integer <span class="keyword">int</span>)</span> <span class="title">bool</span></span> {</span><br><span class="line">    <span class="keyword">if</span> integer%<span class="number">2</span> == <span class="number">0</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">judgeSlice</span><span class="params">(slice []<span class="keyword">int</span>, boolean Boolean)</span> <span class="params">(result []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> slice {</span><br><span class="line">        <span class="keyword">if</span> boolean(value) {</span><br><span class="line">            result = <span class="built_in">append</span>(result, value)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    testCallBack(<span class="number">1</span>, callBack)</span><br><span class="line">    testCallBack(<span class="number">2</span>, <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        fmt.Printf(<span class="string">"我是回调，x：%d\n"</span>, x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> cb <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span> // 声明一个函数类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testCallBack</span><span class="params">(x <span class="keyword">int</span>, f cb)</span></span> {</span><br><span class="line">    f(x)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">callBack</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    fmt.Printf(<span class="string">"我是回调，x：%d\n"</span>, x)</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">我是回调，x：<span class="number">1</span></span><br><span class="line">我是回调，x：<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="函数（方法）注释"><a href="#函数（方法）注释" class="headerlink" title="函数（方法）注释"></a>函数（方法）注释</h3><p>每个函数，或者方法（结构体或者接口下的函数称为方法）都应该有注释说明，函数的注释应该包括三个方面（严格按照此顺序撰写）：</p>
<ul>
<li>简要说明，格式说明：以函数名开头，“，”分隔说明部分</li>
<li>参数列表：每行一个参数，参数名开头，“，”分隔说明部分</li>
<li>返回值： 每行一个返回值</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NewtAttrModel ， 属性数据层操作类的工厂方法</span></span><br><span class="line"><span class="comment">// 参数：</span></span><br><span class="line"><span class="comment">//      ctx ： 上下文信息</span></span><br><span class="line"><span class="comment">// 返回值：</span></span><br><span class="line"><span class="comment">//      属性操作类指针</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewAttrModel</span><span class="params">(ctx *common.Context)</span> *<span class="title">AttrModel</span></span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/05/python-han-shu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/05/python-han-shu/" class="post-title-link" itemprop="url">python函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-04 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-04T16:21:41Z">2021-07-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-26 12:59:54" itemprop="dateModified" datetime="2021-07-26T12:59:54Z">2021-07-26</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>一个简单的计算器</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">a = int(input(<span class="string">"请输入第一个数："</span>))</span><br><span class="line">op = input(<span class="string">"操作符："</span>)</span><br><span class="line">b = int(input(<span class="string">"请输入第二个数："</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># if op == "+":</span></span><br><span class="line"><span class="comment">#     print(a+b)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if op == "-":</span></span><br><span class="line"><span class="comment">#     print(a-b)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if op == "z*":</span></span><br><span class="line"><span class="comment">#     print(a*b)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if op == "/":</span></span><br><span class="line"><span class="comment">#     print(a/b)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典映射代替简单的if语句</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add1</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> add()</span><br><span class="line">    <span class="comment"># return add(a, b)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a / b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mul</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">op_dict = {</span><br><span class="line">    <span class="string">"+"</span>: add,</span><br><span class="line">    <span class="string">"++"</span>: add1,</span><br><span class="line">    <span class="string">"-"</span>: sub,</span><br><span class="line">    <span class="string">"/"</span>: div,</span><br><span class="line">    <span class="string">"*"</span>: mul,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func = op_dict[op]</span><br><span class="line"><span class="comment"># print(func(a, b)(a, b))</span></span><br><span class="line">print(func(a, b))</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>将函数视为“一等公民”</p>
<ul>
<li>函数可以赋值给变量</li>
<li>函数可以作为函数的参数</li>
<li>函数可以作为函数的返回值</li>
</ul>
</li>
</ul>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把函数当做普通的变量使用， 还可以当做一个返回值 这个特性就是一等公民的特性</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    first = kwargs[<span class="string">"first"</span>]</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> args:</span><br><span class="line">        sum += int(v)</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printInfo</span>(<span class="params">name=<span class="string">""</span>, age=<span class="number">18</span></span>):</span></span><br><span class="line">    print(<span class="string">"姓名:{}, 年龄:{}"</span>.format(name, age))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">datas = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">"6"</span>]</span><br><span class="line">print(add(first=<span class="number">12</span>, last=<span class="number">9</span>))  <span class="comment"># 0</span></span><br><span class="line">printInfo(age=<span class="number">18</span>, name=<span class="string">"bobby"</span>)  <span class="comment"># 姓名:bobby, 年龄:18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 有一些情况是需要两种操作都出现 1. 文件 （打开，close） 2. 数据库的连接 （开启连接， 关闭连接） 3. 锁(获取、释放)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_file</span>(<span class="params">file_name</span>):</span></span><br><span class="line">    f = open(file_name)</span><br><span class="line">    <span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">        sum = <span class="number">0</span></span><br><span class="line">        data = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            sum += int(line)  <span class="comment">#这一行代码可能有异常  很多容易出现异常</span></span><br><span class="line">        <span class="comment"># f.close()</span></span><br><span class="line">        print(<span class="string">"before return"</span>)</span><br><span class="line">        re_data = data  <span class="comment"># data是list类型 引用传递  re_data中有一个拷贝=3</span></span><br><span class="line">        lock = threading.Lock()</span><br><span class="line">        lock.acquire()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 此处是多行处理逻辑 这些就可能抛出异常</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            lock.release()  <span class="comment"># 此处可能抛出异常</span></span><br><span class="line">        <span class="comment"># 此处跳往finally执行</span></span><br><span class="line">        <span class="keyword">return</span> re_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 代码出现异常导致f.close执行不到</span></span><br><span class="line"><span class="comment"># 2. 我们忘记close了吧</span></span><br><span class="line"><span class="comment"># 无论是否正常运行到吗都能够执行到指定的逻辑</span></span><br><span class="line"><span class="comment"># print(read_file("xxx.txt"))</span></span><br><span class="line"><span class="comment"># 代码很丑陋，一旦逻辑复制 这种代码大量的充斥了我们的代码中， java</span></span><br><span class="line"><span class="comment"># finally有一些细节我们需要知道 就有了第一个印象：finally会在return之后运行</span></span><br><span class="line"><span class="comment"># 事实上真的是这样吗？</span></span><br><span class="line"><span class="comment"># 原因： 实际上finally是在return之前调用的</span></span><br><span class="line"><span class="comment"># finally中是可以return的 而且这个地方一旦有了return就会覆盖原本的return</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/04/go-zhi-zhen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/04/go-zhi-zhen/" class="post-title-link" itemprop="url">go指针</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-03 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-03T16:21:41Z">2021-07-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-03 10:39:43" itemprop="dateModified" datetime="2021-08-03T10:39:43Z">2021-08-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>像python和java这种语言都是极力的屏蔽指针，<br>c/c++ 都提供了指针功能很强大 指针的转换 指针的偏移 指针的运算</p>
<p>程序在内存中存储它的值，每个内存块都 有一个地址，每一个字节其实都是有地址<br>而存储的是另一个变量的内存地址的变量被称为指针变量，一个指针变量可以指向任何一个值的内存地址指向的空间</p>
<p>通常用0x开头的十六进制数表示，如：0x6b0820 或 0xf84001d7f0</p>
<p>在 32 位机器上占用 4 个字节，在 64 位机器上占用 8 个字节，并且与它所指向的值的大小无关。<br>指针可以指向任何类型的值的内存地址，但是使用时指定指针的类型在实际编码中具有重要意义；<br>指针可以指向另一个指针，并且可以进行任意深度的嵌套，导致你可以有多级的间接引用，但在大多数情况这会使你的代码结构不清晰</p>
<p>在指针类型前面加上 <code>&amp;</code> 号来获取地址。<br>在指针类型前面加上 <code>*</code> 号来根据地址获取该地址指向空间的值，使用一个指针引用一个值被称为间接引用。<br>引用类型 修改指针指向变量对应的值,但是不会修改地址</p>
<p>取变量值的方式<br>1.直接通过变量名,variables<br>2.通过指针间接访问(指针名),</p>
<p>go语言没有屏蔽指针，但是go语言在指针上做了大量的限制，安全性高很多，相比较 c和c++灵活性就降低了<br>不像c有<code>pointer ++</code> <code>pointer +2</code> 当前指针从当前位置向前或向后移动一定的位置的指针运算，因为指针的乱引用会导致的内存泄漏，以及引发一连串程序的崩溃</p>
<p>很多时候都是函数参数的时候指明的类型</p>
<p>go中数组是值传递 数组中有100万个值，对于这种一般采用切片来传递<br>在python中list和dict这种传递都是引用传递</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先定义变量</span></span><br><span class="line"><span class="keyword">var</span> intVariables <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line">fmt.Printf(<span class="string">"intVariables的值=%d, 地址=%v\n"</span>, intVariables, &amp;intVariables)</span><br><span class="line"><span class="comment">//intVariables的值=100, 地址=0xc000128058</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个指针类型的变量去指向变量 intVariables 的地址</span></span><br><span class="line"><span class="keyword">var</span> pointerVariables *<span class="keyword">int</span> = &amp;intVariables</span><br><span class="line">fmt.Printf(<span class="string">"pointerVariables的值=%v, 地址=%v\n"</span>, pointerVariables, &amp;pointerVariables)</span><br><span class="line"><span class="comment">//pointerVariables的值=0xc000128058, 地址=0xc000154020</span></span><br></pre></td></tr></tbody></table></figure>

<p>变量名               变量值               地址<br>intVariables        100                 0xc000128058<br>pointerVariables    0xc000128058        0xc000154020</p>
<p>指针的作用及应用场景<br>作用 应用场景</p>
<p>管理节省内存空间，提高执行效率（当操作的数据量较大规模时）<br>访问变量的值<br>修改变量的值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(intVariables) <span class="comment">// 100</span></span><br><span class="line">*pointerVariables = <span class="number">200</span></span><br><span class="line">fmt.Println(intVariables) <span class="comment">// 200</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> variables2 <span class="keyword">int</span> = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> pointerVariables2 *<span class="keyword">int</span> = &amp;variables2</span><br><span class="line"></span><br><span class="line">fmt.Println(*pointerVariables2, variables2) <span class="comment">// 123 123</span></span><br><span class="line">pointerVariables2 = variables2 <span class="comment">// cannot use variables2 (type int) as type *int in assignment</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add1</span><span class="params">(params []<span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="comment">// 切片 解决可能有不定个int值传递进来</span></span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> params {</span><br><span class="line">        sum += v</span><br><span class="line">    }</span><br><span class="line">    params[<span class="number">0</span>] = <span class="number">9</span> <span class="comment">// 引用传递影响</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap1</span><span class="params">(a, b <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="comment">// 用于交换a和b</span></span><br><span class="line">    temp := a <span class="comment">/* 保存 a 的值 */</span></span><br><span class="line">    a = b     <span class="comment">/* 将 b 值赋给 a */</span></span><br><span class="line">    b = temp  <span class="comment">/* 将 temp 值赋给 b*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可以不需要临时变量</span></span><br><span class="line">    <span class="comment">// a, b = b, a</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := <span class="number">10</span>, <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    swap1(a, b)</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 10 20</span></span><br><span class="line">    <span class="comment">// 这个函数运行完成以后 a和b 的值为什么交换不成功，int类型是值传递</span></span><br><span class="line">    fmt.Printf(<span class="string">"%p\n"</span>, &amp;a) <span class="comment">// 0xc00000a0a8 变量有地址</span></span><br><span class="line"></span><br><span class="line">    a, b = b, a</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 20 10</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b *<span class="keyword">int</span>)</span></span> { <span class="comment">// 参数是指向int的指针</span></span><br><span class="line">    <span class="comment">// 用于交换a和b</span></span><br><span class="line">    temp := *a <span class="comment">/* 保持 a 地址上的值 */</span></span><br><span class="line">    *a = *b    <span class="comment">/* 将 b 地址上的值赋给 a */</span></span><br><span class="line">    *b = temp  <span class="comment">/* 将 temp 值赋给 b */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可以不需要临时变量</span></span><br><span class="line">    <span class="comment">// *a, *b = *b, *a</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := <span class="number">10</span>, <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//a, b = b, a</span></span><br><span class="line">    <span class="comment">//fmt.Println(a, b) // 20 10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//现在有一种特殊的变量类型，这个变量只能保存地址值</span></span><br><span class="line">    <span class="keyword">var</span> ip *<span class="keyword">int</span> <span class="comment">//这个变量里面就只能保存地址类型这种值</span></span><br><span class="line">    ip = &amp;a</span><br><span class="line">    <span class="comment">// 如果要修改指针指向的内存对应的变量的值，用法也比较特殊</span></span><br><span class="line">    *ip = <span class="number">30</span></span><br><span class="line">    fmt.Println(a) <span class="comment">// 30</span></span><br><span class="line">    <span class="comment">//如何定义指针变量 如果修改指针变量指向的内存中的值。 通过指针去取值的时候不知道应该取多大的连续内存空间</span></span><br><span class="line">    fmt.Printf(<span class="string">"ip所指向的内存空间地址是：%p, 内存中的值是: %d\n"</span>, ip, *ip)</span><br><span class="line">    <span class="comment">//ip所指向的内存空间地址是：0xc00000a0a8, 内存中的值是: 30</span></span><br><span class="line"></span><br><span class="line">    swap(&amp;a, &amp;b)</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 20 30</span></span><br><span class="line">    <span class="comment">//if a != nil { // Cannot convert 'nil' to type 'int'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> b, a</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := <span class="number">10</span>, <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//a, b = b, a</span></span><br><span class="line">    <span class="comment">//fmt.Println(a, b) // 20 10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//现在有一种特殊的变量类型，这个变量只能保存地址值</span></span><br><span class="line">    <span class="keyword">var</span> ip *<span class="keyword">int</span> <span class="comment">//这个变量里面就只能保存地址类型这种值</span></span><br><span class="line">    ip = &amp;a</span><br><span class="line">    <span class="comment">// 如果要修改指针指向的内存对应的变量的值，用法也比较特殊</span></span><br><span class="line">    *ip = <span class="number">30</span></span><br><span class="line">    fmt.Println(a) <span class="comment">// 30</span></span><br><span class="line">    <span class="comment">//如何定义指针变量 如果修改指针变量指向的内存中的值。 通过指针去取值的时候不知道应该取多大的连续内存空间</span></span><br><span class="line">    fmt.Printf(<span class="string">"ip所指向的内存空间地址是：%p, 内存中的值是: %d\n"</span>, ip, *ip)</span><br><span class="line">    <span class="comment">//ip所指向的内存空间地址是：0xc00000a0a8, 内存中的值是: 30</span></span><br><span class="line"></span><br><span class="line">    a, b = swap(a, b)</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 20 30</span></span><br><span class="line">    <span class="comment">//if a != nil { // Cannot convert 'nil' to type 'int'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>指针还可以指向数组 指向数组的指针 数组是值类型</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">arr := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="keyword">var</span> ip *[<span class="number">3</span>]<span class="keyword">int</span> = &amp;arr</span><br><span class="line"><span class="comment">//指针数组</span></span><br><span class="line"><span class="keyword">var</span> ptrs [<span class="number">3</span>]*<span class="keyword">int</span> <span class="comment">//创建能够存放三个指针变量的数组，注意*的位置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ip != <span class="literal">nil</span> {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="comment">//if ptrs != nil { // Cannot convert 'nil' to type '[3]*int'</span></span><br><span class="line"><span class="comment">//}</span></span><br></pre></td></tr></tbody></table></figure>

<p>当一个指针只被申明定义后没不赋值分配到任何变量时，它的值为 nil。对一个空指针的反向引用是不合法的，并且会使程序崩溃</p>
<p>申明了一个只能放地址的变量 pointer1 但是变量没有初始值 没有占用内存分配，保留了占位符，占空间（是nil），不指向内存</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> pointer1 *<span class="keyword">int</span></span><br><span class="line">    *pointer1 = <span class="number">10</span>    <span class="comment">// panic: runtime error: invalid memory address or nil pointer dereference</span></span><br><span class="line">    <span class="comment">//[signal 0xc0000005 code=0x1 addr=0x0 pc=0xee2722]</span></span><br><span class="line">    <span class="comment">// nil的地址设为10，但是nil的空间地址都没有</span></span><br></pre></td></tr></tbody></table></figure>

<p>使用指针会增加额外空间<br>默认值 int byte rune float bool string 这些类型都有默认值，占用内存分配<br>指针， 切片 map， 接口这些默认值是nil 理解为none，不能直接赋值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">fmt.Println(a) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对于指针来说或者说其他的默认值是0的情况来说 如何一开始申明的时候就分配内存</span></span><br><span class="line"><span class="comment">//go的编译器就知道先申请调用操作系统的分配内存空间接口，操作系统预留一个可用的空间把地址给go，go会把操作系统给的地址设置到p变量</span></span><br><span class="line"><span class="keyword">var</span> p *<span class="keyword">int</span> = <span class="built_in">new</span>(<span class="keyword">int</span>) <span class="comment">// 这里的内存中的值全部设置为0</span></span><br><span class="line">*p = <span class="number">10</span></span><br><span class="line">fmt.Println(p) <span class="comment">// 0xc00000a0d0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//int使用make就不行</span></span><br><span class="line"><span class="comment">//除了new函数可以申请内存以外 还有更加常用的是make函数， make函数一般用于切片 map</span></span><br><span class="line"><span class="comment">//var info map[string]string</span></span><br><span class="line"><span class="comment">//info["c"] = "bobby" // panic: assignment to entry in nil map</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> info1 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span> = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">info1[<span class="string">"c"</span>] = <span class="string">"bobby"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//new函数返回的是这个值的地址 指针 make函数返回的是指定类型的实例</span></span><br><span class="line"><span class="comment">//nil的一些细节</span></span><br><span class="line"><span class="keyword">var</span> info2 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"><span class="keyword">if</span> info2 == <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(<span class="string">"map的默认值是 nil"</span>) <span class="comment">// map的默认值是 nil</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//var x int = nil // Cannot use 'nil' as the type int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> slice []<span class="keyword">string</span></span><br><span class="line"><span class="keyword">if</span> slice == <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(<span class="string">"slice的默认值是 nil"</span>) <span class="comment">// slice的默认值是 nil</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> err error</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(<span class="string">"error的默认值是 nil"</span>) <span class="comment">// error的默认值是 nil</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>python中的None和go语言中的nil类型不一样，None是全局唯一的<br>go语言中 nil是唯一可以用来表示部分类型的零值的标识符，不是实际的对象，它可以代表许多不同内存布局的值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(unsafe.Sizeof(slice), unsafe.Sizeof(info2)) <span class="comment">// 24 8</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/04/go-de-map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/04/go-de-map/" class="post-title-link" itemprop="url">go的map</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-03 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-03T16:21:41Z">2021-07-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-13 08:39:29" itemprop="dateModified" datetime="2021-07-13T08:39:29Z">2021-07-13</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="map创建"><a href="#map创建" class="headerlink" title="map创建"></a>map创建</h3><p>Map 是一种无序的key-value键值对组成的集合。<br>通过 key 可以快速检索到我们需要的数据，这里的key 类似于索引，指向对应的数据值。</p>
<p>Map 是一种集合，所以我们可以像迭代数组和切片那样迭代它。不过，Map 是无序的，我们无法决定它的返回顺序，这是因为 Map 是使用 hash 表来实现的。每次循环出来的数据的顺序是不一致的，又称为集合</p>
<p>map无序是有原因的：主要是通过散列函数对key计算一个唯一值与值进行映射</p>
<p>通过散列函数对我们的map<br>0xc0001<br>0xc0002<br>0xc0003</p>
<p>2.map是一个引用,函数传参，遵循引用类型规则<br>3.类似perl当中的hash,python当中dict的字典，go当中被称为map<br>4.通过key可快速找到value</p>
<h3 id="map的定义"><a href="#map的定义" class="headerlink" title="map的定义"></a>map的定义</h3><p>要求所有的key的数据类型相同，所有value数据类型相同(注：key与value可以有不同的数据类型)<br>map的key和value类型申明的就要指明</p>
<p>map中的键是唯一的，不可以重复，值可以重复</p>
<h4 id="在申明同时赋值"><a href="#在申明同时赋值" class="headerlink" title="在申明同时赋值"></a>在申明同时赋值</h4><p>map的初始长度会根据初始化时指定的键值对的数量来确定。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 字面值</span></span><br><span class="line">m1 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{ <span class="comment">// 定义map类型变量m1，key的类型为string支持 == 比较操作，value的类型string</span></span><br><span class="line">    <span class="string">"m1"</span>: <span class="string">"v1"</span>, <span class="comment">// 定义时指定的初始key/value, 后面可以继续添加</span></span><br><span class="line">}</span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m1) <span class="comment">// map[m1:v1]</span></span><br><span class="line"></span><br><span class="line">m3 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{} <span class="comment">//创建定义一个空的map</span></span><br><span class="line">fmt.Println(m3)           <span class="comment">// map[]</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m3)    <span class="comment">// map[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mapVariables2 = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>{</span><br><span class="line">    <span class="string">"Monday"</span>: <span class="number">1</span>, <span class="string">"Tuesday"</span>: <span class="number">2</span>, <span class="string">"Wednesday"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">"Thursday"</span>: <span class="number">4</span>,</span><br><span class="line">}</span><br><span class="line">fmt.Println(mapVariables2) <span class="comment">// map[Monday:1 Thursday:4 Tuesday:2 Wednesday:3]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="var-map-key的类型-value的类型"><a href="#var-map-key的类型-value的类型" class="headerlink" title="var map[key的类型]value的类型"></a><code>var map[key的类型]value的类型</code></h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.申明</span></span><br><span class="line"><span class="keyword">var</span> mapVariables1 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"><span class="comment">// 2.在使用map前，需要先make , make的作用就是给map分配数据空间，之后才可以进行引用</span></span><br><span class="line">mapVariables1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">mapVariables1[<span class="string">"Monday"</span>] = <span class="string">"周一"</span></span><br><span class="line">mapVariables1[<span class="string">"Tuesday"</span>] = <span class="string">"周二"</span></span><br><span class="line">fmt.Println(mapVariables1) <span class="comment">// map[Monday:周一 Tuesday:周二]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//map这里的key是唯一的，会覆盖以前的</span></span><br><span class="line">mapVariables1[<span class="string">"Monday"</span>] = <span class="string">"大周一"</span></span><br><span class="line">fmt.Println(mapVariables1) <span class="comment">// map[Monday:大周一 Tuesday:周二]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(mapVariables1)) <span class="comment">// 2</span></span><br></pre></td></tr></tbody></table></figure>

<p>只申明没有make,没有分配内存空间，值为nil，不能对它赋值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mapVariables6 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">mapVariables6[<span class="string">"hello"</span>] = <span class="string">"波哥"</span> <span class="comment">// panic: assignment to entry in nil map</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="通过短冒号（简短声明）直接使用-make-的形式，当只需要声明一个-map-的时候"><a href="#通过短冒号（简短声明）直接使用-make-的形式，当只需要声明一个-map-的时候" class="headerlink" title="通过短冒号（简短声明）直接使用 := + make 的形式，当只需要声明一个 map 的时候"></a>通过短冒号（简短声明）直接使用 := + make 的形式，当只需要声明一个 map 的时候</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mapVariables3 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">mapVariables3[<span class="string">"Monday"</span>] = <span class="number">1</span></span><br><span class="line">mapVariables3[<span class="string">"Tuesday"</span>] = <span class="number">2</span></span><br><span class="line">mapVariables3[<span class="string">"Wednesday"</span>] = <span class="number">3</span></span><br><span class="line">fmt.Println(mapVariables3) <span class="comment">// map[Monday:1 Tuesday:2 Wednesday:3]</span></span><br><span class="line"></span><br><span class="line">mapVariables2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">mapVariables2[<span class="string">"Monday"</span>] = <span class="string">"周一"</span></span><br><span class="line">mapVariables2[<span class="string">"Tuesday"</span>] = <span class="string">"周二"</span></span><br><span class="line">mapVariables2[<span class="string">"Wednesday"</span>] = <span class="string">"周三"</span></span><br><span class="line"></span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>) <span class="comment">// 创建空的map，里面不含元素，元素都需要后续添加</span></span><br><span class="line">fmt.Println(m2)               <span class="comment">// map[]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m2))          <span class="comment">// 0</span></span><br><span class="line">m2[<span class="string">"m2"</span>] = <span class="string">"v2"</span>               <span class="comment">// 添加元素</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m2)        <span class="comment">// map[m2:v2]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m2))          <span class="comment">// 1</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map中key的类型"><a href="#map中key的类型" class="headerlink" title="map中key的类型"></a>map中key的类型</h3><p>map中的每个key在keys的集合中是唯一的，而且需要支持 == or != 操作<br>key的常用类型：int, rune, string, 结构体(每个元素需要支持 == or != 操作), 指针, 基于这些类型自定义的类型，</p>
<p>m0 可以, key类型为string, 支持 == 比较操作</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m0 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span> <span class="comment">// 定义map类型变量m0，key的类型为string，value的类型string</span></span><br><span class="line">fmt.Println(m0)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="comment">// 两个切片不能比较</span></span><br><span class="line"><span class="keyword">if</span> a == b { <span class="comment">// Invalid operation: a == b (the operator == is not defined on []int)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个切片slice类型只能与nil比较，其他的都不可以</span></span><br><span class="line"><span class="keyword">if</span> a == <span class="literal">nil</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>slice切片，函数，不支持 == != 操作，不可以作为map key的数据类型</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 <span class="keyword">map</span>[[]<span class="keyword">int</span>]<span class="keyword">string</span> <span class="comment">// Invalid map key type []int: comparison operators == and != must be fully defined for the key type</span></span><br><span class="line">m4 := <span class="keyword">map</span>[[]<span class="keyword">string</span>]<span class="keyword">int</span>{} <span class="comment">// invalid map key type []string</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>interface{}</code>把它当作万能类型</p>
<p><code>interface{}</code>类型可以作为value</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mapVariables6 []<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}</span><br><span class="line">mapVariables6 = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"波哥"</span></span><br><span class="line">mapVariables6[<span class="number">0</span>][<span class="string">"age"</span>] = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">mapVariables6[<span class="number">1</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">1</span>][<span class="string">"name"</span>] = <span class="string">"胡哥"</span></span><br><span class="line">mapVariables6[<span class="number">1</span>][<span class="string">"age"</span>] = <span class="number">16</span></span><br><span class="line"></span><br><span class="line">fmt.Println(mapVariables6)</span><br><span class="line"><span class="comment">// [map[age:18 name:波哥] map[age:16 name:胡哥]]</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>interface{}</code>类型可以作为key，但是需要加入的key的类型是可以比较的</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m2 <span class="keyword">map</span>[<span class="keyword">interface</span>{}]<span class="keyword">string</span></span><br><span class="line">m2 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">interface</span>{}]<span class="keyword">string</span>)</span><br><span class="line"><span class="comment">//m2[[]byte("k2")]="v2" // panic: runtime error: hash of unhashable type []uint8</span></span><br><span class="line">m2[<span class="number">123</span>] = <span class="string">"123"</span></span><br><span class="line">m2[<span class="number">12.3</span>] = <span class="string">"123"</span></span><br><span class="line">fmt.Println(m2) <span class="comment">// map[12.3:123 123:123]</span></span><br><span class="line"></span><br><span class="line">c := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">d := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">//两个数组可以比较</span></span><br><span class="line"><span class="keyword">if</span> c == d {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">a3 := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="keyword">var</span> m3 <span class="keyword">map</span>[[<span class="number">3</span>]<span class="keyword">int</span>]<span class="keyword">string</span></span><br><span class="line">m3 = <span class="built_in">make</span>(<span class="keyword">map</span>[[<span class="number">3</span>]<span class="keyword">int</span>]<span class="keyword">string</span>)</span><br><span class="line">m3[a3] = <span class="string">"m3"</span></span><br><span class="line">fmt.Println(m3) <span class="comment">// map[[1 2 3]:m3]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="结构体做为map的值"><a href="#结构体做为map的值" class="headerlink" title="结构体做为map的值"></a>结构体做为map的值</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// m4 可以，book1里面的元素都是支持== !=</span></span><br><span class="line"><span class="keyword">type</span> book1 <span class="keyword">struct</span> {</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> m4 <span class="keyword">map</span>[book1]<span class="keyword">string</span></span><br><span class="line">fmt.Println(m4) <span class="comment">// map[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> book2 <span class="keyword">struct</span> {</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">    text []<span class="keyword">byte</span> <span class="comment">// text元素类型为[]byte, 不满足key的要求</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> m5 <span class="keyword">map</span>[book2]<span class="keyword">string</span> <span class="comment">// invalid map key type book2: comparison operators == and != must be fully defined for the key type</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> course <span class="keyword">struct</span> {      <span class="comment">// 定义一个结构体变量</span></span><br><span class="line">    courseName    <span class="keyword">string</span>  <span class="comment">// 课程名称</span></span><br><span class="line">    courseTime    <span class="keyword">float32</span> <span class="comment">// 课程时长 单位分钟</span></span><br><span class="line">    courseTeacher <span class="keyword">string</span>  <span class="comment">// 课程讲师</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">couser1 := course{</span><br><span class="line">    <span class="comment">// 不指定结构体字段名的方式，严格按照定义结构体时的顺序</span></span><br><span class="line">    <span class="string">"go语言体系课"</span>, <span class="number">300.3</span>, <span class="string">"波哥"</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">courser2 := course{ <span class="comment">// 指明字段名</span></span><br><span class="line">    courseTeacher: <span class="string">"胡哥"</span>,</span><br><span class="line">    courseTime:    <span class="number">100.2</span>,</span><br><span class="line">    courseName:    <span class="string">"如何变帅"</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义map，key为string，value为结构体</span></span><br><span class="line">courser := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]course)</span><br><span class="line">courser[<span class="string">"go"</span>] = couser1</span><br><span class="line">courser[<span class="string">"美容"</span>] = courser2</span><br><span class="line">fmt.Println(courser)</span><br><span class="line"><span class="comment">//map[go:{go语言体系课 300.3 波哥} 美容:{如何变帅 100.2 胡哥}]</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map的增删改"><a href="#map的增删改" class="headerlink" title="map的增删改"></a>map的增删改</h3><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">    <span class="string">"a"</span>: <span class="string">"va"</span>,</span><br><span class="line">    <span class="string">"b"</span>: <span class="string">"vb"</span>,</span><br><span class="line">    <span class="string">"d"</span>: <span class="string">""</span>,</span><br><span class="line">}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m)) <span class="comment">// 3 获得m中key/value对的个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1. k不存在为增加，k存在为修改</span></span><br><span class="line">m[<span class="string">"c"</span>] = <span class="string">""</span></span><br><span class="line">m[<span class="string">"c"</span>] = <span class="string">"vc"</span> <span class="comment">// 重复增加(key相同)，使用新的值覆盖</span></span><br><span class="line">m[<span class="string">"b"</span>] = <span class="string">"vb1"</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m)              <span class="comment">// map[a:va b:vb1 c:vc d:]</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">// map[string]string{"a":"va", "b":"vb1", "c":"vc", "d":""} 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询，你返回空的字符串到底是没有获取到还是值本身就是这样空字符串呢</span></span><br><span class="line"><span class="comment">// 从m中取键k对应的值给v，如果k在m中不存在，则将value类型的零值赋值给v</span></span><br><span class="line"><span class="comment">// 从m中取键k对应的值给v，如果k存在，ok=true,如果k不存在，将value类型的零值赋值给v同时ok=false</span></span><br><span class="line"><span class="comment">// 查1 - 元素存在</span></span><br><span class="line">v := m[<span class="string">"d"</span>]</span><br><span class="line">fmt.Println(v) <span class="comment">//</span></span><br><span class="line">v1, ok := m[<span class="string">"d"</span>]</span><br><span class="line">fmt.Println(v1, ok) <span class="comment">//  true</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v %#v\n"</span>, v, v1, ok) <span class="comment">// "" "" true 空字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ok {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, v1) <span class="comment">// 找到了</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"没找到"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> value, ok := m[<span class="string">"go"</span>]; ok {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, value)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查2 - 元素不存在</span></span><br><span class="line">u1 := m[<span class="string">"e"</span>]</span><br><span class="line">u2, ok2 := m[<span class="string">"e"</span>]</span><br><span class="line"><span class="keyword">if</span> ok2 {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, u2)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"没找到"</span>)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 没找到</span></span><br><span class="line">fmt.Println(u2, ok2)                     <span class="comment">//  false</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v %#v\n"</span>, u1, u2, ok2) <span class="comment">// "" "" false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除，使用内置函数删除k/v对</span></span><br><span class="line"><span class="comment">// delete(m, k) 将k以及k对应的v从m中删掉；如果k不在m中，不执行任何操作</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"a"</span>)        <span class="comment">// 删除存在的key</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"e"</span>)        <span class="comment">// 删除不存在的key，原m不影响，不会抛出异常</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m) <span class="comment">// map[b:vb1 c:vc d:]</span></span><br><span class="line"><span class="comment">//map[b:vb1 c:vc d:]</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">//map[string]string{"b":"vb1", "c":"vc", "d":""} 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"a"</span>)                     <span class="comment">// 重复删除已经删除后不存在的不会抛出异常,m无影响</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m)              <span class="comment">// map[b:vb1 c:vc d:]</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">//map[string]string{"b":"vb1", "c":"vc", "d":""} 3</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map的遍历"><a href="#map的遍历" class="headerlink" title="map的遍历"></a>map的遍历</h3><ul>
<li>遍历的顺序是随机的</li>
<li>使用for range遍历的时候，k,v使用的同一块内存，这也是容易出现错误的地方</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">    fmt.Println(k, v)</span><br><span class="line">}</span><br><span class="line"><span class="comment">//b vb1</span></span><br><span class="line"><span class="comment">//d</span></span><br><span class="line"><span class="comment">//c vc</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">    fmt.Printf(<span class="string">"k:[%v].v:[%v]\n"</span>, k, v) <span class="comment">// 输出k,v值</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeMap</span><span class="params">(mapVariables <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    mapVariables[<span class="string">"Monday"</span>] = <span class="number">888</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    <span class="comment">//map是一个引用</span></span><br><span class="line">    fmt.Printf(<span class="string">"mapVariables3['Monday']在调用函数之前的值:%v\n"</span>, mapVariables3[<span class="string">"Monday"</span>])</span><br><span class="line">    <span class="comment">// mapVariables3['Monday']在调用函数之前的值:1</span></span><br><span class="line">    changeMap(mapVariables3)</span><br><span class="line">    fmt.Printf(<span class="string">"mapVariables3['Monday']在调用函数之后的值:%v\n"</span>, mapVariables3[<span class="string">"Monday"</span>])</span><br><span class="line">    <span class="comment">// mapVariables3['Monday']在调用函数之后的值:888</span></span><br></pre></td></tr></tbody></table></figure>

<p>如何来对map的key进行有顺序输出 , for range<br>map是无序的键值对类型，如何排序<br>1.定义切片存储所有的key<br>2.通过排序算法（排序算法使用内置或者冒泡，选择等排序算法均可）对key进行排序<br>3.按照排序后的key打印map</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Strings sorts a slice of strings in increasing order.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Strings</span><span class="params">(x []<span class="keyword">string</span>)</span></span> { Sort(StringSlice(x)) }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sortKeys []<span class="keyword">string</span></span><br><span class="line">    <span class="keyword">for</span> key := <span class="keyword">range</span> mapVariables3 { <span class="comment">// 每此运行都是随机，key无序的</span></span><br><span class="line">        sortKeys = <span class="built_in">append</span>(sortKeys, key) <span class="comment">// 每此运行都是随机，加入到切片的key无序的</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">"排序前sortkeys的值=%v\n"</span>, sortKeys)</span><br><span class="line">    <span class="comment">// 排序前sortkeys的值=[Monday Tuesday Wednesday] 无序的，每此运行都是随机</span></span><br><span class="line"></span><br><span class="line">    sort.Strings(sortKeys) <span class="comment">// 自带的排序</span></span><br><span class="line">    fmt.Printf(<span class="string">"排序后sortkeys的值=%v\n"</span>, sortKeys)</span><br><span class="line">    <span class="comment">// 排序后sortkeys的值=[Monday Tuesday Wednesday]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sortKeys); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"mapVariables3[%s]=%d\n"</span>, sortKeys[i], mapVariables3[sortKeys[i]])</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// mapVariables3[Monday]=888</span></span><br><span class="line">    <span class="comment">// mapVariables3[Tuesday]=2</span></span><br><span class="line">    <span class="comment">// mapVariables3[Wednesday]=3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> mapVariables3 {</span><br><span class="line">        fmt.Println(key, value)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Monday 888</span></span><br><span class="line">    <span class="comment">// Tuesday 2</span></span><br><span class="line">    <span class="comment">// Wednesday 3</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map遍历易错点举例"><a href="#map遍历易错点举例" class="headerlink" title="map遍历易错点举例"></a>map遍历易错点举例</h3><p>由于遍历的时候，遍历v使用的同一块地址，同时这块地址是临时分配的。虽然v的地址没有变化，但v的内容在一直变化，当遍历完成后，v的内容是map遍历时最后遍历的元素的值(map遍历无序，每次不确定哪个元素是最后一个元素)。当程序将v的地址放入到slice中的时候，slice在不断地v的地址插入，由于v一直是那块地址，因此slice中的每个元素记录的都是v的地址。因此当打印slice中的内容的时候，都是同一个值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>{</span><br><span class="line">    <span class="string">"a"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">"b"</span>: <span class="number">2</span>,</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> bs []*<span class="keyword">int</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">    fmt.Printf(<span class="string">"k:[%p].v:[%p]\n"</span>, &amp;k, &amp;v) <span class="comment">// 这里的输出可以看到，k一直使用同一块内存，v也是这个状况</span></span><br><span class="line">    bs = <span class="built_in">append</span>(bs, &amp;v) <span class="comment">// 对v取了地址</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="keyword">for</span> _, b := <span class="keyword">range</span> bs {</span><br><span class="line">    fmt.Println(*b) <span class="comment">// 输出都是1或者都是2</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>go语言中也有一个list 就是数据结构中提到的链表，不需要连续的内存<br>指针 //为什么指针在java python等很多语言中不存在</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/03/go-wen-jian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/03/go-wen-jian/" class="post-title-link" itemprop="url">go文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-02 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-02T16:21:41Z">2021-07-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-13 09:31:06" itemprop="dateModified" datetime="2021-07-13T09:31:06Z">2021-07-13</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Open opens the named file for reading. If successful, methods on</span></span><br><span class="line"><span class="comment">// the returned file can be used for reading; the associated file</span></span><br><span class="line"><span class="comment">// descriptor has mode O_RDONLY.</span></span><br><span class="line"><span class="comment">// If there is an error, it will be of type *PathError.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Open</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="params">(*File, error)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> OpenFile(name, O_RDONLY, <span class="number">0</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/02/go-qie-pian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/02/go-qie-pian/" class="post-title-link" itemprop="url">go切片</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-01 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-01T16:21:41Z">2021-07-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-23 09:31:49" itemprop="dateModified" datetime="2021-07-23T09:31:49Z">2021-07-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，</p>
<p>数组的传递是值传递<br>Go中提供了一种灵活，功能强悍的内置类型切片</p>
<ol>
<li>一种数据结构，便于处理同类型数据集合序列提供一个方便而高效的方式。</li>
<li>与数组相比，切片动态数组，</li>
<li>长度是不固定的，按需自动增长，通过append来可以追加元素，</li>
<li>底层指向的是数组，如果是基于数组产生的 会有一个问题就是进行的操作会影响原来的数组。</li>
<li>内存当中是连续的存储空间，可以有效的提升cpu的执行效率。</li>
<li>引用类型，引用传递，同一块内存，做为函数参数，形参的值会改变实参数的值</li>
<li>go的slice更像是python的list，python的list底层也是基于数组实现的</li>
</ol>
<p>为什么append函数之后再调用c[0]=8不会影响到原来的数组<br>追加切片的容量如果超出了预设的最大值，产生了扩容机制，go语言会新申请一块内存将原始数据拷贝到新的内存当中，切片指向新的内存空间地址，修改新切片不影响原来地址的数组<br>append 函数的参数长度可变，因此可以追加多个值到 slice 中，还可以用 … 传入 slice，直接追加一个切片。<br>append函数返回值是一个新的slice，Go编译器不允许调用了 append 函数后不使用返回值。<br>使用 append 可以向 slice 追加元素，实际上是往底层数组添加元素。但是底层数组的长度是固定的，如果索引 len-1 所指向的元素已经是底层数组的最后一个元素，就没法再添加了。<br>这时，slice 会迁移到新的内存位置，新底层数组的长度也会增加，这样就可以放置新增的元素。同时，为了应对未来可能再次发生的 append 操作，新的底层数组的长度，也就是新 slice 的容量是留了一定的 buffer 的。否则，每次添加元素的时候，都会发生迁移，成本太高。</p>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><ul>
<li>指向底层数组的指针 本身不存值</li>
<li>切片元素的长度，通过<code>len()</code>获取</li>
<li>容量，通过<code>cap()</code>获取</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The len built-in function returns the length of v, according to its type:</span></span><br><span class="line"><span class="comment">//    Array: the number of elements in v.</span></span><br><span class="line"><span class="comment">//    Pointer to array: the number of elements in *v (even if v is nil).</span></span><br><span class="line"><span class="comment">//    Slice, or map: the number of elements in v; if v is nil, len(v) is zero.</span></span><br><span class="line"><span class="comment">//    String: the number of bytes in v.</span></span><br><span class="line"><span class="comment">//    Channel: the number of elements queued (unread) in the channel buffer;</span></span><br><span class="line"><span class="comment">//             if v is nil, len(v) is zero.</span></span><br><span class="line"><span class="comment">// For some arguments, such as a string literal or a simple array expression, the</span></span><br><span class="line"><span class="comment">// result can be a constant. See the Go language specification's "Length and</span></span><br><span class="line"><span class="comment">// capacity" section for details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">len</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The cap built-in function returns the capacity of v, according to its type:</span></span><br><span class="line"><span class="comment">//    Array: the number of elements in v (same as len(v)).</span></span><br><span class="line"><span class="comment">//    Pointer to array: the number of elements in *v (same as len(v)).</span></span><br><span class="line"><span class="comment">//    Slice: the maximum length the slice can reach when resliced;</span></span><br><span class="line"><span class="comment">//    if v is nil, cap(v) is zero.</span></span><br><span class="line"><span class="comment">//    Channel: the channel buffer capacity, in units of elements;</span></span><br><span class="line"><span class="comment">//    if v is nil, cap(v) is zero.</span></span><br><span class="line"><span class="comment">// For some arguments, such as a simple array expression, the result can be a</span></span><br><span class="line"><span class="comment">// constant. See the Go language specification's "Length and capacity" section for</span></span><br><span class="line"><span class="comment">// details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cap</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>在函数当中传递切片时，当数据类型数据较大时，使用切片可以有效减少内存占用，提高程序执行效率</p>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>从数据库表中读取商品信息时，用到map切片，每一个map看成一个整体</p>
<h3 id="定义切片初始化"><a href="#定义切片初始化" class="headerlink" title="定义切片初始化"></a>定义切片初始化</h3><p>直接初始化切片，[]表示是切片类型，</p>
<p>创建 slice 的方式有以下几种：<br>  方式                            代码示例<br>直接声明                           <code>var slice []int</code><br>new                              <code>slice := *new([]int)</code><br>字面量 []Type{}                   <code>slice := []int{1, 2, 3, 4, 5}</code><br>make([]Type, length, capacity)   <code>slice := make([]int, 5, 10)</code><br>从切片或数组“截取”引用               <code>slice := array[:]</code>或 <code>slice := sourceSlice[1:5]</code></p>
<p>第一种方法： var identifier []type</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> courses []<span class="keyword">string</span>      <span class="comment">// 定义了一个切片</span></span><br><span class="line">fmt.Println(courses)      <span class="comment">// []</span></span><br><span class="line">fmt.Printf(<span class="string">"%T"</span>, courses) <span class="comment">// []string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> courses1 = []<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">fmt.Println(courses1)      <span class="comment">// [django scrapy tornado]</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, courses1) <span class="comment">// []string</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(courses1), <span class="built_in">cap</span>(courses1)) <span class="comment">// len=3, cap=3</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="第二种-使用make"><a href="#第二种-使用make" class="headerlink" title="第二种 使用make"></a>第二种 使用make</h4><p>切片不是没有长度限制，为什么使用make初始化的需要我们传递一个长度，<br>那我传递了长度之后是不是意味着就像数组一样长度不能变了呢？</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The make built-in function allocates and initializes an object of type</span></span><br><span class="line"><span class="comment">// slice, map, or chan (only). Like new, the first argument is a type, not a</span></span><br><span class="line"><span class="comment">// value. Unlike new, make's return type is the same as the type of its</span></span><br><span class="line"><span class="comment">// argument, not a pointer to it. The specification of the result depends on</span></span><br><span class="line"><span class="comment">// the type:</span></span><br><span class="line"><span class="comment">//    Slice: The size specifies the length. The capacity of the slice is</span></span><br><span class="line"><span class="comment">//    equal to its length. A second integer argument may be provided to</span></span><br><span class="line"><span class="comment">//    specify a different capacity; it must be no smaller than the</span></span><br><span class="line"><span class="comment">//    length. For example, make([]int, 0, 10) allocates an underlying array</span></span><br><span class="line"><span class="comment">//    of size 10 and returns a slice of length 0 and capacity 10 that is</span></span><br><span class="line"><span class="comment">//    backed by this underlying array.</span></span><br><span class="line"><span class="comment">//    Map: An empty map is allocated with enough space to hold the</span></span><br><span class="line"><span class="comment">//    specified number of elements. The size may be omitted, in which case</span></span><br><span class="line"><span class="comment">//    a small starting size is allocated.</span></span><br><span class="line"><span class="comment">//    Channel: The channel's buffer is initialized with the specified</span></span><br><span class="line"><span class="comment">//    buffer capacity. If zero, or the size is omitted, the channel is</span></span><br><span class="line"><span class="comment">//    unbuffered.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size ...IntegerType)</span> <span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>使用make方法初始化创建切片,这种方式可以指定切片的长度和容量. 如果没有指定容量不会有多余的预留空间</p>
<p>这种方式切片对应的数组不可见，由make来维护<br>make 用来分配内存主要用来分配引用类型，比如channel, map, slice，返回一个有初始值 (非零) 的 T 类型，不是T类型</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">d := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(d), <span class="built_in">cap</span>(d)) <span class="comment">// len=0, cap=0</span></span><br><span class="line"></span><br><span class="line">a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">fmt.Println(a) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(a), <span class="built_in">cap</span>(a)) <span class="comment">// len=5, cap=5</span></span><br><span class="line"></span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">3</span>) <span class="comment">// len larger than cap in make([]int)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个初始元素个数为 5 的数组切片，元素初始值为 0，并预留 6 个元素的存储空间</span></span><br><span class="line">c := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Println(c) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">fmt.Printf(<span class="string">"c的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c)) <span class="comment">// c的长度=5，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, c, &amp;c)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc00000c3f0，切片自己的地址=0xc000004078</span></span><br><span class="line"></span><br><span class="line">courses := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%T %v"</span>, courses, courses)            <span class="comment">// []string [    ]</span></span><br><span class="line">fmt.Println(courses, <span class="built_in">len</span>(courses), <span class="built_in">cap</span>(courses)) <span class="comment">// [    ] 5 5</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="第三种，通过对数组操作返回一个切片"><a href="#第三种，通过对数组操作返回一个切片" class="headerlink" title="第三种，通过对数组操作返回一个切片"></a>第三种，通过对数组操作返回一个切片</h4><p>python中切片的用法非常的多灵活,[:-1] [::-1] go都不能用<br>python中的用法叫切片<br>go语言中切片是一种数据结构</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// course := [5]string{"django", "tornado", "scrapy", "python", "asyncio"}</span></span><br><span class="line"><span class="keyword">var</span> courses = [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">fullCourse := courses[:]</span><br><span class="line">fmt.Println(fullcourses)        <span class="comment">// [django scrapy tornado python asyncio]</span></span><br><span class="line">subCourse := courses[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line">fmt.Println(courses)        <span class="comment">// [django scrapy tornado python asyncio]</span></span><br><span class="line">subCourse[<span class="number">0</span>] = <span class="string">"bobby"</span>      <span class="comment">// 修改切片，引用传递，原数组会变,python 浅拷贝不可变元素不变</span></span><br><span class="line">fmt.Println(courses)        <span class="comment">// [django bobby tornado python asyncio]</span></span><br><span class="line">fmt.Println(subCourse)      <span class="comment">// [bobby tornado python]</span></span><br><span class="line">fmt.Printf(<span class="string">"%T"</span>, subCourse) <span class="comment">// []string</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">replace</span><span class="params">(mySlice []<span class="keyword">string</span>)</span></span> {</span><br><span class="line">    mySlice[<span class="number">0</span>] = <span class="string">"bobby"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> courses = [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">    subCourse := courses[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">// python中的用法叫切片 go语言中切片是一种数据结构</span></span><br><span class="line">    fmt.Println(subCourse) <span class="comment">// [scrapy tornado python]</span></span><br><span class="line">    fmt.Println(courses)   <span class="comment">// [django scrapy tornado python asyncio]</span></span><br><span class="line">    replace(subCourse)</span><br><span class="line">    fmt.Printf(<span class="string">"%T"</span>, subCourse) <span class="comment">// []string</span></span><br><span class="line">    fmt.Println(subCourse)      <span class="comment">// [bobby tornado python]</span></span><br><span class="line">    fmt.Println(courses)        <span class="comment">// [django bobby tornado python asyncio] 第二个已经变了</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s :=[]<span class="keyword">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> }</span><br><span class="line">{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>}初始化值依次是<span class="number">1</span>,<span class="number">2</span>,<span class="number">3.</span>其<span class="built_in">cap</span>=<span class="built_in">len</span>=<span class="number">3</span></span><br><span class="line">s := arr[:]</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//定义一个数组</span></span><br><span class="line">    arrayVariables := [...]<span class="keyword">int</span>{<span class="number">12</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">55</span>, <span class="number">98</span>, <span class="number">2</span>}</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arrayVariables); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables[%d]=%d,地址=%p\n"</span>, i, arrayVariables[i], &amp;arrayVariables[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">arrayVariables[<span class="number">0</span>]=<span class="number">12</span>,地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">arrayVariables[<span class="number">1</span>]=<span class="number">21</span>,地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">arrayVariables[<span class="number">2</span>]=<span class="number">23</span>,地址=<span class="number">0xc00000c400</span></span><br><span class="line">arrayVariables[<span class="number">3</span>]=<span class="number">55</span>,地址=<span class="number">0xc00000c408</span></span><br><span class="line">arrayVariables[<span class="number">4</span>]=<span class="number">98</span>,地址=<span class="number">0xc00000c410</span></span><br><span class="line">arrayVariables[<span class="number">5</span>]=<span class="number">2</span>,地址=<span class="number">0xc00000c418</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//定义一个切片</span></span><br><span class="line">    <span class="keyword">var</span> sliceVariables []<span class="keyword">int</span></span><br><span class="line">    <span class="comment">//定义一个数组</span></span><br><span class="line">    arrayVariables := [...]<span class="keyword">int</span>{<span class="number">12</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">55</span>, <span class="number">98</span>, <span class="number">2</span>}</span><br><span class="line"></span><br><span class="line">    <span class="comment">//切片去引用数组</span></span><br><span class="line">    sliceVariables = arrayVariables[:]</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sliceVariables); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"sliceVariables[%d]=%d,地址=%p\n"</span>, i, sliceVariables[i], &amp;sliceVariables[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">sliceVariables[<span class="number">0</span>]=<span class="number">12</span>,地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">sliceVariables[<span class="number">1</span>]=<span class="number">21</span>,地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">sliceVariables[<span class="number">2</span>]=<span class="number">23</span>,地址=<span class="number">0xc00000c400</span></span><br><span class="line">sliceVariables[<span class="number">3</span>]=<span class="number">55</span>,地址=<span class="number">0xc00000c408</span></span><br><span class="line">sliceVariables[<span class="number">4</span>]=<span class="number">98</span>,地址=<span class="number">0xc00000c410</span></span><br><span class="line">sliceVariables[<span class="number">5</span>]=<span class="number">2</span>,地址=<span class="number">0xc00000c418</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sliceVariables2 []<span class="keyword">int</span></span><br><span class="line">sliceVariables2 = arrayVariables[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">// 从slice中获取slice</span></span><br><span class="line">fmt.Println(sliceVariables2) <span class="comment">// [21 23]</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(sliceVariables2), <span class="built_in">cap</span>(sliceVariables2)) <span class="comment">// len=2, cap=5=6-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 切片指向的是底层的数组</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sliceVariables2); i++ {</span><br><span class="line">    fmt.Printf(<span class="string">"sliceVariables2[%d]=%d,地址=%p\n"</span>, i, sliceVariables2[i], &amp;sliceVariables2[i])</span><br><span class="line">    <span class="comment">//sliceVariables2[0]=21,地址=0xc00000c3f8</span></span><br><span class="line">    <span class="comment">//sliceVariables2[1]=23,地址=0xc00000c400</span></span><br><span class="line">}</span><br><span class="line">sliceVariables2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">fmt.Println(arrayVariables)  <span class="comment">// [12 100 23 55 98 2] 原数组会变</span></span><br><span class="line">fmt.Println(sliceVariables2) <span class="comment">// [100 23]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array = []<span class="keyword">string</span>{<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"i"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(array)) <span class="comment">// 11</span></span><br></pre></td></tr></tbody></table></figure>

<p>通过数组取切片</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data := [<span class="number">10</span>]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>}</span><br><span class="line">slice := data[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">newSlice := data[<span class="number">3</span>:<span class="number">6</span>]</span><br><span class="line"><span class="keyword">for</span> index, value := <span class="keyword">range</span> slice {</span><br><span class="line">    fmt.Println(index, value)</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0 2</span></span><br><span class="line"><span class="comment">//1 3</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice))       <span class="comment">// len=2, cap=8=10-2</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(newSlice), <span class="built_in">cap</span>(newSlice)) <span class="comment">// len=3, cap=7=10-3</span></span><br></pre></td></tr></tbody></table></figure>

<p>第四种方式： new</p>
<p>new 用于各种类型的内存分配 返回的是指针,var variables = new(T)<br>返回的是T，指针类型，即返回的是一个地址，默认是当前类型的零值，它返回了一个指针，指向新分配的类型 T 的零值。也就是说new 返回指针。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The new built-in function allocates memory. The first argument is a type,</span></span><br><span class="line"><span class="comment">// not a value, and the value returned is a pointer to a newly</span></span><br><span class="line"><span class="comment">// allocated zero value of that type.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span> *<span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">subCourse2 := <span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">fmt.Println(subCourse2) <span class="comment">// &amp;[]</span></span><br><span class="line">subCourse3 := *<span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">fmt.Println(subCourse3) <span class="comment">// []</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The append built-in function appends elements to the end of a slice. If</span></span><br><span class="line"><span class="comment">// it has sufficient capacity, the destination is resliced to accommodate the</span></span><br><span class="line"><span class="comment">// new elements. If it does not, a new underlying array will be allocated.</span></span><br><span class="line"><span class="comment">// Append returns the updated slice. It is therefore necessary to store the</span></span><br><span class="line"><span class="comment">// result of append, often in the variable holding the slice itself:</span></span><br><span class="line"><span class="comment">//    slice = append(slice, elem1, elem2)</span></span><br><span class="line"><span class="comment">//    slice = append(slice, anotherSlice...)</span></span><br><span class="line"><span class="comment">// As a special case, it is legal to append a string to a byte slice, like this:</span></span><br><span class="line"><span class="comment">//    slice = append([]byte("hello "), "world"...)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(slice []Type, elems ...Type)</span> []<span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">s1 = <span class="built_in">append</span>(s1, <span class="number">6</span>)</span><br><span class="line"><span class="comment">////对于很多初学者来说我们期望的是只有一个数字就是6</span></span><br><span class="line">fmt.Println(s1) <span class="comment">// [6]</span></span><br><span class="line"><span class="keyword">var</span> s2 []<span class="keyword">int</span></span><br><span class="line">s2 = <span class="built_in">append</span>(s2, <span class="number">6</span>)</span><br><span class="line"><span class="comment">//对于很多初学者来说我们期望的是只有一个数字就是6</span></span><br><span class="line">fmt.Println(s2) <span class="comment">// [6]</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">courses := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>)</span><br><span class="line">courses = <span class="built_in">append</span>(courses, <span class="string">"beego"</span>)</span><br><span class="line">fmt.Println(courses) <span class="comment">// [     beego]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// s1 := make([]int, 5) 好比是python的 s1 = []</span></span><br><span class="line">s1 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">s1 = <span class="built_in">append</span>(s1, <span class="number">0</span>)</span><br><span class="line"><span class="comment">// 不是只有一个数字就是6</span></span><br><span class="line">fmt.Println(s1) <span class="comment">// [0 0 0 0 0 6]</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> courses = [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">subCourse := courses[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">// python中的用法叫切片 go语言中切片是一种数据结构</span></span><br><span class="line">fmt.Println(subCourse[<span class="number">1</span>]) <span class="comment">// tornado</span></span><br><span class="line">subCourse[<span class="number">1</span>] = <span class="string">"bobby"</span></span><br><span class="line">fmt.Println(subCourse) <span class="comment">// [scrapy bobby python]   tornado 被替换了</span></span><br><span class="line">subCourse2 := subCourse[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">fmt.Printf(<span class="string">"%T, %v\n"</span>, subCourse2, subCourse2) <span class="comment">// []string, [bobby python]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// append 可以向切片追加元素</span></span><br><span class="line">subCourse1 := subCourse[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">subCourse1 = <span class="built_in">append</span>(subCourse1, <span class="string">"imooc"</span>, <span class="string">"imooc1"</span>) <span class="comment">// 函数的参数传递规则</span></span><br><span class="line">fmt.Println(subCourse1)                            <span class="comment">// [bobby python imooc imooc1]</span></span><br><span class="line"></span><br><span class="line">appendedCourse := []<span class="keyword">string</span>{<span class="string">"imooc"</span>, <span class="string">"imooc2"</span>, <span class="string">"imooc3"</span>}</span><br><span class="line">subCourse2 = <span class="built_in">append</span>(subCourse2, appendedCourse...) <span class="comment">// 函数的参数传递，第二个参数的值传递到第一个参数</span></span><br><span class="line">fmt.Println(subCourse2)                            <span class="comment">// [bobby python imooc imooc2 imooc3]</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sliceVariables3 []<span class="keyword">int</span> = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Printf(<span class="string">"sliceVariables3的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//sliceVariables3的长度=5，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc00000c450，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, <span class="number">7</span>)</span><br><span class="line">fmt.Printf(<span class="string">"第一次追加sliceVariables3的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第一次追加sliceVariables3的长度=6，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc00000c450，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, <span class="number">8</span>)</span><br><span class="line">fmt.Printf(<span class="string">"第二次追加sliceVariables3的长度=%d，容量=%d,\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第二次追加sliceVariables3的长度=7，容量=12</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc000050060，切片自己的地址=0xc0000040a8</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The copy built-in function copies elements from a source slice into a</span></span><br><span class="line"><span class="comment">// destination slice. (As a special case, it also will copy bytes from a</span></span><br><span class="line"><span class="comment">// string to a slice of bytes.) The source and destination may overlap. Copy</span></span><br><span class="line"><span class="comment">// returns the number of elements copied, which will be the minimum of</span></span><br><span class="line"><span class="comment">// len(src) and len(dst).</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(dst, src []Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>拷贝元素的数量以两个切片中最小切片的长度为准，copy(目标切片，源切片)</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">subCourse3 := []<span class="keyword">string</span>{}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(subCourse3)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">copy</span>(subCourse3, subCourse2)</span><br><span class="line">fmt.Println(subCourse3) <span class="comment">// [] 无论subCourse2有几个元素，拷贝的元素个数都是最小</span></span><br><span class="line"></span><br><span class="line">subCourse4 := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="built_in">len</span>(subCourse))</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(subCourse4)) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">copy</span>(subCourse4, subCourse2)</span><br><span class="line">fmt.Println(subCourse4) <span class="comment">// [bobby python imooc]</span></span><br><span class="line"></span><br><span class="line">subCourse5 := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">2</span>)</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(subCourse5)) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">copy</span>(subCourse5, subCourse2)</span><br><span class="line">fmt.Println(subCourse5) <span class="comment">// [bobby python]</span></span><br><span class="line"></span><br><span class="line">sliceVariables4 := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">sliceVariables5 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(sliceVariables5) <span class="comment">// [0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="built_in">copy</span>(sliceVariables5, sliceVariables4)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(sliceVariables5) <span class="comment">// [1 2 3 4 5 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line">sliceVariables6 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">copy</span>(sliceVariables6, sliceVariables4)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(sliceVariables6) <span class="comment">// [1]</span></span><br></pre></td></tr></tbody></table></figure>

<p>append函数追加多个元素， 既然是切片，那为什么这个时候有来提出长度的要求</p>
<p>想从切片中删除元素怎么办？</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deleteCourses := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">courseSlice := deleteCourses[:]</span><br><span class="line">courseSlice = <span class="built_in">append</span>(courseSlice[:<span class="number">1</span>], courseSlice[<span class="number">2</span>:]...) <span class="comment">//取巧的做法，第一段+第二段</span></span><br><span class="line">fmt.Println(courseSlice)                                  <span class="comment">// [django tornado python asyncio] 没有了scrapy</span></span><br></pre></td></tr></tbody></table></figure>

<p>第一个现象     // 不会去扩展a的空间</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">fmt.Println(<span class="built_in">copy</span>(a, b)) <span class="comment">// 0</span></span><br><span class="line">fmt.Println(a)          <span class="comment">// []</span></span><br></pre></td></tr></tbody></table></figure>

<p>第二个现象</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c := b[:]</span><br><span class="line">c[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">fmt.Println(b) <span class="comment">// [8 2 3] 原数组会变,python 浅拷贝不可变元素不变</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [8 2 3]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="切片做为参数传递给函数，同数组"><a href="#切片做为参数传递给函数，同数组" class="headerlink" title="切片做为参数传递给函数，同数组"></a>切片做为参数传递给函数，同数组</h4><p>当传递较大的数组切片时可以有效的提升cpu执行效率</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// 切片是引用类型</span></span><br><span class="line">    fmt.Println(sliceVariables5) <span class="comment">// [1 2 3 4 5 0 0 0 0 0]</span></span><br><span class="line">    changeSlice(sliceVariables5)</span><br><span class="line">    fmt.Println(sliceVariables5) <span class="comment">// [100 2 3 4 5 0 0 0 0 0]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeSlice</span><span class="params">(slice []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    slice[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>第三个现象</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">c := b[:]</span><br><span class="line">c = <span class="built_in">append</span>(c, <span class="number">9</span>)</span><br><span class="line">fmt.Println(b) <span class="comment">// [1 2 3] append函数没有影响到原来的数组</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [1 2 3 9]</span></span><br><span class="line">c[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">fmt.Println(b) <span class="comment">// [1 2 3]</span></span><br><span class="line"><span class="comment">// 为什么append函数之后再调用c[0]=8不会影响到原来的数组</span></span><br><span class="line"><span class="comment">// 这就是因为产生了扩容机制，扩容机制一旦产生 这个时候切片就会指向新的内存地址</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [8 2 3 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 第四个现象</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(c)) <span class="comment">// 4</span></span><br><span class="line">fmt.Println(<span class="built_in">cap</span>(c)) <span class="comment">// 6 cap指的是容量 长度和容量这两个概念</span></span><br></pre></td></tr></tbody></table></figure>

<p>两个切片不能比较<br>一个切片slice类型只能与nil比较，其他的都不可以</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="keyword">if</span> a == b { <span class="comment">// Invalid operation: a == b (the operator == is not defined on []int)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a == <span class="literal">nil</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>切片底层是使用数组实现的，既要使用数组 又要满足动态的功能 怎么实现？<br>假设有一个值 实际上申请数组的时候可能是两个，如果后续要增加数据那么就直接添加到数据的结尾，这个时候我不要额外重新申请<br>切片有不同的初始化方式</p>
<p>底层存储<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/kikajack/article/details/79833674">https://blog.csdn.net/kikajack/article/details/79833674</a><br>go和python的切片区别<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_15437667/article/details/70191873">https://blog.csdn.net/qq_15437667/article/details/70191873</a></p>
<p>Go 中切片 slice扩容机制</p>
<p>首先判断，如果新申请容量（cap）大于2倍的旧容量（old.cap），最终容量（newcap）就是新申请的容量（cap）<br>否则判断，如果旧切片的长度小于1024，则最终容量(newcap)就是旧容量(old.cap)的两倍，即（newcap=doublecap）<br>否则判断，如果旧切片长度大于等于1024，则最终容量（newcap）从旧容量（old.cap）开始循环增加原来的 1/4，<br>即（newcap=old.cap,for {newcap += newcap/4}）<br>直到最终容量（newcap）大于等于新申请的容量(cap)，即（newcap &gt;= cap）<br>如果最终容量（cap）计算值溢出，则最终容量（cap）就是新申请容量（cap）</p>
<p>大家可以通过源码了解，<br>文章推荐：<a target="_blank" rel="noopener" href="https://juejin.im/post/5ca2b75f51882543ea4b81c8#heading-7">https://juejin.im/post/5ca2b75f51882543ea4b81c8#heading-7</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/02/go-shu-zu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/02/go-shu-zu/" class="post-title-link" itemprop="url">go数组</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-01 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-01T16:21:41Z">2021-07-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-18 03:43:12" itemprop="dateModified" datetime="2021-07-18T03:43:12Z">2021-07-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>机器学习的同学对python的numpy array应该很了解，但是做web开发的同学对python的array使用的不多<br>Go 语言提供了数组类型的数据结构。</p>
<p>数组是具有相同唯一类型的一组已编号且长度固定的数据项序列，这种类型可以是任意的原始类型例如整形、字符串或者自定义类型。<br>数组长度必须是一个常量表达式，并且必须是一个非负整数。数组长度也是数组类型的一部分，所以[5]int和[10]int是属于不同类型的。</p>
<p>如果我们想让数组元素类型为任意类型的话可以使用空接口作为类型，当使用值时我们必须先做一个类型判断 。</p>
<p>数组元素可以通过 索引（位置）来读取（或者修改），数组下标索引从 0 开始，第一个元素索引为 0，第二个索引为 1，以此类推。（数组以 0 开始在所有类 C 语言中是相似的）。<br>元素的数目，也称为长度或者数组大小必须是固定的并且在声明该数组时就给出（编译时需要知道数组长度以便分配内存）。</p>
<p>静态语言中的数组：<br>1.数组是长度固定的数据类型 数组一旦定义后，大小不能更改。<br>2.数据元素的类型相同<br>3.数组内存示意图</p>
<p>相对于去声明 number0, number1, …, number99 的变量，使用数组形式 numbers[0], numbers[1] …, numbers[99] 更加方便且易于扩展。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>数组在内存当中是连续的存储空间，cpu计算数组相应的索引和元素能确定具体位置，可以有效的提升cpu的执行效率。</p>
<h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><p>存储多个相同类型的数据时，可以使用数组</p>
<h4 id="声明和初始化数组"><a href="#声明和初始化数组" class="headerlink" title="声明和初始化数组"></a>声明和初始化数组</h4><p>需要指明数组的长度大小和存储的数据类型。</p>
<p>go语言中的数组和python的list可以对应起来理解，slice和python的list更像<br>变量或者说数组在定义时，如果没有赋值，会有默认值，零值</p>
<p>初始化数组中 {} 中的元素个数不能大于 [] 中的数字。</p>
<p>数组的长度大小是数组类型的组成部分。长度不一样的数组类型是不一样，因此[10]int和[5]int是不同的类型。因此，数组不能被调整大小。不要担心这个限制，因为切片的存在是为了解决这个问题。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">arrayVariables[<span class="number">10</span>] = <span class="number">100</span> <span class="comment">// invalid array index 10 (out of bounds for 10-element array)</span></span><br><span class="line">arrayVariables := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line"><span class="comment">//cannot use [...]int{...} (type [5]int) as type [10]int in assignment</span></span><br></pre></td></tr></tbody></table></figure>

<p>一维数组的定义方式1<br>先声明，后赋值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">arrayVariables[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">arrayVariables[<span class="number">3</span>] = <span class="number">200</span></span><br><span class="line">fmt.Println(arrayVariables) <span class="comment">// [100 0 0 200 0 0 0 0 0 0]</span></span><br></pre></td></tr></tbody></table></figure>

<p>一维数组的定义方式2定义并初始化</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var arrayVariables2 [5]int = [5]int{1, 2, 3, 4, 5} // 在这种情况左边类型可简写</span></span><br><span class="line"><span class="keyword">var</span> arrayVariables2 = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br></pre></td></tr></tbody></table></figure>

<p>一维数组定义方式3</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arrayVariables3 := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">fmt.Println(arrayVariables3, <span class="built_in">len</span>(arrayVariables3)) <span class="comment">// [1 2 3 4 5] 5</span></span><br></pre></td></tr></tbody></table></figure>

<p>一维数组定义方式4，指定索引下标</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arrayVariables4 := [...]<span class="keyword">int</span>{<span class="number">1</span>: <span class="number">200</span>, <span class="number">4</span>: <span class="number">500</span>}</span><br><span class="line">fmt.Println(arrayVariables4, <span class="built_in">len</span>(arrayVariables4)) <span class="comment">// [0 200 0 0 500] 5</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//var course [10]string // n 是一个长度为 10 的数组 *</span></span><br><span class="line"><span class="comment">//var course = [5]string{"django", "scrapy", "tornado"}</span></span><br><span class="line">course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 修改值， 取值： 删除值， 添加某一个值， 数组一开始就要指定大小</span></span><br><span class="line"><span class="comment">//取值， 修改值</span></span><br><span class="line">fmt.Println(course[<span class="number">0</span>]) <span class="comment">// django</span></span><br><span class="line"><span class="comment">//修改值</span></span><br><span class="line">course[<span class="number">0</span>] = <span class="string">"django3"</span></span><br><span class="line">fmt.Println(course) <span class="comment">// [django3 scrapy tornado  ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的另一种创建方式</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">4</span>]<span class="keyword">float32</span> <span class="comment">// 等价于：var a = [4]float32{}</span></span><br><span class="line">fmt.Println(a) <span class="comment">// [0 0 0 0]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">4</span>]<span class="keyword">float32</span>{<span class="number">1.0</span>}</span><br><span class="line">fmt.Println(b) <span class="comment">// [1 0 0 0]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="string">'A'</span>, <span class="string">'B'</span>} <span class="comment">// byte</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [65 66 0 0 0]</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果忽略 [] 中的数字不设置数组大小，Go 语言会根据元素的个数来设置数组的大小：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> balance = []<span class="keyword">float32</span>{<span class="number">1000.0</span>, <span class="number">2.0</span>, <span class="number">3.4</span>, <span class="number">7.0</span>, <span class="number">50.0</span>}</span><br><span class="line"></span><br><span class="line">balance[<span class="number">4</span>] = <span class="number">50.0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="访问数组元素"><a href="#访问数组元素" class="headerlink" title="访问数组元素"></a>访问数组元素</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> n [<span class="number">10</span>]<span class="keyword">int</span> <span class="comment">/* n 是一个长度为 10 的数组 */</span></span><br><span class="line">    <span class="keyword">var</span> i, j <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 为数组 n 初始化元素 */</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ {</span><br><span class="line">        n[i] = i + <span class="number">100</span> <span class="comment">/* 设置元素为 i + 100 */</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 输出每个数组元素的值 */</span></span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ {</span><br><span class="line">        fmt.Printf(<span class="string">"Element[%d] = %d\n"</span>, j, n[j])</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Element[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">Element[<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">Element[<span class="number">2</span>] = <span class="number">102</span></span><br><span class="line">Element[<span class="number">3</span>] = <span class="number">103</span></span><br><span class="line">Element[<span class="number">4</span>] = <span class="number">104</span></span><br><span class="line">Element[<span class="number">5</span>] = <span class="number">105</span></span><br><span class="line">Element[<span class="number">6</span>] = <span class="number">106</span></span><br><span class="line">Element[<span class="number">7</span>] = <span class="number">107</span></span><br><span class="line">Element[<span class="number">8</span>] = <span class="number">108</span></span><br><span class="line">Element[<span class="number">9</span>] = <span class="number">109</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组的长度"><a href="#数组的长度" class="headerlink" title="数组的长度"></a>数组的长度</h4><p>通过将数组作为参数传递给<code>len</code>函数，可以获得数组的长度。</p>
<p>忽略初始化声明中数组的长度并将其替换为<code>…</code> […] 语法糖 ，数组的长度大小根据初始化的元素的个数确定，表示让编译器自动推导数组的长度。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">e := [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">4</span>: <span class="number">100</span>} <span class="comment">// 下标第四个的值设为100，其他为默认值</span></span><br><span class="line">fmt.Println(e)      <span class="comment">// [0 0 0 0 100]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(e))          <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... makes the compiler determine the length</span></span><br><span class="line">d := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>} <span class="comment">// 不写省略号是切片</span></span><br><span class="line">fmt.Println(d)               <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(d))          <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">fmt.Println(f) <span class="comment">// [1 0 0 0 1 0 0 0 0 100]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(f)) <span class="comment">// 10</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="使用range遍历数组"><a href="#使用range遍历数组" class="headerlink" title="使用range遍历数组"></a>使用range遍历数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">    <span class="keyword">for</span> i, value := <span class="keyword">range</span> course {</span><br><span class="line">        fmt.Println(i, value)</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> django</span><br><span class="line"><span class="number">1</span> scrapy</span><br><span class="line"><span class="number">2</span> tornado</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="comment">// 使用for range求和 只需要值并希望忽略索引</span></span><br><span class="line"><span class="keyword">for</span> _, value := <span class="keyword">range</span> f { <span class="comment">//ignores index</span></span><br><span class="line">    sum += value</span><br><span class="line">}</span><br><span class="line">fmt.Println(sum) <span class="comment">// 102</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="keyword">float64</span>{<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>}</span><br><span class="line">sum := <span class="keyword">float64</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> a { <span class="comment">//range returns both the index and value</span></span><br><span class="line">    fmt.Printf(<span class="string">"%d the element of a is %.2f\n"</span>, i, v)</span><br><span class="line">    sum += v</span><br><span class="line">}</span><br><span class="line">fmt.Println(<span class="string">"\nsum of all elements of a"</span>, sum)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight basic"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>the element of a is <span class="number">67.70</span></span><br><span class="line"><span class="symbol">1 </span>the element of a is <span class="number">89.80</span></span><br><span class="line"><span class="symbol">2 </span>the element of a is <span class="number">21.00</span></span><br><span class="line"><span class="symbol">3 </span>the element of a is <span class="number">78.00</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="将一个数组赋值给另一个数组"><a href="#将一个数组赋值给另一个数组" class="headerlink" title="将一个数组赋值给另一个数组"></a>将一个数组赋值给另一个数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    arrayVariables6 := [<span class="number">3</span>]<span class="keyword">string</span>{<span class="string">"波哥"</span>, <span class="string">"哥波"</span>, <span class="string">"golang"</span>}</span><br><span class="line">    arrayVariables7 := arrayVariables6</span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> arrayVariables6 {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables6[%d]=%v,地址=%p\n"</span>, index, value, &amp;arrayVariables6[index])</span><br><span class="line">    }</span><br><span class="line">arrayVariables6[<span class="number">0</span>]=波哥, 地址=<span class="number">0xc00007a3c0</span></span><br><span class="line">arrayVariables6[<span class="number">1</span>]=哥波, 地址=<span class="number">0xc00007a3d0</span></span><br><span class="line">arrayVariables6[<span class="number">2</span>]=golang, 地址=<span class="number">0xc00007a3e0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> arrayVariables7 {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables7[%d]=%v,地址=%p\n"</span>, index, value, &amp;arrayVariables6[index])</span><br><span class="line">    }</span><br><span class="line">arrayVariables7[<span class="number">0</span>]=波哥, 地址=<span class="number">0xc00007a3c0</span></span><br><span class="line">arrayVariables7[<span class="number">1</span>]=哥波, 地址=<span class="number">0xc00007a3d0</span></span><br><span class="line">arrayVariables7[<span class="number">2</span>]=golang, 地址=<span class="number">0xc00007a3e0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="使用for语句也可以遍历数组"><a href="#使用for语句也可以遍历数组" class="headerlink" title="使用for语句也可以遍历数组"></a>使用for语句也可以遍历数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    a := [...]<span class="keyword">float64</span>{<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>}</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ { <span class="comment">//looping from 0 to the length of the array</span></span><br><span class="line">        fmt.Printf(<span class="string">"%d th element of a is %.2f\n"</span>, i, a[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">    <span class="number">0</span> th element of a is <span class="number">67.70</span></span><br><span class="line">    <span class="number">1</span> th element of a is <span class="number">89.80</span></span><br><span class="line">    <span class="number">2</span> th element of a is <span class="number">21.00</span></span><br><span class="line">    <span class="number">3</span> th element of a is <span class="number">78.00</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(course)) <span class="comment">// 5</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(course); i++ {</span><br><span class="line">    sum += f[i]</span><br><span class="line">}</span><br><span class="line">fmt.Println(sum) <span class="comment">// 2</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组内存分析"><a href="#数组内存分析" class="headerlink" title="数组内存分析"></a>数组内存分析</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> arrayVariables2 = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">    <span class="keyword">var</span> length = <span class="built_in">len</span>(arrayVariables2)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables2[%d]=%d, 地址=%p\n"</span>, i, arrayVariables2[i], &amp;arrayVariables2[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">arrayVariables2[<span class="number">0</span>]=<span class="number">1</span>, 地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">arrayVariables2[<span class="number">1</span>]=<span class="number">2</span>, 地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">arrayVariables2[<span class="number">2</span>]=<span class="number">3</span>, 地址=<span class="number">0xc00000c400</span></span><br><span class="line">arrayVariables2[<span class="number">3</span>]=<span class="number">4</span>, 地址=<span class="number">0xc00000c408</span></span><br><span class="line">arrayVariables2[<span class="number">4</span>]=<span class="number">5</span>, 地址=<span class="number">0xc00000c410</span></span><br><span class="line">内存间隔地址是<span class="number">8</span></span><br></pre></td></tr></tbody></table></figure>

<p>数组在内存当中是连续的存储空间<br>数组的元素(下标)      元素值        元素的地址<br>0                    1            0xc00006a060<br>1                    2            0xc00006a068<br>2                    3            0xc00006a070<br>3                    4            0xc00006a078<br>4                    5            0xc00006a080</p>
<h4 id="数组是值类型"><a href="#数组是值类型" class="headerlink" title="数组是值类型"></a>数组是值类型</h4><p>Go中的数组是值类型、深拷贝，而不是python java 的引用类型。<br>在go语言中函数传递参数的时候，数组作为参数调用的时候是值传递、值拷贝，如果较大的数组传递对cpu的效能消耗是极其大的<br>这意味着当它们被分配给一个新变量时，将把<strong>原始数组的副本</strong>分配给新变量。<strong>如果对新变量进行了更改，则不会在原始数组中反映</strong>。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="keyword">string</span>{<span class="string">"USA"</span>, <span class="string">"China"</span>, <span class="string">"India"</span>, <span class="string">"Germany"</span>, <span class="string">"France"</span>}</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)      <span class="comment">// a is  [USA Singapore China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"a[0] = "</span>, a[<span class="number">0</span>]) <span class="comment">// a[0] =  USA</span></span><br><span class="line">b := a                       <span class="comment">// a deep copy of a is assigned to b</span></span><br><span class="line">b[<span class="number">0</span>] = <span class="string">"Singapore"</span></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)</span><br><span class="line"><span class="comment">// a is  [USA China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"b is "</span>, b)</span><br><span class="line"><span class="comment">// b is  [Singapore China India Germany France]</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>] = <span class="string">"UK"</span></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)      <span class="comment">// a is  [UK China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"a[0] = "</span>, a[<span class="number">0</span>]) <span class="comment">// a[0] =  UK</span></span><br><span class="line">fmt.Println(<span class="string">"b is "</span>, b)      <span class="comment">// b is  [Singapore China India Germany France]</span></span><br></pre></td></tr></tbody></table></figure>

<p>数组指针做为参数以引用形式传递函数，意义重大，当传递较大的数组时可以有效的提升cpu执行效率</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    arrayVariables5 := [<span class="number">10</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">    fmt.Println(arrayVariables5) <span class="comment">// [1 2 3 0 0 0 0 0 0 0]</span></span><br><span class="line">    changeArr(arrayVariables5)</span><br><span class="line">    fmt.Println(arrayVariables5) <span class="comment">// [1 2 3 0 0 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过传递指针的方式来改变数组的元素</span></span><br><span class="line">    changeArrByPointer(&amp;arrayVariables5)</span><br><span class="line">    fmt.Println(arrayVariables5) <span class="comment">// [100 2 3 0 0 0 0 0 0 0]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeArrByPointer</span><span class="params">(arr *[10]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    (*arr)[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeArr</span><span class="params">(arr [10]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>如果courseA和courseB是一种类型的话 为什么前面要加一个数组，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray</span><span class="params">(toPrint [5]<span class="keyword">string</span>)</span></span> {</span><br><span class="line">    toPrint[<span class="number">0</span>] = <span class="string">"bobby"</span></span><br><span class="line">    fmt.Println(toPrint)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    courseA := [<span class="number">3</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">    courseB := [...]<span class="keyword">string</span>{<span class="string">"django1"</span>, <span class="string">"scrapy1"</span>, <span class="string">"tornado1"</span>, <span class="string">"python+go"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">    <span class="comment">//courseA和courseB应该是同一种类型， 都是数组类型</span></span><br><span class="line">    <span class="comment">//在go语言中，courseA和courseB都是数组，但是不是同一种类型、长度不一样</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T\n"</span>, courseA) <span class="comment">// [3]string</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T\n"</span>, courseB) <span class="comment">// [5]string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//printArray(courseA) // cannot use courseA (type [3]string) as type [5]string in argument to printArray</span></span><br><span class="line">    printArray(courseB)</span><br><span class="line">    <span class="comment">// [bobby scrapy1 tornado1 python+go asyncio]</span></span><br><span class="line">    fmt.Println(courseB)</span><br><span class="line">    <span class="comment">// [django1 scrapy1 tornado1 python+go asyncio]</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">5</span>, <span class="number">78</span>, <span class="number">8</span>}</span><br><span class="line">    <span class="keyword">var</span> b [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    b = a <span class="comment">//not possible since [3]int and [5]int are distinct types</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> al []<span class="keyword">int</span>     <span class="comment">//创建slice</span></span><br><span class="line">    <span class="comment">//sl := make([]int,10)  // 创建有10个元素的slice</span></span><br><span class="line">    sl:=[<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>} <span class="comment">// 创建有初始化元素的slice</span></span><br><span class="line">    s2:=[<span class="number">4</span>]<span class="keyword">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>} <span class="comment">// 创建有初始化元素的slice</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T, %T, %T"</span>, al, sl, s2)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="二维数组，两个维度"><a href="#二维数组，两个维度" class="headerlink" title="二维数组，两个维度"></a>二维数组，两个维度</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables8 [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span></span><br><span class="line">fmt.Println(arrayVariables8) <span class="comment">// [[0 0] [0 0] [0 0] [0 0]]</span></span><br><span class="line"></span><br><span class="line">arrayVariables9 := [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span>{{<span class="number">10</span>, <span class="number">11</span>}, {<span class="number">3</span>, <span class="number">5</span>}, {<span class="number">2</span>, <span class="number">3</span>}, {<span class="number">100</span>, <span class="number">88</span>}}</span><br><span class="line">fmt.Println(arrayVariables9) <span class="comment">// [[10 11] [3 5] [2 3] [100 88]]</span></span><br><span class="line"></span><br><span class="line">arrayVariables10 := [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span>{<span class="number">1</span>: {<span class="number">100</span>, <span class="number">90</span>}, <span class="number">2</span>: {<span class="number">8</span>, <span class="number">9</span>}}</span><br><span class="line">fmt.Println(arrayVariables10) <span class="comment">// [[0 0] [100 90] [8 9] [0 0]]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables11 [<span class="number">4</span>][<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">int</span> = [<span class="number">4</span>][<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">int</span>{}</span><br><span class="line">fmt.Println(arrayVariables11)</span><br><span class="line"><span class="comment">//[[[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]]]</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-tiao-chu-xun-huan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-tiao-chu-xun-huan/" class="post-title-link" itemprop="url">go跳出循环</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-14 03:25:24" itemprop="dateModified" datetime="2021-07-14T03:25:24Z">2021-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>循环控制语句可以控制循环体内语句的执行过程</p>
<p>GO 语言支持 goto、break、continue 三种循环控制语句，三个语句都可以配合标签( label )使用，标签名区分大小写，定义后不使用会造成编译错误。</p>
<h3 id="break-退出当前循环"><a href="#break-退出当前循环" class="headerlink" title="break 退出当前循环"></a>break 退出当前循环</h3><h4 id="如果我们不想一直死循环下去，当某个条件成立时中断当前-for-循环，并开始执行循环之后的语句"><a href="#如果我们不想一直死循环下去，当某个条件成立时中断当前-for-循环，并开始执行循环之后的语句" class="headerlink" title="如果我们不想一直死循环下去，当某个条件成立时中断当前 for 循环，并开始执行循环之后的语句"></a>如果我们不想一直死循环下去，当某个条件成立时中断当前 for 循环，并开始执行循环之后的语句</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">i:=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>{</span><br><span class="line">    fmt.Println(<span class="string">"你怎么这么好看?"</span>)</span><br><span class="line">    i+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i==<span class="number">3</span>{</span><br><span class="line">        fmt.Println(<span class="string">"天生的"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">你怎么这么好看?</span><br><span class="line">你怎么这么好看?</span><br><span class="line">你怎么这么好看?</span><br><span class="line">天生的</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">            <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"a的值为 : %d\n"</span>, a)</span><br><span class="line">        a++</span><br><span class="line">---</span><br><span class="line">a的值为 : <span class="number">10</span></span><br><span class="line">a的值为 : <span class="number">11</span></span><br><span class="line">a的值为 : <span class="number">12</span></span><br><span class="line">a的值为 : <span class="number">13</span></span><br><span class="line">a的值为 : <span class="number">14</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">10</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">6</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">2</span> <span class="number">0</span></span><br><span class="line"><span class="number">3</span> <span class="number">0</span></span><br><span class="line"><span class="number">4</span> <span class="number">0</span></span><br><span class="line"><span class="number">5</span> <span class="number">0</span></span><br><span class="line"><span class="number">6</span> <span class="number">0</span></span><br><span class="line"><span class="number">7</span> <span class="number">0</span></span><br><span class="line"><span class="number">8</span> <span class="number">0</span></span><br><span class="line"><span class="number">9</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="中断当前-for-range-循环，并开始执行循环之后的语句"><a href="#中断当前-for-range-循环，并开始执行循环之后的语句" class="headerlink" title="中断当前 for range 循环，并开始执行循环之后的语句"></a>中断当前 for range 循环，并开始执行循环之后的语句</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="number">1</span>: <span class="string">"oldboy"</span>,</span><br><span class="line">        <span class="number">2</span>: <span class="string">"Linux"</span>,</span><br><span class="line">        <span class="number">3</span>: <span class="string">"Python"</span>,</span><br><span class="line">        <span class="number">4</span>: <span class="string">"Java"</span>,</span><br><span class="line">        <span class="number">5</span>: <span class="string">"Golang"</span>,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">        fmt.Printf(<span class="string">"%d =&gt; %s \n"</span>, k, v)</span><br><span class="line">        <span class="keyword">if</span> v == <span class="string">"Golang"</span> {</span><br><span class="line">            <span class="comment">// break 语句跳出循环</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<p>break 语句在执行一条 case 后跳出 select 循环</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> ch <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// ch &lt;- 1</span></span><br><span class="line">    <span class="keyword">select</span> {</span><br><span class="line">    <span class="keyword">case</span> i := &lt;-ch:</span><br><span class="line">        fmt.Printf(<span class="string">"received %d %s"</span>, i, <span class="string">" from ch\n"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Println(<span class="string">"break"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Break label 语句 跳出多层嵌套循环<br>label要写在循环的开始而不是结束的地方，和goto语句不一样。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FORBREAK:</span><br><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">10</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">6</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">break</span> FORBREAK</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 0 0</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">"start"</span>)</span><br><span class="line"></span><br><span class="line">Exit:</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">9</span>; i++ {</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">9</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> i+j &gt; <span class="number">15</span> {</span><br><span class="line">                fmt.Println(<span class="string">"exit"</span>) <span class="comment">// exit</span></span><br><span class="line">                <span class="keyword">break</span> Exit</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"end"</span>) <span class="comment">// end</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">"start"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">9</span>; i++ {</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">9</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> i+j &gt; <span class="number">15</span> {</span><br><span class="line">                fmt.Println(<span class="string">"exit"</span>)</span><br><span class="line">                <span class="keyword">break</span> Exit</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">Exit:</span><br><span class="line">    fmt.Println(<span class="string">"end"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight dos"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./main.go:<span class="number">14</span>:<span class="number">11</span>: <span class="built_in">break</span> <span class="built_in">label</span> <span class="keyword">not</span> <span class="keyword">defined</span>: <span class="keyword">Exit</span></span><br><span class="line">./main.go:<span class="number">18</span>:<span class="number">1</span>: <span class="built_in">label</span> <span class="keyword">Exit</span> <span class="keyword">defined</span> and <span class="keyword">not</span> used</span><br></pre></td></tr></tbody></table></figure>

<h3 id="continue跳过当前循环"><a href="#continue跳过当前循环" class="headerlink" title="continue跳过当前循环"></a>continue跳过当前循环</h3><p>与break退出整个循环不同，continue是跳过当前循环，也就是说在for代码块中遇到continue，在 for 循环和for range 循环中用于跳过当前循环其后的的剩余语句，然后继续进行下一轮循环。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++ {</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">2</span> {</span><br><span class="line">            <span class="comment">// 不妨将continue换成break试试，看看它们的区别</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">            <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"a的值为 : %d\n"</span>, a)</span><br><span class="line">        a++</span><br><span class="line">---</span><br><span class="line">a的值为 : <span class="number">10</span></span><br><span class="line">a的值为 : <span class="number">11</span></span><br><span class="line">a的值为 : <span class="number">12</span></span><br><span class="line">a的值为 : <span class="number">13</span></span><br><span class="line">a的值为 : <span class="number">14</span></span><br><span class="line">a的值为 : <span class="number">16</span></span><br><span class="line">a的值为 : <span class="number">17</span></span><br><span class="line">a的值为 : <span class="number">18</span></span><br><span class="line">a的值为 : <span class="number">19</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// for 循环</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ {</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">2</span> {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"i 的值为 : %d\n"</span>, i)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// for range 循环</span></span><br><span class="line">    sli := []<span class="keyword">string</span>{<span class="string">"Linux"</span>, <span class="string">"Python"</span>, <span class="string">"Golang"</span>, <span class="string">"Java"</span>}</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> sli {</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">        <span class="keyword">if</span> v != <span class="string">"Golang"</span> {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Println(<span class="string">"The old boy welcomes you."</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">3</span>; outerIndex++ {</span><br><span class="line">    <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">2</span>; innerIndex++ {</span><br><span class="line">        fmt.Println(outerIndex, innerIndex)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">        fmt.Println(<span class="string">"这里是内层循环剩余的代码"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0 0</span></span><br><span class="line"><span class="comment">//0 1</span></span><br><span class="line"><span class="comment">//1 0</span></span><br><span class="line"><span class="comment">//1 1</span></span><br><span class="line"><span class="comment">//2 0</span></span><br><span class="line"><span class="comment">//2 1</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="continue-标签执行的结果"><a href="#continue-标签执行的结果" class="headerlink" title="continue+标签执行的结果"></a>continue+标签执行的结果</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">BreakLabel:</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ {</span><br><span class="line">    ContinueLabel:</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">5</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> j &gt; <span class="number">2</span> {</span><br><span class="line">                <span class="keyword">continue</span> ContinueLabel</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">1</span> {</span><br><span class="line">                <span class="keyword">break</span> BreakLabel</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            fmt.Print(i, <span class="string">":"</span>, j, <span class="string">" "</span>)</span><br><span class="line">        }</span><br><span class="line">        fmt.Println()</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span>:<span class="number">0</span> <span class="number">0</span>:<span class="number">1</span> <span class="number">0</span>:<span class="number">2</span> </span><br><span class="line"><span class="number">1</span>:<span class="number">0</span> <span class="number">1</span>:<span class="number">1</span> <span class="number">1</span>:<span class="number">2</span> </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FORCONTINUE:</span><br><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">3</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">2</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">continue</span> FORCONTINUE</span><br><span class="line">            fmt.Println(<span class="string">"这里是内层循环剩余的代码"</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">2</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/python-zhong-wei-shi-me-mei-you-switch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/python-zhong-wei-shi-me-mei-you-switch/" class="post-title-link" itemprop="url">python中为什么没有switch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-15 02:42:00" itemprop="dateModified" datetime="2021-07-15T02:42:00Z">2021-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>查看Python官方:PEP 3103-A Switch/Case Statement</p>
<p>发现其实实现Switch Case需要被判断的变量是可哈希的和可比较的，<br>这与Python倡导的灵活性有冲突。在实现上，优化不好做，可能到最后最差的情况汇编出来跟If Else组是一样的。所以Python没有支持。</p>
<p> 采用dict映射</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="number">80</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_A</span>():</span></span><br><span class="line">    print(<span class="string">'A'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_B</span>():</span></span><br><span class="line">    print(<span class="string">'B'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_C</span>():</span></span><br><span class="line">    print(<span class="string">'C'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_D</span>():</span></span><br><span class="line">    print(<span class="string">'D'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">switch = {</span><br><span class="line">    <span class="number">90</span>: print_A,</span><br><span class="line">    <span class="number">80</span>: print_B,</span><br><span class="line">    <span class="number">70</span>: print_C,</span><br><span class="line">    <span class="number">60</span>: print_D,</span><br><span class="line">}</span><br><span class="line">switch[score]()  <span class="comment"># B</span></span><br><span class="line"></span><br><span class="line">score = <span class="number">80</span></span><br><span class="line"></span><br><span class="line">switch = {</span><br><span class="line">    <span class="number">90</span>: <span class="keyword">lambda</span>: print(<span class="string">"A"</span>),</span><br><span class="line">    <span class="number">80</span>: <span class="keyword">lambda</span>: print(<span class="string">"B"</span>),</span><br><span class="line">    <span class="number">70</span>: <span class="keyword">lambda</span>: print(<span class="string">"C"</span>),</span><br><span class="line">    <span class="number">60</span>: <span class="keyword">lambda</span>: print(<span class="string">"D"</span>),</span><br><span class="line">}</span><br><span class="line">switch[score]()  <span class="comment"># B</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-tiao-jian-kong-zhi-if-yu-ju/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-tiao-jian-kong-zhi-if-yu-ju/" class="post-title-link" itemprop="url">go条件控制if语句</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-03 01:58:42" itemprop="dateModified" datetime="2021-08-03T01:58:42Z">2021-08-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>go语言的常用控制流程有if和for，没有while， 而switch和goto是为了简化代码，降低重复代码，属于扩展的流程控制。<br>if 的条件里不需要括号</p>
<p>if语句的结构：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 布尔表达式 {</span><br><span class="line">   <span class="comment">/* 在布尔表达式为 true 时执行 */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 布尔表达式 {</span><br><span class="line">   <span class="comment">/* 在布尔表达式为 true 时执行 */</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  <span class="comment">/* 在布尔表达式为 false 时执行 */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 布尔表达式<span class="number">1</span> {</span><br><span class="line">   <span class="comment">/* 在布尔表达式1为 true 时执行 */</span></span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> 布尔表达式<span class="number">2</span>{</span><br><span class="line">   <span class="comment">/* 在布尔表达式1为 false ,布尔表达式2为true时执行 */</span></span><br><span class="line">} <span class="keyword">else</span>{</span><br><span class="line">   <span class="comment">/* 在上面两个布尔表达式都为false时，执行*/</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">   <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">    num := <span class="number">11</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num%<span class="number">2</span> == <span class="number">0</span> {</span><br><span class="line">        fmt.Println(<span class="string">"偶数"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(<span class="string">"奇数"</span>)</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">score := <span class="number">55</span></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span> {</span><br><span class="line">    fmt.Println(<span class="string">"优"</span>)</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">80</span> {</span><br><span class="line">    fmt.Println(<span class="string">"良"</span>)</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">60</span> {</span><br><span class="line">    fmt.Println(<span class="string">"一般"</span>)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"不及格"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>if的条件里可以赋值<br>if的条件里赋值的变量作用域就在这个if语句里面</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filename = <span class="string">"hello.txt"</span></span><br><span class="line"></span><br><span class="line">contents, err := ioutil.ReadFile(filename)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line">    fmt.Printf(<span class="string">"%s\n"</span>,contents)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> fileHandle, err := os.Open(filename)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(fileHandle)  <span class="comment">// &lt;nil&gt;</span></span><br><span class="line">    fmt.Println(err.Error()) <span class="comment">// open hello.txt: The system cannot find the file specified.</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"获取文件成功"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、-else-语句组合中"><a href="#将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、-else-语句组合中" class="headerlink" title="将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、 else 语句组合中"></a>将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、 else 语句组合中</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value,ok := courser[<span class="string">"go"</span>];ok {</span><br><span class="line">    fmt.Println(value)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if statement; condition</span></span><br><span class="line"><span class="keyword">if</span> num := <span class="number">11</span>; num%<span class="number">2</span> == <span class="number">0</span> { <span class="comment">// checks if number is even</span></span><br><span class="line">    fmt.Println(<span class="string">"偶数even"</span>)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"奇数odd"</span>) <span class="comment">// 奇数odd</span></span><br><span class="line">}</span><br><span class="line">fmt.Println(num) <span class="comment">// undefined: num</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := Connect(); err != <span class="literal">nil</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>打开某一个文件不存在或者由于权限的问题无法操作</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> contents, err := ioutil.ReadFile(filename); err!=<span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">    fmt.Printf(<span class="string">"%s\n"</span>, contents)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> fileHandle, err := os.Open(<span class="string">"hello.txt"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(fileHandle)  <span class="comment">// &lt;nil&gt;</span></span><br><span class="line">    fmt.Println(err.Error()) <span class="comment">// open hello.txt: The system cannot find the file specified.</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"获取文件成功"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"errors"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span> <span class="title">error</span></span> {</span><br><span class="line">    <span class="keyword">return</span> errors.New(<span class="string">"error"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">if</span> err := test(); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(<span class="string">"error happen"</span>)</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(err) <span class="comment">// undefined: err</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
