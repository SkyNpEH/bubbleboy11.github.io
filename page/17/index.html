<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/17/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/17/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/17/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/http-fang-fa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/http-fang-fa/" class="post-title-link" itemprop="url">HTTP 方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-20 08:50:14" itemprop="dateModified" datetime="2021-07-20T08:50:14Z">2021-07-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>常见的 HTTP 方法、接口的分类： </p>
<p>GET 请求</p>
<ul>
<li><p>可以用浏览器地址栏直接输入网址访问</p>
</li>
<li><p>请求参数直接放在URL后面，明文传递明文显示</p>
</li>
<li><p>请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容。</p>
</li>
</ul>
<ul>
<li>可以用来提交表单和其他数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码<br>GET 方法是从指定的资源请求数据<br>GET 请求所包含的参数会被缓存(浏览器cache)，而post不会<br>GET 请求保留在浏览器历史记录中<br>GET 请求可被收藏为书签 get的url能被存为标签，post不会<br>get只能被url编码，而post可以被多种编码<br>get只接受ASCII字符，而post没有限制<br>get后退无害，而post后退会再次发送请求<br>GET 请求不应在处理敏感数据时使用<br>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），<br>请求只应当用于取回数据</li>
</ul>
<p>POST请求</p>
<ul>
<li>不能使用浏览器地址栏直接输入网址访问</li>
<li>传输实体的主体。</li>
<li>主要目的不是获取响应主体的内容。</li>
</ul>
<ul>
<li>放在Http报文实体的主体请求体，更安全。</li>
</ul>
<ul>
<li>可以用来上传文件、登录注册等需求</li>
<li>通过 request body 传递参数，加密传递数据</li>
</ul>
<p>幂等性(Idempotent): 发送一次和多次请求引起的边界效应是一致的，都得到相同请求结果的 HTTP 方法<br>幂等的方法客户端可以安全地重新请求，因为不会对服务器上的数据造成什么影响。<br>例如：a = 4 是幂等的，但是 a += 4 就是非幂等的</p>
<p>GET 是幂等的，就是对服务器没有副作用；<br>POST 非幂等，就是每一次创建一个新的东西会影响数据库的数据。<br>PUT是幂等的，将PUT方法用作传输资源。更新：从客户端向服务器传送的数据取代指定的文档的内容。</p>
<p>我们可以看到GET请求消息体为空没有请求体，POST请求带有消息体。</p>
<p>POST方法提交的数据没有限制。<br>post请求携带的数据量比get请求多，常用于传输大文本的时候<br>从客户端向服务器传送的数据取代指定的文档的内容。</p>
<p>高级区别：<br>HTTP的底层是TCP/IP。所以GET和POST的底层也是TCP/IP，也就是说，GET/POST都是TCP链接。<br>GET和POST能做的事情是一样一样的。你要给GET加上request body，给POST带上url参数，技术上是完全行的通的。<br>    • get产生一个tcp数据包，post产生两个数据包。<br>对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；<br>而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。</p>
<p>也就是说，GET只需要汽车跑一趟就把货送到了，而POST得跑两趟，第一趟，先去和服务器打个招呼“嗨，我等下要送一批货来，你们打开门迎接我”，然后再回头把货送过去。</p>
<p>因为POST需要两步，时间上消耗的要多一点，看起来GET比POST更有效。因此Yahoo团队有推荐用GET替换POST来优化网站性能。但这是一个坑！跳入需谨慎。为什么？</p>
<ol>
<li>GET与POST都有自己的语义，不能随便混用。</li>
<li>据研究，在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。</li>
<li>并不是所有浏览器都会在POST中发送两次包，Firefox就只发送一次。</li>
</ol>
<p>（1）web开发中 Post 和 Get 有哪些区别，各适合用于什么情况 ？<br> ① 功能差异：<br>    get ：获取数据，客户端去向服务器请求取数据资源<br>    post：提交数据，从客户端向服务器送处上传数据。<br>② 数据传输：<br>   get：通过URL里面加上参数去把数据传输给服务器端，然后服务器端根据发送过来参数返回对应内容。<br>   get把请求的数据拼接在URL后面，在地址栏里提交<br>   浏览器的地址栏会显示出来当前URL，get会把所有的数据放到url部分，数据会以明文显示对于用户来说是可见的，并且浏览器会有历史记录的功能。</p>
<p>  post：URL唯一标识，通过唯一标识向唯一标识路径下提交一些数据，<br>  Post把所有请求的数据放到Body里面不在URL里，页面里面通过form表单或者Ajax等方式发送一个请求给服务器端,服务器会把Body(消息主体)里面的数据存储到服务器端数据库。<br>地址栏也是无法直接发送一个post请求，post把所有数据放到Body部分对于用户来说是不可见的 浏览器无法记录，</p>
<p>③ 安全性：post相对于get更安全。安全指的是是否会修改数据。<br>安全性：GET,HEAD 和 OPTIONS 均被认为是安全的方法，因为它们旨在实现对数据的获取，并不具有’边界效应(side effect)’<br>无论是get还是post如果传输的数据未经过加密，通过第三方抓包工具依然是可以把数据抓取到的，一旦抓取到数据还是可以看到传输的数据内容都包含哪些。<br>为了保证传输的内容安全，一般对关键信息或者敏感信息都会采用这种加密的形式。</p>
<p>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditPosts.aspx?name=test1&amp;id=123456。POST方法是把提交的数据放在HTTP包的body中。</p>
<p>POST 方法向指定资源提交要被处理的数据<br>POST 请求不会被缓存<br>POST 请求不会保留在浏览器历史记录中<br>POST 不能被收藏为书签</p>
<p>HEAD 类似于 GET 请求，返回的响应中没有具体的内容，用于获取资源的报头元数据<br>⑤ DELETE 请求服务器删除指定的资源<br>⑥ OPTIONS 用来查询针对请求 URI 指定的资源支持的方法，获取信息，关于资源的哪些属性是客户端可以改变的</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-9-centos ~]<span class="comment"># curl -X OPTIONS http://www.baidu.com -i</span></span><br><span class="line">HTTP/1.1 302 Found</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 17931</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Date: Tue, 27 Apr 2021 04:11:06 GMT</span><br><span class="line">Etag: <span class="string">"54d97487-460b"</span></span><br><span class="line">Server: bfe/1.0.8.18</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"content-type"</span> content=<span class="string">"text/html;charset=utf-8"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=Edge"</span>&gt;</span><br><span class="line">&lt;title&gt;页面不存在_百度搜索&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body link=<span class="string">"#0000cc"</span>&gt;</span><br><span class="line">&lt;div id=<span class="string">"wrapper"</span> style=<span class="string">""</span> class=<span class="string">"wrapper_s"</span>&gt;</span><br><span class="line"></span><br><span class="line"> &lt;div id=<span class="string">"head"</span>&gt; &lt;div class=<span class="string">"head_wrapper"</span>&gt; &lt;div class=<span class="string">"s_form"</span>&gt; &lt;div class=<span class="string">"s_form_wrapper"</span>&gt; &lt;div id=<span class="string">"lg"</span>&gt; &lt;img hidefocus=<span class="string">"true"</span> src=<span class="string">"//www.baidu.com/img/bd_logo1.png"</span> width=<span class="string">"270"</span> height=<span class="string">"129"</span>&gt; &lt;/div&gt; &lt;a href=<span class="string">"/"</span> id=<span class="string">"result_logo"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'logo'})"</span>&gt; &lt;img src=<span class="string">"//www.baidu.com/img/baidu_jgylogo3.gif"</span> alt=<span class="string">"到百度首页"</span> title=<span class="string">"到百度首页"</span>&gt; &lt;/a&gt; &lt;form id=<span class="string">"form"</span> name=<span class="string">"f"</span> action=<span class="string">"/s"</span> class=<span class="string">"fm"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"ie"</span> value=<span class="string">"utf-8"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"f"</span> value=<span class="string">"8"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"rsv_bp"</span> value=<span class="string">"1"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"rsv_idx"</span> value=<span class="string">"1"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"ch"</span> value=<span class="string">""</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"tn"</span> value=<span class="string">"baiduerr"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"bar"</span> value=<span class="string">""</span>&gt; &lt;span class=<span class="string">"bg s_ipt_wr"</span>&gt; &lt;input id=<span class="string">"kw_tip"</span> unselectable=<span class="string">"on"</span> onselectstart=<span class="string">"return false;"</span> class=<span class="string">"s_ipt s_ipt_tip"</span> disabled=<span class="string">""</span> autocomplete=<span class="string">"off"</span> value=<span class="string">""</span> maxlength=<span class="string">"100"</span> style=<span class="string">"display: none;"</span>&gt; &lt;input id=<span class="string">"kw"</span> name=<span class="string">"wd"</span> class=<span class="string">"s_ipt"</span> value=<span class="string">""</span> maxlength=<span class="string">"100"</span> autocomplete=<span class="string">"off"</span>&gt; &lt;/span&gt;&lt;span class=<span class="string">"bg s_btn_wr"</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> id=<span class="string">"su"</span> value=<span class="string">"百度一下"</span> class=<span class="string">"bg s_btn"</span>&gt; &lt;/span&gt;&lt;span class=<span class="string">"tools"</span>&gt; &lt;span id=<span class="string">"mHolder"</span>&gt; &lt;div id=<span class="string">"mCon"</span>&gt; &lt;span&gt;输入法&lt;/span&gt; &lt;/div&gt; &lt;ul id=<span class="string">"mMenu"</span>&gt; &lt;li&gt;&lt;a href=<span class="string">"javascript:;"</span> name=<span class="string">"ime_hw"</span>&gt;手写&lt;/a&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=<span class="string">"javascript:;"</span> name=<span class="string">"ime_py"</span>&gt;拼音&lt;/a&gt; &lt;/li&gt; &lt;li class=<span class="string">"ln"</span>&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=<span class="string">"javascript:;"</span> name=<span class="string">"ime_cl"</span>&gt;关闭&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/span&gt; &lt;span class=<span class="string">"shouji"</span> style=<span class="string">"display: none;"</span>&gt;&lt;a href=<span class="string">"http://w.x.baidu.com/go/mini/8/10000020"</span> onmousedown=<span class="string">"return ns_c({'fm':'behs','tab':'bdbrowser'})"</span>&gt;百度浏览器，打开网页快2秒！&lt;/a&gt; &lt;/span&gt; &lt;/span&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"rn"</span> value=<span class="string">""</span>&gt; &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"rsv_enter"</span> value=<span class="string">"1"</span>&gt; &lt;/form&gt; &lt;div id=<span class="string">"m"</span>&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; &lt;div class=<span class="string">"s_tab"</span> id=<span class="string">"s_tab"</span>&gt; &lt;b&gt;网页&lt;/b&gt; &lt;a href=<span class="string">"http://news.baidu.com/ns?cl=2&amp;amp;rn=20&amp;amp;tn=news&amp;amp;word="</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'news'})"</span>&gt;新闻&lt;/a&gt;&lt;a href=<span class="string">"http://tieba.baidu.com/f?kw=&amp;amp;fr=wwwt"</span> wdfield=<span class="string">"kw"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'tieba'})"</span>&gt;贴吧&lt;/a&gt;&lt;a href=<span class="string">"http://zhidao.baidu.com/q?ct=17&amp;amp;pn=0&amp;amp;tn=ikaslist&amp;amp;rn=10&amp;amp;word=&amp;amp;fr=wwwt"</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'zhidao'})"</span>&gt;知道&lt;/a&gt;&lt;a href=<span class="string">"http://music.baidu.com/search?fr=ps&amp;amp;key="</span> wdfield=<span class="string">"key"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'music'})"</span>&gt;音乐&lt;/a&gt;&lt;a href=<span class="string">"http://image.baidu.com/i?tn=baiduimage&amp;amp;ps=1&amp;amp;ct=201326592&amp;amp;lm=-1&amp;amp;cl=2&amp;amp;nc=1&amp;amp;word="</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'pic'})"</span>&gt;图片&lt;/a&gt;&lt;a href=<span class="string">"http://v.baidu.com/v?ct=301989888&amp;amp;rn=20&amp;amp;pn=0&amp;amp;db=0&amp;amp;s=25&amp;amp;word="</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'video'})"</span>&gt;视频&lt;/a&gt;&lt;a href=<span class="string">"http://map.baidu.com/m?word=&amp;amp;fr=ps01000"</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'map'})"</span>&gt;地图&lt;/a&gt;&lt;a href=<span class="string">"http://wenku.baidu.com/search?word=&amp;amp;lm=0&amp;amp;od=0"</span> wdfield=<span class="string">"word"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'wenku'})"</span>&gt;文库&lt;/a&gt;&lt;a href=<span class="string">"//www.baidu.com/more/"</span> onmousedown=<span class="string">"return c({'fm':'tab','tab':'more'})"</span>&gt;更多»&lt;/a&gt; &lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">"ftCon"</span>&gt;&lt;div id=<span class="string">"ftConw"</span>&gt;&lt;p id=<span class="string">"lh"</span>&gt; &lt;a id=<span class="string">"seth"</span> onclick=<span class="string">"h(this)"</span> href=<span class="string">"/"</span> onmousedown=<span class="string">"return ns_c({'fm':'behs','tab':'homepage','pos':0})"</span>&gt;把百度设为主页&lt;/a&gt;&lt;a id=<span class="string">"setf"</span> href=<span class="string">"http://www.baidu.com/cache/sethelp/index.html"</span> onmousedown=<span class="string">"return ns_c({'fm':'behs','tab':'favorites','pos':0})"</span> target=<span class="string">"_blank"</span> style=<span class="string">"display: inline;"</span>&gt;把百度设为主页&lt;/a&gt;&lt;a onmousedown=<span class="string">"return ns_c({'fm':'behs','tab':'tj_about'})"</span> href=<span class="string">"http://home.baidu.com"</span>&gt;关于百度&lt;/a&gt;&lt;a onmousedown=<span class="string">"return ns_c({'fm':'behs','tab':'tj_about_en'})"</span> href=<span class="string">"http://ir.baidu.com"</span>&gt;About Baidu&lt;/a&gt; &lt;/p&gt; &lt;p id=<span class="string">"cp"</span>&gt;©2014&amp;nbsp;Baidu&amp;nbsp;&lt;a href=<span class="string">"/duty/"</span> name=<span class="string">"tj_duty"</span>&gt;使用百度前必读&lt;/a&gt;&amp;nbsp;京ICP证030173号&amp;nbsp;&lt;i class=<span class="string">"c-icon-icrlogo"</span>&gt;&lt;/i&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">"wrapper_wrapper"</span> style=<span class="string">"display: block;"</span>&gt;</span><br><span class="line">        &lt;div id=<span class="string">"content_left"</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">"nors"</span>&gt;</span><br><span class="line">                        &lt;div class=<span class="string">"norsSuggest"</span>&gt;</span><br><span class="line">                                &lt;h3 class=<span class="string">"norsTitle"</span>&gt;很抱歉，您要访问的页面不存在！&lt;/h3&gt;</span><br><span class="line">                                &lt;p class=<span class="string">"norsTitle2"</span>&gt;温馨提示：&lt;/p&gt;</span><br><span class="line">                                &lt;ol&gt;</span><br><span class="line">                                        &lt;li&gt;请检查您访问的网址是否正确&lt;/li&gt; </span><br><span class="line">                                        &lt;li&gt;如果您不能确认访问的网址，请浏览&lt;a href=<span class="string">"http://www.baidu.com/more/index.html"</span>&gt;百度更多&lt;/a&gt;页面查看更多网址。&lt;/li&gt;</span><br><span class="line">                                        &lt;li&gt;回到顶部重新发起搜索&lt;/li&gt;</span><br><span class="line">                                        &lt;li&gt;如有任何意见或建议，请及时&lt;a href=<span class="string">"http://qingting.baidu.com/index"</span>&gt;反馈给我们&lt;/a&gt;。&lt;/li&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                &lt;/ol&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"foot"</span>&gt;&lt;span class=<span class="string">"foot_c"</span>&gt;©2015&amp;nbsp;Baidu&amp;nbsp;&lt;span&gt;此内容系百度根据您的指令自动搜索的结果，不代表百度赞成被搜索网站的内容或立场&lt;/span&gt;&lt;/span&gt;</span><br><span class="line">&lt;span id=<span class="string">"help"</span>&gt;&lt;a href=<span class="string">"http://www.baidu.com/search/jubao.html"</span> target=<span class="string">"_blank"</span>&gt;举报&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=<span class="string">"c-tips-container"</span> id=<span class="string">"c-tips-container"</span>&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=<span class="string">"c-tips-container"</span> id=<span class="string">"c-tips-container"</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>TRACE： 回显服务器收到的请求，主要用于测试或诊断。<br>CONNECT：开启一个客户端与所请求资源之间的双向沟通的通道。它可以用来创建隧道</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/io-duo-lu-fu-yong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/io-duo-lu-fu-yong/" class="post-title-link" itemprop="url">HTML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-05 14:11:43" itemprop="dateModified" datetime="2021-04-05T14:11:43Z">2021-04-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Unix网络编程中提到了5种网络模型</p>
<ul>
<li>Blocking IO 阻塞式IO，一次只能处理一个请求。</li>
<li>Noblocking IO 非阻塞式IO</li>
<li>IO multiplexing IO多路复用（高并发框架使用）</li>
<li>Signal Driven IO 信号驱动的IO</li>
<li>Asynchronous IO 异步IO</li>
</ul>
<p>现在服务器基本使用 IO多路复用，实现单进程同时处理多个 socket 请求。</p>
<h3 id="IO多路复用？"><a href="#IO多路复用？" class="headerlink" title="IO多路复用？"></a>IO多路复用？</h3><p>IO多路复用就是操作系统提供的同时监听多个 socket 的机制</p>
<ul>
<li>为了实现高并发需要一种机制并发处理多个 socket</li>
<li>Linux 常见的是 select / poll / epoll 系统调用</li>
<li>可以使用单线程单进程处理多个 socket<br>为什么 select 就能实现高并发呢？<br>select 可以同时处理多个 socket，有一个就绪应用程序代码就可以处理它<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用IO复用代码格式</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    events = sel.select()    <span class="comment"># 系统阻塞在select，直到有一个socket就绪</span></span><br><span class="line">    <span class="keyword">for</span> key,mask <span class="keyword">in</span> events:   <span class="comment"># 当socket就绪之后就遍历事件</span></span><br><span class="line">        callback = key.data</span><br><span class="line">        callback(key.fileobj, mask)</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>重点是索引就绪文件的时间复杂度，一般优先使用epoll,O(1)</p>
<p>Python 封装了操作系统的IO多路复用<br>Python 的IO多路复用基于操作系统实现( select / poll / epoll )<br>Python2 select 模块<br>Python3 selectors 模块<br>selectors模块<br>事件类型: </p>
<ul>
<li>EVENT_READ 表示socket可读，</li>
<li>EVENT_WRITE 表示socket可写</li>
</ul>
<p>Default selector:自动根据平台选取合适的o模型</p>
<ul>
<li>register(fileobj, events, data=None)</li>
<li>unregister(fileobj)</li>
<li>modify(fileobj, events, data=None)</li>
<li>select(timeout=None): returns[(key, events)]</li>
<li>close()</li>
</ul>
<p>下面是一个简单的echo服务器实现 ：异步的TCP回显,它能够并发的处理客户端请求，把客户端发的再发回去，这就是TCP回显服务器。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> selectors</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"> </span><br><span class="line">sel = selectors.DefaultSelector()</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">accept</span>(<span class="params">sock, mask</span>):</span></span><br><span class="line">    conn, addr = sock.accept()  <span class="comment"># Should be ready</span></span><br><span class="line">    print(<span class="string">'accepted'</span>, conn, <span class="string">'from'</span>, addr)</span><br><span class="line">    conn.setblocking(<span class="literal">False</span>)</span><br><span class="line">    sel.register(conn, selectors.EVENT_READ, read)  <span class="comment"># 注册read回调</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">conn, mask</span>):</span></span><br><span class="line">    data = conn.recv(<span class="number">1000</span>)  <span class="comment"># Should be ready</span></span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        print(<span class="string">'echoing'</span>, repr(data), <span class="string">'to'</span>, conn)</span><br><span class="line">        conn.send(data)  <span class="comment"># Hope it won't block</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'closing'</span>, conn)</span><br><span class="line">        sel.unregister(conn)</span><br><span class="line">        conn.close()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 服务端</span></span><br><span class="line">sock = socket.socket()</span><br><span class="line">sock.bind((<span class="string">'localhost'</span>, <span class="number">1234</span>))</span><br><span class="line">sock.listen(<span class="number">100</span>)</span><br><span class="line">sock.setblocking(<span class="literal">False</span>)</span><br><span class="line">sel.register(sock, selectors.EVENT_READ, accept) <span class="comment"># 注册accept回调</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:       <span class="comment"># 事件循环</span></span><br><span class="line">    events = sel.select()</span><br><span class="line">    <span class="keyword">for</span> key, mask <span class="keyword">in</span> events:</span><br><span class="line">        callback = key.data</span><br><span class="line">        callback(key.fileobj, mask)</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/mvc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/mvc/" class="post-title-link" itemprop="url">MVC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-24 12:20:07" itemprop="dateModified" datetime="2021-04-24T12:20:07Z">2021-04-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>什么是 MVC模式？<br>mvc出现的意义就是解耦，比如：模型代表数据，视图代表展示层，控制器代表操作，<br>解耦数据、展示和操作。</p>
<p>M=Mode 模型：负责业务对象和数据库的交互(ORM)。数据模型层，通常对数据加工和一些其它处理 ( 数据相关操作 )。<br>V=View 视图：负责与用户的交互展示，前端输出的内容,比如:颜色、文字、表单等等。视图层，跟用户交互的页面上东西。<br>一个视图的工作就是：从参数获取数据，装载一个HTML页面模板，然后将根据获取的数据对模板进行渲染。<br>C= Controller控制器：起到粘合剂的作用，接收请求参数调用模型和视图完成请求，C进行处理，与M和V进行交互，返回应答，实现的功能,比如:加减乘除、增删改写。业务处理层，处理业务逻辑。</p>
<p>M:model，模型，和MVC中M功能相同，和数据库进行交互<br>V：view，视图，和MVC中C功能相同，接受请求，进行处理，和M和T进行交互，返回应答<br>T：Template模板，和MVC中V功能相同，产生HTML页面</p>
<p>&nbsp; &nbsp; &nbsp;图解：典型的一个web框架使用MVC模式怎么处理请求。首先用户在浏览器输入url之后，后端web框架通过url的routes，寻找url匹配之后调用那个controller，在controller通过model跟数据库一个交互，然后通过调用view层去展示逻辑这里一般指模板渲染。但随着现在这种前后分离比较流行之后，视图层只是做序列化的工作。</p>
<h3 id="ORM-Object-Relational-Mapping，对象关系映射"><a href="#ORM-Object-Relational-Mapping，对象关系映射" class="headerlink" title="ORM Object Relational Mapping，对象关系映射"></a>ORM Object Relational Mapping，对象关系映射</h3><p>&nbsp; &nbsp;用于实现业务对象与数据表中的字段映射 ，比较流行 Sqlalchemy / Django自带的 Django ORM / 轻量级Peewee 。<br>优势：代码更加面向对象面向对象的编程思想，代码量更少，灵活性高，方便扩充，提升开发效率。<br>◆少写(几乎不写)SQL,提升开发效率<br>◆支持多种类型的数据库,方便切换<br>◆ORM技术成熟,能解决绝大部分问题</p>
<p>缺点：拼接对象比较耗时，有一定性能影响<br>一般都是优先使用 ORM 框架提升开发效率和可维护性</p>
<p>Django框架提供了ORM来解决数据持久化问题，<br>因为Python是面向对象的编程语言，在Python程序中使用对象模型来保存数据，<br>而关系型数据库使用关系模型，用二维表来保存数据，这两种模型并不匹配。<br>使用ORM是为了实现对象模型到关系模型的<strong>双向转换</strong>，这样就不用在Python代码中书写SQL语句和游标操作，因为这些都会由ORM自动完成。</p>
<p>模型类都直接或间接继承自<code>Model</code>类，<br>模型类跟关系型数据库的二维表对应，<br>模型对象跟表中的记录对应，<br>模型对象的属性跟表中的字段对应。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/lrucache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/lrucache/" class="post-title-link" itemprop="url">HTML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>假如空间有限怎么办，我们不可能一直向缓存塞东西，当缓存达到一定个数之后，当缓存空间不够用的时候需要一种方法剔除key，我们需要一种策略踢出一些元素，用来给新的元素腾出空间。</p>
<ul>
<li>缓存剔除（失效）策略</li>
<li>LFU(Least-Frequently-Used): 缓存污染问题(一个先前流行的缓存对象会在缓存中驻留很长时间)、(从使用次数下手把次数最少剔除掉)，</li>
<li>First in First out(FIFO)</li>
<li>Random Cache: 随机选一个删除</li>
</ul>
<h3 id="LRUCache-Least-Recently-Used-替换掉最近最少使用的对象"><a href="#LRUCache-Least-Recently-Used-替换掉最近最少使用的对象" class="headerlink" title="LRUCache Least-Recently-Used 替换掉最近最少使用的对象"></a>LRUCache Least-Recently-Used 替换掉最近最少使用的对象</h3><ul>
<li>(从使用的时间下手把时间长剔除掉), 实际中使用最广。cpu缓存淘汰和虚拟内存效果好，web应用欠佳，比如 redis 就实现了这个策略，</li>
<li>LRU通过使用一个循环双端队列不断把最新访问的 Key 放到表头，就是把最新访问的放到最前(右边)，把最远的访问保持在尾部(左边)，把最远访问的key剔除就可以了。</li>
</ul>
<h3 id="146-LRUCache-缓存机制的实现"><a href="#146-LRUCache-缓存机制的实现" class="headerlink" title="146. LRUCache 缓存机制的实现"></a>146. LRUCache 缓存机制的实现</h3><p>   字典用来缓存，循环双端链表用来记录访问顺序</p>
<ul>
<li>利用Python 内置的 dict +collections.OderedDict(它可以记录key访问顺序) 实现</li>
<li>dict 用来当做 k/v 键值对的缓存</li>
<li>OderedDict 用来实现更新最近访问的 key</li>
</ul>
<p>要想实现一个 LRU，我们需要一种方式能够记录访问的顺序，并且每次访问之后我们要把最新使用到的元素放到最后（表示最新访问）。<br>当容量满了以后，我们踢出最早访问的元素。假如用一个链表来表示的话：</p>
<p>[1] -&gt; [2] -&gt; [3]</p>
<p>假设最后边是最后访问的，当访问到一个元素以后，我们把它放到最后。当容量满了，我们踢出第一个元素就行了。<br>一开始的想法可能是用一个链表来记录访问顺序，但是单链表有个问题就是如果访问了中间一个元素，我们需要拿掉它并且放到链表尾部。<br>而单链表无法在O(1)的时间内删除一个节点（必须要先搜索到它），但是双端链表可以，因为一个节点记录了它的前后节点，<br>只需要把要删除的节点的前后节点链接起来就行了。<br>还有个问题是如何把删除后的节点放到链表尾部，如果是循环双端链表就可以啦，我们有个 root 节点链接了首位节点，<br>只需要让 root 的前一个指向这个被删除节点，然后让之前的最后一个节点也指向它就行了。</p>
<p>使用了循环双端链表之后，我们的操作就都是 O(1) 的了。这也就是使用一个 dict 和一个 循环双端链表 实现LRU 的思路。<br>不过一般我们使用内置的 OrderedDict(原理和这个类似)就好了，要实现一个循环双端链表是一个不简单的事情，因为链表操作很容易出错。</p>
<p>补充：其实 lru 有个缺点就是额外的链表比较占用空间，如果你感兴趣的话可以看看 redis 如何实现的 lru 算法</p>
<p>运用你所掌握的数据结构，设计和实现一个 LRU (最近最少使用) 缓存机制。<br>它应该支持以下操作： 获取数据 get 和 写入数据 put 。<br>实现 LRUCache 类：</p>
<ul>
<li>LRUCache(int capacity) 以正整数作为容量&nbsp;capacity 初始化 LRU 缓存</li>
<li>获取数据 get(key) - 如果关键字 (key) 存在于缓存中，则获取关键字的值（总是正数），否则返回 -1。</li>
<li>写入数据 put(key, value) - 如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字/值」。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值，从而为新的数据值留出空间。<br>进阶:<br>你是否可以在 O(1) 时间复杂度内完成这两种操作？</li>
</ul>
<p>示例：</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">输入</span><br><span class="line">[<span class="string">"LRUCache"</span>, <span class="string">"put"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"get"</span>, <span class="string">"get"</span>]</span><br><span class="line">[[<span class="number">2</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">1</span>], [<span class="number">3</span>, <span class="number">3</span>], [<span class="number">2</span>], [<span class="number">4</span>, <span class="number">4</span>], [<span class="number">1</span>], [<span class="number">3</span>], [<span class="number">4</span>]]</span><br><span class="line">输出</span><br><span class="line">[<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="literal">null</span>, <span class="number">-1</span>, <span class="literal">null</span>, <span class="number">-1</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">解释</span><br><span class="line">LRUCache lRUCache = new LRUCache(<span class="number">2</span>);</span><br><span class="line">lRUCache.put(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 缓存是 {1=1}</span></span><br><span class="line">lRUCache.put(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// 缓存是 {1=1, 2=2}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">1</span>);    <span class="comment">// 返回 1</span></span><br><span class="line">lRUCache.put(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">2</span>);    <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">lRUCache.put(<span class="number">4</span>, <span class="number">4</span>); <span class="comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">1</span>);    <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">3</span>);    <span class="comment">// 返回 3</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">4</span>);    <span class="comment">// 返回 4</span></span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/lru-cache</span></span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br><span class="line"></span><br><span class="line">LRUCache cache = new LRUCache( <span class="number">2</span> <span class="comment">/* 缓存容量 */</span> );</span><br><span class="line"></span><br><span class="line">cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">cache.put(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">1</span>); <span class="comment">// 返回 1</span></span><br><span class="line">cache.put(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// 该操作会使得关键字 2 作废</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">2</span>); <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.put(<span class="number">4</span>, <span class="number">4</span>); <span class="comment">// 该操作会使得关键字 1 作废</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">1</span>); <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">3</span>); <span class="comment">// 返回 3</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>():</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, capacity=<span class="number">128</span></span>):</span> </span><br><span class="line">        <span class="comment"># 参数capacity表示容量,允许128个key/value存在</span></span><br><span class="line">        self.od = OrderedDict() </span><br><span class="line">        self.capacity = capacity  </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key</span>):</span> <span class="comment"># 每次访问更新最新使用的 key</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.od: </span><br><span class="line">            val = self.od[key]  <span class="comment"># 取出key对应value值</span></span><br><span class="line">            <span class="comment"># 把key放到最尾部，就是最近访问的放到最右边</span></span><br><span class="line">            self.od.move_to_end(key) </span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, key, value</span>):</span> <span class="comment"># 更新key/value的值</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.od:</span><br><span class="line">            <span class="keyword">del</span> self.od[key] <span class="comment"># 删除</span></span><br><span class="line">            self.od[key] = value  <span class="comment"># 重新赋值，跟新key到表头</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># insert</span></span><br><span class="line">            self.od[key] = value</span><br><span class="line">            <span class="comment"># 判断当前容量是否已经满了</span></span><br><span class="line">            <span class="keyword">if</span> len(self.od) &gt; self.capacity:</span><br><span class="line">                self.od.popitem(last=<span class="literal">False</span>) <span class="comment"># 把最早的key删除</span></span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, key=None, value=None</span>):</span></span><br><span class="line">        self.key = key</span><br><span class="line">        self.value = value</span><br><span class="line">        self.prev = <span class="literal">None</span></span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, capacity: int</span>):</span></span><br><span class="line">        self.capacity = capacity</span><br><span class="line">        self.hashmap = {}  <span class="comment"># 集合</span></span><br><span class="line">        <span class="comment"># 新建两个节点 head 和 tail</span></span><br><span class="line">        self.head = ListNode()</span><br><span class="line">        self.tail = ListNode()</span><br><span class="line">        <span class="comment"># 初始化链表为 head &lt;-&gt; tail</span></span><br><span class="line">        self.head.next = self.tail</span><br><span class="line">        self.tail.prev = self.head</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 因为get与put操作都可能需要将双向链表中的某个节点移到末尾，所以定义一个方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_node_to_tail</span>(<span class="params">self, key</span>):</span></span><br><span class="line">        <span class="comment"># 先将哈希表key指向的节点拎出来，为了简洁起名node</span></span><br><span class="line">        <span class="comment">#      hashmap[key]                               hashmap[key]</span></span><br><span class="line">        <span class="comment">#           |                                          |</span></span><br><span class="line">        <span class="comment">#           V              --&gt;                         V</span></span><br><span class="line">        <span class="comment"># prev &lt;-&gt; node &lt;-&gt; next         pre &lt;-&gt; next   ...   node</span></span><br><span class="line">        node = self.hashmap[key]</span><br><span class="line">        node.prev.next = node.next</span><br><span class="line">        node.next.prev = node.prev</span><br><span class="line">        <span class="comment"># 之后将node插入到尾节点前</span></span><br><span class="line">        <span class="comment">#                 hashmap[key]                 hashmap[key]</span></span><br><span class="line">        <span class="comment">#                      |                            |</span></span><br><span class="line">        <span class="comment">#                      V        --&gt;                 V</span></span><br><span class="line">        <span class="comment"># prev &lt;-&gt; tail  ...  node                prev &lt;-&gt; node &lt;-&gt; tail</span></span><br><span class="line">        node.prev = self.tail.prev</span><br><span class="line">        node.next = self.tail</span><br><span class="line">        self.tail.prev.next = node</span><br><span class="line">        self.tail.prev = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key: int</span>) -&gt; int:</span></span><br><span class="line">        res = self.hashmap.get(key, <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">if</span> res == <span class="number">-1</span>:</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果已经在链表中了久把它移到末尾（变成最新访问的）</span></span><br><span class="line">            self.move_node_to_tail(key)</span><br><span class="line">            <span class="keyword">return</span> res.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, key: int, value: int</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.hashmap:</span><br><span class="line">            <span class="comment"># 如果key本身已经在哈希表中了就不需要在链表中加入新的节点</span></span><br><span class="line">            <span class="comment"># 但是需要更新字典该值对应节点的value</span></span><br><span class="line">            self.hashmap[key].value = value</span><br><span class="line">            <span class="comment"># 之后将该节点移到末尾</span></span><br><span class="line">            self.move_node_to_tail(key)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> len(self.hashmap) == self.capacity:</span><br><span class="line">                <span class="comment"># 去掉哈希表对应项</span></span><br><span class="line">                self.hashmap.pop(self.head.next.key)</span><br><span class="line">                <span class="comment"># 去掉最久没有被访问过的节点，即头节点之后的节点</span></span><br><span class="line">                self.head.next = self.head.next.next</span><br><span class="line">                self.head.next.prev = self.head</span><br><span class="line">            <span class="comment"># 如果不在的话就插入到尾节点前</span></span><br><span class="line">            new = ListNode(key, value)</span><br><span class="line">            self.hashmap[key] = new</span><br><span class="line">            new.prev = self.tail.prev</span><br><span class="line">            new.next = self.tail</span><br><span class="line">            self.tail.prev.next = new</span><br><span class="line">            self.tail.prev = new</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    cache = LRUCache(<span class="number">2</span>)</span><br><span class="line">    cache.put(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    cache.put(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    print(cache.get(<span class="number">1</span>))</span><br><span class="line">    cache.put(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">    print(cache.get(<span class="number">2</span>))</span><br><span class="line">    cache.put(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">    print(cache.get(<span class="number">1</span>))</span><br><span class="line">    print(cache.get(<span class="number">3</span>))</span><br><span class="line">    print(cache.get(<span class="number">4</span>))</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-web-kuang-jia-django-vs-flask-vs-tornado-dui-bi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-web-kuang-jia-django-vs-flask-vs-tornado-dui-bi/" class="post-title-link" itemprop="url">Python web框架 Django vs Flask vs Tornado 对比</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-22 12:24:03" itemprop="dateModified" datetime="2021-04-22T12:24:03Z">2021-04-22</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Django vs Flask vs Tornado</p>
<p>Django：重 非常完善大而全框架，内置ORM、Admin等组件，第三方插件较多。</p>
<p>Flask：轻 微框架，插件机制，比较灵活。很多中小公司和个人开发者都非常喜欢使用Flask。Flask优点很多人喜欢它比较灵活，可以使用各种方式组织代码，但是它也有缺点就是过于灵活的话没有统一代码结构很有可能对维护造成一定的困难。所以一些公司它会使用 cookiecutter-flask 模板生成工具来生成统一的项目模板，这样在维护的时候也会比较方便一些，代码格式都比较一致，组织也比较一致。(cookiecutter-flask生成统一的项目模板)</p>
<p>Tornado：异步支持的微框架和异步网络库，它既是是一个web微框架同时也是一个异步网络库，所以也可以用来编写web应用。但是它有一个比较大缺点就是轮子比较少，相关的一些支持和第三方插件非常少。所以有时候写起来需要造很多轮子就会有很多额外的工作，它的生产力可能就不会像Django和Flask那么高。</p>
<p>很多公司其实并不会使用太多的框架混用，因为这样维护成本就比较高，不同的项目都使用的不同框架，所以一般都会有统一的框架或者模板生成。</p>
<p>Web 框架的组成<br>中间件(middleware)，用于请求之前和请求之后做一些处理 ( 比如记录日志等 )。比如在很多web框架里面看到关于日志记录的中间件，请求完成之后需要记录一些日志，这样方便后面分析问题。还有很多在请求之前去做的，比如校验一个用户的合法性跟一个用户的身份，假如这个用户不合法就没有比较往下去执行了。很多框架提供这个功能，比如before_request 和 after_request分别去做什么工作。</p>
<p>web框架常用组件：路由，表单验证、权限认证、ORM、视图函数、模板渲染、序列化。其实看一个请求的生命周期大概就知道用到哪些组件。路由：把url跟所用到的哪个handle来去做映射就是这个url用哪一块 逻辑来去处理。一般拿到参数之后做一个表单的验证，客户端的输入一般都不可信，需要对外界的输入参数来去做一个验证，还有关于用户权限的验证。接下来就是调用ORM框架跟数据库做一个交互，还有视图函数的实现。最后就是使用一些模板渲染框架或者序列化的库来去把数据返回。一个官方实现的web 框架实际上还有很多地方无法满足真正业务需求的，所以还需要大量的第三方插件。</p>
<p>第三方插件：Redis链接，RESTful支持等。如：redispy跟Redis做一个链接；前后端分离之后很多后端服务只用来提供数据，所以很多框架提供Restful的一个实现。</p>
<p>这三块基本上就是一个web 框架的基本组成，现有的大部分框架都实现了部分或者这里面的所用的功能。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-chuan-can-fang-shi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-chuan-can-fang-shi/" class="post-title-link" itemprop="url">Python 传参方式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-02 03:30:04" itemprop="dateModified" datetime="2021-07-02T03:30:04Z">2021-07-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Python如何传递参数-对引用类型参数（Reference-Data-Type-Arguments）"><a href="#Python如何传递参数-对引用类型参数（Reference-Data-Type-Arguments）" class="headerlink" title="Python如何传递参数  对引用类型参数（Reference Data Type Arguments）"></a>Python如何传递参数  对引用类型参数（Reference Data Type Arguments）</h3><ul>
<li><p>唯一支持的参数传递是共享传参 Call by Object (Reference or Sharing)</p>
</li>
<li><p>函数形参获得实参中各个引用的副本，</p>
</li>
<li><p>传递参数的时候实际是通过对象引用进行传递的，根据传递变量是可变还是不可变对象，然后得到两种不同结果。</p>
</li>
<li><p>在C语言中，变量不止是个名字，它是字节集合并真实存在于内存某个位置上。</p>
</li>
<li><p>在Python中，变量名和对象是划分开的，变量名永远没有任何关联的类型信息，<br>类型是和对象关联的，而不存在于变量名中，<br>变量只是引用了不同类型的对象、指向对象的标签。<br>从变量到对象的连接，在 python 和 java 里没有实际的 指针概念，称之为引用。<br>在内部，变量事实上是到对象内存空间的一个指针，而且指向的对象可以随着程序赋值语句而不断变化。</p>
</li>
</ul>
<ul>
<li>赋值：对象的引用（绑定），比浅拷贝还浅拷贝的，无论是不是可变对象，修改一个就会改变另一个。<ul>
<li>将一个对象的地址赋值给一个变量，让变量指向该地址（旧瓶装旧酒），a和b是这个对象的两个引用（reference）</li>
<li><code>cur = cur.next</code>是将 cur.next 赋给cur，cur 指向 cur.next 的内存，相当于指针后移<br><code>cur.next = cur</code>是将 cur 赋给cur.next，cur.next 指向 cur 的内存，相当于形成两个节点的闭环。</li>
</ul>
<ul>
<li>每个变量在使用前都必须赋值，一个变量名当第一次被赋值一个对象的同时变量也就创建了，这个对象的类型是在运行的过程中自动决定的，<br>而不是通过代码声明的，这意味着没有必要事先声明变量，不能隐式转换成另一个类型，<br>而当新的赋值表达式出现时，他会马上被当前新引用的对象所代替。这就是python所谓的动态类型机制。</li>
</ul>
</li>
</ul>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">888</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">666</span>]]</span><br><span class="line">b = a</span><br><span class="line">print(b)  <span class="comment"># [888, 2, 3, [4, 666]]</span></span><br><span class="line">b[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">print(b)  <span class="comment"># [1, 2, 3, [4, 666]]</span></span><br><span class="line">print(a)  <span class="comment"># [1, 2, 3, [4, 666]]</span></span><br><span class="line">b[<span class="number">3</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">print(b)  <span class="comment"># [1, 2, 3, [1, 666]]</span></span><br><span class="line">print(b)  <span class="comment"># [1, 2, 3, [1, 666]]</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>每一个对象都包含了两个头部信息，<ul>
<li>一个是类型标志符，标识这个对象的类型，</li>
<li>以及一个引用的计数器，用来表示这个对象被多少个变量名所引用，如果此时没有变量引用他，那么就可以回收这个对象。</li>
</ul>
</li>
</ul>
<p>（1）可变(mutable)与类型作为参数，可变对象 list / set / dict ，形参和实参都是指向同一个对象，引用（内存地址）传递，增删改可变对象不开辟新的空间直接可以在内存中修改它，改变了源对象。</p>
<p>执行 l.append(0) ，<br>把 0 列表对象在“方法传参”中传递所在的内存地址（引用）加到 l 中 ；<br>再执行 l.append(0) ，<br>不断地变长变短、变长变短的 l 变量所指向的列表在整个过程中只有一份，指向的是同一块内存地址。<br>l 里面是这样的：[0 在内存中的地址, 0 在内存中的地址]</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f_list</span>(<span class="params">l</span>):</span></span><br><span class="line">    l.append(<span class="number">0</span>)</span><br><span class="line">    print(l)</span><br><span class="line">    print(id(l))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ll = []  <span class="comment"># list 是可变对象</span></span><br><span class="line">print(id(ll))</span><br><span class="line">f_list(ll)</span><br><span class="line">f_list(ll)</span><br><span class="line"></span><br><span class="line">ll.pop()</span><br><span class="line">print(ll)</span><br><span class="line">print(id(ll))</span><br><span class="line"><span class="comment"># 输出结果：</span></span><br><span class="line"><span class="comment"># 1778485960384</span></span><br><span class="line"><span class="comment"># [0]</span></span><br><span class="line"><span class="comment"># 1778485960384</span></span><br><span class="line"><span class="comment"># [0, 0]</span></span><br><span class="line"><span class="comment"># 1778485960384</span></span><br><span class="line"><span class="comment"># [0]</span></span><br><span class="line"><span class="comment"># 1778485960384</span></span><br></pre></td></tr></tbody></table></figure>

<p>（2）不可变类(immutable)对象型作为参数  bool / int / float / tuple / str / frozenset(固定集合) 指向相同地址<br>值传递，拷贝复制值，实际上的变量有多份，</p>
<p>创建后不可修改，你传进去，如果在函数中对参数修改（赋值）时候它会新建对象（开辟新的空间）改变内存地址，并且让你原来的形参去指定新对象，不会影响到源对象，新旧对象独立</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = a</span><br><span class="line">print(id(a))  <span class="comment"># 140728410609312</span></span><br><span class="line">print(id(b))  <span class="comment"># 140728410609312</span></span><br><span class="line">a = <span class="number">2</span></span><br><span class="line">print(b)  <span class="comment"># 1</span></span><br><span class="line">print(id(a))  <span class="comment"># 140728410609344</span></span><br><span class="line">print(id(b))  <span class="comment"># 140728410609312</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fstr</span>(<span class="params">s</span>):</span></span><br><span class="line">    s += <span class="string">'a'</span></span><br><span class="line">    print(s)</span><br><span class="line">    print(id(s))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ss = <span class="string">'hehe'</span>  <span class="comment"># str 是不可变对象</span></span><br><span class="line">print(id(ss))</span><br><span class="line">fstr(ss)</span><br><span class="line">print(id(ss))</span><br><span class="line">print(ss)</span><br><span class="line">fstr(ss)</span><br><span class="line">print(id(ss))</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2361587561840</span></span><br><span class="line">hehea</span><br><span class="line"><span class="number">2361587572848</span></span><br><span class="line"><span class="number">2361587561840</span></span><br><span class="line">hehe</span><br><span class="line">hehea</span><br><span class="line"><span class="number">2361587572848</span></span><br><span class="line"><span class="number">2361587561840</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="一个小例题，请问这段代码会输出什么结果？"><a href="#一个小例题，请问这段代码会输出什么结果？" class="headerlink" title="一个小例题，请问这段代码会输出什么结果？"></a>一个小例题，请问这段代码会输出什么结果？</h3><p>提示：可变对象的一个错觉以为改变原来的值。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clear_list</span>(<span class="params">l</span>):</span></span><br><span class="line">    l = []  <span class="comment"># 形参指向一个新的值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ll = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]  <span class="comment"># 可变对象</span></span><br><span class="line">print(id(ll))  <span class="comment"># 1522108825792</span></span><br><span class="line">clear_list(ll)</span><br><span class="line">print(ll)</span><br><span class="line"><span class="comment"># [1, 2, 3]并不是[]</span></span><br><span class="line">print(id(ll))  <span class="comment"># 1522108825792</span></span><br></pre></td></tr></tbody></table></figure>

<p>首先在一块内存中定义一个列表[1, 2, 3], 定义变量时候 ll 变量指向这块内存，<br>调用函数传入 ll 实参，此时 l 形参也指向和 ll一样这块内存。<br>这时候又在一块内存中定义空列表[]，并赋值给 l ，然后 l 指向就变了指向了空列表这块内存。<br>列表[1, 2, 3]并没有被操作。ll 指向没有改变所以值也就不变。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_list</span>(<span class="params">course: List[str]</span>):</span></span><br><span class="line">    <span class="comment"># 修改列表里面的元素，引用传递</span></span><br><span class="line">    course[<span class="number">0</span>] = <span class="string">"bobby"</span></span><br><span class="line">    print(course)</span><br><span class="line">    course =[]</span><br><span class="line"></span><br><span class="line">courses = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>]  <span class="comment"># 可变对象</span></span><br><span class="line">print_list(courses)</span><br><span class="line"><span class="comment"># ['bobby', 'scrapy', 'tornado', 'python', 'asyncio']</span></span><br><span class="line">print(courses)</span><br><span class="line"><span class="comment"># ['bobby', 'scrapy', 'tornado', 'python', 'asyncio'] 第一个元素变了</span></span><br><span class="line">print(type(courses))  <span class="comment"># &lt;class 'list'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clear_list</span>(<span class="params">l</span>):</span></span><br><span class="line">    l = []  <span class="comment"># 修改形参，列表指向一个新的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引用传递</span></span><br><span class="line">courses = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>]  <span class="comment"># 可变对象</span></span><br><span class="line">print(id(courses))  <span class="comment"># 1522108825792</span></span><br><span class="line">clear_list(courses)</span><br><span class="line">print(courses)</span><br><span class="line"><span class="comment"># ['django', 'scrapy', 'tornado', 'python', 'asyncio']并不是[]</span></span><br><span class="line">print(id(courses))  <span class="comment"># 1522108825792</span></span><br><span class="line"></span><br><span class="line">courses = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>]</span><br><span class="line">print_list(deepcopy(courses))</span><br><span class="line"><span class="comment"># ['bobby', 'scrapy', 'tornado', 'python', 'asyncio']</span></span><br><span class="line">print(courses)</span><br><span class="line"><span class="comment"># ['django', 'scrapy', 'tornado', 'python', 'asyncio'] 第一个元素没变</span></span><br><span class="line">print(type(courses))  <span class="comment"># &lt;class 'list'&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="Python可变参数作为默认参数，默认参数只计算一次"><a href="#Python可变参数作为默认参数，默认参数只计算一次" class="headerlink" title="Python可变参数作为默认参数，默认参数只计算一次"></a>Python可变参数作为默认参数，默认参数只计算一次</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flist</span>(<span class="params">l=[<span class="number">1</span>]</span>):</span>  <span class="comment"># 列表[1]是可变对象</span></span><br><span class="line">    l.append(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'l = '</span>, l)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flist()</span><br><span class="line">flist()</span><br><span class="line"><span class="comment"># 输出结果：</span></span><br><span class="line"><span class="comment"># [1, 1]</span></span><br><span class="line"><span class="comment"># [1, 1, 1]</span></span><br></pre></td></tr></tbody></table></figure>

<p>先定义一个函数，传入一个list，添加一个END再返回：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_end</span>(<span class="params">L=[]</span>):</span></span><br><span class="line">    L.append(<span class="string">'END'</span>)</span><br><span class="line">    <span class="keyword">return</span> L</span><br></pre></td></tr></tbody></table></figure>

<p>当你正常调用时，结果似乎不错：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'END'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end([<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'z'</span>])</span><br><span class="line">[<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'z'</span>, <span class="string">'END'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>当你使用默认参数调用时，一开始结果也是对的：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>但是，再次调用add_end()时，结果就不对了：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>, <span class="string">'END'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>, <span class="string">'END'</span>, <span class="string">'END'</span>]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Python不可变参数作为默认参数，无论调用多少次，默认参数的内容不变，一直是函数定义时的初始值"><a href="#Python不可变参数作为默认参数，无论调用多少次，默认参数的内容不变，一直是函数定义时的初始值" class="headerlink" title="Python不可变参数作为默认参数，无论调用多少次，默认参数的内容不变，一直是函数定义时的初始值"></a>Python不可变参数作为默认参数，无论调用多少次，默认参数的内容不变，一直是函数定义时的初始值</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用None这个不变对象来实现，</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_end</span>(<span class="params">L=None</span>):</span></span><br><span class="line">    <span class="keyword">if</span> L <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        L = []</span><br><span class="line">    L.append(<span class="string">'END'</span>)</span><br><span class="line">    print(L)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_end()  <span class="comment"># ['END']</span></span><br><span class="line">add_end()  <span class="comment"># ['END']</span></span><br></pre></td></tr></tbody></table></figure>

<p>为什么要设计str、None这样的不变对象呢？<br>因为不变对象一旦创建，<br>对象内部的数据就不能修改，这样就减少了由于修改数据导致的错误。<br>多任务环境下同时读取对象不需要加锁，同时读一点问题都没有。</p>
<p>将列表中各个值快速赋值给多个变量</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">a, b, c, d = list1</span><br><span class="line">print(a, b, c, d)  <span class="comment"># 1 2 3 4</span></span><br><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">a, b, c, d = list1</span><br><span class="line"><span class="comment"># ValueError: not enough values to unpack (expected 4, got 3)</span></span><br><span class="line"></span><br><span class="line">tuple1 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">a, b, c, d = tuple1</span><br><span class="line">print(a, b, c, d)  <span class="comment"># 1 2 3 4</span></span><br></pre></td></tr></tbody></table></figure>

<p>方式只有当左边的变量个数等于列表长度，否则会抛出ValueError.</p>
<p>那么怎么样处理才能使得我们的可变对象在经过函数后不改变呢<br>网上看到的一个方法是在函数中新建对象，然后将传递的参数赋给他。</p>
<p>对比:</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 处理多个银行账户的余额信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addInterest</span>(<span class="params">balances, rates</span>):</span></span><br><span class="line">print()</span><br><span class="line">print(<span class="string">"第二处"</span>, id(balances))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(balances)):</span><br><span class="line">        balances[i]= balances[i]*(<span class="number">1</span>+rates)</span><br><span class="line">        print()</span><br><span class="line">        print(<span class="string">"第三处"</span>,id(balances))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    amounts = [<span class="number">1000</span>,<span class="number">105</span>,<span class="number">3500</span>,<span class="number">739</span>]</span><br><span class="line">    print()</span><br><span class="line">    print(<span class="string">"第一处"</span>,id(amounts))</span><br><span class="line">    rate = <span class="number">0.05</span></span><br><span class="line">    addInterest(amounts, rate)</span><br><span class="line">    print()</span><br><span class="line">    print(amounts)</span><br><span class="line">    print()</span><br><span class="line">    print(<span class="string">"第四处"</span>,id(amounts))</span><br><span class="line">test()</span><br><span class="line"><span class="comment">#结果</span></span><br><span class="line">第一处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">第二处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">第三处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">第三处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">第三处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">第三处 <span class="number">41203656</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1050.0</span>, <span class="number">110.25</span>, <span class="number">3675.0</span>, <span class="number">775.95</span>]</span><br><span class="line"></span><br><span class="line">第四处 <span class="number">41203656</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算单个银行账户余额</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addinterest</span>(<span class="params">balance, rate</span>):</span></span><br><span class="line">   print(<span class="string">"第二处"</span>, id(balance))</span><br><span class="line">   newBalance = balance * (<span class="number">1</span> + rate)</span><br><span class="line">   print()</span><br><span class="line">   print(<span class="string">"第三处"</span>, id(balance))</span><br><span class="line">   print()</span><br><span class="line">   print(<span class="string">"第四处"</span>, id(newBalance))</span><br><span class="line">   <span class="keyword">return</span> newBalance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">   amount = <span class="number">1000</span></span><br><span class="line">   print(<span class="string">"第一处"</span>, id(amount))</span><br><span class="line">   print()</span><br><span class="line">   rate = <span class="number">0.05</span></span><br><span class="line">   amount = addinterest(amount, rate)</span><br><span class="line">   print()</span><br><span class="line">   print(<span class="string">"第五处"</span>, id(amount))</span><br><span class="line">   print()</span><br><span class="line">   print(amount)</span><br><span class="line">   print(<span class="string">"第六处"</span>, id(amount))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"><span class="comment">#结果</span></span><br><span class="line">第一处 <span class="number">33533648</span></span><br><span class="line"></span><br><span class="line">第二处 <span class="number">33533648</span></span><br><span class="line"></span><br><span class="line">第三处 <span class="number">33533648</span></span><br><span class="line"></span><br><span class="line">第四处 <span class="number">33563344</span></span><br><span class="line"></span><br><span class="line">第五处 <span class="number">33563344</span></span><br><span class="line"></span><br><span class="line"><span class="number">1050.0</span></span><br><span class="line">第六处 <span class="number">33563344</span></span><br></pre></td></tr></tbody></table></figure>

<p>可以看到第一种情况,id都是一样的,而第二种情况新建了对象,id是变化的了<br>得出结论:对于可变对象作为函数参数，且参数不指向其他对象时，相当于引用传递；否则，若参数指向其他对象，则对参数变量的操作并不影响原变量的对象值</p>
<p>对于不可变对象作为函数参数，相当于C系语言的值传递；<br>对于可变对象作为函数参数，且参数不指向其他对象时，相当于C系语言的引用传递。<br>对于可变对象作为函数参数，参数指向其他对象，对参数变量的操作不影响原变量的值。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-dan-yuan-ce-shi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-dan-yuan-ce-shi/" class="post-title-link" itemprop="url">Python单元测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="单元测试-Unit-Testing"><a href="#单元测试-Unit-Testing" class="headerlink" title="单元测试 Unit Testing"></a>单元测试 Unit Testing</h3><ul>
<li>针对程序模块进行正确的验证</li>
<li>一个函数，一个类进行验证</li>
<li>自底向上保证程序正确性</li>
</ul>
<p>是针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在过程化编程中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。单元测试粒度最小，一般由开发人员采用白盒方式来测试，主要测试单元是否符合设计。单元测试的主要过程仍是通过给定的输入，判断得到的结果是否符合预期的代码结果测试的过程。</p>
<h3 id="为什么要写单元测试"><a href="#为什么要写单元测试" class="headerlink" title="为什么要写单元测试"></a>为什么要写单元测试</h3><p>   三无代码不可取（无文档、无注释、无单侧）</p>
<ul>
<li>保证代码逻辑的正确性（甚至有些采用测试驱动开发TTD[Test-Driven Development]最大的好处就是确保一个程序模块的行为符合我们设计的测试用例。）</li>
<li>单测影响设计，易测的代码往往是高内聚低耦合的（各模块的内聚程度越高，模块间的耦合程度就越低）</li>
<li>回归测试，防止改一处整个服务不可用</li>
</ul>
<ul>
<li>确保代码质量</li>
<li>改善代码设计，难以测试的代码一般是设计不够简洁的代码。</li>
<li>保证重构不会引入新问题，以函数为单位进行重构的时候，只需要重新跑测试就基本可以保证重构没引入新问题</li>
<li>通过单元测试，可以增强代码的执行与预期一致，增强对于代码的自信。</li>
<li>在测试驱动编程的理念中，首先程序员要编写测试程序，然后编写可以通过测试的程序。测试程序就是程序的需求说明，它能够帮助程序员在开发程序时，不偏离需求。<br>单元测试最大作用 例如 ：当你逻辑修改了，只需要重新跑一下测试就知道有没有把之前的逻辑给改坏。</li>
</ul>
<h3 id="单元测试相关的库"><a href="#单元测试相关的库" class="headerlink" title="单元测试相关的库"></a>单元测试相关的库</h3><ul>
<li>nose / pytest 较为常见 终端输入<code>pytest xxx.py</code></li>
<li>mock 模块用来模拟替换网络请求等，一般在测试的时候是不需要真的发送请求，<br>比如request() 直接使用 mock() 替换,直接写死,测试代码最后是”纯净的”,要像什么网络请求都考虑进来</li>
<li>coverage 统计测试覆盖率</li>
</ul>
<h3 id="如何设计测试用例：（等价类划分）"><a href="#如何设计测试用例：（等价类划分）" class="headerlink" title="如何设计测试用例：（等价类划分）"></a>如何设计测试用例：（等价类划分）</h3><ul>
<li>正常值功能测试</li>
<li>边界值（比如最大最小，最左最右值）boundary/edge case</li>
<li>异常值（比如 None，空值，非法值）<br>当然我们也不用做的非常细致，要不然写测试是一件非常繁琐累人的事情，<br>甚至有时候为了测试而测试，只是为了让单测覆盖率好看点。<br>当然如果是web应用用户输入，我们要假设所有的参数都是不可信的。<br>但是很多内部调用的函数我们基于约定来编程，如果你瞎传参数，那就是调用者的责任了。<br>①首先需要你安装pytest测试库<br>pytest 是 python的第三方测试框架,是基于 unittest 的扩展框架,比unittest更简洁,更高效。<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> pip install pytest</span></span><br></pre></td></tr></tbody></table></figure>
②用 pytest 命令运行文件名，它会自动发现所有test开头的函数并去执行里面的测试用例<br><code>pytest file_address</code>而不是<code>python file_address</code></li>
</ul>
<p><code>assert </code></p>
<p>以下是单元测试示例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span>(<span class="params">array, target</span>):</span>  <span class="comment"># 二分查找</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    beg, end = <span class="number">0</span>, len(array)</span><br><span class="line">    <span class="keyword">while</span> beg &lt; end:</span><br><span class="line">        mid = beg + (end - beg) // <span class="number">2</span>  <span class="comment"># py3取整操作</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> array[mid] &gt; target:</span><br><span class="line">            end = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            beg = mid + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    <span class="string">'''binary_search()函数的单元测试用例代码'''</span></span><br><span class="line">    <span class="comment"># 正常值， 包含有和无两种结果</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">1</span>) == <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>) == <span class="number">-1</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">-1</span>) == <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 边界值测试</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">0</span>) == <span class="number">0</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">5</span>) == <span class="number">5</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>], <span class="number">0</span>) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 异常值测试</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([], <span class="number">1</span>) == <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python3-he-python2-chai-yi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python3-he-python2-chai-yi/" class="post-title-link" itemprop="url">Python3和python2差异</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-29 08:53:17" itemprop="dateModified" datetime="2021-06-29T08:53:17Z">2021-06-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Python关键字</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'async'</span>, <span class="keyword">finally</span><span class="string">', '</span>fo<span class="string">r', '</span><span class="keyword">from</span></span><br><span class="line"><span class="string">'await'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elifal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pas'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>python2中是关键字。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2的打印 print</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">'b'</span></span><br><span class="line">b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>) <span class="comment"># 打印的是a和b合并成tuple对象</span></span><br><span class="line">(<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>python3成为函数就支持传入不同参数，比如不同换行符end或者分隔符sep</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3的打印 print()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'b'</span>)</span><br><span class="line">b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>,sep=<span class="string">'|'</span> ) <span class="comment"># sep:分隔符，end:换行符</span></span><br><span class="line">a|b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line">a b</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print</span>(<span class="params">self, *args, sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=None</span>):</span> <span class="comment"># known special case of print</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Prints the values to a stream, or to sys.stdout by default.</span></span><br><span class="line"><span class="string">    Optional keyword arguments:</span></span><br><span class="line"><span class="string">    file:  a file-like object (stream); defaults to the current sys.stdout.</span></span><br><span class="line"><span class="string">    sep:   string inserted between values, default a space.</span></span><br><span class="line"><span class="string">    end:   string appended after the last value, default a newline.</span></span><br><span class="line"><span class="string">    flush: whether to forcibly flush the stream.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>

<p>参数<code>end</code>是默认换行</p>
<h3 id="除法变化"><a href="#除法变化" class="headerlink" title="除法变化"></a>除法变化</h3><p>Python3除号返回浮点数，<br>Python2中直接截断并且返回整数，像是C语言的除法</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中除法</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span>/<span class="number">2</span></span><br><span class="line"><span class="number">2</span>  <span class="comment"># 会做整数截断，只保留整数值 </span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3中除法</span></span><br><span class="line">print(<span class="number">5</span>/<span class="number">2</span>)  <span class="comment"># 2.5  float的值</span></span><br><span class="line">print(<span class="number">5</span>//<span class="number">2</span>)  <span class="comment"># 2 实现python2一样除法</span></span><br><span class="line">print(<span class="number">-5</span>//<span class="number">2</span>)  <span class="comment"># -3 实现python2一样除法</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="类型注解-type-hint"><a href="#类型注解-type-hint" class="headerlink" title="类型注解 type hint"></a>类型注解 type hint</h3><ul>
<li>给变量添加类型提示</li>
<li>IDE可以根据它检查类型是否一致，pycharm是支持这种提示的</li>
<li>解释器运行时，并不会做检查，不会实际影响使用</li>
<li>损失了python本身的灵活性。</li>
</ul>
<p>Once compiled, a function’s annotations are available via the function’s <strong>annotations</strong> attribute.<br>This attribute is a mutable dictionary,s<br>There is a special key in the <strong>annotations</strong> mapping, “return”.<br>This key is present only if an annotation was supplied for the function’s return value.<br>如果该函数上没有注释，或者该函数是从lambda表达式创建的，则__annotations__是一个空的可变字典。<br>第一行输出中的__annotations__是函数的保留属性，保存的是函数声明中的注释内容，</p>
<p>使用dir(fucntionName)的时候，多了一个__annotations__的属性annotations：注解; 评注; 注文; 释文</p>
<p>Python 3 extends the feature by allowing you to attach metadata<br>to functions describing their parameters and return values<br>为了标注 输入参数参数和返回值的类型。<br>“-&gt;” 函数返回值的类型建议符，<br>类型建议符并非强制规定和检查，也就是说即使传入的实际参数与建议参数不符，也不会报错。<br>-&gt; str 意思即是提醒函数使用者返回值会是一个str型。<br>:后面是建议传入的参数类型，</p>
<p>动态语言不需要声明变量类型，这种做法在很多人眼里是不好 不好维护的代名词</p>
<h3 id="变量类型的声明"><a href="#变量类型的声明" class="headerlink" title="变量类型的声明"></a>变量类型的声明</h3><p>一般情况下我们会通过变量名来隐含的说明该变量的类型</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">age: int = <span class="number">18</span>  <span class="comment">#说明该类型是int类型</span></span><br><span class="line">print(age)</span><br><span class="line"></span><br><span class="line">name: str = <span class="string">"bobby"</span></span><br><span class="line">sex: bool = <span class="literal">True</span></span><br><span class="line">weight: float = <span class="number">75</span></span><br><span class="line">x: bytes = <span class="string">b"test"</span></span><br><span class="line"></span><br><span class="line">age = <span class="string">"18"</span></span><br><span class="line">print(age)</span><br></pre></td></tr></tbody></table></figure>

<p>复杂数据类型的申明</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">courses: list = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>]  <span class="comment">#有问题，不能指定里面的类型</span></span><br></pre></td></tr></tbody></table></figure>

<p>指定里面的类型</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List, Set, Dict, Tuple</span><br><span class="line"></span><br><span class="line">courses: List[str] = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>]</span><br><span class="line">courses.append(<span class="string">"asyncio"</span>)</span><br><span class="line">courses.append(<span class="number">1</span>)</span><br><span class="line">print(courses)</span><br><span class="line"></span><br><span class="line">user_info: Dict[str, float] = {<span class="string">"bobby"</span>: <span class="number">75.2</span>}</span><br><span class="line">names: Tuple[int] = (<span class="number">1</span>, )  <span class="comment"># 里面一个int</span></span><br><span class="line">names: Tuple[int, ...] = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment"># 里面多个int</span></span><br><span class="line">name: str</span><br><span class="line">name = <span class="string">"bobby"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="函数类型的声明"><a href="#函数类型的声明" class="headerlink" title="函数类型的声明"></a>函数类型的声明</h3><p>使用第三方工具mypy实现类型检查，消除一些代码错误</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greeting</span>(<span class="params">name: str</span>) -&gt; str:</span></span><br><span class="line">    <span class="comment"># name:str 表示输入的name的值是str类型, -&gt; st 表示返回值是str类型</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello '</span> + name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(greeting.__annotations__)</span><br><span class="line"><span class="comment"># {'name': &lt;class 'str'&gt;, 'return': &lt;class 'str'&gt;}</span></span><br><span class="line">print(get_type_hints(greeting))</span><br><span class="line"><span class="comment"># {'name': &lt;class 'str'&gt;, 'return': &lt;class 'str'&gt;}</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">a: <span class="string">'x'</span>, b: <span class="number">5</span> + <span class="number">6</span>, c: list</span>) -&gt; max(2, 9):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(foo.__annotations__)</span><br><span class="line"><span class="comment"># {'a': 'x', 'b': 11, 'c': &lt;class 'list'&gt;, 'return': 9}</span></span><br><span class="line">print(get_type_hints(foo))  <span class="comment"># NameError: name 'x' is not defined</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="手动实现强制检查函数的参数类型"><a href="#手动实现强制检查函数的参数类型" class="headerlink" title="手动实现强制检查函数的参数类型"></a>手动实现强制检查函数的参数类型</h3><p>不和type hint 抛出错误</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a: int, b: int</span>) -&gt; int:</span></span><br><span class="line">    validate_input(add, a=a, b=b)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_input</span>(<span class="params">obj, **kwargs</span>):</span></span><br><span class="line">    hints = get_type_hints(obj)</span><br><span class="line">    <span class="keyword">for</span> para_name, para_type <span class="keyword">in</span> hints.items():</span><br><span class="line">        <span class="keyword">if</span> para_name == <span class="string">"return"</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(kwargs[para_name], para_type):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"参数：{} 类型错误，应该是：{}"</span>.format(para_name, para_type))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># 调用的时候才能发现类型问题</span></span><br><span class="line">    print(add(<span class="string">"bobby: "</span>, <span class="string">"18"</span>))</span><br><span class="line"><span class="comment"># raise TypeError("参数：{} 类型错误，应该是：{}".format(para_name, para_type))</span></span><br><span class="line"><span class="comment"># TypeError: 参数：a 类型错误，应该是：&lt;class 'int'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"><span class="keyword">from</span> inspect <span class="keyword">import</span> getfullargspec</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_input</span>(<span class="params">obj, **kwargs</span>):</span></span><br><span class="line">    hints = get_type_hints(obj)</span><br><span class="line">    <span class="keyword">for</span> para_name, para_type <span class="keyword">in</span> hints.items():</span><br><span class="line">        <span class="keyword">if</span> para_name == <span class="string">"return"</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(kwargs[para_name], para_type):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"参数：{} 类型错误，应该是：{}"</span>.format(para_name, para_type))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">type_check</span>(<span class="params">decorator</span>):</span></span><br><span class="line"><span class="meta">    @wraps(decorator)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapped_decorator</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        func_args = getfullargspec(decorator)[<span class="number">0</span>]</span><br><span class="line">        kwargs.update(dict(zip(func_args, args)))</span><br><span class="line"></span><br><span class="line">        validate_input(decorator, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> decorator(**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapped_decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@type_check</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a: int, b: int</span>) -&gt; int:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># 调用的时候才能发现类型问题</span></span><br><span class="line">    print(add(<span class="string">"bobby: "</span>, <span class="string">"18"</span>))</span><br><span class="line"><span class="comment"># raise TypeError("参数：{} 类型错误，应该是：{}".format(para_name, para_type))</span></span><br><span class="line"><span class="comment"># TypeError: 参数：a 类型错误，应该是：&lt;class 'int'&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">num1: int, num2: int = <span class="number">100</span></span>) -&gt; int:</span></span><br><span class="line">    sum = num1 + num2</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'-----'</span>)</span><br><span class="line">print(dir(twoSum))</span><br><span class="line"><span class="comment"># output: ['__annotations__', '__call__', '__class__', '__closure__', ... ]</span></span><br><span class="line">print(twoSum.__annotations__)</span><br><span class="line"><span class="comment"># {'num1': &lt;class 'int'&gt;, 'num2': &lt;class 'int'&gt;, 'return': &lt;class 'int'&gt;}</span></span><br><span class="line">print(twoSum(<span class="number">1</span>, <span class="number">2</span>))  <span class="comment"># 3</span></span><br><span class="line">print(twoSum(<span class="number">1</span>))  <span class="comment"># 101</span></span><br><span class="line">print(twoSum(<span class="string">'I love '</span>, <span class="string">'python'</span>))  <span class="comment"># I love python</span></span><br><span class="line"><span class="comment"># print(twoSum('python'))  # TypeError: can only concatenate str (not "int") to str</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">第二行输出是正常用法。</span></span><br><span class="line"><span class="string">第三行输出验证了：注释内容后可以跟等号"=",意思为未传入实参时，该参数获得的默认值</span></span><br><span class="line"><span class="string">第四行输出则验证了该解释说明符并非强制检查，我们传入了两个str实参，</span></span><br><span class="line"><span class="string">并不会报错，而是继续进行函数中的加法运算。</span></span><br><span class="line"><span class="string">如果传入的两个实参无法进行函数中规定的运算，则会正常报错。</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kinetic_energy</span>(<span class="params">m: <span class="string">'in KG'</span>, v: <span class="string">'in M/S'</span></span>) -&gt; 'Joules':</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> / <span class="number">2</span> * m * v ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(kinetic_energy.__annotations__)</span><br><span class="line"><span class="comment"># {'m': 'in KG', 'v': 'in M/S', 'return': 'Joules'}</span></span><br><span class="line">print(<span class="string">'{:,} {}'</span>.format(kinetic_energy(<span class="number">20</span>, <span class="number">3000</span>),</span><br><span class="line">                       kinetic_energy.__annotations__[<span class="string">'return'</span>]))</span><br><span class="line"><span class="comment"># 90,000,000.0 Joules</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Annotations are dictionaries</span></span><br><span class="line"><span class="comment"># There is a special key in the __annotations__ mapping, "return".</span></span><br><span class="line"><span class="comment"># This key is present only if an annotation was supplied for the function's return value.</span></span><br><span class="line">rd = {<span class="string">'type'</span>: float, <span class="string">'units'</span>: <span class="string">'Joules'</span>, <span class="string">'docstring'</span>: <span class="string">'Given mass and velocity returns kinetic energy in Joules'</span>}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>() -&gt; rd:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'type'</span>])</span><br><span class="line"><span class="comment"># &lt;class 'float'&gt;</span></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'units'</span>])</span><br><span class="line"><span class="comment"># 'Joules'</span></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'docstring'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 'Given mass and velocity returns kinetic energy in Joules'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># you can use function attributes to validate called values:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate</span>(<span class="params">func, locals</span>):</span></span><br><span class="line">    <span class="keyword">for</span> var, test <span class="keyword">in</span> func.__annotations__.items():</span><br><span class="line">        value = locals[var]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pr = test.__name__ + <span class="string">': '</span> + test.__docstring__</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            pr = test.__name__</span><br><span class="line">        msg = <span class="string">'{}=={}; Test: {}'</span>.format(var, value, pr)</span><br><span class="line">        <span class="keyword">assert</span> test(value), msg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">between</span>(<span class="params">lo, hi</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_between</span>(<span class="params">x</span>):</span></span><br><span class="line">        <span class="keyword">return</span> lo &lt;= x &lt;= hi</span><br><span class="line"></span><br><span class="line">    _between.__docstring__ = <span class="string">'must be between {} and {}'</span>.format(lo, hi)</span><br><span class="line">    <span class="keyword">return</span> _between</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x: between(<span class="params"><span class="number">3</span>, <span class="number">10</span></span>), y: lambda _y: isinstance(<span class="params">_y, int</span>)</span>):</span></span><br><span class="line">    validate(f, locals())</span><br><span class="line">    print(x, y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># AssertionError: x==2; Test: _between: must be between 3 and 10</span></span><br><span class="line">f(<span class="number">3</span>, <span class="number">2.1</span>)</span><br><span class="line"><span class="comment"># AssertionError: y==2.1; Test: &lt;lambda&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="高级解包操作"><a href="#高级解包操作" class="headerlink" title="高级解包操作"></a>高级解包操作</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中无解包操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *c = range(<span class="number">10</span>)</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    a, b, *c = range(<span class="number">10</span>)</span><br><span class="line">          ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3中解包操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *c = range(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]  <span class="comment"># 剩下的元素全部赋值给c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *_ = range(<span class="number">5</span>)  <span class="comment"># 丢弃2,3,4元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="限定关键字参数"><a href="#限定关键字参数" class="headerlink" title="限定关键字参数"></a>限定关键字参数</h3><p>当参数特别多的时候，想把后面参数指定名字进行传入，<br>限定关键字参数需要指定参数名传参，<br>关键字参数实际就是传入值得时候指定值的参数名字，</p>
<p>Keyword only arguments 关键字参数<br>根据参数名来传入参数值，则无须遵守定义形参的顺序，<br>以param = value的方式传递数据</p>
<p>使用关键字参数好处 :<br>①关键字参数顺序也可以不按函数声明参数的顺序。可以防止参数的位置顺序搞混<br>②清晰地指出了参数值，有助于提高程序的可读性</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b, *, c</span>):</span></span><br><span class="line">    <span class="comment"># python3中支持语法，要显示转入c的值，前面加一个参数*号就行。</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># c = 3 就是限定关键字参数方式</span></span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>, c=<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>


<h3 id="Chained-exception-连接异常-。"><a href="#Chained-exception-连接异常-。" class="headerlink" title="Chained exception(连接异常)。"></a>Chained exception(连接异常)。</h3><p>Python3重新抛出异常不会丢失栈信息，有 raise from 保留异常栈信息<br>python2重新抛出异常会丢失栈信息、原来的 traceback 信息</p>
<p><code>shutil.copyfile()</code>文件拷贝</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mycopy</span>(<span class="params">source, dest</span>):</span></span><br><span class="line">    <span class="comment"># Python3中支持 raise from保留异常栈信息</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        shutil.copy2(source, dest)</span><br><span class="line">    <span class="keyword">except</span> OSError: <span class="comment"># python2中raise会丢失原来的 traceback信息</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">"automatic sudo injection"</span>) <span class="keyword">from</span> OSError</span><br><span class="line">        <span class="comment"># 这样会把所有栈信息抛出，有利于去排错</span></span><br><span class="line">  </span><br><span class="line">mycopy(<span class="string">'old'</span>, <span class="string">'new'</span>)</span><br><span class="line">输出结果：</span><br><span class="line"><span class="comment"># OSError</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># The above exception was the direct cause of the following exception:</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File "chain_exception.py", line 12, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     mycopy('old', 'new')</span></span><br><span class="line"><span class="comment">#   File "chain_exception.py", line 9, in mycopy</span></span><br><span class="line"><span class="comment">#     raise NotImplementedError("automatic sudo injection") from OSError</span></span><br><span class="line"><span class="comment"># NotImplementedError: automatic sudo injection</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="一切都是返回迭代对象-range-zip-map-dict-values-etc-are-all-iterators。"><a href="#一切都是返回迭代对象-range-zip-map-dict-values-etc-are-all-iterators。" class="headerlink" title="一切都是返回迭代对象 range, zip, map, dict.values, etc, are.all iterators。"></a>一切都是返回迭代对象 range, zip, map, dict.values, etc, are.all iterators。</h3><p>python2中range和map返回的都是列表，当这个列表非常大时候会非常消耗内存，<br>python3中很多内置函数之前返回列表的现在返回是迭代器，迭代器是”惰性加载”的，这样会省很多内存<br>如果我们需要显示得到一个列表时候，我么就需要list进行强转一下)，返回列表会消耗大的内存</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">10</span>)</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]  <span class="comment"># 返回列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(range(<span class="number">10</span>)))</span><br><span class="line">&lt;type <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(xrange(<span class="number">10</span>))</span><br><span class="line">xrange(<span class="number">10</span>)</span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">100</span>):print(i) </span><br><span class="line"><span class="comment"># python2中xrange返回可迭代对象，python3中没有xrange函数</span></span><br><span class="line"> </span><br><span class="line">---------------------------------------------------------------</span><br><span class="line"><span class="comment"># python3中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">10</span>)</span><br><span class="line">range(<span class="number">0</span>, <span class="number">10</span>)  <span class="comment"># 返回软加载可迭代对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(range(<span class="number">10</span>)))</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">range</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span>(<span class="params">list(<span class="params">range(<span class="params"><span class="number">10</span></span>)</span>)</span>)</span></span><br><span class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  </span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):print(i， end=<span class="string">' '</span>)   <span class="comment"># end默认值是'\n'换行，置空表示水平输出</span></span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>
<p>python3中不再使用<code>dict.iteritems()</code> ，直接使用<code>dict.items()</code>方法就可以返回可迭代对象。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-yu-yan-te-xing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-yu-yan-te-xing/" class="post-title-link" itemprop="url">Python语言特性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-10 02:35:55" itemprop="dateModified" datetime="2021-08-10T02:35:55Z">2021-08-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Python-动态强类型-脚本语言"><a href="#Python-动态强类型-脚本语言" class="headerlink" title="Python 动态强类型 脚本语言"></a>Python 动态强类型 脚本语言</h3><ul>
<li><p>动态是运行期确定数据类型，不用显式声明数据类型，一个变量可以是字符串，也可赋值成一个数字，灵活，执行前不需要编译，执行时才编译，因此效率低。<br>Python、Ruby 和 JavaScript</p>
</li>
<li><p>静态是编译期确定数据类型，要申明变量数据类型 java c c++ c#</p>
</li>
<li><p>弱类型语言是指变量的类型可以被隐式转换。</p>
</li>
<li><p>强类型：</p>
</li>
<li><p>PHP和Javascript就是弱类型语言 =&gt; <code>1 + "1"</code>  在JS不会报错，在Python会报错</p>
</li>
<li><p>非独立：JavaScript语言依赖执行环境，对于客户端来说是浏览器，对于服务端来说是node。</p>
</li>
</ul>
<p>python整数类型为Unifying Long Integers，无限长整数类型，<br>没有 32 / 64 位 int long 等不同长度等概念，但肯定是大于 32 位</p>
<p><code>import this</code>Python之禅</p>
<h3 id="为什么要用Python？"><a href="#为什么要用Python？" class="headerlink" title="为什么要用Python？"></a>为什么要用Python？</h3><ul>
<li>胶水语言，轮子多，应用广泛（优点）</li>
<li>语言灵活，生产力高（优点）</li>
<li>性能问题、代码维护问题、python2/python3兼容问题（缺点）</li>
</ul>
<h3 id="鸭子类型（基于协议编程）-python用法简单的根本"><a href="#鸭子类型（基于协议编程）-python用法简单的根本" class="headerlink" title="鸭子类型（基于协议编程）- python用法简单的根本"></a>鸭子类型（基于协议编程）- python用法简单的根本</h3><p>“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以称为鸭子”<br>go语言的接口（protol 协议）设计是参考了鸭子类型（python）和java的接口<br>协议：采用的是面向对象的类继承<br>从使用者的角度看，描述事物的外部行为而非内部结构</p>
<ul>
<li><p>关注点在对象的行为、接口的方法，是由它实现指定的名称函数方法<br>而不是类型（duck typing）它并不要求严格的继承体系，你的类继承了什么不重要，你的类名称不重要</p>
</li>
<li><p>比如file，String，scoket对象都支持read/write方法（file like object）<br>对真正的文件对象，它有一个read()方法，返回其内容。但是，许多对象，只要有read()方法，都被视为“file-like object“。<br>许多函数接收的参数就是“file-like object“，你不一定要传入真正的文件对象，完全可以传入任何实现了read()方法的对象。</p>
</li>
<li><p>运行时才知道传入的类型 file 有没有实现对应的方法 read，</p>
</li>
<li><p>需要注释来说明接口</p>
</li>
<li><p>再比如定义了__iter__魔术方法的对象都可以for迭代<br>忽略了鸭子类型， 对于用惯面向对象的人来说呢 这个做法有点奇怪</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quack</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"gua gua"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quack</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"我是人类， 但我也会 gua gua gua"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">in_the_forest</span>(<span class="params">duck</span>):</span></span><br><span class="line">    duck.quack()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">game</span>():</span></span><br><span class="line">    donald = Duck()</span><br><span class="line">    john = Person()</span><br><span class="line">    in_the_forest(donald)</span><br><span class="line">    in_the_forest(john)</span><br><span class="line">    <span class="comment"># 输出类型</span></span><br><span class="line">    print(type(donald))</span><br><span class="line">    print(type(john))</span><br><span class="line">    <span class="comment"># 判断类型</span></span><br><span class="line">    print(isinstance(donald, Duck))</span><br><span class="line">    print(isinstance(john, Person))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">game()</span><br><span class="line"><span class="comment"># 输出结果：</span></span><br><span class="line"><span class="comment"># gua gua</span></span><br><span class="line"><span class="comment"># 我是人类， 但我也会 gua gua gua</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Duck'&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>

<p>C:\Users\rose\AppData\Local\Programs\Python\Python39\Lib_collections_abc.py 源码</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterable</span>(<span class="params">metaclass=ABCMeta</span>):</span></span><br><span class="line"></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__subclasshook__</span>(<span class="params">cls, C</span>):</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">is</span> Iterable:</span><br><span class="line">            <span class="keyword">return</span> _check_methods(C, <span class="string">"__iter__"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    __class_getitem__ = classmethod(GenericAlias)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Iterable  <span class="comment"># 实际上list没有继承Iterable 好比是一份协议</span></span><br><span class="line"></span><br><span class="line">a = []</span><br><span class="line">print(type(a))</span><br><span class="line">print(isinstance(a, Iterable))  <span class="comment"># True list实现了__iter__ 魔法方法属于Iterable，不需要声明什么类型和继承Iterable</span></span><br><span class="line">b = tuple()</span><br><span class="line">print(isinstance(b, Iterable))  <span class="comment"># True tuple实现了__iter__ 魔法方法属于Iterable，类型和继承Iterable</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">born</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">born</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dog = Dog()</span><br><span class="line">print(type(dog))  <span class="comment"># &lt;class '__main__.Dog'&gt;</span></span><br><span class="line">print(isinstance(dog, Animal)) <span class="comment"># False 通常用在魔法方法</span></span><br><span class="line"><span class="comment"># dog是不是动物类 实际上dog就是动物类</span></span><br><span class="line"><span class="comment"># Animal实际上只是定义了一些方法的名称而已 其他的任何类只要实现了这个Animal里面的方法那你类就是Animal类型</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Company</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, employee_list</span>):</span></span><br><span class="line">        self.employee = employee_list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""实现了__iter__方法就是Iterable，没有重写这个方法就不是Iterable"""</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.employee)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">company = Company([<span class="number">100</span>, <span class="number">110</span>, <span class="number">120</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> isinstance(company, Iterable):</span><br><span class="line">    print(<span class="string">"company是iterable类型"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"company不是iterable类型"</span>)</span><br><span class="line"><span class="comment"># company是iterable类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for语句 可以对dict， list tuple set等等类型进行for循环，通常这么强行记忆，</span></span><br><span class="line"><span class="comment"># for语句可以对iterable类型进行操作 只要你实现了__iter__那你就可以进行for循环</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> em <span class="keyword">in</span> company:</span><br><span class="line">    print(em)</span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 110</span></span><br><span class="line"><span class="comment"># 120</span></span><br><span class="line"></span><br><span class="line">price = (<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>)</span><br><span class="line">print(sum(company))</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Company</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, employee_list</span>):</span></span><br><span class="line">        self.employee = employee_list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.employee)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.employee[item]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    company = Company([<span class="string">"tom"</span>, <span class="string">"bob"</span>, <span class="string">"jane"</span>])</span><br><span class="line">    <span class="keyword">if</span> isinstance(company, Iterable):</span><br><span class="line">        print(<span class="string">"company是iterable类型"</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> company:</span><br><span class="line">        <span class="keyword">print</span> (item)</span><br><span class="line"></span><br><span class="line">a = []</span><br><span class="line"><span class="keyword">if</span> isinstance(a, Iterable):</span><br><span class="line">    print(<span class="string">"yes"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>1、pass语句 空语句 什么也不做，一般作为占位符或者创建占位程序，pass语句不会执行任何操作2、保证格式完整 3、保证语义完整</p>
<h4 id="C-中的-duck-typing"><a href="#C-中的-duck-typing" class="headerlink" title="C++中的 duck typing"></a>C++中的 duck typing</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">R</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">string</span> <span class="title">download</span>(<span class="title">const</span> <span class="title">R</span>&amp; <span class="title">retriever</span>) {</span></span><br><span class="line">    <span class="keyword">return</span> retriever.get(<span class="string">"www.baidu.com"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>编译时才知道传入的 retriever 有没有 get<br>需要注释来说明接口</p>
<h4 id="Java-中的类似代码"><a href="#Java-中的类似代码" class="headerlink" title="Java 中的类似代码"></a>Java 中的类似代码</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;R extends Retriever&gt;</span><br><span class="line"><span class="function">String <span class="title">download</span><span class="params">(R r)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> r.get(<span class="string">"www.baidu.com"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>传入的参数必须实现 Retriever 接口</li>
<li>不是 duck typing, 实现接口的话就一定要实现接口的方法。</li>
<li>同时需要 Readable, Appendable 怎么办？（apache polygene）</li>
</ul>
<h4 id="Python-表示复数的语法是-real-image-j"><a href="#Python-表示复数的语法是-real-image-j" class="headerlink" title="Python 表示复数的语法是 real + image j"></a>Python 表示复数的语法是 <code>real + image j</code></h4><p>方法conjugate返回复数的共轭复数<br>复数的实部与虚部均为浮点数；<br>虚部的后缀可以是 “j” 或者 “J”；<br>复数的 conjugate 方法可以返回该复数的共轭复数。<br>复数不能比大小</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span> + <span class="number">2j</span></span><br><span class="line">print(a)  <span class="comment"># (1+2j)</span></span><br><span class="line">b = <span class="number">1</span> + <span class="number">2J</span></span><br><span class="line">print(b)  <span class="comment"># (1+2j)</span></span><br><span class="line">print(a == b)  <span class="comment"># True</span></span><br><span class="line">print(a.imag)  <span class="comment"># 2.0</span></span><br><span class="line">print(a.real)  <span class="comment"># 1.0</span></span><br></pre></td></tr></tbody></table></figure>

<p>欧拉公式</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cmath</span><br><span class="line"></span><br><span class="line">print(cmath.exp(<span class="number">1j</span> * cmath.pi) + <span class="number">1</span>)  <span class="comment"># 1.2246467991473532e-16j</span></span><br><span class="line">print(<span class="string">"%3f"</span>,cmath.exp(<span class="number">1j</span> * cmath.pi) + <span class="number">1</span>)  <span class="comment"># 1.2246467991473532e-16j</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/smtp-fa-song-you-jian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/smtp-fa-song-you-jian/" class="post-title-link" itemprop="url">SMTP发送邮件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>SMTP发送邮件<br>SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。</p>
<p>python的smtplib提供了一种很方便的途径发送电子邮件。它对smtp协议进行了简单的封装。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line">smtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )</span><br></pre></td></tr></tbody></table></figure>

<p>host: SMTP 服务器主机。 你可以指定主机的ip地址或者域名如: runoob.com，这个是可选参数。<br>port: 如果你提供了 host 参数, 你需要指定 SMTP 服务使用的端口号，一般情况下 SMTP 端口号为25。<br>local_hostname: 如果 SMTP 在你的本机上，你只需要指定服务器地址为 localhost 即可。<br>Python SMTP 对象使用 sendmail 方法发送邮件，语法如下：</p>
<p>SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options])<br>参数说明：</p>
<p>from_addr: 邮件发送者地址。<br>to_addrs: 字符串列表，邮件发送地址。<br>msg: 发送消息<br>这里要注意一下第三个参数，msg 是字符串，表示邮件。我们知道邮件一般由标题，发信人，收件人，邮件内容，附件等构成，发送邮件的时候，要注意 msg 的格式。这个格式就是 smtp 协议中定义的格式。</p>
<p>实例<br>以下执行实例需要你本机已安装了支持 SMTP 的服务，如：sendmail。</p>
<p>以下是一个使用 Python 发送邮件简单的实例：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"> </span><br><span class="line">sender = <span class="string">'from@runoob.com'</span></span><br><span class="line">receivers = [<span class="string">'429240967@qq.com'</span>]  <span class="comment"># 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 三个参数：第一个为文本内容，第二个 plain 设置文本格式，第三个 utf-8 设置编码</span></span><br><span class="line">message = MIMEText(<span class="string">'Python 邮件发送测试...'</span>, <span class="string">'plain'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">message[<span class="string">'From'</span>] = Header(<span class="string">"菜鸟教程"</span>, <span class="string">'utf-8'</span>)   <span class="comment"># 发送者</span></span><br><span class="line">message[<span class="string">'To'</span>] =  Header(<span class="string">"测试"</span>, <span class="string">'utf-8'</span>)        <span class="comment"># 接收者</span></span><br><span class="line"> </span><br><span class="line">subject = <span class="string">'Python SMTP 邮件测试'</span></span><br><span class="line">message[<span class="string">'Subject'</span>] = Header(subject, <span class="string">'utf-8'</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    smtpObj = smtplib.SMTP(<span class="string">'localhost'</span>)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    print(<span class="string">"邮件发送成功"</span>)</span><br><span class="line">    server.quit()</span><br><span class="line"><span class="keyword">except</span> smtplib.SMTPException:</span><br><span class="line">    print(<span class="string">"Error: 无法发送邮件"</span>)</span><br><span class="line">    <span class="comment"># 邮件发送成功</span></span><br></pre></td></tr></tbody></table></figure>

<p>我们使用三个引号来设置邮件信息，标准邮件需要三个头部信息： From, To, 和 Subject ，每个信息直接使用空行分割。</p>
<p>我们通过实例化 smtplib 模块的 SMTP 对象 smtpObj 来连接到 SMTP 访问，并使用 sendmail 方法来发送信息。</p>
<p>执行以上程序，如果你本机安装 sendmail（邮件传输代理程序），就会输出：</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
