<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<meta name="hexo-config" content="{&quot;hostname&quot;:&quot;bubbleboy11.github.io&quot;,&quot;root&quot;:&quot;/&quot;,&quot;images&quot;:&quot;/images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}">
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/7/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/7/">



<meta name="hexo-config-page" content="{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;}">
<meta name="hexo-config-calendar" content="">
<script data-pjax src="/js/load-config.js"></script>
  <title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">172</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-random/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-random/" class="post-title-link" itemprop="url">python random</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="random提供了生成随机数的工具"><a href="#random提供了生成随机数的工具" class="headerlink" title="random提供了生成随机数的工具"></a>random提供了生成随机数的工具</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">print(random.choice([<span class="string">'apple'</span>, <span class="string">'pear'</span>, <span class="string">'banana'</span>]))</span><br><span class="line"><span class="comment"># 'apple'</span></span><br><span class="line">print(random.sample(range(<span class="number">100</span>), <span class="number">10</span>))  <span class="comment"># sampling without replacement</span></span><br><span class="line"><span class="comment"># [30, 83, 16, 4, 8, 81, 41, 50, 18, 33]</span></span><br><span class="line">print(random.random())  <span class="comment"># random float</span></span><br><span class="line"><span class="comment"># 0.17970987693706186</span></span><br><span class="line">print(random.randrange(<span class="number">6</span>))  <span class="comment"># random integer chosen from range(6)</span></span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python3-xin-zeng-de-yu-fa-he-nei-zhi-ku/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python3-xin-zeng-de-yu-fa-he-nei-zhi-ku/" class="post-title-link" itemprop="url">python3新增的语法和内置库</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>① yield from 链接子生成器<br>② asyncio内置库， async/await原生协程支持异步编程<br>③ 新的内置库enum枚举库, mock库做单测试mock掉一些网络接口, asyncio, ipaddress处理IP地址库, concurrent.futures并发相关库等<br>④ python3把生成的pyc文件统一放到__pycache__文件夹下面。<br>⑤ 一些内置库的修改。urllib, selector等<br>⑥ 性能优化等</p>
<h3 id="兼容2-3的工具"><a href="#兼容2-3的工具" class="headerlink" title="兼容2/3的工具"></a>兼容2/3的工具</h3><pre><code>six模块

2to3等工具转换代码

__future__
</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-man/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-man/" class="post-title-link" itemprop="url">python慢</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>py代码主要是干什么事情。通常的处理如果是干一些文件操作，网络操作，和c++差距人都感知不出来。性能敏感的代码可以用c++做成库去调用。其实很多Python的库核心都是c语言c加加写的，然后Python去调用它。Python qt库也是这样。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-mo-kuai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-mo-kuai/" class="post-title-link" itemprop="url">python模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>模块是对内部逻辑的<strong>封装</strong>，只对外提供<strong>接口</strong></li>
<li>一个py文件就是一个模块，模块的名称就是不含.py后缀的文件名<br><code>import</code>关键字导入一个模块</li>
</ul>
<p>◆可维护性更强◆方便代码重用<br>python中模块是包含变量、函数、……代码块的文件；<br>包是存放多个文件/模块的文件夹，可以统一组织和管理多个python模块；<br>标准的包结构中包含一个特殊的文件[_init_py]。<br>两者的区别：包是一个文件夹，可以包含多个文件/模块，模块是一个文件</p>
<p>什么叫反射？<br>给定一个对象，返回该对象的所有属性和函数列表，<br>或给定对象和该对象的函数或者属性的名字，返回对象的函数或者属性实例。<br>dir函数就是反射的实现，<br>dir()函数:如果要获得一个对象的所有属性和方法，<br>dir() 函数一个排好序的字符串列表，内容是一个模块里定义过的名字。<br>返回的列表容纳了在一个模块里定义的所有模块，变量和函数</p>
<p>help——查看类，方法的帮助信息<br>__name__—模块的名称<br>__file__——文件全路径</p>
<p>当你导入一个模块，Python 解析器对模块位置的搜索顺序是：<br>1、当前目录（包）<br>2、如果不在当前目录，Python 则搜索在 shell 变量 PYTHONPATH 下的每个目录。（内置函数）<br>3、如果都找不到，Python会察看默认路径。<br>模块搜索路径存储在 system 模块的 sys.path 变量中。变量里包含当前目录，PYTHONPATH和由安装过程决定的默认目录。（环境变量）<br>PYTHONPATH 变量作为环境变量，PYTHONPATH 由装在一个列表里的许多目录组成。PYTHONPATH 的语法和 shell 变量 PATH 的一样。</p>
<p>导入模块时，只需要写模块名<br>只导入模块名时，引用模块中的函数时，格式是模块名.函数名</p>
<p>包python package<br>◆可以用来组织模块（可以包含其它模块的模块），包是一个分层次的文件目录结构，它定义了一个由模块及子包，和子包下的子包等组成的 Python 的应用环境。<br>◆目录（文件夹）必须包含文件_init.py，, 该文件的内容可以为空。<strong>init</strong>.py 用于标识当前文件夹是一个包。<br>◆模块重名问题解决</p>
<p>包Package的引用<br>·引入整个包：import module,还要确保该模块所在包中的_init__.py模块，写入具体要引入的模块名。<br>·只是引入所需要的属性和方法：from module.xx.xx import xx<br>在<em>init</em>.py为空的前提下，包的引入有三种，分别是<br>from 包名 import 模块名、<br>from 包名.模块名 import 函数名、<br>import 包名.模块名，利用as可以给模块或包指定别名</p>
<p>◆指定别名，导入不同包同名模块：from module.xx.xx import xx as renename<br>·引入所有：from module.xx.xx import * 不推荐，需要什么导入什么<br>导入包的本质就是执行该包下的<strong>init</strong>.py文件</p>
<p>在引入目录Directory中内容时，只可以引入该目录的子目录中的内容，也可以手动为Directory添加<em>init</em>.py使之可以像包一样引用</p>
<p>函数/变量描述<br>argv命令行参数，包括脚本名<br>getcwd返回当前所在的目录<br>modules一个字典，将模块名映射到加载的模块<br>path一个列表，包含要在其中查找模块的目录的名称<br>platform一个平台标识符，如sunos5或win32<br>mkdir/rmdir创建和删除文件夹</p>
<p>DateTime模块<br>函数/变量  描述<br>timedelta对日期/时间进行加减操作时使用<br>date() 表示一个日期<br>datetime.strftime 将datetime对象格式化成字符串<br>datetime.strptime 将字符串按照一定的格式转换成datetime对象<br>time() 表示一个时间的类<br>datetime.now 系统的当前时间<br>day datetime对象的属性，类似的还有minute，hour等<br>days Timedelta的属性，类似的还有minutes, hour等<br>datetime.now()，datetime.today()得到当前日期时间，<br>datetime.now().day 当前月的第几天<br>datetime.today().time 当前时间</p>
<p>DateTime模块转换参数表参数含义<br>%A星期的名称，如Monday<br>%B月份名，如anuary<br>%m用数字表示的月份（01<del>12）<br>%d用数字表示月份中的一天（01～31）<br>%Y四位的年份，如2015<br>%y两位的年份，如15<br>%H 24小时制的小时数（00</del>23）%l12小时制的小时数（01<del>12）<br>%p am或pm<br>%M分钟数（00</del>59<br>%S秒数（00~61）</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-xu-ni-huan-jing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-xu-ni-huan-jing/" class="post-title-link" itemprop="url">python虚拟环境</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>关掉前面的base<br>conda deactivate 退出 conda base 环境</p>
<p>PyPi Python Package Index，一个Python库的托管平台，<a target="_blank" rel="noopener" href="https://pypi.org/">https://pypi.org/</a> </p>
<p>pip install –index-url <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a> pytest-html</p>
<p>延长timeout时间<br>pip –default-timeout=100 install –index-url <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a> package</p>
<p>使⽤源码安装：下载安装包并解压，然后进⼊setup.py所在的⽬录，执⾏python setup.py install<br>pip uninstall 包名<br>pip list 查看安装的包</p>
<p>pip install pipenv<br>在创建好的目录下执行<br>pip –python<br>pipenv install 包名<br>pipenv shell 进入<br>python -m pip install –upgrade pip<br>pipenv graph 查看依赖包<br>exit 退出</p>
<p>Python中的虚拟环境具有隔离性，<br>Python的虚拟环境可以使一个Python程序拥有独立的库library和解释器interpreter，<br>而不用与其他Python程序共享统一个library和interpreter，<br>主要应用于解决因为版本问题所引发的冲突问题</p>
<p>-virtualenv<br>◆pip install virtualenv<br>mkdirvirtualenv 虚拟环境名<br>pip install –index-url <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a> 包名<br>python<br>import 包名<br>quit()<br>激活虚拟环境并进入/退出虚拟环境：activate/deactivate<br>virtualenv+虚拟环境名字 创建虚拟环境</p>
<p>◆pip install virtualenvwrapper-win<br>◆虚拟环境自由切换，关掉之后进入：workon 虚拟环境名</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/redis/" class="post-title-link" itemprop="url">redis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Redis是一种Key-Value存储结构的NoSQL非关系数据库</p>
<p>redis的使用场景</p>
<ul>
<li><p>数据存储</p>
<ul>
<li>数据存储在内存，可以持久化保存至硬盘</li>
<li>高效的数据结构 string（字符串）、hash（哈希）、list（列表）、set（集合）、zset（有序集合）</li>
</ul>
</li>
<li><p>高速缓存</p>
<ul>
<li>10万+的QPS（查询次数/秒），集群可达百万级以上</li>
<li>首页内容缓存优化（门户、新闻等）</li>
<li>秒杀业务、抢购业务、库存控制等</li>
</ul>
</li>
<li><p>启动redis<br><code>&gt;&gt; redis-server redis.windows.conf</code><br>可以做一个包含此命令的bat文件，每次双击启动</p>
</li>
<li><p>连接redis<br><code>&gt;&gt; redis-cli</code></p>
<figure class="highlight plain"><figcaption><span>"password"```登录才有权限，不能漏掉双引号</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">redis 没有表 缓存经常被读取的热数据的平台</span><br><span class="line">redis里面取出来的数据都是bytes类型的，所以要用decode方法转成字符串</span><br><span class="line"></span><br><span class="line">flushdb 清空逻辑表格</span><br><span class="line">flushall  清空逻辑库数据</span><br><span class="line"></span><br><span class="line">#### 字符串（String）相关操作</span><br><span class="line">- ```set``` -- 设置值</span><br><span class="line">- ```get``` -- 获取值</span><br><span class="line">- ```mset``` -- 设置多个键值对key-value</span><br><span class="line">- ```mget``` -- 获取多个键值对key-value</span><br><span class="line">- ```append``` -- 在字符串结尾添加字符串内容</span><br><span class="line">- ```del``` -- 删除</span><br><span class="line">- ```incr```/```decr``` -- 增加/减少 1</span><br><span class="line">incr num 数字自增加1</span><br><span class="line">incrby num 25 数字加上指定的整数值</span><br><span class="line">incrbyfloat num 2.5 数字加上指定的整数值</span><br><span class="line">decr num 数字自增减1</span><br><span class="line">decrby num 25 数字减去指定的整数值</span><br><span class="line"></span><br><span class="line">```redis</span><br><span class="line">&gt;set email scott@163.com</span><br><span class="line">&gt;get email</span><br><span class="line"></span><br><span class="line">&gt;mset a 10 b 20 c 30</span><br><span class="line">&gt;mget a b c email</span><br><span class="line"></span><br><span class="line">mset username scott sex male </span><br><span class="line">mget username sex  </span><br><span class="line"></span><br><span class="line">append username 123 在字符串结尾追加内容</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">```redis</span><br><span class="line">&gt; incr count</span><br><span class="line">(integer) 1</span><br><span class="line">&gt; incr count</span><br><span class="line">(integer) 2</span><br><span class="line">&gt; incr count</span><br><span class="line">(integer) 3</span><br><span class="line">&gt; get count</span><br><span class="line">"3"</span><br><span class="line">&gt; incr count</span><br><span class="line">(integer) 4</span><br><span class="line">&gt; incr count</span><br><span class="line">(integer) 5</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


</li>
</ul>
<p>缓存</p>
<ul>
<li>内容变化不频繁</li>
<li>几个小时、几天才变化一次</li>
<li>重复性工作</li>
<li>查询数据库</li>
<li>生成响应数据</li>
<li>优化一下：不查数据库，缓存内容</li>
</ul>
<p>getrange email 0 3 获得截取字符串内容<br>strlen emai 获得字符串长度</p>
<p>setex 设置带有过期时间（秒）的 key-value<br>setex city 5 Beijing</p>
<p>数据类型<br>String(字符串)：用来实现<br>简单的 KV 键值对存储，比如计数器</p>
<p>哈希表 存储彼此相关信息的键值对，用HSET key filed value 来去设置一组相关信息，例如设置用户ID和名字相关联<br>HSET name { id: user_name}<br>hset 8000 ename Tom<br>hset  8000 job salesman<br>hmset 9000 ename Scott job salesman deptno 10</p>
<p>hget 8000 ename<br>hmget 8000 ename job deptno<br>HGETALL 8000  必须大写</p>
<p>hkeys 8000 获得所有哈希表字段名,key</p>
<p>hlen 8000 获得所有哈希表key数量<br>hexists 8000 job 判断哈希表是否存在某个key字段名</p>
<p>hvals 9000 获得哈希表素有字段值<br>hdel 9000 job deptno 删除哈希表的字段</p>
<p>hdel 9000 key1 key2 </p>
<p>HINCRBY 8000 deptno 10让哈希表某个字段加上指定的整数值<br>HINCRBYfloat 8000 sal 6.6</p>
<p>列表类型：向value 保存序列化的数据，可重复<br>List(链表)：实现双向链表，比如用户的关注，粉丝列表<br>rpush list 1 2 3 # 创建并且依次向右边添加<br>lrange list 0 -1<br>1<br>2<br>3</p>
<p>lpush list2 1 2 3 创建并且依次向右边添加<br>lrange list2 0 -1<br>3<br>2<br>1</p>
<p>lpush dname 秘书处   # 在已存在的字段向左边</p>
<p>lset dname 2 销售部 # 第二个位置<br>lrange dname 0 -1 打印列表第一个元素到最后一个元素<br>秘书处<br>技术部<br>销售部<br>售后部</p>
<p>llen dname 获得列表长度<br>lindex 数字 获得列表某个元素<br>linsert dname before 秘书处 董事会 在某个位置插入元素之前<br>lpop dname 删除列表最左边的元素<br>rpop dname 删除列表最右边的元素</p>
<p>rpush employee Scott<br>rpush employee Jack<br>rpush employee Scott<br>lrem employee 1 Scott 删除列表第一个元素<br>lrem employee 2 Scott 删除列表2个元素</p>
<p>集合类型set 列表中的元素不可以重复 存储不重复元素，比如用户的关注者，没有顺序<br>SADD EMPNO 8000<br>SADD EMPNO 8001 8002<br>SMEMBERS EMPNO  获得集合所有元素，按照哈希值排序</p>
<p>SCARD EMPNO 获得集合长度<br>sismember EMPNO 8000 判断是否含有某个元素<br>srem EMPNO 8001 删除元素，</p>
<p>spop empno 随机删除并返回集合的某个元素<br>srandmember empno 33 随机返回集合中的3个元素</p>
<p>有序集合Sorted Set 带排序功能的集合，按照元素分数值排序<br>zadd keyword 0 ‘JACK’ 0 ‘Miko’ 0 ‘Ashe’ 定义有序集合 先写分数值<br>zincrby keyword 1 ‘JACK’<br>zincrby keyword 5 ‘Ashe’<br>zincrby keyword 3 ‘Miko’<br>zincrby keyword 2 ‘Mikko’  mikko不存在则新建<br>zrange keyword 0 -1 获得有序集合的内容（升序）<br>zrevrange keyword 0 -1 获得有序集合的内容（降序）<br>zrevrange keyword 0 0 分数值最高的元素<br>zrangebyscore 获得分数值区间内容的集合内容（升序）<br>zrangebyscore keyword 0 2<br>zrangebyscore keyword 0 (2  不包括2<br>zrangebyscore keyword 2 +inf 正无穷<br>zrerangebyscore 获得分数值区间内容的集合内容（降序）<br>zrevrangebyscore keyword 3 0<br>zrevrangebyscore keyword (3 0   不包括3</p>
<p>zcard keyword 获得有序集合长度<br>zcount keyword 2 4 查询某个分数值区间的元素数量<br>zscore keyword ‘Ashe’ 返回元素的分数值</p>
<p>zrank keyword ‘Ashe’ 获得元素的升序排名（从0开始）<br>zrevrank keyword ‘Ashe’ 获得元素的降序排名（从0开始）<br>zrevrank keyword ‘Ashe’</p>
<p>zrem keyword  ‘Miko’  ‘Ashe’  删除有序集合中的元素<br>zremrangebyrank keyword 0 2  删除排名区间内的元素<br>zremrangebyscore keyword -inf 2  删除排名区间内的元素</p>
<p>exists employee 判断是否存在某个key<br>expire employee 5设置过期时间<br>expireat employee 12设置记录的过期时间(UNIX时间戳)<br>move keyword 1 记录迁移到其他逻辑库,1号逻辑库<br>select 1 切换到1号逻辑库<br>rename employee emp<br>presistkeyword 移除过期时间<br>type keyword 判断value数据类型</p>
<p>为什么要一如线程池<br>如果程序中经常需要用到线程，频繁的创建和销毁线程会浪费很多硬件资源，所以需要把线程和任务分离开。线程可以反复利用，省去了重复创建的麻烦。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/replace/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/replace/" class="post-title-link" itemprop="url">replace</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>主串.replace(‘旧子串’,’新子串’,匹配次数)<br>多种异常字段替换成一种字段</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原数据</span></span><br><span class="line">data = [<span class="number">123</span>, <span class="number">234</span>, <span class="string">'零'</span>, <span class="string">'None'</span>, <span class="number">8975</span>]</span><br><span class="line"><span class="comment"># 需要替换字段</span></span><br><span class="line">replace = [<span class="string">'零'</span>, <span class="string">'None'</span>]</span><br><span class="line">result = [<span class="number">0</span> <span class="keyword">if</span> i <span class="keyword">in</span> replace <span class="keyword">else</span> i <span class="keyword">for</span> i <span class="keyword">in</span> data]</span><br><span class="line">print(result)</span><br><span class="line"><span class="comment"># [123, 234, 0, 0, 8975]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多字段替换</span></span><br><span class="line"><span class="comment"># 原数据</span></span><br><span class="line">data = [<span class="number">123</span>, <span class="number">234</span>, <span class="string">'零'</span>, <span class="string">'None'</span>, <span class="number">8975</span>]</span><br><span class="line"><span class="comment"># 需要替换字段</span></span><br><span class="line">replace = {<span class="string">'零'</span>: <span class="number">0</span>, <span class="number">123</span>: <span class="string">'一二三'</span>}</span><br><span class="line">result = [replace[i] <span class="keyword">if</span> i <span class="keyword">in</span> replace <span class="keyword">else</span> i <span class="keyword">for</span> i <span class="keyword">in</span> data]</span><br><span class="line">print(result)</span><br><span class="line"><span class="comment"># ['一二三', 234, 0, 'None', 8975]</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'tea for too'</span>.replace(<span class="string">'too'</span>, <span class="string">'two'</span>))</span><br><span class="line"><span class="comment"># 'tea for two'</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/request-mo-kuai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/request-mo-kuai/" class="post-title-link" itemprop="url">request模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>urllib 是 Python 标准库中用于网络请求的库。该库有四个模块，分别是urllib.request，urllib.error，urllib.parse，urllib.robotparser。其中urllib.request，urllib.error两个库在爬虫程序中应用比较频繁。urllib一般要先构建get或者post请求，然后再发起请求。</p>
<p>requests模块 基于HTTP请求的模块第三方的Python库，<br>小规模，数据量小，速度不敏感、爬取网页</p>
<p>requests可以直接构建常用的get和post请求并发起，<br>使用了urllib3，多次请求重复使用一个socket，<br>“connection”:”keep-alive”，说明多次请求使用一个连接，消耗更少的资源</p>
<p>作用：模拟浏览器发送HTTP请求。用于爬虫或接口的测试<br>如何使用：</p>
<ul>
<li>指定url</li>
<li>发起请求</li>
<li>获取响应数据</li>
<li>持久化存储</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Requests方法的13个访问控制参数</span><br><span class="line">参数名    说明</span><br><span class="line">```url```:获取页面的url链接</span><br><span class="line">```params```    字典或字节序列，作为参数增加到url中</span><br><span class="line">**kwargs：12个控制访问的参数</span><br><span class="line">```data```    字典、字节序列或文件对象，作为Request的内容</span><br><span class="line">```json```    JSON格式的数据，作为Request的内容</span><br><span class="line">```headers```    字典、HTTP定制头</span><br><span class="line">```cookies```    字典或CookieJar，Request中的cookie</span><br><span class="line">```auth```    元组，支持HTTP认证功能</span><br><span class="line">```files```    字典类型，传输文件</span><br><span class="line">```timeout```    设定超时时间，秒为单位</span><br><span class="line">```proxies```    字典类型，设定访问代理服务器，可以增加登录认证</span><br><span class="line">```allow_redirects    True/False```,默认为True，重定向开关</span><br><span class="line">```stream    True/False```,默认为True，获取内容立即下载开关</span><br><span class="line">```verify    True/False```,默认为True，认证SSL证书开关</span><br><span class="line">```cert```    本地SSL证书路径</span><br><span class="line"></span><br><span class="line">Request:构造一个向服务器请求资源的Request对象</span><br><span class="line">Response：返回一个包含服务器资源的Response对象</span><br><span class="line"></span><br><span class="line">### Response对象的属性</span><br><span class="line">```r.status_code```    HTTP请求的返回状态码</span><br><span class="line">```r.text```    HTTP响应内容的字符串形式，即 url对应的页面内容</span><br><span class="line">```r.encoding```    从HTTP header中猜测的响应内容编码方式，如果header中不存在charset字段，则认为编码为 ISO-8859-1</span><br><span class="line">```r.apparent_encoding```    从内容中分析出的响应内容编码方式（备选编码方式）</span><br><span class="line">```r.content```    HTTP响应内容的二进制形式</span><br><span class="line"></span><br><span class="line">### Requests库的异常</span><br><span class="line">```requests.ConnectionError```    网络连接异常，如DNS查询失败、拒绝连接等</span><br><span class="line">```requests.HTTPError```    HTTP错误异常</span><br><span class="line">```requests.URLRequired```    URL缺失异常</span><br><span class="line">```requests.TooManyRedirects```    超过最大重定向次数，产生重定向异常</span><br><span class="line">```requests.ConnectTimeout```    连接远程服务器超时异常</span><br><span class="line">```requests.Timeout```    请求URL超时，产生异常</span><br><span class="line"></span><br><span class="line">```requuests.request()```    构造一个请求，支撑以下各方法的基础方法</span><br><span class="line">```requests.get()```    获取HTML网页的主要方法，对应于HTTP的GET</span><br><span class="line">```requests.head()```    获取HTML网页头信息的方法，对应于HTTP的HEAD</span><br><span class="line">```requests.post()```    向HTML网页提交POST请求的方法，对应于HTTP的POST</span><br><span class="line">```requests.put()```    向HTML网页提交PUT请求的方法，对应于HTTP的PUT</span><br><span class="line">```requests.patch()```    向HTML网页提交局部修改请求，对应于HTTP的PATCH</span><br><span class="line">```requests.delete()```    向HTML网页提交删除请求，对应于HTTP的DELETE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">import requests</span><br><span class="line">r = requests.get("http://www.baidu.com")</span><br><span class="line">print(r.status_code)  # 检测请求网页的状态码</span><br><span class="line"># 输出200</span><br><span class="line">r.encoding = 'utf-8'</span><br><span class="line">print(r.text)</span><br><span class="line"># 输出网页内容</span><br></pre></td></tr></tbody></table></figure>

<p>通用框架</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url, timeout=<span class="number">30</span>)</span><br><span class="line">        r.raise_for_status()  <span class="comment"># 如果状态不是200，引发HTTPError异常</span></span><br><span class="line">        r.encoding = r.apparent_encoding  <span class="comment"># 使得返回内容的解码是正确的</span></span><br><span class="line">        <span class="keyword">return</span> r.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"产生异常"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    url = <span class="string">"http://www.baidu.com"</span></span><br><span class="line">    print(getHTMLText(url))</span><br></pre></td></tr></tbody></table></figure>

<p>request使用代理<br>很多网站如果发现同一个IP发出的大量请求，就会封禁这样的IP<br>爬虫为了避免被封IP，必须不断地更换IP地址发出请求，这个时候就需要使用代理</p>
<p>requests库有一个代理参数proxies可以指定通过代理服务器发起请求<br>proxies参数是一个字典，里面包含了http和https的代理URL</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不使用代理</span></span><br><span class="line">resp = requests.get(<span class="string">'http://httpbin.org/ip'</span>)</span><br><span class="line">print(resp.text)</span><br><span class="line"><span class="comment"># {"origin": "114.93.163.248"}</span></span><br><span class="line"></span><br><span class="line">proxies = {</span><br><span class="line">    <span class="string">'http'</span>: <span class="string">'http://139.227.252.141:8118'</span>,</span><br><span class="line">    <span class="string">'https'</span>: <span class="string">'https://139.227.252.141:8118'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用代理</span></span><br><span class="line">resp = requests.get(<span class="string">'http://httpbin.org/ip'</span>, proxies=proxies)</span><br><span class="line">print(resp.text)</span><br><span class="line"><span class="comment"># {"origin": "139.227.252.141"}</span></span><br></pre></td></tr></tbody></table></figure>

<p>需求1：爬取搜狗首页的页面数据</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 第一步：指定url</span></span><br><span class="line">    url = <span class="string">'https://www.sogou.com/'</span></span><br><span class="line">    <span class="comment"># 第二步：发起请求</span></span><br><span class="line">    response = requests.get(url)</span><br><span class="line">    <span class="comment"># 第三步：获取响应数据</span></span><br><span class="line">    page_text = response.text</span><br><span class="line">    <span class="comment"># print(page_text)</span></span><br><span class="line">    <span class="comment"># 第四步：持久化存储</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'./搜狗首页.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)<span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(page_text)</span><br><span class="line">    print(<span class="string">'爬取结束'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>需求2：实现一个简易的网页采集器（爬取搜狗指定词条对应的搜索结果页面）<br>UA伪装：门户网站的服务器会检测载体身份标识，如果检测到是爬虫发起就会拒绝访问，所以需要伪装成正常的浏览器访问身份。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'https://www.sogou.com/web'</span></span><br><span class="line">    <span class="comment"># 处理url携带的参数：封装到字典中</span></span><br><span class="line">    keyWord = input(<span class="string">'请输入关键字：'</span>)</span><br><span class="line">    param = {</span><br><span class="line">        <span class="string">'query'</span>: keyWord</span><br><span class="line">    }</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36 Edg/88.0.705.56'</span></span><br><span class="line">    }</span><br><span class="line">    response = requests.get(url=url, params=param, headers=headers)</span><br><span class="line">    page_text = response.text</span><br><span class="line">    filename = <span class="string">'./简易网页采集/'</span> + keyWord + <span class="string">'.html'</span></span><br><span class="line">    <span class="keyword">with</span> open(filename, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(page_text)</span><br><span class="line">    print(keyWord + <span class="string">'  保存成功！'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>需求3：破解百度翻译<br>注意：响应数据为json类型；请求方式为POST</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'https://fanyi.baidu.com/sug'</span></span><br><span class="line">    keyWord = input(<span class="string">'请输入关键字：'</span>)</span><br><span class="line">    data = {</span><br><span class="line">        <span class="string">'kw'</span>: keyWord</span><br><span class="line">    }</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36 Edg/88.0.705.56'</span></span><br><span class="line">    }</span><br><span class="line">    response = requests.post(url=url, data=data, headers=headers)</span><br><span class="line">    page_json = response.json()</span><br><span class="line">    <span class="comment"># print(page_json)</span></span><br><span class="line">    fp = open(<span class="string">'./百度翻译/'</span> + keyWord + <span class="string">".json"</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    json.dump(page_json, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    print(<span class="string">'翻译结束！已保存'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>需求4：爬取豆瓣电影分类排行榜</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'https://movie.douban.com/j/chart/top_list'</span></span><br><span class="line">    num = input(<span class="string">'请输入前多少名数据:'</span>)</span><br><span class="line">    param = {</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'11'</span>,</span><br><span class="line">        <span class="string">'interval_id'</span>: <span class="string">'100:90'</span>,</span><br><span class="line">        <span class="string">'action'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'start'</span>: <span class="string">'0'</span>,</span><br><span class="line">        <span class="string">'limit'</span>: num</span><br><span class="line">    }</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36 Edg/88.0.705.56'</span></span><br><span class="line">    }</span><br><span class="line">    response = requests.get(url=url, params=param, headers=headers)</span><br><span class="line">    list_data = response.json()</span><br><span class="line">    fp = open(<span class="string">'./豆瓣排行/豆瓣排行.json'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    json.dump(list_data, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    print(<span class="string">'保存完成'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>需求5：肯德基餐厅查询（<a target="_blank" rel="noopener" href="http://www.kfc.com.cn/kfccda/storelist/index.aspx%EF%BC%89">http://www.kfc.com.cn/kfccda/storelist/index.aspx）</a></p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx'</span></span><br><span class="line">    cname = input(<span class="string">'请输入城市：'</span>)</span><br><span class="line">    keyword = input(<span class="string">'请输入关键字：'</span>)</span><br><span class="line">    op = <span class="string">'keyword'</span></span><br><span class="line">    param = {</span><br><span class="line">        <span class="string">'op'</span>: op</span><br><span class="line">    }</span><br><span class="line">    data = {</span><br><span class="line">        <span class="string">'cname'</span>: cname,</span><br><span class="line">        <span class="string">'pid'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'keyword'</span>: keyword,</span><br><span class="line">        <span class="string">'pageIndex'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'pageSize'</span>: <span class="string">'10'</span></span><br><span class="line">    }</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36 Edg/88.0.705.56'</span></span><br><span class="line">    }</span><br><span class="line">    response = requests.post(url=url, data=data, headers=headers, params=param)</span><br><span class="line">    print(response.json())</span><br><span class="line">    table_data = response.json()</span><br><span class="line">    fp = open(<span class="string">'./肯德基餐厅/'</span>+cname+<span class="string">'_'</span>+keyword+<span class="string">'.json'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    json.dump(table_data, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    print(<span class="string">'保存完成'</span>)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">URL_GET = <span class="string">"https://api.douban.com/v2/event/list"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">use_params_requests</span>():</span></span><br><span class="line">    <span class="comment"># 构建请求参数</span></span><br><span class="line">    params = {<span class="string">'loc'</span>: <span class="string">'108288'</span>, <span class="string">'day_type'</span>: <span class="string">'weekend'</span>, <span class="string">'type'</span>: <span class="string">'exhibition'</span>}</span><br><span class="line">    <span class="comment"># 发送请求</span></span><br><span class="line">    response = requests.get(URL_GET, params=params)</span><br><span class="line">    <span class="comment"># 处理响应</span></span><br><span class="line">    print(<span class="string">'&gt;&gt;&gt;&gt;&gt;&gt;Response Headers:'</span>)</span><br><span class="line">    print(response.headers)</span><br><span class="line">    print(<span class="string">'&gt;&gt;&gt;&gt;&gt;&gt;Status Code:'</span>)</span><br><span class="line">    print(response.status_code)</span><br><span class="line">    print(<span class="string">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;Response Body:'</span>)</span><br><span class="line">    print(response.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"></span><br><span class="line">    print(<span class="string">'Use params requests:'</span>)</span><br><span class="line">    use_params_requests()</span><br></pre></td></tr></tbody></table></figure>

<p>网络图片爬取及存储</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''r.content  #表示返回内容的二进制格式'''</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">new_folder = <span class="string">'./Picture/'</span>  <span class="comment"># 相对路径</span></span><br><span class="line">url = <span class="string">'http://img0.dili360.com/ga/M00/02/AB/wKgBzFQ26i2AWujSAA_-xvEYLbU441.jpg@!rw9'</span></span><br><span class="line">path = new_folder + url.split(<span class="string">'/'</span>)[<span class="number">-1</span>].split(<span class="string">'@'</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(new_folder):</span><br><span class="line">        os.mkdir(new_folder)  <span class="comment"># 创建新目录</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</span><br><span class="line"></span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        <span class="comment"># 如何将二进制转化为图片保存</span></span><br><span class="line">        <span class="keyword">with</span> open(path, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="comment"># 新建wKgBzFQ26i2AWujSAA_-xvEYLbU441.jpg</span></span><br><span class="line">            f.write(r.content)</span><br><span class="line">            f.close()</span><br><span class="line">            print(<span class="string">'图片保存成功'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'文件已存在'</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"爬取失败"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>百度/360搜索关键字</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#实例3：爬取搜索页面</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    kw = {<span class="string">'wd'</span>: <span class="string">'python'</span>}</span><br><span class="line">    r = requests.get(<span class="string">'https://www.baidu.com/s'</span>, params=kw)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    print(len(r.text))  <span class="comment"># 227</span></span><br><span class="line">    <span class="comment"># r.request.url  返回的是百度安全验证的链接？</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"爬取失败"</span>)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    kw = {<span class="string">'q'</span>: <span class="string">'python'</span>}  <span class="comment"># 360搜索的关键字的键为q</span></span><br><span class="line">    r = requests.get(<span class="string">'https://www.so.com/s'</span>, params=kw)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    print(len(r.text))  <span class="comment">#257468</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"爬取失败"</span>)</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/selenium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/selenium/" class="post-title-link" itemprop="url">selenium</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="selenium"><a href="#selenium" class="headerlink" title="selenium"></a>selenium</h3><p>一个浏览器自动化测试的框架，可以通过 Python 代码来控制浏览器完成相关的测试，同时也能辅助完成数据的爬取。利用它我们可以驱动浏览器执行特定的动作，如点击、下拉等操作。对于一些JavaScript渲染的页面来说，这种抓取方式非常有效。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/restful/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/restful/" class="post-title-link" itemprop="url">REST</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-04 13:43:57" itemprop="dateModified" datetime="2021-04-04T13:43:57Z">2021-04-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>web service 是一种跨编程语言 和 跨操作系统平台的远程调用技术。</p>
<p>最重要的两种实现方式： SOAP &amp; REST </p>
<p>web 2.0时代，REST方法的广泛普及</p>
<p>SOAP - Simple Object Access Protocol 简单对象访问协议，一种协议规范，是一种轻量的，简单的，基于XML的协议。</p>
<p>SOAP与REST区别：</p>
<ul>
<li>安全性：SOAP会好于REST</li>
<li>效率和易用性：REST更胜一筹</li>
<li>成熟度：总的来说SOAP在成熟度上优于REST</li>
</ul>
<p>REST - Representational State Transfer 表示（表述）性状态转换，表现层状态转义，</p>
<ul>
<li>http是应用协议而非传输协议</li>
<li>是一种以资源为中心的 web软件系统架构设计风格(它既不是一个标准规范也不是一个强制性约束)，一种分布式系统的应用层解决方案，</li>
<li>目的：Client 和 Server 端进一步解耦 </li>
<li>可以用 Ajax 和RESTful web服务构建应用</li>
<li>可以降低开发的复杂性，提高系统的可伸缩性。</li>
</ul>
<h3 id="RESTful-API：RESTful-风格的-API接口实现-设计概念和准则"><a href="#RESTful-API：RESTful-风格的-API接口实现-设计概念和准则" class="headerlink" title="RESTful API：RESTful 风格的 API接口实现 设计概念和准则"></a>RESTful API：RESTful 风格的 API接口实现 设计概念和准则</h3><p>RESTful 三个名词的解释<br>面向资源的接口设计 （不同于 SOAP协议，SOAP 是面向服务的）</p>
<ul>
<li><p>Resources(资源)：使用 URI 指向的一个实体，比如：在web应用当中一个用户，一首音乐或者一个订单都是可把它表示成一个实体。</p>
<ul>
<li>所有事物抽象为资源(resource)，资源对应唯一的标识(identifier)。标识符在网站上的表现形式就是URI。每一个URL代表1种资源，</li>
</ul>
</li>
<li><p>对资源的操作不会改变资源的标识。因为你一旦改变了资源的标识就会导致链接不可用或者资源查找不到。</p>
</li>
<li><p>Representation(表现层)：资源的表现形式，比如图片、HTML文本等</p>
</li>
<li><p>State Transfer(状态转化)： </p>
</li>
<li><p>以及对资源的四种HTTP的GET、POST、PUT、DELETE动词语义的增删改查操作实现这个url对应的资源状态的改变，<br>(把 HTTP 请求方式和数据库的增删改查CRUD(create/retrieve/update/delete)联系结合到一起)，</p>
</li>
<li><p>资源通过接口进行操作实现状态转移，操作本身是无状态的。因为HTTP协议本身就是一个无状态的协议，它只能通过每次发的cookie值来识别用户，但是每两次http之间的请求它们是没有任何关系的、没有先后顺序。</p>
</li>
<li><p>一般使用 JSON 格式返回数据，而一般比较少使用XML，因为JSON它比较可读。</p>
</li>
<li><p>更“精简”的方式处理返回结果设计<br>对于每一个http请求的响应结果都要指明一个状态码，具体产品由具体产品 api 文档给出。<br>比如修改一个数据的时候，只需要得到http状态码的结果，200或201表示修改成功</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"msg"</span>:<span class="string">"uri_not_found"</span>,</span><br><span class="line">    <span class="attr">"code"</span>:<span class="number">1001</span>,</span><br><span class="line">    <span class="attr">"request"</span>: <span class="string">"GET \/v2\/photo\/132"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>REST 和 RESTful的区别：</p>
<ul>
<li>RESTful是REST的形容词形式</li>
<li>一般来说REST等于RESTful，区别一个是名词一个是形容词</li>
</ul>
<ul>
<li>新建资源-用HTTP POST请求、</li>
<li>获取资源-用HTTP GET请求、</li>
<li>获取某个资源的头部信息-用HTTP HEAD请求、</li>
<li>更新资源-用HTTP PUT请求、</li>
<li>删除资源-用HTTP DELETE请求</li>
</ul>
<p>REST API 接口实例 url用名词<br>HTTP方法          URL后缀                         动作<br>【head】     /product                          # 请求获取URL位置资源的响应消息报告，即获得该资源的头部信息<br>【GET】      /product                          # 请求获取URL位置的资源，查询所有商品信息列表<br>【GET】      /product/product_id               # 查看某个指定商品信息<br>【GET】      /product/product_id/purchase      # 列出某个指定商品的所有投资者<br>【GET】      /product/product_id/purchase/ID   # 获取某个指定商品的指定投资者信息</p>
<p>【POST】     /product                          # 请求向URL位置的资源后附加新的数据，新建一个商品<br>【PUT】      /product/product_id               # 请求向URL位置存储一个资源，覆盖原URL位置的资源，更新某个指定商品信息(全部字段)<br>【PATCH】    /product/product_id               # 请求局部更新URL位置的资源，覆盖原URL位置的资源，更新商品信息(部分字段)<br>【DELETE】   /product/product_id               # 请求删除URL位置存储的资源，删除某个商品</p>
<ul>
<li>一般 web 框架都有相应的插件支持 RESTful API。比如Django有 rest framework，Flask和Tornado分别有flask restful 和 tornado restful。<br>现在主流的web框架都是相关的RESTful API插件。</li>
</ul>
<p>如何设计RESTful API？<br>设计规范：</p>
<ul>
<li>协议：使用 HTTPs 协议，确保交互数据的传输安全。</li>
<li>域名：应该尽量将 API 部署在专用域名之下。i.e <a target="_blank" rel="noopener" href="https://api.example.com/">https://api.example.com</a></li>
<li>版本控制：将版本号放在 URL 或者 Header 中</li>
<li>路径：只能包含名词，不能包括动词</li>
<li>过滤信息：?limit=10 ?offset=10 ?page=1 ?sortby=name</li>
<li>Hypermedia API：在返回结果中提供相关资源的链接，连向其他 API 方法</li>
<li>验证（Authentication）：确定用户是其申明的身份，比如提供账户的密码。</li>
<li>授权（Authorization）：保证用户有对请求资源特定操作的权限。比如用户的私人信息只能自己能访可，其他人无法看到；有些特殊的操作只能管理员可以操作，其他用户有只读的权限等。</li>
</ul>
<p>DRF通过视图集ViewSet的方式让我们对某一个数据类Model可以进行增删改查，<br>而且不同的操作对应于不同的请求方式，<br>比如查看所有books用get方法，添加一本book用post方法等，让整个后端服务是restful的。</p>
<p>前端的展示和表单，希望达到两个目标，一是能从后端请求到所有的books列表，二是能往后端添加一条book数据。说白了就是希望把上面的页面用Vue简单实现一下，然后能达到相同的功能。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
