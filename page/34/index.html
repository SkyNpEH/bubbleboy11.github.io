<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/34/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/34/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/34/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">363</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/wen-jian-cao-zuo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/wen-jian-cao-zuo/" class="post-title-link" itemprop="url">python文件操作和文件编码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-15 06:06:09" itemprop="dateModified" datetime="2021-05-15T06:06:09Z">2021-05-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="文件读写模式"><a href="#文件读写模式" class="headerlink" title="文件读写模式"></a>文件读写模式</h2><p><code>open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)</code><br>打开一个文件，生成并且返回文件对象，在对文件进行处理过程（创建、读写操作）都需要使用到这个函数，如果该文件无法被打开，会抛出 OSError。<br>默认的创建的目录在当前程序所在的目录，文件不存在，则在当前目录创建该文件<br>file：一个包含了你要访问的文件路径的字符串值。</p>
<p>buffering: 设置缓冲<br>buffering:如果buffering的值被设为0，就不会有寄存。<br>如果buffering的值取1，访问文件时会寄存行。<br>如果将buffering的值设为大于1的整数，表明了这就是的寄存区的缓冲大小。<br>如果取负值，寄存区的缓冲大小则为系统默认。</p>
<p>encoding: Windows系统在写入中文时需要设置编码格式，一般使用utf8<br>errors: 报错级别<br>newline: 区分换行符<br>closefd: 传入的file参数类型<br>opener: 设置自定义开启器，开启器的返回值必须是一个打开的文件描述符。</p>
<p>mode 模式是一个可选非强制字符串，指定打开文件的模式。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">```'w'```写入模式，打开一个文件只用于写入。打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被覆盖删除。如果该文件不存在，创建新文件。</span><br><span class="line">指针在开始</span><br><span class="line"></span><br><span class="line">```'a'```追加(Attach)模式，如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span><br><span class="line">打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。</span><br><span class="line"></span><br><span class="line">```'b'```二进制模式（与其他模式结合使用）binary mode doesn't take an encoding argument，b模式不能再加上encoding</span><br><span class="line"></span><br><span class="line">```'ab'``` 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span><br><span class="line"></span><br><span class="line">```'rb'```    以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。</span><br><span class="line"></span><br><span class="line">```+```读写模式（与其他模式结合使用），打开一个文件进行更新(可读可写)。</span><br><span class="line"></span><br><span class="line">```'r+'```打开一个文件用于读写。文件指针将会放在文件的开头。</span><br><span class="line">```'W+'```以读写的方式打开文件。打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被覆盖删除。如果该文件不存在，创建新文件。</span><br><span class="line"></span><br><span class="line">```'a+'```如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是读写追加模式。如果该文件不存在，创建新文件用于读写</span><br><span class="line"></span><br><span class="line">```'ab+```以二进制格式打开一个文件用于追加。</span><br><span class="line">如果该文件已存在，文件指针将会放在文件的结尾。</span><br><span class="line">如果该文件不存在，创建新文件用于写入。</span><br><span class="line"></span><br><span class="line">```'rb+'```    以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</span><br><span class="line"></span><br><span class="line">```'wb'```以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，以二进制格式创建新文件。一般用于非文本文件如图片等。比特类型bytes，字符前缀```b```</span><br><span class="line"></span><br><span class="line">```'wb+'```    以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span><br><span class="line"></span><br><span class="line">不使用with语句写法</span><br><span class="line">```py</span><br><span class="line">file=open('文件路径'，访问模式) </span><br><span class="line">data = file.read()</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用with语法，到达该语句未尾时，将自动close-关闭文件释放资源，即便出现异常亦如此"><a href="#使用with语法，到达该语句未尾时，将自动close-关闭文件释放资源，即便出现异常亦如此" class="headerlink" title="使用with语法，到达该语句未尾时，将自动close()关闭文件释放资源，即便出现异常亦如此"></a>使用<code>with</code>语法，到达该语句未尾时，将自动<code>close()</code>关闭文件释放资源，即便出现异常亦如此</h3><p>中文字体写入默认是GB2312编码。</p>
<ul>
<li><p>不指定编码格式</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open（<span class="string">"file_path"</span>) <span class="keyword">as</span> file：</span><br><span class="line">    do_something(file)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>指定编码格式：<br>指定编码写入，需要打开文件的时候按指定的编码写入，open写encoding编码方式。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 打开</span></span><br><span class="line">file = open(<span class="string">"readme.txt"</span>, <span class="string">"a"</span>, encoding=<span class="string">'utf-8'</span>)  <span class="comment"># a 以追加的方式打开</span></span><br><span class="line"><span class="comment"># 2. 写入文件</span></span><br><span class="line">file.write(<span class="string">"123 hello"</span>)</span><br><span class="line"><span class="comment"># 3. 关闭</span></span><br><span class="line">file.close()</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">当一个文件对象的引用被重新指定给另一个文件时，Python 会关闭之前的文件。</span><br><span class="line">用来关闭文件并立即释放它使用的所有系统资源。如果你没有显式地关闭文件，Python的垃圾回收器最终将销毁该对象并为你关闭打开的文件，但这个文件可能会保持打开状态一段时间。</span><br><span class="line"></span><br><span class="line">一是可能忘记关闭文件句柄；</span><br><span class="line">二是文件读取数据发生异常，没有做异常处理</span><br><span class="line"></span><br><span class="line">一个文件被打开后，你有一个file对象，你可以得到有关该文件对象相关的所有属性的</span><br><span class="line">属性    描述</span><br><span class="line">```file.closed```    返回true如果文件已被关闭，否则返回false。</span><br><span class="line">```file.mode```    返回被打开文件的访问模式。</span><br><span class="line">```file.name```    返回文件的路径。</span><br><span class="line">```py</span><br><span class="line">fo = open("代码\pi_digits.txt", "w")</span><br><span class="line">print("文件路径: ", fo.name)  # 文件路径:  代码\pi_digits.txt</span><br><span class="line">print("是否已关闭 : ", fo.closed)  # 是否已关闭 :  False</span><br><span class="line">print("访问模式 : ", fo.mode)  # 访问模式 :  w</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">如果使用read读了多次，那么后面继续使用read读取的数据是从上次读完后的位置开始的</span><br><span class="line"></span><br><span class="line">```readline([count])```：对文件的数据按行读取，（行的划分是\n）.每次只读取一行。如果有多次读取的话，下面一次读取的偏移量是上面读取后的偏移量。</span><br><span class="line"></span><br><span class="line">```readlines()```：按照行的方式把整个文件中的内容进行一次性读取，读取所有行(直到结束符 EOF)并返回一个列表，其中每一行（按着换行符进行判断一行）的数据为一个元素。</span><br><span class="line"></span><br><span class="line">```write(“string”)```函数向打开的文件对象写入指定字符串，如果文件不存在那么创建，如果存在那么就先清空文件(覆盖)，然后写入数据到文件里。Python字符串可以是二进制数据，而不是仅仅是文字。不会在字符串的结尾添加换行符('\n')</span><br><span class="line"></span><br><span class="line">## 文件编码</span><br><span class="line"></span><br><span class="line">在python 3 中字符是以Unicode的形式存储的，当然这里所说的存储是指存储在计算机内存当中，</span><br><span class="line">如果是存储在硬盘里，Python 3的字符是以bytes形式存储，也就是说如果要将字符写入硬盘，就必须对字符进行encode。</span><br><span class="line">对上面这段话再解释一下，如果要将str写入文件，</span><br><span class="line">如果以`‘w’`模式写入，则要求写入的内容必须是`str`类型；</span><br><span class="line">如果以`‘wb’`形式写入，则要求写入的内容必须是`bytes`类型。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">python里写入文件出现乱码通常都是因为编码导致的。</span><br><span class="line">很多人说我已经encode设置为utf-8了呀，怎么还会出现乱码呢？</span><br><span class="line">其实这里涉及到2个编码的问题</span><br><span class="line">1、字符串的编码，比如我们爬虫返回的text的编码</span><br><span class="line">2、文件的编码</span><br><span class="line">要想不出现编码，必须保证字符的编码和文件的编码一致。写入模式与写入内容的数据类型</span><br><span class="line">```py</span><br><span class="line">s1 = '你好'</span><br><span class="line"># 如果是以‘w’的方式写入，写入前一定要进行encoding，否则会报错</span><br><span class="line">with open('F:\\1.txt', 'w', encoding='utf-8') as f1:</span><br><span class="line">    f1.write(s1)</span><br><span class="line"></span><br><span class="line">s2 = s1.encode("utf-8")  # 转换为bytes的形式</span><br><span class="line"># 这时候写入方式一定要是‘wb’，且一定不能加encoding参数</span><br><span class="line">with open('F:\\2.txt', 'wb') as f2:</span><br><span class="line">    f2.write(s2)</span><br></pre></td></tr></tbody></table></figure>
<p>有的人会问，我在系统里面用文本编辑器打开以bytes形式写入的2.txt文件，<br>发现里面显示的是‘你好’，而不是‘b’\xe4\xbd\xa0\xe5\xa5\xbd’’，<br>因为文本文档打开2.txt时，又会对它进行decode，然后才给你看到。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">以往后遇加的模式与入文件</span><br><span class="line"></span><br><span class="line">在默认模式下读取文本文件时（二进制文件不可以），文件中的换行符会转换为'\n'形式。</span><br><span class="line"></span><br><span class="line">在默认模式下写入文件时，文本中的'\n'会转换为换行符。</span><br><span class="line"></span><br><span class="line">```tell()```方法告诉你文件内的当前位置, 换句话说，下一次的读写会发生在文件开头这么多字节之后。</span><br><span class="line"></span><br><span class="line">```seek(offset [,from])```方法改变当前文件的位置。Offset变量表示要移动的字节数。From变量指定开始移动字节的参考位置。</span><br><span class="line"></span><br><span class="line">如果from被设为0，这意味着将文件的开头作为移动字节的参考位置。如果设为1，则使用当前的位置作为参考位置。如果它被设为2，那么该文件的末尾将作为参考位置。</span><br><span class="line"></span><br><span class="line">```seek(3)```从文件起始位置偏移3个字符从第4个字符位置开始读取</span><br><span class="line">```seek(0，0)```重新从文件启始位置读取</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">current_path = os.getcwd()</span><br><span class="line">with open(current_path + '/' + 'test1.txt', 'w+',</span><br><span class="line">          encoding='utf-8') as file_object:</span><br><span class="line">    file_object.write('Ashe正在学习Python')</span><br><span class="line">    content = file_object.read()</span><br><span class="line">    print(content, type(content))</span><br><span class="line">    #  &lt;class 'str'&gt; 注意前面有一个空格表示content是空字符串</span><br><span class="line">    # 因为此时读取的是最后一个字符，写完内容之后就是空字符串</span><br><span class="line">    file_object.seek(0)</span><br><span class="line">    content = file_object.read()</span><br><span class="line">    print(content, type(content))</span><br><span class="line">    # Ashe正在学习Python &lt;class 'str'&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">current_path = os.getcwd()</span><br><span class="line"><span class="keyword">with</span> open(current_path + <span class="string">'/'</span> + <span class="string">'test1.txt'</span>, <span class="string">'ab+'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    string = <span class="string">b'Ashe Python'</span></span><br><span class="line">    file_object.write(string)</span><br><span class="line">    content = file_object.read()</span><br><span class="line">    print(content, type(content))</span><br><span class="line">    <span class="comment"># b'' &lt;class 'bytes'&gt; 注意前面有一个空格表示content是空字符串</span></span><br><span class="line">    <span class="comment"># 因为此时读取的是最后一个字符，写完内容之后就是空字符串</span></span><br><span class="line">    file_object.seek(<span class="number">0</span>)</span><br><span class="line">    content = file_object.read()</span><br><span class="line">    print(content, type(content))</span><br><span class="line">    <span class="comment"># b'Ashe Python' &lt;class 'bytes'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">filename = <span class="string">'代码\generate_text.txt'</span></span><br><span class="line"><span class="comment"># 使用‘w’来提醒python用写入的方式打开 指定编码为</span></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fileobject:</span><br><span class="line">    fileobject.write(<span class="string">'I love your name!'</span></span><br><span class="line">                     <span class="string">'\nI love your cloth!'</span></span><br><span class="line">                     <span class="string">'\nI love your shoes!'</span></span><br><span class="line">                     <span class="string">'\nI love your hair!'</span>)</span><br><span class="line"><span class="comment"># 使用‘a’来提醒python用附加模式的方式打开指定编码为'utf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fileobject:</span><br><span class="line">    fileobject.write(<span class="string">'\nI an superman.我是超人'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用‘a’来提醒python用附加模式的方式打开不指定编码为'utf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'a'</span>) <span class="keyword">as</span> fileobject:</span><br><span class="line">    fileobject.write(<span class="string">'\nI an superman.我是超人'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'代码\generate_text.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    content = f.readline()</span><br><span class="line">    print(<span class="string">"第一次读取:%s"</span> % content)</span><br><span class="line">    <span class="comment"># 第一次读取:I love your name!</span></span><br><span class="line">    print(<span class="string">"第一次读取:"</span>, content)</span><br><span class="line">    <span class="comment"># 第一次读取:I love your name!</span></span><br><span class="line"></span><br><span class="line">    content = f.readline()</span><br><span class="line">    print(<span class="string">"第二次读取:%s"</span> % content)</span><br><span class="line">    <span class="comment"># 第二次读取:I love your cloth!</span></span><br><span class="line"></span><br><span class="line">    content = f.read(<span class="number">6</span>)</span><br><span class="line">    print(<span class="string">"第三次读取:%s"</span> % content)</span><br><span class="line">    <span class="comment"># 第三次读取:I love</span></span><br><span class="line"></span><br><span class="line">    position = f.tell()</span><br><span class="line">    print(<span class="string">"当前文件位置 : "</span>, position)</span><br><span class="line">    <span class="comment"># 当前文件位置 :  45</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 把指针再次重新定位到文件开头</span></span><br><span class="line">    position = f.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    str = f.read(<span class="number">16</span>)</span><br><span class="line">    print(<span class="string">"读取的字符串是 : "</span>, str)</span><br><span class="line">    <span class="comment"># 读取的字符串是 :  I love your name</span></span><br><span class="line">    position = f.tell()</span><br><span class="line">    print(<span class="string">"当前文件位置 : "</span>, position)</span><br><span class="line">    <span class="comment"># 当前文件位置 :  16</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'代码\generate_text.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    content = f.read()</span><br><span class="line">    print(<span class="string">"读取:%s"</span> % content)</span><br><span class="line">    <span class="comment"># 读取:I love your name!</span></span><br><span class="line">    <span class="comment"># I love your cloth!</span></span><br><span class="line">    <span class="comment"># I love your shoes!</span></span><br><span class="line">    <span class="comment"># I love your hair!</span></span><br><span class="line">    <span class="comment"># I an superman.鎴戞槸瓒呬汉</span></span><br><span class="line">    <span class="comment"># I an superman.我是超人</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 注意如果用read（），读取全部，后面再加read(num),就没有内容可读了。返回空字符串</span></span><br><span class="line">    content = f.read(<span class="number">6</span>)</span><br><span class="line">    print(<span class="string">":%s"</span> % content)</span><br><span class="line">    <span class="comment"># :</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'代码\generate_text.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    content = f.readlines()</span><br><span class="line">    print(<span class="string">"读取:%s"</span> % content)</span><br><span class="line"><span class="comment">#     读取:['I love your name!\n', 'I love your cloth!\n', 'I love your </span></span><br><span class="line"><span class="comment"># shoes!\n', 'I love your hair!\n', 'I an superman.鎴戞槸瓒呬汉\n', </span></span><br><span class="line"><span class="comment"># 'I an superman.我是超人']</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 相对文件路径 （优先使用）</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    contents = file_object.read()</span><br><span class="line">    <span class="comment"># 多出一个空行的情况下可以使用 rstrip() 来去除字符串后面的空白</span></span><br><span class="line">    print(contents.rstrip())</span><br><span class="line">    <span class="comment"># 3.1415926535  </span></span><br><span class="line">    <span class="comment">#   8979323846  </span></span><br><span class="line">    <span class="comment">#   2643383279  </span></span><br><span class="line">    <span class="comment"># 'abc  '     </span></span><br><span class="line">    <span class="comment"># '  abc'     </span></span><br><span class="line">    <span class="comment"># abc</span></span><br><span class="line">    <span class="comment">#   abc  </span></span><br><span class="line">    print(<span class="string">'******'</span>)</span><br><span class="line">    print(contents.lstrip())</span><br><span class="line">    <span class="comment"># 3.1415926535  </span></span><br><span class="line">    <span class="comment">#   8979323846  </span></span><br><span class="line">    <span class="comment">#   2643383279  </span></span><br><span class="line">    <span class="comment"># 'abc  '     </span></span><br><span class="line">    <span class="comment"># '  abc'     </span></span><br><span class="line">    <span class="comment"># abc</span></span><br><span class="line">    <span class="comment">#   abc </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绝对文件路径</span></span><br><span class="line">file_path = <span class="string">'C:\python代码\牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_object:</span><br><span class="line">    print(<span class="string">'----'</span>)</span><br><span class="line">    print(file_object.read())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 逐行 读取文件的信息</span></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_object:</span><br><span class="line">    print(<span class="string">'======'</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_object:</span><br><span class="line">        <span class="comment"># 多出一个空行的情况下可以使用 rstrip() 来去除字符串后面的空白</span></span><br><span class="line">        print(line.rstrip())  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 逐行 读取文件的信息 使用readlines()</span></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_object:</span><br><span class="line">    print(<span class="string">'^^^^^^^'</span>)</span><br><span class="line">    lines = file_object.readlines()</span><br><span class="line">    print(lines)</span><br><span class="line">    <span class="comment"># ['3.1415926535\n', '  8979323846\n', '  2643383279\n', "'abc  '\n", "'  abc'\n", 'abc\n', '  abc']</span></span><br><span class="line">    <span class="comment"># 遍历列表，将读取的内容显示出来，按照原来文件的行划分。</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="comment"># 多出一个空行的情况下可以使用 rstrip() 来去除字符串后面的空白</span></span><br><span class="line">        print(line.rstrip())串后面的空白</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用文件的内容 读取/拼接</span></span><br><span class="line"><span class="comment"># 逐行 读取文件的信息 使用readlines()</span></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_object:</span><br><span class="line">    lines = file_object.readlines()  <span class="comment"># 读取文件中每行的信息</span></span><br><span class="line">pi_string = <span class="string">''</span>  <span class="comment"># 创建一个字符串</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:  <span class="comment"># 遍历读取到的文件的每行信息 存储到line中</span></span><br><span class="line">    pi_string += line.strip()  <span class="comment"># 读取到的每行信息+创建的字符串  并用strip()去除两端的空格</span></span><br><span class="line">print(pi_string)  <span class="comment"># 输出拼接之后的信息</span></span><br><span class="line"><span class="comment"># 3.141592653589793238462643383279'abc  ''  abc'abcabc</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取一个百万位的大型文件</span></span><br><span class="line"><span class="comment"># 逐行 读取文件的信息 使用readlines()</span></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\pi_digits.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_object:</span><br><span class="line">    lines = file_object.readlines()  <span class="comment"># 读取文件中每行的信息</span></span><br><span class="line">pi_string = <span class="string">''</span>  <span class="comment"># 创建一个字符串</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:  <span class="comment"># 遍历读取到的文件的每行信息 存储到line中</span></span><br><span class="line">    <span class="comment"># 读取到的每行信息+创建的字符串  并用strip()去除两端的空格</span></span><br><span class="line">    pi_string += line.strip()</span><br><span class="line"><span class="comment"># 输出拼接之后的信息 只输出列表中的前9位 如果输出百万位 把9改为1000000</span></span><br><span class="line">print(pi_string[:<span class="number">9</span>] + <span class="string">'...'</span>)</span><br><span class="line"><span class="comment"># 输出拼接之后的信息的字符串长度</span></span><br><span class="line">print(len(pi_string))</span><br><span class="line"><span class="comment"># 3.1415926...</span></span><br><span class="line"><span class="comment"># 52</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写入文件 执行完之后 文件目录中 会生成一个generate_text.txt的文件 </span></span><br><span class="line"><span class="comment"># 内容就是‘正在学习Python’ 在读取写入的文件内容和文件长度</span></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\generate_doc.txt'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    file_object.write(<span class="string">'Ashe正在学习Python'</span> + <span class="string">'\n'</span>)</span><br><span class="line">    file_object.write(<span class="string">'Ashe正在学习Python1'</span> + <span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'a'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    file_object.write(<span class="string">'Ashe正在学习Python'</span> + <span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'r'</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    lines = file_object.readlines()</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        print(line.strip())</span><br><span class="line">        print(len(line))</span><br><span class="line">        <span class="comment"># Ashe正在学习Python</span></span><br><span class="line">        <span class="comment"># 15</span></span><br><span class="line">        <span class="comment"># Ashe正在学习Python1</span></span><br><span class="line">        <span class="comment"># 16</span></span><br><span class="line">        <span class="comment"># Ashe正在学习Python</span></span><br><span class="line">        <span class="comment"># 15</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提示用户输入自己的姓名 再将用户输入的姓名写入到文件中输出</span></span><br><span class="line"></span><br><span class="line">file_path = <span class="string">'牛客网剑指offer66题思路分析\代码\generate_input.txt'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>) <span class="keyword">as</span> file_object:  <span class="comment"># w:表示写入(Write)到这个文件中</span></span><br><span class="line">    message = input(<span class="string">'input your name：'</span>)</span><br><span class="line">    file_object.write(message)</span><br><span class="line">    <span class="comment"># input: Ashe</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将列表数据number存储在number.json 文件中</span></span><br><span class="line">number = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>]</span><br><span class="line">filename = <span class="string">'number.json'</span></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'w'</span>) <span class="keyword">as</span> f_obj:</span><br><span class="line">    <span class="comment"># f_obj:存入到的文件的位置</span></span><br><span class="line">    <span class="comment"># json.dump用来存储。</span></span><br><span class="line">    json.dump(number, f_obj)</span><br><span class="line">    print(<span class="string">'数据存储到'</span> + filename + <span class="string">'完成！'</span>)</span><br><span class="line">    <span class="comment"># 数据存储到number.json完成！</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取前面写入到number.json文件的数据内容</span></span><br><span class="line"><span class="keyword">with</span> open(filename, <span class="string">'r'</span>) <span class="keyword">as</span> f_obj:</span><br><span class="line">    <span class="comment"># json.load用来读取。</span></span><br><span class="line">    <span class="comment"># f_obj:读取的数据源的位置</span></span><br><span class="line">    numbers = json.load(f_obj)</span><br><span class="line">    print(numbers)</span><br><span class="line">    <span class="comment"># [2, 3, 4, 5, 7, 11, 13]</span></span><br><span class="line"><span class="comment"># for循环遍历输出读取到的文件中的每条列表中的数据 并 打印输出</span></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> numbers:</span><br><span class="line">    print(number)</span><br><span class="line">    <span class="comment"># 2</span></span><br><span class="line">    <span class="comment"># 3</span></span><br><span class="line">    <span class="comment"># 4</span></span><br><span class="line">    <span class="comment"># 5</span></span><br><span class="line">    <span class="comment"># 7</span></span><br><span class="line">    <span class="comment"># 11</span></span><br><span class="line">    <span class="comment"># 13</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">data_list = [{</span><br><span class="line">    <span class="string">'href'</span>: <span class="string">'https://bubbleboy11.github.io/'</span>,</span><br><span class="line">    <span class="string">'text'</span>: <span class="string">' 首页'</span></span><br><span class="line">}, {</span><br><span class="line">    <span class="string">'href'</span>: <span class="string">'https://bubbleboy11.github.io/'</span>,</span><br><span class="line">    <span class="string">'text'</span>: <span class="string">' python'</span></span><br><span class="line">}]</span><br><span class="line"><span class="comment"># python按行写入文件</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'代码\generate_data.json'</span>, <span class="string">'a+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        line = json.dumps(item, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">        f.write(line + <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按行读取文件的操作方法</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'代码\generate_data.json'</span>, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 读取所有行 每行会是一个字符串</span></span><br><span class="line">    <span class="keyword">for</span> jsonstr <span class="keyword">in</span> f.readlines():</span><br><span class="line">        <span class="comment"># 将josn字符串转化为dict字典</span></span><br><span class="line">        jsonstr = json.loads(jsonstr)</span><br><span class="line">        print(jsonstr)</span><br><span class="line">        <span class="comment"># {"href": "https://bubbleboy11.github.io/", "text": " 首页"}</span></span><br><span class="line">        <span class="comment"># {"href": "https://bubbleboy11.github.io/", "text": " python"}</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">seconds = time.time()</span><br><span class="line">print(seconds)</span><br><span class="line">localtime = time.localtime(seconds)</span><br><span class="line">print(localtime)</span><br><span class="line">print(localtime.tm_year)</span><br><span class="line">print(localtime.tm_mon)</span><br><span class="line">print(localtime.tm_mday)</span><br><span class="line">asctime = time.asctime(localtime)</span><br><span class="line">print(asctime)</span><br><span class="line">strtime = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, localtime)</span><br><span class="line">print(strtime)</span><br><span class="line">mydate = time.strptime(<span class="string">'2018-1-1'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line">print(mydate)</span><br><span class="line"></span><br><span class="line">shutil.copy(<span class="string">'/Users/Hao/hello.py'</span>, <span class="string">'/Users/Hao/Desktop/first.py'</span>)</span><br><span class="line">os.system(<span class="string">'ls -l'</span>)</span><br><span class="line">os.chdir(<span class="string">'/Users/Hao'</span>)</span><br><span class="line">os.system(<span class="string">'ls -l'</span>)</span><br><span class="line">os.mkdir(<span class="string">'test'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>在项目中需要进行很多重复的操作，如要给代码的源文件添加相同的代码，这个时候一个文件一个文件的操作就很浪费时间了，<br>通过python批处理一秒不到全部添加完成，本代码只是一个抛砖引玉的效果，只要是有特征的文本修改均可由代码完成，解放双手！</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_edit_vhd</span>(<span class="params">filepath</span>):</span></span><br><span class="line">    <span class="keyword">with</span> open(filepath, <span class="string">'r+'</span>) <span class="keyword">as</span> file_head:</span><br><span class="line">        content = file_head.read()</span><br><span class="line">        file_head.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        file_head.write(<span class="string">"`protect begin \n"</span> + content)</span><br><span class="line">        file_head.seek(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        file_head.write(<span class="string">"\n`protect end "</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_edit_v</span>(<span class="params">filepath</span>):</span></span><br><span class="line">    <span class="keyword">with</span> open(filepath, <span class="string">'r+'</span>) <span class="keyword">as</span> file_head:</span><br><span class="line">        content = file_head.read()</span><br><span class="line">        file_head.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        file_head.write(<span class="string">"`protect \n"</span> + content)</span><br><span class="line">        file_head.seek(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        file_head.write(<span class="string">" \n`endprotect "</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_text</span>(<span class="params">srcpath</span>):</span>  <span class="comment"># 寻找本文件夹及子文件夹下所以符合要求的文本进行处理</span></span><br><span class="line">    srcdirs = os.listdir(srcpath)</span><br><span class="line">    <span class="keyword">for</span> dir <span class="keyword">in</span> srcdirs:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(os.path.join(srcpath, dir)):  <span class="comment"># 判断dir属性，为文件或者文件夹</span></span><br><span class="line">            add_text(os.path.join(srcpath, dir))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'.vhd'</span> == dir[<span class="number">-4</span>:]:</span><br><span class="line">                print(<span class="string">"正在处理文件中，文件路径为："</span> + os.path.join(srcpath, dir))</span><br><span class="line">                text_edit_vhd(os.path.join(srcpath, dir))</span><br><span class="line">                print(<span class="string">"文件处理完成！"</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'.v'</span> == dir[<span class="number">-2</span>:]:</span><br><span class="line">                print(<span class="string">"正在处理文件中，文件路径为："</span> + os.path.join(srcpath, dir))</span><br><span class="line">                text_edit_v(os.path.join(srcpath, dir))</span><br><span class="line">                print(<span class="string">"文件处理完成！"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">current_path = os.getcwd()</span><br><span class="line">print(<span class="string">'当前文件路径为：'</span> + current_path)</span><br><span class="line">os.chdir(<span class="string">'..'</span>)</span><br><span class="line">root_path = os.getcwd()</span><br><span class="line">handle_path = root_path + <span class="string">'\handle'</span></span><br><span class="line">print(<span class="string">'当前文件路径为：'</span> + handle_path)</span><br><span class="line">shutil.copytree(path, handle_path)  <span class="comment"># 备份后进行数据处理</span></span><br><span class="line">add_text(handle_path)</span><br><span class="line">print(<span class="string">"run done\n"</span>)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Description   : Checks to see if a directory exists in the users home directory, if not then create it</span></span><br><span class="line"><span class="comment"># 检查主目录中是否存在某文件夹，若不存在则创建</span></span><br><span class="line"><span class="keyword">import</span> os  <span class="comment"># Import the OS module</span></span><br><span class="line"></span><br><span class="line">MESSAGE = <span class="string">'The directory already exists.'</span></span><br><span class="line">TESTDIR = <span class="string">'testdir'</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># Set the variable home by expanding the user's set home directory</span></span><br><span class="line">    home = os.path.expanduser(<span class="string">"~"</span>)</span><br><span class="line">    print(home)  <span class="comment"># Print the location</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># os.path.join() for making a full path safely</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(os.path.join(home, TESTDIR)):</span><br><span class="line">        <span class="comment"># If not create the directory, inside their home directory</span></span><br><span class="line">        os.makedirs(os.path.join(home, TESTDIR))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(MESSAGE)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_package</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'%s 已经存在不可创建'</span> % path)</span><br><span class="line">    os.makedirs(path)</span><br><span class="line">    init_path = os.path.join(path, <span class="string">'__init__.py'</span>)</span><br><span class="line">    f = open(init_path, <span class="string">'w'</span>)</span><br><span class="line">    f.write(<span class="string">'# coding:utf-8\n'</span>)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Open</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, path, mode=<span class="string">'w'</span>, is_return=True</span>):</span></span><br><span class="line">        self.path = path</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.is_return = is_return</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span>(<span class="params">self, message</span>):</span></span><br><span class="line">        f = open(self.path, mode=self.mode)</span><br><span class="line">        <span class="keyword">if</span> self.is_return:</span><br><span class="line">            message = <span class="string">'%s\n'</span> % message</span><br><span class="line">        f.write(message)</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">self, is_strip=True</span>):</span></span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">with</span> open(self.path, mode=self.mode) <span class="keyword">as</span> f:</span><br><span class="line">            data = f.readlines()</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">            <span class="keyword">if</span> is_strip == <span class="literal">True</span>:</span><br><span class="line">                temp = line.strip()</span><br><span class="line">                <span class="keyword">if</span> temp != <span class="string">""</span>:</span><br><span class="line">                    result.append(temp)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> line != <span class="string">''</span>:</span><br><span class="line">                    result.append(line)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    current_path = os.getcwd()</span><br><span class="line">    <span class="comment"># path = os.path.join(current_path, 'test1')</span></span><br><span class="line">    <span class="comment"># create_package(path)</span></span><br><span class="line">    <span class="comment"># open_path = os.path.join(current_path, 'b.txt')</span></span><br><span class="line">    o = Open(<span class="string">'package_datetime.py'</span>, mode=<span class="string">'r'</span>)</span><br><span class="line">    <span class="comment"># o.write('你好 小慕')</span></span><br><span class="line">    data = o.read(is_strip=<span class="literal">False</span>)</span><br><span class="line">    print(data)</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/lu-you-wang-yan-zheng-ma-huo-qu-jie-kou-lian-diao/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/lu-you-wang-yan-zheng-ma-huo-qu-jie-kou-lian-diao/" class="post-title-link" itemprop="url">验证码获取接口联调</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-02 12:32:30" itemprop="dateModified" datetime="2021-05-02T12:32:30Z">2021-05-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%97%85%E6%B8%B8%E7%BD%91%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">旅游网项目</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="短信验证码接口开发"><a href="#短信验证码接口开发" class="headerlink" title="短信验证码接口开发"></a>短信验证码接口开发</h3><h4 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li>第一步，设计接口返回内容及字段</li>
<li>第二步，编写接口代码</li>
</ul>
<p><code>utils/response.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ServerErrorJsonResponse</span>(<span class="params">JsonResponse</span>):</span></span><br><span class="line">    status_code = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        data = {</span><br><span class="line">            <span class="string">"error_code"</span>: <span class="string">"500000"</span>,</span><br><span class="line">            <span class="string">"error_msg"</span>: <span class="string">"服务器正忙，请稍后重试"</span>,</span><br><span class="line">        }</span><br><span class="line">        super().__init__(data, *args, **kwargs)</span><br></pre></td></tr></tbody></table></figure>


<p>验证码只存取5分钟，之后自动删除，用redis实现验证码缓存<br><code>system/forms.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.cache <span class="keyword">import</span> cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendSmsCodeForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    <span class="string">""" 发送验证码的表单 """</span></span><br><span class="line">    phone_num = forms.CharField(label=<span class="string">'手机号码'</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入手机号码'</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_phone_num</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 验证是否为手机号 """</span></span><br><span class="line">        phone_num = self.cleaned_data[<span class="string">'phone_num'</span>]</span><br><span class="line">        pattern = <span class="string">r'^1[0-9]{10}$'</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.search(pattern, phone_num):</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'手机号%s输入不正确'</span>,</span><br><span class="line">                                        code=<span class="string">'invalid_phone'</span>,</span><br><span class="line">                                        params=(phone_num,))</span><br><span class="line">        <span class="keyword">return</span> phone_num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_sms_code</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 生成验证码并发送短信 """</span></span><br><span class="line">        sms_code = random.randint(<span class="number">100000</span>, <span class="number">999999</span>)</span><br><span class="line">        phone_num = self.cleaned_data.get(<span class="string">'phone_num'</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># TODO 调用发送验证码的短信接口</span></span><br><span class="line">            <span class="comment"># redis中的key</span></span><br><span class="line">            key = <span class="string">'sms_code_{}'</span>.format(phone_num)</span><br><span class="line">            <span class="comment"># 将验证码存入redis</span></span><br><span class="line">            timeout = <span class="number">5</span> * <span class="number">60</span></span><br><span class="line">            cache.set(key, sms_code, timeout=timeout)</span><br><span class="line">            <span class="keyword">return</span> {</span><br><span class="line">                <span class="string">'phone_num'</span>: phone_num,</span><br><span class="line">                <span class="string">'sms_code'</span>: sms_code,</span><br><span class="line">                <span class="string">'timeout'</span>: timeout</span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(e)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>system/views.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> FormView</span><br><span class="line"><span class="keyword">from</span> system.forms <span class="keyword">import</span> SendSmsCodeForm</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> BadRequestJsonResponse, ServerErrorJsonResponse</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_sms</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="comment"># 1. 拿到手机号，判断是否为真实的手机号码</span></span><br><span class="line">    <span class="comment"># 2. 生成验证码，并存储</span></span><br><span class="line">    <span class="comment"># TODO 3. 调用短信的发送接口</span></span><br><span class="line">    <span class="comment"># 4. 告诉用户验证码发送是否成功（会把验证码直接告诉用户）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmsCodeView</span>(<span class="params">FormView</span>):</span></span><br><span class="line">    form_class = SendSmsCodeForm</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_valid</span>(<span class="params">self, form</span>):</span></span><br><span class="line">        <span class="string">""" 表单已经通过验证 """</span></span><br><span class="line">        data = form.send_sms_code()</span><br><span class="line">        <span class="keyword">if</span> data:</span><br><span class="line">            <span class="keyword">return</span> http.JsonResponse(data, status=<span class="number">201</span>)</span><br><span class="line">        <span class="keyword">return</span> ServerErrorJsonResponse()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_invalid</span>(<span class="params">self, form</span>):</span></span><br><span class="line">        <span class="string">""" 表单没有通过验证 """</span></span><br><span class="line">        err_list = json.loads(form.errors.as_json())</span><br><span class="line">        <span class="keyword">return</span> BadRequestJsonResponse(err_list)</span><br></pre></td></tr></tbody></table></figure>

<p><code>system/urls.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 发送验证码</span></span><br><span class="line">    path(<span class="string">'send/sms/'</span>, views.SmsCodeView.as_view(), name=<span class="string">"send_sms"</span>),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>第三步，模拟HTTP请求，测试验证接口</li>
</ul>
<h3 id="用户注册接口开发"><a href="#用户注册接口开发" class="headerlink" title="用户注册接口开发"></a>用户注册接口开发</h3><h4 id="开发步骤-1"><a href="#开发步骤-1" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li>第一步，设计接口返回内容及字段</li>
<li>第二步，编写接口代码</li>
</ul>
<p><code>utils/constants.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户注册时，发送验证码的redis key</span></span><br><span class="line">REGISTER_MSM_CODE_KEY = <span class="string">'reg_sms_'</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>system/forms.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.core.cache <span class="keyword">import</span> cache</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> constants</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendSmsCodeForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    <span class="string">""" 发送验证码的表单 """</span></span><br><span class="line">    phone_num = forms.CharField(label=<span class="string">'手机号码'</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入手机号码'</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_phone_num</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 验证是否为手机号 """</span></span><br><span class="line">        phone_num = self.cleaned_data[<span class="string">'phone_num'</span>]</span><br><span class="line">        pattern = <span class="string">r'^1[0-9]{10}$'</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.search(pattern, phone_num):</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'手机号%s输入不正确'</span>,</span><br><span class="line">                                        code=<span class="string">'invalid_phone'</span>,</span><br><span class="line">                                        params=(phone_num,))</span><br><span class="line">        <span class="keyword">return</span> phone_num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_sms_code</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 生成验证码并发送短信 """</span></span><br><span class="line">        sms_code = random.randint(<span class="number">100000</span>, <span class="number">999999</span>)</span><br><span class="line">        phone_num = self.cleaned_data.get(<span class="string">'phone_num'</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># TODO 调用发送验证码的短信接口</span></span><br><span class="line">            <span class="comment"># redis中的key</span></span><br><span class="line">            key = <span class="string">'{}{}'</span>.format(constants.REGISTER_MSM_CODE_KEY, phone_num)</span><br><span class="line">            <span class="comment"># 将验证码存入redis</span></span><br><span class="line">            timeout = <span class="number">5</span> * <span class="number">60</span></span><br><span class="line">            cache.set(key, sms_code, timeout=timeout)</span><br><span class="line">            <span class="keyword">return</span> {</span><br><span class="line">                <span class="string">'phone_num'</span>: phone_num,</span><br><span class="line">                <span class="string">'sms_code'</span>: sms_code,</span><br><span class="line">                <span class="string">'timeout'</span>: timeout</span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(e)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>accounts/forms.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> authenticate, login</span><br><span class="line"><span class="keyword">from</span> django.core.cache <span class="keyword">import</span> cache</span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"><span class="keyword">from</span> django.utils.timezone <span class="keyword">import</span> now</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> accounts.models <span class="keyword">import</span> User, Profile</span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> constants</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    <span class="string">""" 登录表单 """</span></span><br><span class="line">    username = forms.CharField(label=<span class="string">'用户名'</span>,</span><br><span class="line">                               max_length=<span class="number">100</span>,</span><br><span class="line">                               required=<span class="literal">False</span>,</span><br><span class="line">                               help_text=<span class="string">'使用帮助'</span>,</span><br><span class="line">                               initial=<span class="string">'admin'</span>)</span><br><span class="line">    password = forms.CharField(label=<span class="string">'密码'</span>,</span><br><span class="line">                               max_length=<span class="number">200</span>,</span><br><span class="line">                               min_length=<span class="number">6</span>,</span><br><span class="line">                               widget=forms.PasswordInput)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        super().__init__(*args, **kwargs)</span><br><span class="line">        <span class="comment"># 当前登录的用户</span></span><br><span class="line">        self.user = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_username</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 验证用户名 hook 钩子函数 """</span></span><br><span class="line">        username = self.cleaned_data[<span class="string">'username'</span>]</span><br><span class="line">        pattern = <span class="string">r'^1[0-9]{10}$'</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.search(pattern, username):</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'手机号%s输入不正确'</span>,</span><br><span class="line">                                        code=<span class="string">'invalid_phone'</span>,</span><br><span class="line">                                        params=(username,))</span><br><span class="line">        <span class="keyword">return</span> username</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean</span>(<span class="params">self</span>):</span></span><br><span class="line">        data = super().clean()</span><br><span class="line">        print(data)</span><br><span class="line">        <span class="comment"># 如果单个字段有错误，直接返回，不执行后面的验证</span></span><br><span class="line">        <span class="keyword">if</span> self.errors:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        username = data.get(<span class="string">'username'</span>, <span class="literal">None</span>)</span><br><span class="line">        password = data.get(<span class="string">'password'</span>, <span class="literal">None</span>)</span><br><span class="line">        user = authenticate(username=username, password=password)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> user:</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'用户名或者是密码不正确'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> user.is_active:</span><br><span class="line">                <span class="keyword">raise</span> forms.ValidationError(<span class="string">'该用户已经被禁用'</span>)</span><br><span class="line">        self.user = user</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_login</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="string">""" 执行用户登录 """</span></span><br><span class="line">        user = self.user</span><br><span class="line">        <span class="comment"># 调用登录</span></span><br><span class="line">        login(request, user)</span><br><span class="line">        <span class="comment"># 修改最后登录的时间</span></span><br><span class="line">        user.last_login = now()</span><br><span class="line">        user.save()</span><br><span class="line">        <span class="comment"># TODO 保存登录历史</span></span><br><span class="line">        <span class="keyword">return</span> user</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisterForm</span>(<span class="params">forms.Form</span>):</span></span><br><span class="line">    <span class="string">""" 用户注册 """</span></span><br><span class="line">    username = forms.CharField(label=<span class="string">'手机号码'</span>, max_length=<span class="number">16</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入手机号码'</span></span><br><span class="line">    })</span><br><span class="line">    password = forms.CharField(label=<span class="string">'密码'</span>, max_length=<span class="number">128</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入密码'</span></span><br><span class="line">    })</span><br><span class="line">    nickname = forms.CharField(label=<span class="string">'昵称'</span>, max_length=<span class="number">16</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入昵称'</span></span><br><span class="line">    })</span><br><span class="line">    sms_code = forms.CharField(label=<span class="string">'验证码'</span>, max_length=<span class="number">6</span>, required=<span class="literal">True</span>, error_messages={</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请输入验证码'</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_username</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 验证用户名 hook 钩子函数 """</span></span><br><span class="line">        username = self.cleaned_data[<span class="string">'username'</span>]</span><br><span class="line">        pattern = <span class="string">r'^1[0-9]{10}$'</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.search(pattern, username):</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'手机号%s输入不正确'</span>,</span><br><span class="line">                                        code=<span class="string">'invalid_phone'</span>,</span><br><span class="line">                                        params=(username,))</span><br><span class="line">        <span class="keyword">if</span> User.objects.filter(username=username).exists():</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'手机号已经被使用'</span>)</span><br><span class="line">        <span class="keyword">return</span> username</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean_nickname</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">""" 昵称验证 """</span></span><br><span class="line">        nickname = self.cleaned_data[<span class="string">'nickname'</span>]</span><br><span class="line">        <span class="keyword">if</span> User.objects.filter(nickname=nickname).exists():</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'昵称已经被使用'</span>)</span><br><span class="line">        <span class="keyword">return</span> nickname</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clean</span>(<span class="params">self</span>):</span></span><br><span class="line">        data = super().clean()</span><br><span class="line">        <span class="keyword">if</span> self.errors:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        phone_num = self.cleaned_data.get(<span class="string">'username'</span>, <span class="literal">None</span>)</span><br><span class="line">        sms_code = self.cleaned_data.get(<span class="string">'sms_code'</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># redis 中的验证码key</span></span><br><span class="line">        key = <span class="string">'{}{}'</span>.format(constants.REGISTER_MSM_CODE_KEY, phone_num)</span><br><span class="line">        code = cache.get(key)</span><br><span class="line">        <span class="comment"># code 已失效</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> code:</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'验证码已经失效'</span>)</span><br><span class="line">        <span class="keyword">if</span> str(code) != sms_code:</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">'验证码输入不正确'</span>)</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="meta">    @transaction.atomic</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_register</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="string">""" 执行注册 """</span></span><br><span class="line">        data = self.cleaned_data</span><br><span class="line">        version = request.headers.get(<span class="string">'version'</span>, <span class="string">''</span>)</span><br><span class="line">        source = request.headers.get(<span class="string">'source'</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 1. 创建基础信息表</span></span><br><span class="line">            user = User.objects.create_user(</span><br><span class="line">                username=data.get(<span class="string">'username'</span>, <span class="literal">None</span>),</span><br><span class="line">                password=data.get(<span class="string">'password'</span>, <span class="literal">None</span>),</span><br><span class="line">                nickname=data.get(<span class="string">'nickname'</span>, <span class="literal">None</span>)</span><br><span class="line">            )</span><br><span class="line">            <span class="comment"># 2. 创建详细表</span></span><br><span class="line">            profile = Profile.objects.create(</span><br><span class="line">                user=user,</span><br><span class="line">                username=user.username,</span><br><span class="line">                version=version,</span><br><span class="line">                source=source</span><br><span class="line">            )</span><br><span class="line">            <span class="comment"># 3. 执行登录</span></span><br><span class="line">            login(request, user)</span><br><span class="line">            <span class="comment"># 4. 记录登录日志</span></span><br><span class="line">            user.last_login = now()</span><br><span class="line">            user.save()</span><br><span class="line">            ip = request.META.get(<span class="string">'REMOTE_ADDR'</span>, <span class="string">''</span>)</span><br><span class="line">            user.add_login_record(username=user.username, ip=ip, source=source, version=version)</span><br><span class="line">            <span class="keyword">return</span> user, profile</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(e)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>accounts/views.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> http</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> logout</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.decorators <span class="keyword">import</span> login_required</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> FormView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> accounts <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> accounts.forms <span class="keyword">import</span> LoginForm, RegisterForm</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> BadRequestJsonResponse, MethodNotAllowedJsonResponse, UnauthorizedJsonResponse, \</span><br><span class="line">    ServerErrorJsonResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_login</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户登录 """</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        form = LoginForm(data=request.POST)</span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            form.do_login(request)</span><br><span class="line">            print(<span class="string">'表单验证通过'</span>)</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">'/accounts/user/info/'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(form.errors)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form = LoginForm()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'user_login.html'</span>, {</span><br><span class="line">        <span class="string">'form'</span>: form</span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要登录以后才能访问user_info，</span></span><br><span class="line"><span class="comment"># 否则跳转到登录地址http://127.0.0.1:8000/accounts/user/login/?next=/accounts/user/info/</span></span><br><span class="line"><span class="comment"># 方式一</span></span><br><span class="line"><span class="comment"># @login_required(login_url='/accounts/user/login/')</span></span><br><span class="line"><span class="comment"># 方式二</span></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_info</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户信息 """</span></span><br><span class="line">    print(request.user)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'user_info.html'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_logout</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户退出登录 """</span></span><br><span class="line">    logout(request)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">'/accounts/user/info/'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_api_login</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户登录接口-POST """</span></span><br><span class="line">    <span class="comment"># 获取输入的内容</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        <span class="comment"># 表单验证</span></span><br><span class="line">        form = LoginForm(request.POST)</span><br><span class="line">        <span class="comment"># 如果通过了验证，执行登录</span></span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            user = form.do_login(request)</span><br><span class="line">            <span class="comment"># 返回内容：用户的信息（用户的基本信息、详细详细）</span></span><br><span class="line">            profile = user.profile</span><br><span class="line">            data = {</span><br><span class="line">                <span class="string">'user'</span>: serializers.UserSerializer(user).to_dict(),</span><br><span class="line">                <span class="string">'profile'</span>: serializers.UserProfileSerializer(profile).to_dict()</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> http.JsonResponse(data)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果没有通过表单验证，返回表单的错误信息</span></span><br><span class="line">            err = json.loads(form.errors.as_json())</span><br><span class="line">            <span class="keyword">return</span> BadRequestJsonResponse(err)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># GET请求不被允许</span></span><br><span class="line">        <span class="keyword">return</span> MethodNotAllowedJsonResponse()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_api_logout</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户退出接口 """</span></span><br><span class="line">    logout(request)</span><br><span class="line">    <span class="keyword">return</span> http.HttpResponse(status=<span class="number">201</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDetailView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="string">""" 用户详细接口 """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="comment"># 获取用户信息</span></span><br><span class="line">        user = request.user</span><br><span class="line">        <span class="comment"># 用户：是游客吗？数据库中是否存在</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> user.is_authenticated:</span><br><span class="line">            <span class="comment"># 返回401状态码</span></span><br><span class="line">            <span class="keyword">return</span> UnauthorizedJsonResponse()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 返回详细信息</span></span><br><span class="line">            profile = user.profile</span><br><span class="line">            data = {</span><br><span class="line">                <span class="string">'user'</span>: serializers.UserSerializer(user).to_dict(),</span><br><span class="line">                <span class="string">'profile'</span>: serializers.UserProfileSerializer(profile).to_dict()</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> http.JsonResponse(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_api_register</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">""" 用户注册 """</span></span><br><span class="line">    <span class="comment"># 1. 表单，验证用户输入的信息（用户名、昵称、验证码）</span></span><br><span class="line">    <span class="comment"># 2. 创建用户基础信息表、用户详细信息表</span></span><br><span class="line">    <span class="comment"># 3. 执行登录</span></span><br><span class="line">    <span class="comment"># 4. 保存登录日志</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserRegisterView</span>(<span class="params">FormView</span>):</span></span><br><span class="line">    <span class="string">""" 用户注册接口 """</span></span><br><span class="line">    form_class = RegisterForm</span><br><span class="line">    http_method_names = [<span class="string">'post'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_valid</span>(<span class="params">self, form</span>):</span></span><br><span class="line">        <span class="string">""" 表单已经通过验证 """</span></span><br><span class="line">        result = form.do_register(request=self.request)</span><br><span class="line">        <span class="keyword">if</span> result:</span><br><span class="line">            user, profile = result</span><br><span class="line">            data = {</span><br><span class="line">                <span class="string">'user'</span>: serializers.UserSerializer(user).to_dict(),</span><br><span class="line">                <span class="string">'profile'</span>: serializers.UserProfileSerializer(profile).to_dict()</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> http.JsonResponse(data, status=<span class="number">201</span>)</span><br><span class="line">        <span class="keyword">return</span> ServerErrorJsonResponse()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_invalid</span>(<span class="params">self, form</span>):</span></span><br><span class="line">        <span class="string">""" 表单没有通过验证 """</span></span><br><span class="line">        err_list = json.loads(form.errors.as_json())</span><br><span class="line">        <span class="keyword">return</span> BadRequestJsonResponse(err_list)</span><br></pre></td></tr></tbody></table></figure>

<p><code>accounts/urls.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">   <span class="comment"># 用户注册</span></span><br><span class="line">    path(<span class="string">'user/api/register/'</span>, views.UserRegisterView.as_view(), name=<span class="string">'user_api_register'</span>),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>第三步，模拟HTTP请求，测试验证接口</li>
</ul>
<h3 id="验证码获取接口联调"><a href="#验证码获取接口联调" class="headerlink" title="验证码获取接口联调"></a>验证码获取接口联调</h3><h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>第一步，阅读接口文档</li>
<li>第二步，配置接口地址<br><code>src\utils\apis.js</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 系统模块的接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> SystemApis = {</span><br><span class="line">  <span class="comment">// 发送短信验证码</span></span><br><span class="line">  sendSmsCodeUrl: apiHost + <span class="string">'/system/send/sms/'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>src\components\common\SendSmsCode.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 短信验证码发送相关的逻辑 --&gt;</span><br><span class="line">  &lt;van-button</span><br><span class="line">    size="small"</span><br><span class="line">    type="primary"</span><br><span class="line">    @click.prevent="sendSmsCode()"</span><br><span class="line">    :disabled="isSmsSend"</span><br><span class="line">    &gt;{{ sendBtnText }}&lt;/van-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { ajax } from '@/utils/ajax'</span><br><span class="line">import { SystemApis } from '@/utils/apis'</span><br><span class="line">export default {</span><br><span class="line">  props: ['phoneNum'],</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      // 是否已经发送了验证码，不能再点击发送验证码</span><br><span class="line">      isSmsSend: false,</span><br><span class="line">      sendBtnText: '点击发送验证码',</span><br><span class="line">      timer: null,</span><br><span class="line">      counter: 60</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    reset () {</span><br><span class="line">      this.isSmsSend = false</span><br><span class="line">      this.sendBtnText = '点击发送验证码'</span><br><span class="line">      if (this.timer) {</span><br><span class="line">        clearInterval(this.timer)</span><br><span class="line">        this.counter = 60</span><br><span class="line">        this.timer = null</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    /**</span><br><span class="line">     * 倒计时</span><br><span class="line">     */</span><br><span class="line">    countDown () {</span><br><span class="line">      this.timer = setInterval(() =&gt; {</span><br><span class="line">        this.sendBtnText = `(${this.counter}秒)后重新发送`</span><br><span class="line">        this.counter--</span><br><span class="line">        if (this.counter &lt; 0) {</span><br><span class="line">          this.reset()</span><br><span class="line">        }</span><br><span class="line">      }, 1000)</span><br><span class="line">    },</span><br><span class="line">    /**</span><br><span class="line">     * 发送验证码</span><br><span class="line">     */</span><br><span class="line">    sendSmsCode () {</span><br><span class="line">      // 判断手机号是否已经输入</span><br><span class="line">      if (!this.phoneNum) {</span><br><span class="line">        this.$notify('请输入手机号')</span><br><span class="line">        return false // 不在执行后面的逻辑</span><br><span class="line">      }</span><br><span class="line">      // TODO 调用接口，发送短信验证码</span><br><span class="line">      ajax.post(SystemApis.sendSmsCodeUrl, {</span><br><span class="line">        phone_num: this.phoneNum</span><br><span class="line">      }).then(({ data }) =&gt; {</span><br><span class="line">        // 提示用户验证码已经发送</span><br><span class="line">        this.$notify({</span><br><span class="line">          message: `验证码为：${data.sms_code}，${data.timeout / 60}分钟内有效`,</span><br><span class="line">          duration: 1000 * 10, // 提示持续时间 </span><br><span class="line">          type: 'success'</span><br><span class="line">        })</span><br><span class="line">        this.isSmsSend = true</span><br><span class="line">        // 开启倒计时, 60s之后才能再次点击</span><br><span class="line">        this.countDown()</span><br><span class="line">      }).catch(err =&gt; {</span><br><span class="line">        // 如果产生了异常，提示用户重新操作</span><br><span class="line">        this.isSmsSend = false</span><br><span class="line">        this.sendBtnText = '点击发送验证码'</span><br><span class="line">        console.log(err)</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>第三步，使用axios获取数据</li>
<li>第四步，将数据设置到模型层</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/lian-biao/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/lian-biao/" class="post-title-link" itemprop="url">链表</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-10-24 02:21:06" itemprop="dateModified" datetime="2021-10-24T02:21:06Z">2021-10-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>python用类来实现链表的数据结构</p>
<p>数组是编程语言作为一种基本类型提供出来的，连续的相同数据类型的元素按一定顺序排列的集合，必须是固定的长度，且每个元素占用的内存大小相同。<br>它的作用只有一种：存放数据，让你很快能找到存的数据，它不会将一个数据节点和另外一个数据节点关联起来。<br>数组的优点是占用空间小，<br>把数组看做一个内存空间，数组下标就是这个空间的地址，支持根据下标快速访问。查询快，直接使用索引就可以获取数据元素，</p>
<p>但连续存储的缺点也很明显，增加容量，增删移动和元素要其他元素也要移动空间，时间复杂度均为 O(n)。<br>增加数组容量需要先申请一块新的内存，然后复制原有的元素。<br>如果需要的话，可能还要删除原先的内存。</p>
<p>删除元素时需要移动被删除元素之后的所有元素以保证所有元素是连续的。增加元素时需要移动指定位置及之后的所有元素，然后将新增元素插入到指定位置，如果容量不足的话还需要先进行扩容操作。</p>
<p>顺序表查找很快，主要耗时的操作是拷贝覆盖。<br>因为除了目标元素在尾部的特殊情况，<br>顺序表进行插入和删除时需要对操作点之后的所有元素进行前后移位操作，<br>只能通过拷贝和覆盖的方法进行。</p>
<p>线性表的实际存储方式，分为两种实现模型：<br>1顺序表的构建需要预先知道数据大小来申请连续的存储空间，<br>将元素顺序地存放在一块连续的存储区里<br>而在进行扩充时又需要进行数据的搬迁，<br>元素间的顺序关系由它们的存储顺序自然表示。<br>访问指定元素时无需从头遍历，通过计算便可获得对应地址，其时间复杂度为O(1)。<br>一个顺序表的完整信息包括两部分，<br>一部分是表中的元素集合，<br>另一部分是为实现正确操作而需记录的信息，即有关表的整体情况的信息，<br>这部分信息主要包括元素存储区的容量和当前表中已有的元素个数两项。</p>
<p>比如建立一个大小为5的数组 array:</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array := [<span class="number">5</span>]<span class="keyword">int64</span>{}</span><br><span class="line">fmt.Println(array) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">array[<span class="number">1</span>] = <span class="number">9</span></span><br><span class="line">array[<span class="number">2</span>] = <span class="number">7</span></span><br><span class="line">fmt.Println(array) <span class="comment">// [8 9 7 0 0]</span></span><br><span class="line">fmt.Println(array[<span class="number">2</span>]) <span class="comment">// 7</span></span><br></pre></td></tr></tbody></table></figure>

<p>我们可以通过下标 0，1，2 来获取到数组中的数据，下标 0，1，2 就表示数据的位置，排第一位，排第二位，我们也可以把指定位置的数据替换成另外一个数据。</p>
<p>数组这一数据类型，是被编程语言高度抽象封装的结构，下标 会转换成 虚拟内存地址，然后操作系统会自动帮我们进行寻址，这个寻址过程是特别快的，所以往数组的某个下标取一个值和放一个值，时间复杂度都为 O(1)。</p>
<p>它是一种将 虚拟内存地址 和 数据元素 映射起来的内置语法结构，数据和数据之间是挨着，存放在一个连续的内存区域，每一个固定大小（8字节）的内存片段都有一个虚拟的地址编号。当然这个虚拟内存不是真正的内存，每个程序启动都会有一个虚拟内存空间来映射真正的内存，这是计算机组成的内容，和数据结构也有点关系，我们会在另外的高级专题讲，这里就不展开了。</p>
<p>用数组也可以实现链表，比如定义一个数组 [5]Value，值类型为一个结构体 Value ：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ArrayLink</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">type</span> Value <span class="keyword">struct</span> {</span><br><span class="line">        Data      <span class="keyword">string</span></span><br><span class="line">        NextIndex <span class="keyword">int64</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> array [<span class="number">5</span>]Value          <span class="comment">// 五个节点的数组</span></span><br><span class="line">    array[<span class="number">0</span>] = Value{<span class="string">"I"</span>, <span class="number">3</span>}    <span class="comment">// 下一个节点的下标为3</span></span><br><span class="line">    array[<span class="number">1</span>] = Value{<span class="string">"Army"</span>, <span class="number">4</span>} <span class="comment">// 下一个节点的下标为4</span></span><br><span class="line">    array[<span class="number">2</span>] = Value{<span class="string">"You"</span>, <span class="number">1</span>}  <span class="comment">// 下一个节点的下标为1</span></span><br><span class="line">    array[<span class="number">3</span>] = Value{<span class="string">"Love"</span>, <span class="number">2</span>} <span class="comment">// 下一个节点的下标为2</span></span><br><span class="line">    array[<span class="number">4</span>] = Value{<span class="string">"!"</span>, <span class="number">-1</span>}   <span class="comment">// -1表示没有下一个节点</span></span><br><span class="line">    node := array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        fmt.Println(node.Data)</span><br><span class="line">        <span class="keyword">if</span> node.NextIndex == <span class="number">-1</span> {</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        node = array[node.NextIndex]</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    ArrayLink()</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">I</span><br><span class="line">Love</span><br><span class="line">You</span><br><span class="line">Army</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<p>获取某个 下标 的数据，通过该数据可以知道 下一个数据的下标 是什么，然后拿出该下标的数据，继续往下做。问题是，有时候需要做删除，移动等各种操作，而数组的大小是固定的，需要大量空间移动</p>
<p>很多其他的数据结构都由数组和链表配合实现的。</p>
<p>2.链表Linked list：知道了它的头就知道了它的全部，所以最后直接返回头节。<br>算法题的自变量head都是链表头节点，不是链表</p>
<p>链表由一个个数据节点组成的，它是一个递归结构，要么它是空的，要么它存在一个指向另外一个数据节点的引用。可以将数据和数据之间关联起来，从一个数据指向另外一个数据。通过一个数据节点，可以定位到另一个数据节点，</p>
<p>一般来讲，链表中只会有一个结点的指针域为空，该结点为尾结点，其他结点的指针域都会存储一个结点的内存地址。链表中也只会有一个结点的内存地址没有存储在其他结点的指针域，该结点称为头结点。</p>
<p>将元素存放在通过链接构造起来的一系列存储块中。<br>如果我们想要非固定的长度、物理存储单元上非连续、非顺序的存储结构，<br>链表失去了顺序表随机读取的优点，同时链表由于增加了结点的指针域，<br>空间开销比较大，<br>对存储空间的使用要相对灵活，充分利用计算机内存空间，实现灵活的内存动态管理。<br>数据元素的逻辑顺序是通过链表中的指针链接次序实现的。</p>
<p>相比于线性表顺序结构，操作复杂。由于不必须按顺序存储，<br>链表在插入、移动和删除数据元素速度快可以达到O(1)的复杂度，只要把相关的数据元素重新链接起来，<br>但是查找一个节点或者访问特定编号的节点，不能像数组一样随机根据下标偏移快速访问元素，<br>只能老老实实从头遍历，则需要O(n)的时间，</p>
<p>在结点 p 之后增加一个结点 q 总共分三步：</p>
<p>申请一段内存用以存储 q (可以使用内存池避免频繁申请和销毁内存)。<br>将 p 的指针域数据复制到 q 的指针域。<br>更新 p 的指针域为 q 的地址。</p>
<p>删除结点 p 之后的结点 q 总共分两步：</p>
<p>将 q 的指针域复制到 p 的指针域。<br>释放 q 结点的内存。</p>
<p>但缺点是占用空间大，无法高效获取长度，<br>面试的时候经常碰见诸如获取倒数第k个元素，获取中间位置的元素，判断链表是否存在环，判断环的长度等和长度与位置有关的问题。<br>这些问题都可以通过灵活运用双指针来解决。<br>双指针并不是固定的公式，而是一种解题思路、思维方式，跟语言没关系，可以理解为创建 两个变量i、j<br>当满足某些条件后i++，满足另一些条件时候j++</p>
<p>有些书籍，把链表做了很细的划分，比如单链表，双链表，循环单链表，循环双链表，其实没有必要强行分类，链表就是从一个数据指向另外一个数据，一种将数据和数据关联起来的结构而已。<br>。</p>
<p>单链表，就是链表是单向的，像我们上面这个结构一样，可以一直往下找到下一个数据节点，它只有一个方向，它不能往回找。</p>
<p>链表中的基本要素：<br>1.节点类（Node）或元素，单链表每个结点有两个域，<br>左边部份叫值域（数据域），value 属性保存数据元素的值。<br>头结点的内存地址没有存储在其他结点的指针域<br>右边叫指针域(next)，有一个指针保存指向下一个节点地址位置，next存储直接后继存储位置的域<br>用 node.next 访问下一个节点。最后一个结点的next指向为None(空值)<br>next默认是null呀</p>
<p>对于单链表结构可以使用 class 的两个属性表示 val , next。<br>由一系列结点（链表中每一个元素称为结点）组成，<br>结点可以在运行时动态生成。</p>
<p>实现一个Node类：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x  <span class="comment"># val: 节点保存的数据元素</span></span><br><span class="line">        self.next = <span class="literal">None</span>  <span class="comment"># next: 保存下一个节点对象的地址</span></span><br></pre></td></tr></tbody></table></figure>

<p>此节点类只有一个构建函数，接收一个数据参数，<br>其中next表示指针域的指针，</p>
<p>实例化后得到一个节点对象</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node = Node(<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>此节点对象数据为4，指针指向None。</p>
<p><img src="/2020/08/21/lian-biao/python代码\牛客网剑指offer66题思路分析\图解说明\节点.jpg" alt="linked_list"><br>2.head结点，head结点永远指向第一个结点<br>3.tail结点，tail结点永远指向最后一个节点<br>4.None，链表中最后一个结点tail指针域的指针next指向None值，</p>
<p><img src="/2020/08/21/lian-biao/%E5%9B%BE%E8%A7%A3%E8%AF%B4%E6%98%8E%5C%E9%93%BE%E8%A1%A8.png" alt="linked_list">  </p>
<p><img src="/2020/08/21/lian-biao/python代码\牛客网剑指offer66题思路分析\图解说明\append1.jpg"><br><img src="/2020/08/21/lian-biao/python代码\牛客网剑指offer66题思路分析\图解说明\链表.png"></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span>  <span class="comment"># 传入一个参数</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Node(<span class="number">1</span>)</span><br><span class="line">b = Node(<span class="number">2</span>)</span><br><span class="line">c = Node(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">a.next = b  <span class="comment"># b 链接到 a 节点上</span></span><br><span class="line">b.next = c  <span class="comment"># c 链接到 b 节点上</span></span><br><span class="line"></span><br><span class="line">head = a</span><br><span class="line"></span><br><span class="line">print(a.next.val)  <span class="comment"># 2</span></span><br><span class="line">print(a.next.next.val)  <span class="comment"># 3</span></span><br><span class="line">print(a.next.next.next.val)</span><br><span class="line"><span class="comment"># AttributeError: 'NoneType' object has no attribute 'val'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lis = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">head = p = Node(<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">for</span> i lis:</span><br><span class="line">    p.next = Node(i)</span><br><span class="line">    p = p.next</span><br><span class="line">p.next = <span class="literal">None</span></span><br><span class="line">head = head.next  <span class="comment"># 生成了1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># l1 = [2,4,3]; l2 = [5,6,4]</span></span><br><span class="line">l1=ListNode(<span class="number">2</span>)</span><br><span class="line">l1.next = ListNode(<span class="number">4</span>)</span><br><span class="line">l1.next.next = ListNode(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">l2 = ListNode(<span class="number">5</span>)</span><br><span class="line">l2.next = ListNode(<span class="number">6</span>)</span><br><span class="line">l2.next.next = ListNode(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> l1:  <span class="comment"># 打印链表</span></span><br><span class="line">    print(r.val)</span><br><span class="line">    r = r.next</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 链表的创建</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_linklist_head</span>(<span class="params">li</span>):</span></span><br><span class="line">    <span class="comment"># 头插</span></span><br><span class="line">    head = Node(li[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> li[<span class="number">1</span>:]:</span><br><span class="line">        node = Node(item)  <span class="comment"># Node类实例化得到一个节点对象</span></span><br><span class="line">        node.next = head  <span class="comment"># next指向原来的头部</span></span><br><span class="line">        head = node  <span class="comment"># head 指向在头部插入的节点</span></span><br><span class="line">    <span class="keyword">return</span> head  <span class="comment"># 返回头部</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_linklist_tail</span>(<span class="params">li</span>):</span></span><br><span class="line">    <span class="comment"># 尾插</span></span><br><span class="line">    head = Node(li[<span class="number">0</span>])</span><br><span class="line">    tail = head</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> li[<span class="number">1</span>:]:</span><br><span class="line">        node = Node(item)  <span class="comment"># Node类实例化得到一个节点对象</span></span><br><span class="line">        tail.next = node  <span class="comment"># 把原来尾巴的下一个指针指向当前node</span></span><br><span class="line">        tail = node  <span class="comment"># 尾巴 指向新部插入的节点</span></span><br><span class="line">    <span class="keyword">return</span> head  <span class="comment"># 返回头部</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_linklist</span>(<span class="params">linklist</span>):</span></span><br><span class="line">    <span class="keyword">while</span> linklist:</span><br><span class="line">        print(linklist.val, end=<span class="string">', '</span>)</span><br><span class="line">        linklist = linklist.next</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lk = create_linklist_head([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">print_linklist(lk)  <span class="comment"># 3, 2, 1,</span></span><br><span class="line">lk_tail = create_linklist_tail([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">print_linklist(lk_tail)  <span class="comment"># 1, 2, 3,</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedListNode</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, next=None, value=None</span>):</span></span><br><span class="line">        self.next = next</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个链表</span></span><br><span class="line">lk_head = LinkedListNode()</span><br><span class="line">myList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(myList)):</span><br><span class="line">    lk_head = LinkedListNode(lk_head, myList[i])</span><br><span class="line">print(lk_head)  <span class="comment"># &lt;__main__.LinkedListNode object at 0x00000271CCFBFDF0&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_linklist</span>(<span class="params">lk</span>):</span>  <span class="comment"># lk任意命名</span></span><br><span class="line">    <span class="keyword">while</span> lk:</span><br><span class="line">        print(lk.value, end=<span class="string">', '</span>)</span><br><span class="line">        lk = lk.next</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 头插：链表新插入的节点在表头，</span></span><br><span class="line"><span class="comment"># 因此，实际上链表中的顺序，与插入列表的顺序是反过来 逆序</span></span><br><span class="line">print_linklist(lk_head)  <span class="comment"># 5, 4, 3, 2, 1, None,</span></span><br></pre></td></tr></tbody></table></figure>

<p>结构体 LinkNode 有两个字段，一个字段存放数据 Data，另一个字典指向下一个节点 NextNode 。这种从一个数据节点指向下一个数据节点的结构，都可以叫做链表。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> LinkNode <span class="keyword">struct</span> {</span><br><span class="line">    Data     <span class="keyword">int64</span></span><br><span class="line">    NextNode *LinkNode <span class="comment">// 结构体内部自引用只能使用指针，指针大小是固定的</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// 新的节点</span></span><br><span class="line">    node := <span class="built_in">new</span>(LinkNode)</span><br><span class="line">    node.Data = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新的节点</span></span><br><span class="line">    node1 := <span class="built_in">new</span>(LinkNode)</span><br><span class="line">    node1.Data = <span class="number">3</span></span><br><span class="line">    node.NextNode = node1 <span class="comment">// node1 链接到 node 节点上</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新的节点</span></span><br><span class="line">    node2 := <span class="built_in">new</span>(LinkNode)</span><br><span class="line">    node2.Data = <span class="number">4</span></span><br><span class="line">    node1.NextNode = node2 <span class="comment">// node2 链接到 node1 节点上</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 按顺序打印链表数据</span></span><br><span class="line">    nowNode := node</span><br><span class="line">    <span class="keyword">for</span> nowNode != <span class="literal">nil</span> {</span><br><span class="line">        <span class="comment">// 打印节点值</span></span><br><span class="line">        fmt.Println(nowNode.Data)</span><br><span class="line">        <span class="comment">// 获取下一个节点</span></span><br><span class="line">        nowNode = nowNode.NextNode</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单链表节点</span></span><br><span class="line"><span class="keyword">type</span> ListNode <span class="keyword">struct</span> {</span><br><span class="line">    next  *ListNode</span><br><span class="line">    value <span class="keyword">interface</span>{}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//单链表</span></span><br><span class="line"><span class="keyword">type</span> LinkedList <span class="keyword">struct</span> {</span><br><span class="line">    head *ListNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印链表</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LinkedList)</span> <span class="title">Print</span><span class="params">()</span></span> {</span><br><span class="line">    cur := this.head.next</span><br><span class="line">    format := <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> cur != <span class="literal">nil</span> {</span><br><span class="line">        format += fmt.Sprintf(<span class="string">"%+v"</span>, cur.value)</span><br><span class="line">        cur = cur.next</span><br><span class="line">        <span class="keyword">if</span> cur != <span class="literal">nil</span> {</span><br><span class="line">            format += <span class="string">"-&gt;"</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(format)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>链表的常用方法：<br><code>LinkedList()</code> 创建空链表，不需要参数，返回值是空链表<br><code>is_empty()</code> 测试链表是否为空，不需要参数，只需要检查head节点是否指向None</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> self.head <span class="keyword">is</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p>返回值是布尔值，如果是空列表返回True，否则返回False</p>
<p><code>append(data)</code> 尾插：在尾部增加一个元素作为链表最后一个<br>参数是要追加的元素，无返回值</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        node = Node(data)</span><br><span class="line">        <span class="keyword">if</span> self.head <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># head指向None，链表是一个空链表</span></span><br><span class="line">            self.head = node  <span class="comment"># 把链表的head和tail都指向了node，</span></span><br><span class="line">            self.tail = node</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment"># 当链表不是空链表时</span></span><br><span class="line">            self.tail.next = node  <span class="comment"># 将尾节点的next指向新节点</span></span><br><span class="line">            self.tail = node  <span class="comment"># 将尾节点指向新节点</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">link_list(append(<span class="number">4</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>增加第二个节点的操作需要分两步完成，<br>第一步：self.tail.next = node，即把上一个节点的next指针指向当前node；<br>第二步：self.tail = node，把tail移动到node，</p>
<p>当if self.head is None:为False时,<br>说明链表已经增加了一个节点了，<br>再增加一个节点时head已经指向了第一个节点，<br>所以不为None，<br>比如增加的第二个节点为：</p>
<p>C:\python代码\牛客网剑指offer66题思路分析\图解说明\append1.jpg<br>C:\python代码\牛客网剑指offer66题思路分析\图解说明\append2.jpg<br>当增加第三个、第四个等节点时，按照上边的操作依次类推。</p>
<p><code>iter()</code> 遍历链表，无参数，无返回值，此方法一般是一个生成器<br>在遍历链表时也要首先考虑空链表的情况。<br>遍历链表时从head开始，直到一个节点的next指向None结束</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iter</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.head:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        cur = self.head</span><br><span class="line">        <span class="keyword">yield</span> cur.data</span><br><span class="line">        <span class="keyword">while</span> cur.next:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">yield</span> cur.data</span><br></pre></td></tr></tbody></table></figure>

<p>当是遍历一个空链表时，if not self.head:为True，直接返回None；<br>如果不是空链表就让一个局部变量cur指向head,<br>并把head的data属性yield出来，<br>再对cur的next指针指向的对象做while循环，<br>直到next指向None，这样就遍历了链表。</p>
<p>insert(idx,value) 插入一个元素，参数为插入元素的索引和值<br>假如采取append方法又增加了两个节点，增加完成后如下图：<br>C:\python代码\牛客网剑指offer66题思路分析\图解说明\append3.jpg</p>
<p>如果想在数据域为6的那节点处插入一个节点，需要做的操作有两步：<br>1.把新节点的next指针指向数据域为6的这个节点，即为数据域为5节点的next指向指向的对象<br>2.把数据域为5节点的next指针指向新加的节点<br>注： 这两个步骤不能颠倒，如果颠倒，数据域为6的节点会被丢失，数据域为7的节点不再是链表的节点。<br>C:\python代码\牛客网剑指offer66题思路分析\图解说明\insert.jpg</p>
<p>还要额外考虑两种情况：<br>1.空链表时<br>2.插入位置超出链表节点的长度时<br>3.插入位置是链表的最后一个节点时，需要移动tail<br>当是在链表最后一个节点插入时，示意图如下：<br>[]C:\python代码\牛客网剑指offer66题思路分析\图解说明\insert2.jpg<br>要在指定的索引位置插入一个节点，前提是需要找到这个位置，<br>在链表中只有采用遍历的方式，具有O(n)的速度，<br>最糟糕时会遍历链表的所有节点，<br>而当找到插入点时，我们并不需要当前节点的信息，<br>而是需要前一个节点的信息，<br>所以代码中巧妙的使用了while cur_idx &lt; idx-1:的方式，<br>这样能使用cur这个变量能指向插入点上一个节点对象。<br>实现insert方法的代码如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, idx, value</span>):</span></span><br><span class="line">        cur = self.head</span><br><span class="line">        cur_idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">'The list is an empty list'</span>)</span><br><span class="line">        <span class="comment"># 在某元素后插入</span></span><br><span class="line">        <span class="keyword">while</span> cur_idx &lt; idx<span class="number">-1</span>:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">'list length less than index'</span>)</span><br><span class="line">            cur_idx += <span class="number">1</span></span><br><span class="line">        node = Node(value)</span><br><span class="line">        node.next = cur.next  <span class="comment"># 新插入的节点指向第一个的原来next的指向</span></span><br><span class="line">        cur.next = node</span><br><span class="line">        <span class="keyword">if</span> node.next <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.tail = node</span><br></pre></td></tr></tbody></table></figure>

<p>remove(idx)移除1个元素，参数为要移除的元素或索引，并修改链表<br>接收一个idx参数，表示要删除节点的索引，此方法要考虑以下几种情况：<br>1.空链表，直接抛出异常<br>2.删除第一个节点时，移动head到删除节点的next指针指向的对象<br>3.链表只有一个节点时，把head与tail都指向None即可<br>4.删除最后一个节点时，需要移动tail到上一个节点<br>5.遍历链表时要判断给定的索引是否大于链表的长度，如果大于则抛出异常信息<br>O(n)</p>
<p>请看下边图例：<br>C:\python代码\牛客网剑指offer66题思路分析\图解说明\remove1.jpg<br>C:\python代码\牛客网剑指offer66题思路分析\图解说明\remove2.jpg<br>以下为remove函数的代码：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove</span>(<span class="params">self, idx</span>):</span></span><br><span class="line">       cur = self.head</span><br><span class="line">       cur_idx = <span class="number">0</span></span><br><span class="line">       <span class="keyword">if</span> self.head <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 空链表时</span></span><br><span class="line">           <span class="keyword">raise</span> Exception(<span class="string">'The list is an empty list'</span>)</span><br><span class="line">       <span class="keyword">while</span> cur_idx &lt; idx<span class="number">-1</span>:</span><br><span class="line">           cur = cur.next</span><br><span class="line">           <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">               <span class="keyword">raise</span> Exception(<span class="string">'list length less than index'</span>)</span><br><span class="line">           cur_idx += <span class="number">1</span></span><br><span class="line">       <span class="keyword">if</span> idx == <span class="number">0</span>:   <span class="comment"># 当删除第一个节点时</span></span><br><span class="line">           self.head = cur.next</span><br><span class="line">           cur = cur.next</span><br><span class="line">           <span class="keyword">return</span></span><br><span class="line">       <span class="keyword">if</span> self.head <span class="keyword">is</span> self.tail:   <span class="comment"># 当只有一个节点的链表时</span></span><br><span class="line">           self.head = <span class="literal">None</span></span><br><span class="line">           self.tail = <span class="literal">None</span></span><br><span class="line">           <span class="keyword">return</span></span><br><span class="line">       cur.next = cur.next.next</span><br><span class="line">       <span class="keyword">if</span> cur.next <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 当删除的节点是链表最后一个节点时</span></span><br><span class="line">           self.tail = cur</span><br><span class="line"></span><br><span class="line">       <span class="comment"># 在某元素后删除节点node = cur.next </span></span><br><span class="line">       <span class="comment"># cur.next = cur.next.next  # 被删的节点指向第一个的原来next的指向</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>size() 返回链表的元素数，不接收参数，返回值是链表中节点的个数，<br>要获得链表的节点个数，必定会遍历链表，<br>直到最后一个节点的next指针指向None时链表遍历完成，<br>遍历时可以用一个累加器来计算节点的个数，如下代码：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">size</span>(<span class="params">self</span>):</span></span><br><span class="line">        current = self.head</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> current <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'The list is an empty list'</span></span><br><span class="line">        <span class="keyword">while</span> current <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            current = current.next</span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></tbody></table></figure>

<p>search(item) 查找链表某元素，<br>search函数接收一个item参数，表示查找节点中数据域的值,要查找的元素或索引。<br>search函数遍历链表，每到一个节点把当前节点的data值与item作比较，<br>最糟糕的情况下会全遍历链表。O(n)<br>如果查找到有些数据则返回True，否则返回False，代码如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        current = self.head</span><br><span class="line">        found = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">while</span> current <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> <span class="keyword">not</span> found:</span><br><span class="line">            <span class="keyword">if</span> current.data == item:</span><br><span class="line">                found = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                current = current.next</span><br><span class="line">        <span class="keyword">return</span> found</span><br></pre></td></tr></tbody></table></figure>

<p>Node类与LinkedList类完整代码整理如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        self.data = data</span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.head = <span class="literal">None</span></span><br><span class="line">        self.tail = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.head <span class="keyword">is</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        node = Node(data)  <span class="comment"># 实列化节点</span></span><br><span class="line">        <span class="keyword">if</span> self.head <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.head = node</span><br><span class="line">            self.tail = node</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.tail.next = node</span><br><span class="line">            self.tail = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">iter</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.head:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        cur = self.head</span><br><span class="line">        <span class="keyword">yield</span> cur.data</span><br><span class="line">        <span class="keyword">while</span> cur.next:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">yield</span> cur.data</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, idx, value</span>):</span></span><br><span class="line">        cur = self.head</span><br><span class="line">        cur_idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 判断是否是空链表</span></span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">'The list is an empty list'</span>)</span><br><span class="line">        <span class="keyword">while</span> cur_idx &lt; idx - <span class="number">1</span>:  <span class="comment"># 遍历链表</span></span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 判断是不是最后一个元素</span></span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">'list length less than index'</span>)</span><br><span class="line">            cur_idx += <span class="number">1</span></span><br><span class="line">        node = Node(value)</span><br><span class="line">        node.next = cur.next</span><br><span class="line">        cur.next = node</span><br><span class="line">        <span class="keyword">if</span> node.next <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.tail = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span>(<span class="params">self, idx</span>):</span></span><br><span class="line">        cur = self.head</span><br><span class="line">        cur_idx = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> self.head <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 空链表时</span></span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">'The list is an empty list'</span>)</span><br><span class="line">        <span class="keyword">while</span> cur_idx &lt; idx - <span class="number">1</span>:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">if</span> cur <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">'list length less than index'</span>)</span><br><span class="line">            cur_idx += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> idx == <span class="number">0</span>:  <span class="comment"># 当删除第一个节点时</span></span><br><span class="line">            self.head = cur.next</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> self.head <span class="keyword">is</span> self.tail:  <span class="comment"># 当只有一个节点的链表时</span></span><br><span class="line">            self.head = <span class="literal">None</span></span><br><span class="line">            self.tail = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        cur.next = cur.next.next</span><br><span class="line">        <span class="keyword">if</span> cur.next <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># 当删除的节点是链表最后一个节点时</span></span><br><span class="line">            self.tail = cur</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span>(<span class="params">self</span>):</span></span><br><span class="line">        current = self.head</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> current <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'The list is an empty list'</span></span><br><span class="line">        <span class="keyword">while</span> current <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            current = current.next</span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        current = self.head</span><br><span class="line">        found = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">while</span> current <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> <span class="keyword">not</span> found:</span><br><span class="line">            <span class="keyword">if</span> current.data == item:</span><br><span class="line">                found = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                current = current.next</span><br><span class="line">        <span class="keyword">return</span> found</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    link_list = LinkedList()  <span class="comment"># 实列化链表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        link_list.append(i)</span><br><span class="line">    print(link_list)</span><br><span class="line">    <span class="comment">#    print(link_list.is_empty())</span></span><br><span class="line">    <span class="comment">#    link_list.insert(10, 30)</span></span><br><span class="line">    <span class="comment">#    link_list.remove(0)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> node <span class="keyword">in</span> link_list.iter():</span><br><span class="line">        print(<span class="string">'node is {0}'</span>.format(node))</span><br><span class="line">    print(link_list.size())</span><br><span class="line"><span class="comment">#    print(link_list.search(20))</span></span><br></pre></td></tr></tbody></table></figure>

<p>循环链表，就是它一直往下找数据节点，最后回到了自己那个节点，形成了一个回路。<br>循环单链表和循环双链表的区别就是，一个只能一个方向走，一个两个方向都可以走。</p>
<p>单向循环链表<br>单链表的一个变形是单向循环链表，链表中最后一个节点的next域不再为None，而是指向链表的头节点。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""节点"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        self.item = item</span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SinCycLinkedlist</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""单向循环链表"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self._head = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""判断链表是否为空"""</span></span><br><span class="line">        <span class="keyword">return</span> self._head == <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">length</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""返回链表的长度"""</span></span><br><span class="line">        <span class="comment"># 如果链表为空，返回长度0</span></span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        count = <span class="number">1</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            cur = cur.next</span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">travel</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""遍历链表"""</span></span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        print(cur.item)</span><br><span class="line">        <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            print(cur.item)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""头部添加节点"""</span></span><br><span class="line">        node = Node(item)</span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            self._head = node</span><br><span class="line">            node.next = self._head</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">#添加的节点指向_head</span></span><br><span class="line">            node.next = self._head</span><br><span class="line">            <span class="comment"># 移到链表尾部，将尾部节点的next指向node</span></span><br><span class="line">            cur = self._head</span><br><span class="line">            <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">                cur = cur.next</span><br><span class="line">            cur.next = node</span><br><span class="line">            <span class="comment">#_head指向添加node的</span></span><br><span class="line">            self._head = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""尾部添加节点"""</span></span><br><span class="line">        node = Node(item)</span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            self._head = node</span><br><span class="line">            node.next = self._head</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 移到链表尾部</span></span><br><span class="line">            cur = self._head</span><br><span class="line">            <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">                cur = cur.next</span><br><span class="line">            <span class="comment"># 将尾节点指向node</span></span><br><span class="line">            cur.next = node</span><br><span class="line">            <span class="comment"># 将node指向头节点_head</span></span><br><span class="line">            node.next = self._head</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, pos, item</span>):</span></span><br><span class="line">        <span class="string">"""在指定位置添加节点"""</span></span><br><span class="line">        <span class="keyword">if</span> pos &lt;= <span class="number">0</span>:</span><br><span class="line">            self.add(item)</span><br><span class="line">        <span class="keyword">elif</span> pos &gt; (self.length()<span class="number">-1</span>):</span><br><span class="line">            self.append(item)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            node = Node(item)</span><br><span class="line">            cur = self._head</span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="comment"># 移动到指定位置的前一个位置</span></span><br><span class="line">            <span class="keyword">while</span> count &lt; (pos<span class="number">-1</span>):</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                cur = cur.next</span><br><span class="line">            node.next = cur.next</span><br><span class="line">            cur.next = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""删除一个节点"""</span></span><br><span class="line">        <span class="comment"># 若链表为空，则直接返回</span></span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="comment"># 将cur指向头节点</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        pre = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 若头节点的元素就是要查找的元素item</span></span><br><span class="line">        <span class="keyword">if</span> cur.item == item:</span><br><span class="line">            <span class="comment"># 如果链表不止一个节点</span></span><br><span class="line">            <span class="keyword">if</span> cur.next != self._head:</span><br><span class="line">                <span class="comment"># 先找到尾节点，将尾节点的next指向第二个节点</span></span><br><span class="line">                <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">                    cur = cur.next</span><br><span class="line">                <span class="comment"># cur指向了尾节点</span></span><br><span class="line">                cur.next = self._head.next</span><br><span class="line">                self._head = self._head.next</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 链表只有一个节点</span></span><br><span class="line">                self._head = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pre = self._head</span><br><span class="line">            <span class="comment"># 第一个节点不是要删除的</span></span><br><span class="line">            <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">                <span class="comment"># 找到了要删除的元素</span></span><br><span class="line">                <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                    <span class="comment"># 删除</span></span><br><span class="line">                    pre.next = cur.next</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pre = cur</span><br><span class="line">                    cur = cur.next</span><br><span class="line">            <span class="comment"># cur 指向尾节点</span></span><br><span class="line">            <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                <span class="comment"># 尾部删除</span></span><br><span class="line">                pre.next = cur.next</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""查找节点是否存在"""</span></span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        <span class="keyword">if</span> cur.item == item:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">while</span> cur.next != self._head:</span><br><span class="line">            cur = cur.next</span><br><span class="line">            <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ll = SinCycLinkedlist()</span><br><span class="line">    ll.add(<span class="number">1</span>)</span><br><span class="line">    ll.add(<span class="number">2</span>)</span><br><span class="line">    ll.append(<span class="number">3</span>)</span><br><span class="line">    ll.insert(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">    ll.insert(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    ll.insert(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line">    print(<span class="string">"length:"</span>,ll.length())</span><br><span class="line">    ll.travel()</span><br><span class="line">    print(ll.search(<span class="number">3</span>))</span><br><span class="line">    print(ll.search(<span class="number">7</span>))</span><br><span class="line">    ll.remove(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">"length:"</span>,ll.length())</span><br><span class="line">    ll.travel()</span><br></pre></td></tr></tbody></table></figure>

<p>双向循环链表，第一个节点的前驱是最后一个节点，最后一个节点的后继是第一个节点。</p>
<p>实现一个循环链表 Ring（集链表大成者），参考 Golang 标准库 container/ring：</p>
<p>该循环链表有一个三个字段，next 表示后驱节点，prev 表示前驱节点，Value 表示值。</p>
<p>我们来分析该结构各操作的时间复杂度。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环链表</span></span><br><span class="line"><span class="keyword">type</span> Ring <span class="keyword">struct</span> {</span><br><span class="line">    next, prev *Ring       <span class="comment">// 前驱和后驱节点</span></span><br><span class="line">    Value      <span class="keyword">interface</span>{} <span class="comment">// 数据</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>初始化一个空的循环链表：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化空的循环链表，前驱和后驱都指向自己，因为是循环的</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">init</span><span class="params">()</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    r.next = r</span><br><span class="line">    r.prev = r</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    r := <span class="built_in">new</span>(Ring)</span><br><span class="line">    r.init()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>因为绑定前驱和后驱节点为自己，没有循环，时间复杂度为：O(1)。</p>
<p>创建一个指定大小 N 的循环链表，值全为空：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建N个节点的循环链表</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(n <span class="keyword">int</span>)</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">    r := <span class="built_in">new</span>(Ring)</span><br><span class="line">    p := r</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ {</span><br><span class="line">        p.next = &amp;Ring{prev: p}</span><br><span class="line">        p = p.next</span><br><span class="line">    }</span><br><span class="line">    p.next = r</span><br><span class="line">    r.prev = p</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>会连续绑定前驱和后驱节点，时间复杂度为：O(n)。</p>
<p>获取上一个或下一个节点</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取下一个节点</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Next</span><span class="params">()</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    <span class="keyword">if</span> r.next == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> r.init()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> r.next</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取上一个节点</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Prev</span><span class="params">()</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    <span class="keyword">if</span> r.next == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> r.init()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> r.prev</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>获取前驱或后驱节点，时间复杂度为：O(1)。</p>
<p>获取第 n 个节点<br>因为链表是循环的，当 n 为负数，表示从前面往前遍历，否则往后面遍历：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Move</span><span class="params">(n <span class="keyword">int</span>)</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    <span class="keyword">if</span> r.next == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> r.init()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">switch</span> {</span><br><span class="line">    <span class="keyword">case</span> n &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> ; n &lt; <span class="number">0</span>; n++ {</span><br><span class="line">            r = r.prev</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">case</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> ; n &gt; <span class="number">0</span>; n-- {</span><br><span class="line">            r = r.next</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>因为需要遍历 n 次，所以时间复杂度为：O(n)。</p>
<p>添加节点</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 往节点A，链接一个节点，并且返回之前节点A的后驱节点</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Link</span><span class="params">(s *Ring)</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    n := r.Next()</span><br><span class="line">    <span class="keyword">if</span> s != <span class="literal">nil</span> {</span><br><span class="line">        p := s.Prev()</span><br><span class="line">        r.next = s</span><br><span class="line">        s.prev = r</span><br><span class="line">        n.prev = p</span><br><span class="line">        p.next = n</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>添加节点的操作比较复杂，如果节点 s 是一个新的节点。</p>
<p>那么也就是在 r 节点后插入一个新节点 s，而 r 节点之前的后驱节点，将会链接到新节点后面，并返回 r 节点之前的第一个后驱节点 n，图如下：</p>
<p>可以看到插入新节点，会重新形成一个环，新节点 s 被插入了中间。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">linkNewTest</span><span class="params">()</span></span> {</span><br><span class="line">     <span class="comment">// 第一个节点</span></span><br><span class="line">     r := &amp;Ring{Value: <span class="number">-1</span>}</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 链接新的五个节点</span></span><br><span class="line">     r.Link(&amp;Ring{Value: <span class="number">1</span>})</span><br><span class="line">     r.Link(&amp;Ring{Value: <span class="number">2</span>})</span><br><span class="line">     r.Link(&amp;Ring{Value: <span class="number">3</span>})</span><br><span class="line">     r.Link(&amp;Ring{Value: <span class="number">4</span>})</span><br><span class="line"></span><br><span class="line">     node := r</span><br><span class="line">     <span class="keyword">for</span> {</span><br><span class="line">         <span class="comment">// 打印节点值</span></span><br><span class="line">         fmt.Println(node.Value)</span><br><span class="line"></span><br><span class="line">         <span class="comment">// 移到下一个节点</span></span><br><span class="line">         node = node.Next()</span><br><span class="line"></span><br><span class="line">         <span class="comment">//  如果节点回到了起点，结束</span></span><br><span class="line">         <span class="keyword">if</span> node == r {</span><br><span class="line">             <span class="keyword">return</span></span><br><span class="line">         }</span><br><span class="line">     }</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    linkNewTest()</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line"><span class="number">-1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<p>每次链接的是一个新节点，那么链会越来越长，仍然是一个环。因为只是更改链接位置，时间复杂度为：O(1)。</p>
<p>删除节点</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除节点后面的 n 个节点</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Unlink</span><span class="params">(n <span class="keyword">int</span>)</span> *<span class="title">Ring</span></span> {</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">0</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> r.Link(r.Move(n + <span class="number">1</span>))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>将循环链表的后面几个节点删除。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteTest</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// 第一个节点</span></span><br><span class="line">    r := &amp;Ring{Value: <span class="number">-1</span>}</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 链接新的五个节点</span></span><br><span class="line">    r.Link(&amp;Ring{Value: <span class="number">1</span>})</span><br><span class="line">    r.Link(&amp;Ring{Value: <span class="number">2</span>})</span><br><span class="line">    r.Link(&amp;Ring{Value: <span class="number">3</span>})</span><br><span class="line">    r.Link(&amp;Ring{Value: <span class="number">4</span>})</span><br><span class="line"></span><br><span class="line">    temp := r.Unlink(<span class="number">3</span>) <span class="comment">// 解除了后面两个节点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印原来的节点</span></span><br><span class="line">    node := r</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        <span class="comment">// 打印节点值</span></span><br><span class="line">        fmt.Println(node.Value)</span><br><span class="line">        <span class="comment">// 移到下一个节点</span></span><br><span class="line">        node = node.Next()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  如果节点回到了起点，结束</span></span><br><span class="line">        <span class="keyword">if</span> node == r {</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"------"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印被切断的节点</span></span><br><span class="line">    node = temp</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        <span class="comment">// 打印节点值</span></span><br><span class="line">        fmt.Println(node.Value)</span><br><span class="line">        <span class="comment">// 移到下一个节点</span></span><br><span class="line">        node = node.Next()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  如果节点回到了起点，结束</span></span><br><span class="line">        <span class="keyword">if</span> node == temp {</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    deleteTest()</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line"><span class="number">-1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">------</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>

<p>删除循环链表后面的三个节点：r.Unlink(3)。</p>
<p>可以看到节点 r 后面的两个节点被切断了，然后分成了两个循环链表，r 所在的链表变成了 -1，1。</p>
<p>而切除的那部分形成一个新循环链表是 4 3 2，并且返回给了用户。</p>
<p>因为只要定位要删除的节点位置，然后进行链接：r.Link(r.Move(n + 1))，所以时间复杂度为：O(n)+O(1)=O(n)</p>
<p>获取链表长度</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看循环链表长度</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Ring)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> {</span><br><span class="line">    n := <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> r != <span class="literal">nil</span> {</span><br><span class="line">        n = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> p := r.Next(); p != r; p = p.next {</span><br><span class="line">            n++</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>通过循环，当引用回到自己，那么计数完毕，时间复杂度：O(n)。</p>
<p>因为循环链表还不够强壮，不知道起始节点是哪个，计数链表长度还要遍历，所以用循环链表实现的双端队列就出现了，一般具体编程都使用更高层次的数据结构。</p>
<h3 id="双链表"><a href="#双链表" class="headerlink" title="双链表"></a>双链表</h3><p>每个节点既可以找到它之前的节点，也可以找到之后的节点，是双向的。<br>相比单链表来说，每个节点既保存了指向下一个节点的指针，最后一个结点next指向为None(空)。<br>同时还保存了上一个节点的指针，双链表第一个结点pre指向为None(空)</p>
<p>双链表每个结点包括三个域，<br>pre指针指向上一个结点，val存储数据值，next指针指向下一个结点。</p>
<p>对于双链表可以使用class 的三个属性pre, val, next。</p>
<p>对， 就多了 prev，有啥优势嘛？</p>
<ul>
<li><p>直接删除节点，当然如果给的是一个值，我们还是需要查找这个值在哪个节点？ - 但是如果给了一个节点，我们把它拿掉，直接让它的前后节点互相指过去不就行了？哇欧，删除就是 O(1) 了，两步操作就行啦</p>
</li>
<li><p>看似我们反过来遍历双链表了。反过来从哪里开始呢？我们只要让 root 的 prev 指向 tail 节点，不就串起来了吗？<br>循环双端列表就是在双列表基础上把最后一个结点next指向第一个结点，第一个结点pre指向最后一个结点，这样就形成循环双端链表。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>循环双端链表操作 CircularDoubleLinkedList 大写字母缩写 cdll</th>
<th>平均时间复杂度</th>
</tr>
</thead>
<tbody><tr>
<td>cdll.append(value)</td>
<td>O(1)</td>
</tr>
<tr>
<td>cdll.appendleft(value)</td>
<td>O(1)</td>
</tr>
<tr>
<td>cdll.remove(node)，注意这里参数是 node</td>
<td>O(1)</td>
</tr>
<tr>
<td>cdll.headnode()</td>
<td>O(1)</td>
</tr>
<tr>
<td>cdll.tailnode()</td>
<td>O(1)</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="comment"># 如果节点很多，我们可以用 __slots__ 来节省内存，把属性保存在一个 tuple 而不是 dict 里</span></span><br><span class="line">    <span class="comment"># 感兴趣可以自行搜索  python  __slots__</span></span><br><span class="line">    __slots__ = (<span class="string">'value'</span>, <span class="string">'prev'</span>, <span class="string">'next'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, value=None, prev=None, next=None</span>):</span></span><br><span class="line">        self.value, self.prev, self.next = value, prev, next</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""双向链表节点"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        self.item = item</span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line">        self.prev = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DLinkList</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""双向链表"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self._head = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""判断链表是否为空"""</span></span><br><span class="line">        <span class="keyword">return</span> self._head == <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">length</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""返回链表的长度"""</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> cur != <span class="literal">None</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            cur = cur.next</span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">travel</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""遍历链表"""</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        <span class="keyword">while</span> cur != <span class="literal">None</span>:</span><br><span class="line">            print(cur.item,</span><br><span class="line">            cur = cur.next</span><br><span class="line">        print(<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""头部插入元素"""</span></span><br><span class="line">        node = Node(item)</span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="comment"># 如果是空链表，将_head指向node</span></span><br><span class="line">            self._head = node</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 将node的next指向_head的头节点</span></span><br><span class="line">            node.next = self._head</span><br><span class="line">            <span class="comment"># 将_head的头节点的prev指向node</span></span><br><span class="line">            self._head.prev = node</span><br><span class="line">            <span class="comment"># 将_head 指向node</span></span><br><span class="line">            self._head = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""尾部插入元素"""</span></span><br><span class="line">        node = Node(item)</span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="comment"># 如果是空链表，将_head指向node</span></span><br><span class="line">            self._head = node</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 移动到链表尾部</span></span><br><span class="line">            cur = self._head</span><br><span class="line">            <span class="keyword">while</span> cur.next != <span class="literal">None</span>:</span><br><span class="line">                cur = cur.next</span><br><span class="line">            <span class="comment"># 将尾节点cur的next指向node</span></span><br><span class="line">            cur.next = node</span><br><span class="line">            <span class="comment"># 将node的prev指向cur</span></span><br><span class="line">            node.prev = cur</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""查找元素是否存在"""</span></span><br><span class="line">        cur = self._head</span><br><span class="line">        <span class="keyword">while</span> cur != <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            cur = cur.next</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure>


<p>双链表节点的插入<br>中间值插入的情况<br>p.next = cur.next<br>cur.next.prev = p<br>p.prev = cur<br>cur.next = p</p>
<p>指定位置插入节点</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, pos, item</span>):</span></span><br><span class="line">        <span class="string">"""在指定位置添加节点"""</span></span><br><span class="line">        <span class="keyword">if</span> pos &lt;= <span class="number">0</span>:</span><br><span class="line">            self.add(item)</span><br><span class="line">        <span class="keyword">elif</span> pos &gt; (self.length()<span class="number">-1</span>):</span><br><span class="line">            self.append(item)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            node = Node(item)</span><br><span class="line">            cur = self._head</span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="comment"># 移动到指定位置的前一个位置</span></span><br><span class="line">            <span class="keyword">while</span> count &lt; (pos<span class="number">-1</span>):</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                cur = cur.next</span><br><span class="line">            <span class="comment"># 将node的prev指向cur</span></span><br><span class="line">            node.prev = cur</span><br><span class="line">            <span class="comment"># 将node的next指向cur的下一个节点</span></span><br><span class="line">            node.next = cur.next</span><br><span class="line">            <span class="comment"># 将cur的下一个节点的prev指向node</span></span><br><span class="line">            cur.next.prev = node</span><br><span class="line">            <span class="comment"># 将cur的next指向node</span></span><br><span class="line">            cur.next = node</span><br></pre></td></tr></tbody></table></figure>

<p>双链表节点的删除，<br>当然如果给的是一个值，我们还是需要查找这个值在哪个节点？ </p>
<ul>
<li>但是如果给了一个节点，我们把它拿掉，直接让它的前后节点互相指过去不就行了？<br>删除就是 O(1) 了，两步操作就行啦</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="string">"""删除元素"""</span></span><br><span class="line">        <span class="keyword">if</span> self.is_empty():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cur = self._head</span><br><span class="line">            <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                <span class="comment"># 如果首节点的元素即是要删除的元素</span></span><br><span class="line">                <span class="keyword">if</span> cur.next == <span class="literal">None</span>:</span><br><span class="line">                    <span class="comment"># 如果链表只有这一个节点</span></span><br><span class="line">                    self._head = <span class="literal">None</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># 将第二个节点的prev设置为None</span></span><br><span class="line">                    cur.next.prev = <span class="literal">None</span></span><br><span class="line">                    <span class="comment"># 将_head指向第二个节点</span></span><br><span class="line">                    self._head = cur.next</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">while</span> cur != <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">if</span> cur.item == item:</span><br><span class="line">                    <span class="comment"># 将cur的前一个节点的next指向cur的后一个节点</span></span><br><span class="line">                    cur.prev.next = cur.next</span><br><span class="line">                    <span class="comment"># 将cur的后一个节点的prev指向cur的前一个节点</span></span><br><span class="line">                    cur.next.prev = cur.prev</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                cur = cur.next</span><br></pre></td></tr></tbody></table></figure>

<p>测试</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ll = DLinkList()</span><br><span class="line">    ll.add(<span class="number">1</span>)</span><br><span class="line">    ll.add(<span class="number">2</span>)</span><br><span class="line">    ll.append(<span class="number">3</span>)</span><br><span class="line">    ll.insert(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">    ll.insert(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    ll.insert(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line">    print(<span class="string">"length:"</span>,ll.length())</span><br><span class="line">    ll.travel()</span><br><span class="line">    print(ll.search(<span class="number">3</span>))</span><br><span class="line">    print(ll.search(<span class="number">4</span>))</span><br><span class="line">    ll.remove(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">"length:"</span>,ll.length())</span><br><span class="line">    ll.travel()</span><br></pre></td></tr></tbody></table></figure>


<p>中间值p = cur.next删除的情况<br>cur.next = p.next<br>p.next.prev = cur<br>cur.next = p<br>del p</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/mian-xiang-dui-xiang-bian-cheng-oop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/mian-xiang-dui-xiang-bian-cheng-oop/" class="post-title-link" itemprop="url">面向对象编程OOP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-17 02:40:57" itemprop="dateModified" datetime="2021-07-17T02:40:57Z">2021-07-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>面向对象编程 Object Oriented Programming OOP<br>设计思想是如何理解面向对象:<br>1.python一切皆对象，<br>面向对象是一种编程思想、软件开发方法，是编程世界向现实世界的延伸，也就是说万物皆可描述，<br>2.我们用编程语言描述现实世界万物一切事物，每种事物都具备自己的属性和行为。<br>面向对象思想就是在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，描述成计算机事件的设计思想。</p>
<p>3.把对象作为基本单元，把对象抽象成类(Class)，包含成员(属性)和方法(用来操作成员)，定义了所包含的全体对象的公共特征和功能</p>
<p>类Class是一种抽象模板，类是现实世界或思维世界中的实体在计算机中的反映，类:是面向对象的一种表现形式，具有同种属性的对象称为类，是个抽象的概念。<br>它将数据以及这些数据上的操作封装在一起</p>
<p>根据Class创建Instance</p>
<p>通俗的定义<br>月饼的比喻：<br>几个概念: 类 对象 属性 方法<br>月饼有各种各样的形状（模板，软件工程当中的”类”），中秋节商场里买月饼，商场里有各个不同形状的月饼(软件工程当中的”对象”),月饼的重量，颜色，形状，尺寸等这些类比软件工程当中的”属性”,月饼的生产方法，将面粉放到不同模板当中就可做出各种不同形状的月饼(软件工程当中的”方法”)<br>二、面向对象在实际工作中的作用<br>1.有利于团队合作,分工、分模块开发<br>2.提高工作效率</p>
<p>对象：通过类定义的数据结构实例。对象包括两个数据成员（类变量和实例变量）和方法。值 身份id 类型</p>
<p>Python 中使用类来实现。过程式编程(函数)，OOP(类)<br>(object)，表示该类是从哪个类继承下来的，<br>默认继承object类，可不写<br>创建类 类名首字母大写，不要下划线<br>类定义完成后，会在当前作用域中定义一个以类名为名字的命名空间。<br>类对象具有以下两种操作：<br>可以通过“类名()”的方式实例化一个对象。<br>可以通过“类名.类属性”的方式来访问一个类属性</p>
<p>定义实例方法（函数）：<br>实例方法关联的是对象，实例方法通常用来操作实例变量，<br><code>def __init__(self, name, *args,**kwargs):</code> 可以通过外部访问，是因为init前后分别有两个下划线‘__’, 这是python的内置命名风格，自己命名尽量不要这样做，创建实例的时候绑定属性到<code>self</code><br>第一个形参（实例变量）不是必须叫<code>self</code>，<code>self</code> 不是 python 关键字，（其他语言用<code>this</code>，其他和普通函数一样）<br>但是第一个参数代表的是表示创建类的实例本身（对象）</p>
<p>有了<code>__init__</code>方法，在创建实例的时候，就不能传入空的参数了，必须传入与<code>__init__</code>方法匹配的参数，<br>不需要给self传值，Python解释器自己会把实例变量传进去，</p>
<p><code>对象名=类名([实参])</code> 对象是类的实例化，形参写在类的构造函数中，<br>实例（Instance）则是根据类模板创建出来一个个具体的“对象”</p>
<p>要调用一个方法是通过需要有实例（实例变量，self），这种限制其实就是Python所谓的绑定概念</p>
<p>每个实例化的对象当使用完成之后，都会被内存管家回收，我们普通的进程也会伴随着创建与关闭的过程</p>
<p>Python类中定义的变量分为类变量和实例变量（也叫成员变量、对象变量），<br>类变量和实例变量都可以在类定义之后在定义</p>
<p>类变量直接定义在类里面（不在函数里面），前面不会有任何关键字<code>self</code>修饰。<br>类变量只会在用class关键字声明一个类时创建，且也只会保存在类的命名空间中，这个类的实例的命名空间中是没有的。<br>在类的内外部访问类变量，可以用<code>类名.类变量名</code>和<code>实例名.类变量名</code>， 访问的实际上是同一个类命名空间的同一个变量，所以类变量具有“一改全改”的特点。<br>实例方法里访问类变量<code>self.__class__.类变量名</code></p>
<p>采用<code>实例名.类变量</code>名的方式对类变量进行赋值时，<br>若该类变量是可变数据类型，则可以成功赋值该类变量，<br>否则会在该实例变量所在的名称空间中创建一个与该类变量同名的实例变量进行赋值，并不会对类变量进行赋值，<br>此时也无法再通过<code>实例名.类变量名</code>的方式读取该类变量。<br>但若‘实例名.类变量名’赋值的是可变数据类型，则可以对类变量进行赋值操作。</p>
<p>实例变量大都定义在实例函数里面，通过 <code>self.实例变量名</code> 的方式进行定义。<br>根据类创建的实例可以任意绑定属性。<br>实例变量保存在实例各自的命名空间中，各个实例拥有的数据都互相独立，互不影响；<br>不要对实例属性和类属性使用相同的名字，否则将产生难以发现的错误。<br>因为相同名称的实例属性将屏蔽掉类属性，<br>但是当你删除实例属性后，再使用相同的名称，访问到的将是类属性。</p>
<p><code>__dict__</code> 在类中代表类的全部属性的字典，在实例中代表对象的全部属性的字典 </p>
<h4 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h4><p>不需要装饰器修饰，<br>在声明时传入的第一个参数必须为 <code>self</code>，self指代的就是实例本身。<br>只能通过<code>实例名.实例方法名</code>调用，不可以通过<code>类名.实例方法名()</code>调用<br>如果要通过类来调用，<code>类名.实例方法名(实例名)</code>，必须必须<strong>显式</strong>地将实例当做参数传入。</p>
<p>用<code>self.变量名</code>访问 实例变量 和 类变量<br>实例方法能访问实例变量，静态方法和类方法则不能。<br>在类的外部访问添加实例变量，只能用<code>实例名.实例变量名</code>，类无权访问实例名。</p>
<p>在实例方法内部通过<code>类名.类变量名</code>和 <code>self.__class__.类变量名</code> 访问类变量。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">object</span>):</span>  <span class="comment"># 类对象</span></span><br><span class="line">    name = <span class="string">'Ashe'</span>  <span class="comment"># 类变量 字符串不可变 直接在类里面定义</span></span><br><span class="line">    gender = <span class="string">'female'</span>  <span class="comment">#</span></span><br><span class="line">    place = [<span class="string">'China'</span>, <span class="string">'Beijing'</span>]  <span class="comment"># 类变量，列表可变</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age</span>):</span>  <span class="comment"># 构造方法用来初始化成员(属性)，但是并没有初始化weight</span></span><br><span class="line">        self.name = name  <span class="comment"># 实例变量，在实例方法里通过self.xxx进行定义和读取与对象无关</span></span><br><span class="line">        self.age = age</span><br><span class="line">        weight = <span class="number">55</span>  <span class="comment"># 类变量不能再在数体内声明，在这个位置声明的又没有self关键字修饰，只能是一个局部变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_info</span>(<span class="params">self</span>):</span>  <span class="comment"># 操作成员(属性)的类的实例方法</span></span><br><span class="line">        print(self)</span><br><span class="line">        print(self.__class__)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 实例方法不可以直接访问类变量</span></span><br><span class="line">        <span class="comment"># print(gender)  # NameError: name 'gender' is not defined</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 实例方法可以这样访问类变量</span></span><br><span class="line">        <span class="comment"># 通过 p.name获取变量值的时候，首先会查找实例变量里有没有name属性，如果有则返回，</span></span><br><span class="line">        <span class="comment"># 如果没有就会去类变量里找，如果还是没有则会报错，但是不推荐</span></span><br><span class="line">        print(self.gender)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 实例方法访问类变量的正确打开方式</span></span><br><span class="line">        <span class="comment"># print(Person.name, Person.gender)</span></span><br><span class="line">        print(self.__class__.name, self.__class__.gender)</span><br><span class="line">        <span class="comment"># print(self.__class__.age)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 实例中代表对象的全部属性的字典</span></span><br><span class="line">        print(self.__dict__)</span><br><span class="line">        <span class="comment"># 实例方法可以这样访问实例变量</span></span><br><span class="line">        print(self.name, self.age)</span><br><span class="line">        <span class="comment"># print(self.weight)  # AttributeError: 'Person' object has no attribute 'weight'</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(self.__class__.__dict__)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># self.age = age  # 这是错误的，实例变量不能再这里声明</span></span><br><span class="line">    occupation = [<span class="string">'student'</span>]  <span class="comment"># 这是类变量，可以在函数体外，类内部任意位置</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(Person)  <span class="comment">#：&lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(dir(Person))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'gender', 'name', 'occupation', 'place', 'print_info']</span></span><br><span class="line"></span><br><span class="line">print(Person.name)  <span class="comment"># Ashe</span></span><br><span class="line">print(Person.gender)  <span class="comment"># female</span></span><br><span class="line"><span class="comment"># print(Person.age)  # AttributeError: 'Person' object has no attribute 'age'</span></span><br><span class="line"><span class="comment"># Person.print_info()</span></span><br><span class="line"><span class="comment"># TypeError: print_info() missing 1 required positional argument:</span></span><br><span class="line"><span class="comment">#  print_info是实例方法 类不可以直接调用实例方法</span></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Bart Simpson'</span>, <span class="number">18</span>)  <span class="comment"># 实例对象</span></span><br><span class="line">print(p)  <span class="comment"># &lt;__main__.Person object at 0x0000028104DC0AC0&gt;</span></span><br><span class="line">print(dir(p))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'age', 'gender', 'name', 'occupation', 'place', 'print_info']</span></span><br><span class="line">p.print_info()  <span class="comment"># python封装特性</span></span><br><span class="line"><span class="comment"># &lt;__main__.Person object at 0x0000028104DC0AC0&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment"># female</span></span><br><span class="line"><span class="comment"># Ashe female</span></span><br><span class="line"><span class="comment"># {'name': 'Bart Simpson', 'age': 18} 没有weight属性</span></span><br><span class="line"><span class="comment"># Bart Simpson 18</span></span><br><span class="line"></span><br><span class="line">Person.print_info(p)  <span class="comment"># 通过类访问实例方法时，必须显式地将实例当做参数传入</span></span><br><span class="line"><span class="comment"># &lt;__main__.Person object at 0x0000028104DC0AC0&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment"># female</span></span><br><span class="line"><span class="comment"># Ashe female</span></span><br><span class="line"><span class="comment"># {'name': 'Bart Simpson', 'age': 18}</span></span><br><span class="line"><span class="comment"># Bart Simpson 18</span></span><br><span class="line"></span><br><span class="line">print(p.__dict__)  <span class="comment"># {'name': 'Bart Simpson', 'age': 18} 没有weight属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当通过 p.name获取变量值的时候，首先会查找实例变量里有没有name属性，如果有则返回，如果没有就会去类变量里找，如果还是没有则会报错</span></span><br><span class="line">print(p.name, p.age)  <span class="comment"># Bart Simpson 18 是实例变量</span></span><br><span class="line">print(p.gender, id(p.gender) == id(Person.gender))  <span class="comment"># female True 类变量</span></span><br><span class="line"><span class="comment"># print(p.weight)  # AttributeError: 'Person' object has no attribute 'weight'</span></span><br><span class="line"></span><br><span class="line">p.occupation.append(<span class="string">'programmer'</span>)</span><br><span class="line">print(p.occupation)  <span class="comment"># ['student', 'programmer']</span></span><br><span class="line">print(Person.occupation)  <span class="comment"># ['student', 'programmer']</span></span><br><span class="line"></span><br><span class="line">print(Person.name</span><br><span class="line">      )  <span class="comment"># Ashe 类变量为不可变对象，在该实例变量所在的名称空间中创建一个与该类变量同名的实例变量进行赋值，并不会对类变量进行赋值，</span></span><br><span class="line"><span class="comment"># print(Person.age)  # AttributeError: type object 'Person' has no attribute 'age'</span></span><br><span class="line"></span><br><span class="line">p.place[<span class="number">1</span>] = <span class="string">'Guilin'</span></span><br><span class="line">print(p.place)  <span class="comment"># ['China', 'Guilin']</span></span><br><span class="line">print(Person.place)  <span class="comment"># ['China', 'Guilin']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在类定义和声明实例对象结束之后再定义绑定一个实例变量</span></span><br><span class="line">p.height = <span class="number">1.8</span>  <span class="comment"># 为 p 添加一个实例变量 height 属性</span></span><br><span class="line">print(p.height)  <span class="comment"># 1.8 与对象无关</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明类对象结束之后 为Person类添加绑定一个类变量</span></span><br><span class="line">Person.behavior = <span class="string">'study'</span>  <span class="comment"># 这是一个类变量</span></span><br><span class="line">print(Person.behavior)  <span class="comment"># study</span></span><br><span class="line">print(p.behavior)  <span class="comment"># study</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="访问可见性问题"><a href="#访问可见性问题" class="headerlink" title="访问可见性问题"></a>访问可见性问题</h3><p>对于上面的代码，有C++、Java、C#等编程经验的程序员可能会问，我们给<code>Student</code>对象绑定的<code>name</code>和<code>age</code>属性到底具有怎样的访问权限（也称为可见性）。<br>因为在很多面向对象编程语言中，我们通常会将对象的属性设置为私有的（private）或受保护的（protected），简单的说就是不允许外界访问，<br>而对象的方法通常都是公开的（public），因为公开的方法就是对象能够接受的消息。</p>
<p>在Python中，属性和方法的访问权限只有两种，也就是公开的和私有的，<br>如果希望属性是私有的，在给属性命名时可以用两个下划线作为开头，<br>下面的代码可以验证这一点。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, price, url, pk</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.price = price</span><br><span class="line">        self._url = url  <span class="comment">#大家都认可的一种编码规范，这种权限级别的控制 java是可以做到</span></span><br><span class="line">        self.__pk = pk  <span class="comment">#大家都认可的一种编码规范，这种权限级别的控制 java是可以做到</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">course1 = Course(<span class="string">"django"</span>, <span class="number">100</span>, <span class="string">"https://imooc.com"</span>, <span class="number">1</span>)</span><br><span class="line">print(course1._url) <span class="comment"># https://imooc.com</span></span><br><span class="line">print(course1.__pk) <span class="comment"># AttributeError: 'Course' object has no attribute '__pk'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, foo</span>):</span></span><br><span class="line">        self.__foo = foo</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bar</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(self.__foo)</span><br><span class="line">        print(<span class="string">'__bar'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    test = Test(<span class="string">'hello'</span>)</span><br><span class="line">    <span class="comment"># AttributeError: 'Test' object has no attribute '__bar'</span></span><br><span class="line">    test.__bar()</span><br><span class="line">    <span class="comment"># AttributeError: 'Test' object has no attribute '__foo'</span></span><br><span class="line">    print(test.__foo)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>

<p>但是，Python并没有从语法上严格保证私有属性或方法的私密性，它只是给私有的属性和方法换了一个名字来妨碍对它们的访问，事实上如果你知道更换名字的规则仍然可以访问到它们，下面的代码就可以验证这一点。<br>之所以这样设定，可以用这样一句名言加以解释，就是"<strong>We are all consenting adults here</strong>"。<br>因为绝大多数程序员都认为开放比封闭要好，而且程序员要自己为自己的行为负责。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, foo</span>):</span></span><br><span class="line">        self.__foo = foo</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bar</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(self.__foo)</span><br><span class="line">        print(<span class="string">'__bar'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    test = Test(<span class="string">'hello'</span>)</span><br><span class="line">    test._Test__bar()</span><br><span class="line">    print(test._Test__foo)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>

<p>在实际开发中，我们并不建议将属性设置为私有的，因为这会导致子类无法访问（后面会讲到）。<br>所以大多数Python程序员会遵循一种命名惯例就是让属性名以单下划线开头来表示属性是受保护的，本类之外的代码在访问这样的属性时应该要保持慎重。<br>这种做法并不是语法上的规则，单下划线开头的属性和方法外界仍然是可以访问的，所以更多的时候它是一种暗示或隐喻，<br>大家都认可的一种编码规范，这种权限级别的控制 java是可以做到<br>关于这一点可以看看我的<a target="_blank" rel="noopener" href="http://blog.csdn.net/jackfrued/article/details/79521404">《Python - 那些年我们踩过的那些坑》</a>文章中的讲解</p>
<p>变量名前加单下划线<code>_</code>表示的是 protected 类型的变量，即保护类型只能允许其本身与子类进行访问，如：<code>self._sex = 0</code> ，实例不要访问，大家都认可的一种编码规范，这种权限级别的控制 java是可以做到</p>
<p>变量名前加双下划线<code>__</code>表示的是 私有类型(private)的变量,<br>成员私有 类的私有属性<br>在变量或方法名前加__，则变为私有private私有属性，在类外部无法直接进行访问、设置<br>只能是允许这个类本身内部的方法进行访问了。如：<code>self.__private_attrs</code>。<br>在创建私有的实例时，实际python会把变量名改为<code>_类名__变量名</code>，实际是创建了新变量<code>_类名__变量名</code>。<br>严格来讲python并没有真正的私有变量，<br>可以通过 <code>对象名._类名__变量名</code> 在外部修改和访问私有变量<code>__变量名</code> </p>
<p>类的私有方法<br>__private_method：两个下划线开头，声明该方法为私有方法，只能在类的内部调用，不能在类的外部调用。在外部不可以通过<code>类名.__方法名</code>  self.__private_methods。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    __name = <span class="string">"张三"</span>  <span class="comment"># 私有变量 单侧双下滑线加名字</span></span><br><span class="line">    school = <span class="string">"北大"</span></span><br><span class="line"></span><br><span class="line">print(dir(Student))  <span class="comment"># student对象的方法和属性</span></span><br><span class="line">[<span class="string">'_Student__name'</span>, <span class="string">'__class__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dict__'</span>, <span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__le__'</span>, </span><br><span class="line"><span class="string">'__lt__'</span>, <span class="string">'__module__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'__weakref__'</span>, <span class="string">'school'</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>没有<code>__name</code>这个属性<br>第一个内置方法<code>Student__name</code><br>有最后一个属性<code>school</code></p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    __name = <span class="string">"张三"</span>  <span class="comment"># 把私有变量名改为`_类名__变量名</span></span><br><span class="line">    school = <span class="string">"北大"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(Student.school)  <span class="comment"># 北大</span></span><br><span class="line"><span class="comment"># print(Student.__name)  # AttributeError: type object 'Student' has no attribute '__name</span></span><br><span class="line">print(Student._Student__name)  <span class="comment"># 张三</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    name = <span class="string">"四毛"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__kaoshi</span>(<span class="params">self</span>):</span>  <span class="comment"># 私有方法</span></span><br><span class="line">        print(<span class="string">"学生考试"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(dir(Student))</span><br><span class="line"><span class="comment"># ['_Student__kaoshi', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'name'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Student._Student__kaoshi()  # TypeError: __kaoshi() missing 1 required positional argument: 'self'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Student()</span><br><span class="line">print(dir(s))</span><br><span class="line"><span class="comment"># ['_Student__kaoshi', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'name']</span></span><br><span class="line">s._Student__kaoshi()  <span class="comment"># 通过dir(s)找到，类似于私有变量</span></span><br><span class="line"><span class="comment"># 学生考试</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, score</span>):</span></span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__score = score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__check_score</span>(<span class="params">self, score</span>):</span></span><br><span class="line">        <span class="keyword">if</span> score &gt; <span class="number">100</span> <span class="keyword">or</span> score &lt; <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"分数必须在0-100之间"</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">marking</span>(<span class="params">self, score</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.__check_score(score):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.__score = score</span><br><span class="line">        print(self.__name + <span class="string">"的当前分数："</span> + str(self.__score))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prt</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(self)</span><br><span class="line">        print(self.__class__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu = Student(<span class="string">'gwf'</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这样操作虽然是可以的，但是这不是我们在方法中定义的私有变量__score,而是基于python动态语言的特性，又创建了一个__score的变量</span></span><br><span class="line">stu.__score = <span class="number">-1</span></span><br><span class="line">print(stu.__score)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 真正我们创建的私有变量，在python中是以_Student__score(_类名__私有变量名)进行保存的</span></span><br><span class="line">print(stu.__dict__)</span><br><span class="line"><span class="comment"># 上面代码打印的结果为{'name': 'gwf', '_Student__score': 10, '__score': -1}</span></span><br><span class="line"><span class="comment"># 可以通过stu._Student__score 访问到真正的私有变量，但是不推荐这样做</span></span><br><span class="line">print(stu._Student__score) <span class="comment"># 输出 10 </span></span><br><span class="line"></span><br><span class="line">t = Student(<span class="number">10</span>)</span><br><span class="line">t.print_name()</span><br><span class="line"><span class="comment"># t.prt()</span></span><br><span class="line"><span class="comment"># print(t)</span></span><br><span class="line"><span class="comment"># print('---')</span></span><br><span class="line"><span class="comment"># print(t.__class__)</span></span><br><span class="line"><span class="comment"># &lt;__main__.Student object at 0x0000017325E28080&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Student'&gt;</span></span><br><span class="line"><span class="comment"># &lt;__main__.Student object at 0x0000017325E28080&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Student'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>classmethod</code> / <code>staticmethod</code>  (它们两个经常被用作类方法的装饰器)</p>
<ul>
<li>都可以通过 <code>ClassName.method()</code> 的方式调用</li>
<li>都不能访问实例方法</li>
</ul>
<h4 id="类方法：定义加-classmethod装饰器来修饰"><a href="#类方法：定义加-classmethod装饰器来修饰" class="headerlink" title="类方法：定义加@classmethod装饰器来修饰"></a>类方法：定义加<code>@classmethod</code>装饰器来修饰</h4><p>该方法与类绑定，而不是与实例对象绑定，<br>第一个形参是 <code>cls</code> 代表的是调用的类本身，类方法不会被自动调用，<br>通过<code>类名.方法名()</code>和<code>实例名.方法名()</code>两种方法进行调用 （但是不建议用对象调用类方法，毕竟逻辑不符），<br>在类方法中用<code>类名.类变量名</code>和<code>cls.类变量名</code>访问和操作类变量，也就能操作类的实例化对象，比如单例模式<br>在类方法中不可以访问实例变量。<br>self.class 则指向类。<br>通过self.class.xxx访问类变量</p>
<p>跟类有关系，又需要类/实例参与的情况下用类方法。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    name = <span class="string">"四毛"</span></span><br><span class="line">    sum_student = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod  # 类方法，类可以直接调用，可以操作类变量</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">study</span>(<span class="params">cls</span>):</span></span><br><span class="line">        print(<span class="string">'当前类名为：{}'</span>.format(cls.__name__))</span><br><span class="line">        print(cls.name + <span class="string">"student study"</span>)</span><br><span class="line">        cls.name = <span class="string">"五毛"</span></span><br><span class="line">        print(cls.name + <span class="string">"student study"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_and_print_sum</span>(<span class="params">cls</span>):</span></span><br><span class="line">        cls.sum_student += <span class="number">1</span></span><br><span class="line">        print(cls.sum_student, id(cls.sum_student))</span><br><span class="line">        print(Student.sum_student, id(Student.sum_student))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(dir(Student))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'add_and_print_sum', 'name', 'study', 'sum_student']</span></span><br><span class="line"></span><br><span class="line">Student.study()</span><br><span class="line"><span class="comment"># 当前类名为：Student</span></span><br><span class="line"><span class="comment"># 四毛student study</span></span><br><span class="line"><span class="comment"># 五毛student study</span></span><br><span class="line">Student.add_and_print_sum()</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">s = Student()</span><br><span class="line">print(dir(s))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'add_and_print_sum', 'name', 'study', 'sum_student']</span></span><br><span class="line"></span><br><span class="line">s.study()</span><br><span class="line"><span class="comment"># 当前类名为：Student</span></span><br><span class="line"><span class="comment"># 五毛student study</span></span><br><span class="line"><span class="comment"># 五毛student study</span></span><br><span class="line"></span><br><span class="line">s.add_and_print_sum()</span><br><span class="line"><span class="comment"># 2 140718899369664</span></span><br><span class="line"><span class="comment"># 2 140718899369664</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><p>在定义时，使用<code>@staticmethod</code>装饰器来修饰</p>
<p>不用传第一个参数 <code>cls</code>或<code>self</code>关键字即可进行创建的方法。<br>在调用过程时，无需将类实例化，通过<code>类名.方法名()</code>和<code>实例名.方法名()</code>的方式调用。<br>在静态方法内部，只能通过<code>类名.类变量名</code>的方式访问类变量。</p>
<p>静态方法一般使用场景就是和类相关的操作，<br>但是不能操作类变量和类的实例变量，其实跟类并没有什么关系，完全独立的 脱离了类，相当于给了它一个作用范围，让它可以在类里面去使用，<br>完全可以放到类之外，并没有引用当前类的任何东西，本来该放到外面的函数只是给塞到类里。<br>使用起来和普通函数一样，只不过放在类里去组织</p>
<p>经常有一些跟类有关系的功能，但在运行时又不需要实例和类参与的情况下需要用到静态方法<br>哪怕只想放在这个相关类的中，没有其他关系，也就是说可以直接另写一个函数解决, 但这样同样会扩散代码，造成维护困难。<br>多用于写工具</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    name = <span class="string">"四毛"</span></span><br><span class="line">    sum_student = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod  # 静态方法 脱离了类而存在的，</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>():</span></span><br><span class="line">        print(Student.name, <span class="string">"run"</span>)</span><br><span class="line">        <span class="comment"># print(cls.name, "run")  # NameError: name 'cls' is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod  # 静态方法 脱离了类而存在的，</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jump</span>(<span class="params">cls</span>):</span></span><br><span class="line">        cls.name = <span class="string">"六毛"</span></span><br><span class="line">        print(<span class="string">"student jump "</span>)</span><br><span class="line">        print(cls.name)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod  # 静态方法 脱离了类而存在的，</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sit</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.name = <span class="string">"六毛"</span></span><br><span class="line">        print(<span class="string">"student sit "</span>)</span><br><span class="line">        print(self.name)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x, y</span>):</span></span><br><span class="line">        <span class="comment"># 访问类变量(所有地方都可以这样访问类变量)</span></span><br><span class="line">        print(Student.sum_student + x + y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(dir(Student))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'add', 'jump', 'name', 'run', 'sit', 'sum_student']</span></span><br><span class="line">Student.run()  <span class="comment"># 四毛 run</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Student.jump("hahaha")  # AttributeError: 'str' object has no attribute 'name'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Student.sit("hahaha")  # AttributeError: 'str' object has no attribute 'name'</span></span><br><span class="line"></span><br><span class="line">Student.add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line">s = Student()</span><br><span class="line">print(dir(s))</span><br><span class="line"><span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'add', 'jump', 'name', 'run', 'sit', 'sum_student']</span></span><br><span class="line">s.run()  <span class="comment"># 四毛 run</span></span><br><span class="line"></span><br><span class="line">s.add(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y</span>):</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 下面两句等价</span></span><br><span class="line">        <span class="comment"># return '点的位置:({0}, {1})'.format(self.x, self.y)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'点的位置:({self.x}, {self.y})'</span>.format(self=self)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    p = Point(<span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line">    print(dir(p))  <span class="comment"># 点的位置:(4, 2)</span></span><br><span class="line">    <span class="comment"># ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'x', 'y']</span></span><br><span class="line">    print(p.__dict__)  <span class="comment"># {'x': 4, 'y': 2}</span></span><br><span class="line">    print(p)  <span class="comment"># 点的位置:(4, 2)</span></span><br><span class="line">    print(str(Point(<span class="number">4</span>, <span class="number">2</span>)))  <span class="comment"># 点的位置:(4, 2)</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDate</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="string">"""自己实现的日期类"""</span></span><br><span class="line">    source = <span class="string">'ioomc'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, month, day</span>):</span></span><br><span class="line">        <span class="string">"""构造方法"""</span></span><br><span class="line">        self.month = month</span><br><span class="line">        self.day = day</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_month</span>(<span class="params">month</span>):</span></span><br><span class="line">        <span class="string">"""静态方法，自定义验证我们的月份是否合法"""</span></span><br><span class="line">        month = int(month)</span><br><span class="line">        print(<span class="string">'类的属性: {}'</span>.format(MyDate.source))</span><br><span class="line">        <span class="comment"># return month &gt;= 1 and month &lt;= 12</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> &lt;= month &lt;= <span class="number">12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_date = MyDate(<span class="number">5</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 静态方法的调用</span></span><br><span class="line">    print(MyDate.validate_month(<span class="string">'15'</span>))</span><br><span class="line">    <span class="comment"># 类的属性: ioomc</span></span><br><span class="line">    <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">    print(my_date.validate_month(<span class="string">'11'</span>))</span><br><span class="line">    <span class="comment"># 类的属性: ioomc</span></span><br><span class="line">    <span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params">object</span>):</span>  </span><br><span class="line">    num = <span class="number">1</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printd</span>(<span class="params">self</span>):</span>  </span><br><span class="line">        print(<span class="string">'printd'</span>)  </span><br><span class="line"> </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">static_printd</span>():</span>                   <span class="comment"># 没有传入表示自身类的cls参数</span></span><br><span class="line">        print(<span class="string">'static_printd'</span>)  </span><br><span class="line">        print(A.num)  </span><br><span class="line"> </span><br><span class="line"><span class="meta">    @classmethod  </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">class_printd</span>(<span class="params">cls</span>):</span>              <span class="comment"># 传入表示自身类的cls参数</span></span><br><span class="line">        print(<span class="string">'class_printd'</span>)  </span><br><span class="line">        print(cls.num)  </span><br><span class="line">        cls().printd()  </span><br><span class="line">  </span><br><span class="line">shiliA = A()</span><br><span class="line">A.class_printd() </span><br><span class="line">shiliA.class_printd() </span><br><span class="line"></span><br><span class="line">A.static_printd()  </span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-chang-yong-nei-zhi-suan-fa-he-shu-ju-jie-gou/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-chang-yong-nei-zhi-suan-fa-he-shu-ju-jie-gou/" class="post-title-link" itemprop="url">Python常用内置算法和数据结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-09-30 08:32:05" itemprop="dateModified" datetime="2021-09-30T08:32:05Z">2021-09-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>按ctrl 左键可以查看数据结构的源码实现</p>
<h1 id="Python常用内置算法和数据结构"><a href="#Python常用内置算法和数据结构" class="headerlink" title="Python常用内置算法和数据结构"></a>Python常用内置算法和数据结构</h1><table>
<thead>
<tr>
<th>数据结构/算法</th>
<th>语言内置</th>
<th>内置库</th>
</tr>
</thead>
<tbody><tr>
<td>线性结构</td>
<td>list(列表)/tuple(元祖)</td>
<td>array(数组，不常用)/collections.namedtuple</td>
</tr>
<tr>
<td>链式结构</td>
<td></td>
<td>collections.deque(双端队列)</td>
</tr>
<tr>
<td>字典结构</td>
<td>dict(字典)</td>
<td>collections.Counter(计数器)/OrderedDict(有序字典)/defaultdict</td>
</tr>
<tr>
<td>集合结构</td>
<td>set(集合)/frozenset(不可变集合)</td>
<td></td>
</tr>
<tr>
<td>排序算法</td>
<td>sorted</td>
<td></td>
</tr>
<tr>
<td>二分算法</td>
<td></td>
<td>bisect模块</td>
</tr>
<tr>
<td>堆算法</td>
<td></td>
<td>heapq模块</td>
</tr>
<tr>
<td>缓存算法</td>
<td></td>
<td>functools.lru_cache(Least Recent Used, python3)</td>
</tr>
</tbody></table>
<p>有序数据类型：字符串，列表，元组，集合，字典<br>一般情况下，有序数据类型，可以索引，切片，连接，重复<br>但字典除外，因为d[key]=value</p>
<h3 id="frozenset固定集合"><a href="#frozenset固定集合" class="headerlink" title="frozenset固定集合"></a>frozenset固定集合</h3><p>是不可变、无序的，含有唯一元素的不可迭代的集合，<br>作用：固定集合可以作为字典的键，还可以作为字典的值</p>
<p><code>class frozenset([iterable])</code> 固定集合的构造函数<br>iterable – 可迭代的对象，比如列表、字典、元组等等。<br>用可迭代对象创建一个固定的、不能再添加或删除任何元素的集合，返回新的 frozenset 对象，<br>如果不提供任何参数，默认会生成空的固定集合</p>
<p>为什么需要冻结的集合（即不可变的集合）呢？因为在集合的关系中，有集合的中的元素是另一个集合的情况，但是普通集合（set）本身是可变的，那么它的实例就不能放在另一个集合中（set中的元素必须是不可变类型）。</p>
<p>所以，frozenset提供了不可变的集合的功能，当集合不可变时，它就满足了作为集合中的元素的要求，就可以放在另一个集合中了。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;a = frozenset(range(<span class="number">10</span>))     <span class="comment"># 生成一个新的不可变集合</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">frozenset([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = frozenset(<span class="string">'runoob'</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">frozenset([<span class="string">'b'</span>, <span class="string">'r'</span>, <span class="string">'u'</span>, <span class="string">'o'</span>, <span class="string">'n'</span>])   <span class="comment"># 创建不可变集合</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="collections是Python内建的一个集合模块，提供的一些内置数据结构拓展"><a href="#collections是Python内建的一个集合模块，提供的一些内置数据结构拓展" class="headerlink" title="collections是Python内建的一个集合模块，提供的一些内置数据结构拓展"></a><code>collections</code>是Python内建的一个集合模块，提供的一些内置数据结构拓展</h3><p>力扣提交时环境中已经有<code>import collections</code></p>
<h3 id="namedtuple"><a href="#namedtuple" class="headerlink" title="namedtuple()"></a>namedtuple()</h3><p>factory function for creating tuple subclasses with named fields<br>创建命名元组子类的工厂函数  具名元组<br>接受类型的名称和属性列表创建一个自定义的 tuple 对象，并且规定了tuple元素的个数，<br>并可以用属性而不是索引来引用tuple的某个元素。<br>作用场景：通过下标不太可读通过属性名称变得比较可读。<br>它具备tuple的不变性</p>
<p>tuple可以表示一个元组，是不可变的集合,例如一个点的二维坐标就可以这样表示成p=(1,2)<br>但是，(1,2)很难看出这个tuple是用来表示一个坐标的</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line">Point = collections.namedtuple(<span class="string">'Point'</span>, <span class="string">'x,y'</span>)  <span class="comment"># 定义一个tuple对象</span></span><br><span class="line">p = Point(<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># 给x赋值1，y赋值2</span></span><br><span class="line">print(p.x)  <span class="comment"># 1</span></span><br><span class="line">print(p.y)  <span class="comment"># 2</span></span><br><span class="line">print(p[<span class="number">0</span>])  <span class="comment"># 1</span></span><br><span class="line">print(p[<span class="number">1</span>])  <span class="comment"># 2</span></span><br><span class="line">print(p.x == p[<span class="number">0</span>])  <span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>deque /dek/<br>list-like container with fast appends and pops on either end<br>类似列表(list)的容器，实现了在两端快速添加(append)和弹出(pop)<br>是为了高效实现插入和删除操作的双向列表，<br>deque可以方便实现 queue (队列 ) / stack (栈)。</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line">de = collections.deque()  <span class="comment"># 定义deque对象</span></span><br><span class="line">print(de)  <span class="comment"># deque([])</span></span><br><span class="line">de.append(<span class="number">1</span>)  <span class="comment"># 右边添加1元素</span></span><br><span class="line">de.appendleft(<span class="number">0</span>)  <span class="comment"># 左边添加0元素</span></span><br><span class="line">print(de)  <span class="comment"># deque([0, 1])</span></span><br><span class="line">de.pop()  <span class="comment"># 1 输出右边元素</span></span><br><span class="line">de.popleft()  <span class="comment"># 0 输出左边元素</span></span><br><span class="line">print(de)  <span class="comment"># deque([])</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>Counter<br>dict subclass for counting hashable objects<br>字典的子类，提供了可哈希对象的计数功能，值是一个字典</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> collections</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = collections.Counter()   <span class="comment"># 定义Counter对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = collections.Counter(<span class="string">'abcab'</span>) <span class="comment"># 统计字符数目</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">Counter({<span class="string">'a'</span>: <span class="number">2</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">1</span>})   <span class="comment"># 值是一个字典，a是有2个，b是有2个，c是有1个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">'a'</span>]  <span class="comment"># 统计字符串每个字符个数</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.most_common() <span class="comment"># 获取从大到小每个字符数量</span></span><br><span class="line">[(<span class="string">'a'</span>, <span class="number">2</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">1</span>)]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="string">'programming'</span>:</span><br><span class="line">      c[ch]=c[ch]+<span class="number">1</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">Counter({<span class="string">'g'</span>:<span class="number">2</span>,<span class="string">'m'</span><span class="number">2</span>,<span class="string">'r'</span>:<span class="number">2</span>,<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'i'</span>:<span class="number">1</span>,<span class="string">'o'</span>:<span class="number">1</span>,<span class="string">'n'</span>:<span class="number">1</span>,<span class="string">'p'</span>:<span class="number">1</span>})</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>OrderedDict</li>
</ul>
<p>dict subclass that remembers the order entries were added<br>字典的子类，保存了他们被添加的顺序，key 顺序是第一次插入的顺序。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> collections</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = collections.OrderedDict()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'c'</span>] = <span class="string">'c'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'a'</span>] = <span class="string">'a'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'b'</span>] = <span class="string">'b'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(od.keys())</span><br><span class="line">[<span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>]   <span class="comment"># key的顺序是第一次插入的顺序。</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>defaultdict<br>dict subclass that calls a factory function to supply missing values<br>defaultdict字典的子类，提供了一个工厂函数，为字典查询提供一个默认值</li>
</ul>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> collections</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = collections.defaultdict(int) <span class="comment"># 第一个参数必须是可调用的，否则为None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'a'</span>]  <span class="comment"># 不存在的key默认为0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'b'</span>] += <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd</span><br><span class="line">defaultdict(&lt;class 'int'&gt;, {'a': 0, 'b': 1})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Python-dict-set-底层都是哈希表"><a href="#Python-dict-set-底层都是哈希表" class="headerlink" title="Python dict/set 底层都是哈希表"></a>Python dict/set 底层都是哈希表</h3><ul>
<li>哈希表的实现原理，底层其实就是一个数组，通过哈希函数把相应的元素映射到一个数组槽里面。</li>
<li>根据哈希函数快速定位一个元素，平均查找时间复杂度O(1)，查找和插入的速度极快，不会随着key的增加而变慢；二分查找</li>
<li>不断加入元素会引起哈希表重新开辟空间，拷贝之前元素到新数组，需要占用大量的内存，内存浪费多。</li>
<li>dict是用来存储键值对（key-value）结构的数据的，</li>
<li>set没有存储对应的value，其实也是存储的键值对，只是默认键和值是相同的,</li>
</ul>
<p>dict是python中的一个可变的数据类型，用{}表示，dict curly bracket 花括号<br>dict的key必须是不可变的数据类型对象，同一个字典中的键必须唯一，如果出现多个相同的键，则最新的键会被记住<br>而value的数据类型可以任意<br>python删除字典key时，会在当前座位下留有特殊标记，当查找key时,遇到了特殊标记座位时,会进行2次探测，伪删除和探测链，探测链断了元素就找不到了</p>
<p>新版哈希表结构：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Indices</span><br><span class="line">----------------------------------------------------</span><br><span class="line">None | index | None | None | index | None | index ...</span><br><span class="line">----------------------------------------------------</span><br><span class="line"></span><br><span class="line">Entries</span><br><span class="line">--------------------</span><br><span class="line">hash0   key0  value0</span><br><span class="line">---------------------</span><br><span class="line">hash1   key1  value1</span><br><span class="line">---------------------</span><br><span class="line">hash2   key2  value2</span><br><span class="line">---------------------</span><br><span class="line"><span class="code">        ...</span></span><br><span class="line">---------------------</span><br></pre></td></tr></tbody></table></figure>

<p>集合并不支持索引操作，因为集合本质上是一个哈希表，和列表不一样。所以，同样不可以放入可变对象，<br>因为无法判断两个可变对象是否相等，<br>也就无法保证set内部“不会有重复元素”。</p>
<p>{0, 1, 2} set 无序，不能通过索引访问，不重复，用来去重<br>set() 创建一个空集合，<br>{}新建一个空字典<br>{} - {}求两个集合的差集，去掉相同的元素，以前面集合为标准，从一个集合里面去掉后面集合特有的元素<br>{} &amp; {}求两个集合的交集，找两个集合的公有元素<br>{} | {}求两个集合的并集，把两个集合合并在一起，按照从前往后的顺序，去掉相同的元素</p>
<h3 id="Python中list-tuple区别"><a href="#Python中list-tuple区别" class="headerlink" title="Python中list/tuple区别"></a>Python中list/tuple区别</h3><ul>
<li>都是线性结构、支持下标访问</li>
<li>list是可变对象，查找和删除的时间复杂度是O(n)，添加的时间复杂度是O(1)<br>没有办法作为字典的key，因为list有可能因为添加新的元素而导致内存地址的更换<br>list既可以当栈、也可以当队列，通过数组实现，而不是链表；<br>因此，每当执行 insert(0, val) 操作时，<br>需要将元素都向后移动一位才可插入，复杂度 O(N) ；<br>这和insert方法不同，是根据索引值来判断插入到链表的哪个位置。<br>python中的list是python的内置数据类型，list中的数据类不必相同的，<br>在list中的数据类型保存的是数据的存放的地址，简单的说就是指针，并非数据，这样保存一个list就太麻烦了，<br>例如list1=[1,2,3,’a’]需要4个指针和四个数据，增加了存储和消耗cpu。</li>
</ul>
<p>numpy的array的中的类型必须全部相同。<br>array底层是C语言。有步长strides,dimensions,data三属性。固定类型的numpy类型的数组array缺乏这种灵活，但是更方便进行存储和处理数据。</p>
<ul>
<li>tuple是保存的引用不可变，你没法替换这个对象，但是如果它本身就是一个可变对象，是可以修改这个引用指向的可变对象，比如tuple中包容可变对象，如果tuple里面保存一个list，list本身还是可变的。 parenthese 圆括号，有序的 不变的顺序表<br>可以作为字典的key，可以用在字符串格式化中。</li>
</ul>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print((), type(()))</span><br><span class="line"><span class="comment"># () &lt;class 'tuple'&gt; 空元组</span></span><br><span class="line">print((<span class="number">3</span>), type((<span class="number">3</span>)))</span><br><span class="line"><span class="comment"># 3 &lt;class 'int'&gt;</span></span><br><span class="line">print((<span class="number">3</span>, ), type((<span class="number">3</span>,)))</span><br><span class="line"><span class="comment"># (3,) &lt;class 'tuple'&gt; 只有一个元组元素后面要加逗号</span></span><br></pre></td></tr></tbody></table></figure>

<p>1.list和tuple其实是用链表顺序存储的，也就是前一个元素中存储了下一个元素的位置，这样只要找到第一个元素的位置就可以顺藤摸瓜找到所有元素的位置，所以list的名字其实就是个指针，指向list的第一个元素的位置。list的插入和删除等可以直接用链表的方式进行，比如我要在第1个元素和第2个元素中间插入一个元素，那么直接在链表的最后面（我们假设这个list只有两个元素，那么也就是在第3个元素的位置上）插入这个元素，然后把第一个元素指针指向这个元素（第3个位置），然后再把新插入的元素的指针指向原来的第2个元素，这样插入操作就完成了。读取这个list的时候，先用list的名字（就是个指针，指向第1个元素的位置）找到第一个元素，然后用第1一个元素的指针找到第2个元素（位置3），然后用第2个元素的指针找到第3个元素（位置2），以此类推。所以list的顺序和内存中的实际顺序其实不一定完全对应。这种存储方式占用空间小，浪费内存很少。<br>因为要按照链表一个一个找下去，查找和插入的时间随着元素的增加而增加；</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">s = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">print(s)  <span class="comment"># {1, 2, 3}</span></span><br><span class="line">s.add(<span class="number">4</span>)</span><br><span class="line">print(s)  <span class="comment"># {1, 2, 3, 4}</span></span><br><span class="line">s.remove(<span class="number">4</span>)</span><br><span class="line">print(s)  <span class="comment"># {1, 2, 3}</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t = ([<span class="number">1</span>], <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">print(t[<span class="number">0</span>])  <span class="comment"># [1]</span></span><br><span class="line">t[<span class="number">0</span>].append(<span class="number">1</span>)</span><br><span class="line">print(t)</span><br><span class="line"><span class="comment"># ([1, 1], 2, 3)  # 第一个列表对象元素虽然改变，但它依然是这个列表对象</span></span><br><span class="line"></span><br><span class="line">print(t[<span class="number">2</span>])  <span class="comment"># 3，不可变对象</span></span><br><span class="line">t[<span class="number">2</span>] = <span class="number">3</span>  <span class="comment"># TypeError: 'tuple' object does not support item assignment</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>, <span class="string">'23'</span>, [<span class="number">123</span>, <span class="string">'abc'</span>], (<span class="string">'python'</span>, <span class="string">'learn'</span>))</span><br><span class="line">tls = list(t)  <span class="comment">#tuple--&gt;list</span></span><br><span class="line">print(tls)</span><br><span class="line"><span class="comment"># [1, '23', [123, 'abc'], ('python', 'learn')]</span></span><br><span class="line"></span><br><span class="line">t_tuple = tuple(tls)  <span class="comment">#list--&gt;tuple</span></span><br><span class="line">print(t_tuple)</span><br><span class="line"><span class="comment"># (1, '23', [123, 'abc'], ('python', 'learn'))</span></span><br></pre></td></tr></tbody></table></figure>

<p>常用函数<br>list<br><code>min(list_name)</code> <code>max(list_name)</code> <code>sum(list_name)</code><br><code>len(list_name)</code></p>
<p><code>list.index(x[, start[, end]])</code><br>从列表中找出某个值第一个匹配项的索引位置<br>x– 查找的对象。<br>start– 可选，查找的起始位置。<br>end– 可选，查找的结束位置。<br>返回：查找对象的索引位置，如果没有找到对象则抛出异常。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="string">'Taobao'</span>]</span><br><span class="line">print(<span class="string">'Google 索引值为'</span>, list1.index(<span class="string">'Google'</span>))</span><br><span class="line"><span class="comment"># Google 索引值为 0</span></span><br><span class="line">print(<span class="string">'Runoob 索引值为'</span>, list1.index(<span class="string">'Runoob'</span>))</span><br><span class="line"><span class="comment"># Runoob 索引值为 1</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'Taobao 索引值为'</span>, list1.index(<span class="string">'Taobao'</span>))</span><br><span class="line"><span class="comment"># Taobao 索引值为 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从指定位置开始搜索</span></span><br><span class="line">print(<span class="string">'Runoob 索引值为'</span>, list1.index(<span class="string">'Runoob'</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment"># Runoob 索引值为 1</span></span><br><span class="line"><span class="comment"># print('Runoob 索引值为', list1.index('Runoob', 2))</span></span><br><span class="line"><span class="comment"># ValueError: 'Runoob' is not in list</span></span><br><span class="line"></span><br><span class="line">list1 = [<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="string">'Taobao'</span>]</span><br><span class="line">list2 = [<span class="string">'Runoob'</span>, <span class="string">'Taobao'</span>, <span class="string">'Google'</span>]</span><br><span class="line">dic = {}</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(list2)):</span><br><span class="line">    dic[list2[i]] = i</span><br><span class="line">    print(dic)</span><br><span class="line"><span class="comment"># {'Runoob': 0}</span></span><br><span class="line"><span class="comment"># {'Runoob': 0, 'Taobao': 1}</span></span><br><span class="line"><span class="comment"># {'Runoob': 0, 'Taobao': 1, 'Google': 2}</span></span><br><span class="line"><span class="comment"># {'Runoob': 0, 'Taobao': 1, 'Google': 2}</span></span><br><span class="line"></span><br><span class="line">print(list1[<span class="number">0</span>])  <span class="comment"># Google</span></span><br><span class="line">i = dic[list1[<span class="number">0</span>]]</span><br><span class="line">print(i)  <span class="comment"># 2</span></span><br><span class="line"></span><br><span class="line">x = dict()</span><br><span class="line">print(x)  <span class="comment"># {}</span></span><br><span class="line"></span><br><span class="line">dict2 = {val: idx <span class="keyword">for</span> idx, val <span class="keyword">in</span> enumerate(list2)}</span><br><span class="line">print(dict2)</span><br><span class="line"><span class="comment"># {'Runoob': 0, 'Taobao': 1, 'Google': 2}</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>.remove(具体内容)</code> 根据值移除元素<br><code>del a[索引号]</code><br><code>list.pop([index=-1])</code>移除列表中指定索引号一个元素（默认最后一个元素），并且返回该元素的值。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">'Google'</span>, <span class="string">'Runoob'</span>, <span class="string">'Taobao'</span>, <span class="string">"Yahoo"</span>]</span><br><span class="line">list1.pop()  <span class="comment"># 括号里没有参数，表示删除list数组中最后一个元素</span></span><br><span class="line">print(<span class="string">"列表现在为 : "</span>, list1)</span><br><span class="line"><span class="comment"># 列表现在为 :  ['Google', 'Runoob', 'Taobao']</span></span><br><span class="line">list_pop = list1.pop(<span class="number">1</span>)</span><br><span class="line">print(<span class="string">"删除的项为 :"</span>, list_pop)</span><br><span class="line"><span class="comment"># 删除的项为 : Runoob</span></span><br><span class="line">print(<span class="string">"列表现在为 : "</span>, list1)</span><br><span class="line"><span class="comment"># 列表现在为 :  ['Google', 'Taobao']</span></span><br><span class="line">print(<span class="string">"删除的项为 :"</span>, list1.pop(<span class="number">0</span>), <span class="string">"，列表现在为 : "</span>, list1)</span><br><span class="line"><span class="comment"># 删除的项为 : Google ，列表现在为 :  ['Taobao']</span></span><br></pre></td></tr></tbody></table></figure>

<p><code> .sort(key=lambda x: x[0], reverse=True)</code><br><code> .sort(key=lambda x:(-x[1],x[0],x[2]))</code><br><code> .sort(key=lambda x:(-x[1],x[0],x[2]))</code><br>默认是升序，加个符号变降序，可做多级排序。<br><code>sorted()</code> 不在本地做排序</p>
<p><code>.reverse()</code>函数用于反向列表中元素。不能将字符串反转。<br><code>.reversed()</code>函数是返回序列seq的反向访问的迭代子。参数可以是列表，元组，字符串</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 组织列表 sort() 永久性排序 abcde正向或逆向顺序排序</span></span><br><span class="line">che = [<span class="string">"motuo"</span>, <span class="string">"qiche"</span>, <span class="string">"zixingche"</span>, <span class="string">'huoche'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 倒着打印列表  永久性的修改顺序 也可以随时改回来</span></span><br><span class="line">che = [<span class="string">"motuo"</span>, <span class="string">"qiche"</span>, <span class="string">"zixingche"</span>, <span class="string">'huoche'</span>]</span><br><span class="line"><span class="comment"># 倒着打印</span></span><br><span class="line">che.reverse()</span><br><span class="line">print(che)</span><br><span class="line"><span class="comment"># ['huoche', 'zixingche', 'qiche', 'motuo']</span></span><br><span class="line"><span class="comment"># 再次倒着改回</span></span><br><span class="line">che.reverse()</span><br><span class="line">print(che)</span><br><span class="line"><span class="comment"># ['motuo', 'qiche', 'zixingche', 'huoche']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># "iloveChina".reverse()  # 直接将字符串用reverse异常，reverse适用于list(列表)</span></span><br><span class="line">a= <span class="string">"ilovechina"</span>[::<span class="number">-1</span>]</span><br><span class="line">print(a)</span><br><span class="line">b = <span class="string">''</span>.join(reversed(<span class="string">'ilovechina'</span>))</span><br><span class="line">print(b)</span><br></pre></td></tr></tbody></table></figure>

<p>元素 in list_name，内部是实现了一个魔法方法 <code>__contains__</code><br><code>.append</code><br><code>.insert(序号，内容)</code><br>函数参数是可以是任意一个元素，<br>作用是在列表的最后添加上这个新元素。</p>
<p>变量<br><code>float(‘inf’)</code></p>
<p>字典 无序<br><code>keys()</code> 查询字典的键<br><code>.values()</code> 查询字典的值<br><code>.items()</code> 返回的是元组</p>
<p><code>dict.get(key, default=None)</code> 查询某个键是否存在，<br>key – 字典中要查找的键。<br>default – 如果指定键的值不存在时，返回该默认值。<br>返回指定键的值，如果值不在字典中或不存在此键，返回默认值None。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字典的查询</span></span><br><span class="line">dict1 = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'male'</span>: <span class="string">'男'</span>}</span><br><span class="line">print(dict1.keys())  <span class="comment"># dict_keys(['name', 'age', 'male'])</span></span><br><span class="line">print(dict1.values())  <span class="comment"># dict_values(['Ashe', 18, '男'])</span></span><br><span class="line">print(dict1.items())</span><br><span class="line"><span class="comment"># dict_items([('name', 'Ashe'), ('age', 18), ('male', '男')])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断key是否在字典里</span></span><br><span class="line">print(<span class="string">'name'</span> <span class="keyword">in</span> dict1)  <span class="comment"># True，效率高</span></span><br><span class="line">print(<span class="string">'name'</span> <span class="keyword">in</span> dict1.keys())  <span class="comment"># True 效率低，要先生成遍历字典的所有内容一个列表，这样字典的优势就没有了</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印dict1的键</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dict1.keys():</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="comment"># name</span></span><br><span class="line">    <span class="comment"># age</span></span><br><span class="line">    <span class="comment"># male</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印dict的值</span></span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> dict1.values():</span><br><span class="line">    print(v)  <span class="comment">#Ashe 18 男</span></span><br><span class="line">    <span class="comment"># Ashe</span></span><br><span class="line">    <span class="comment"># 18</span></span><br><span class="line">    <span class="comment"># 男</span></span><br></pre></td></tr></tbody></table></figure>

<p>打印字典的键值：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dict1 = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'male'</span>: <span class="string">'男'</span>}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dict1.items():</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="comment"># ('name', 'Ashe')</span></span><br><span class="line">    <span class="comment"># ('age', 18)</span></span><br><span class="line">    <span class="comment"># 'male', '男')</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> dict1.items():</span><br><span class="line">    print(k, v)</span><br><span class="line">    <span class="comment"># name Ashe</span></span><br><span class="line">    <span class="comment"># age 18</span></span><br><span class="line">    <span class="comment"># male 男</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dict1 = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'male'</span>: <span class="string">'男'</span>}</span><br><span class="line">print(dict1.get(<span class="string">'name'</span>))  <span class="comment"># Ashe</span></span><br><span class="line">print(dict1.get(<span class="string">'address'</span>))  <span class="comment"># None</span></span><br><span class="line">print(dict1.get(<span class="string">'address'</span>, <span class="string">'没有此键'</span>))  <span class="comment"># 没有此键</span></span><br><span class="line">print(dict1.get(<span class="string">'name'</span>, <span class="string">'age'</span>))  <span class="comment"># Ashe</span></span><br><span class="line">print(dict1.get(<span class="string">'age'</span>, <span class="string">'name'</span>))  <span class="comment"># 18</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">a = {<span class="string">'x'</span>: <span class="number">1</span>}</span><br><span class="line">print(a[<span class="string">'x'</span>])  <span class="comment"># 1</span></span><br><span class="line"><span class="comment"># print(a[1]) # KeyError:1</span></span><br><span class="line">b = {(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>): <span class="string">'test'</span>}</span><br><span class="line">print(b[(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)])  <span class="comment"># test</span></span><br><span class="line"><span class="comment"># c = {[1, 2, 3]: 'test'}</span></span><br><span class="line"><span class="comment"># print(c[[1, 2, 3]])  # TypeError: unhashable type: 'list'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(a.keys())  <span class="comment"># dict_keys(['x'])</span></span><br><span class="line">print(a.values())  <span class="comment"># dict_values([1])</span></span><br><span class="line">print(b.keys())  <span class="comment"># dict_keys([(1, 2, 3)])</span></span><br><span class="line">print(b.values())  <span class="comment"># dict_values(['test'])</span></span><br><span class="line"></span><br><span class="line">print(a.get(<span class="string">'x'</span>))  <span class="comment"># 1</span></span><br><span class="line">print(a.get(<span class="string">'x'</span>, <span class="number">4</span>))  <span class="comment"># 1 指定的键的值不存在，返回默认值</span></span><br><span class="line">print(a.get(<span class="number">4</span>))  <span class="comment"># None 指定的键的值不存在，返回默认值None</span></span><br><span class="line"></span><br><span class="line">print(b.get((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)))  <span class="comment"># test</span></span><br><span class="line">print(b.get(<span class="string">'y'</span>))  <span class="comment"># None，指定键的值不存在时，返回该默认值None。</span></span><br><span class="line">print(b.get(<span class="string">'y'</span>, <span class="number">2</span>))  <span class="comment"># 2，如果指定键的值不存在时，返回该默认值2。</span></span><br></pre></td></tr></tbody></table></figure>

<p>dict有两种增加的方法<br>如果没有的键值对，则进行添加，如果有，则将值进行覆盖</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dict1={<span class="string">'name'</span>:<span class="string">'Ashe'</span>,<span class="string">'age'</span>:<span class="number">18</span>,<span class="string">'male'</span>:<span class="string">'男'</span>}</span><br><span class="line">print(dict1)</span><br><span class="line">dict1[<span class="string">'high'</span>]=<span class="number">185</span></span><br><span class="line">print(dict1)  <span class="comment"># {'name': 'Ashe', 'age': 18, 'male': '男', 'high': 185}</span></span><br><span class="line">dict1[<span class="string">'age'</span>]=<span class="number">16</span></span><br><span class="line">print(dict1) <span class="comment">#  {'name': 'Ashe', 'age': 16, 'male': '男', 'high': 185}</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果有键值对，不做任何改变，没有键值对，才进行添加</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dict1 = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'male'</span>: <span class="string">'男'</span>}</span><br><span class="line">dict1.setdefault(<span class="string">"weight"</span>)</span><br><span class="line">print(dict1)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'age': 16, 'male': '男', 'high': 185, 'weight': None}</span></span><br><span class="line">dict1.setdefault(<span class="string">'weight'</span>, <span class="string">'65kg'</span>)</span><br><span class="line">print(dict1)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'age': 16, 'male': '男', 'high': 185, 'weight': None}</span></span><br><span class="line">dict1.setdefault(<span class="string">'address'</span>, <span class="string">'北京'</span>)</span><br><span class="line">print(dict1)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'age': 16, 'male': '男', 'high': 185, 'weight': None, 'address': '北京'}</span></span><br><span class="line">dict1.setdefault(<span class="string">'address'</span>, <span class="string">'桂林'</span>)</span><br><span class="line">print(dict1)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'age': 16, 'male': '男', 'high': 185, 'weight': None, 'address': '北京'}</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>pop()</code>删除，如果有键，则删除，有返回值，如果没有则会报错，如果不希望出现报错信息，可以在删除的后面添加信息</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">delDict={<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'age'</span>: <span class="number">16</span>, <span class="string">'male'</span>: <span class="string">'男'</span>, <span class="string">'high'</span>: <span class="number">185</span>, <span class="string">'weight'</span>: <span class="literal">None</span>, <span class="string">'address'</span>: <span class="string">'北京'</span>}</span><br><span class="line">print(delDict.pop(<span class="string">'age'</span>))  <span class="comment"># 16</span></span><br><span class="line">print(delDict)  <span class="comment">#{'name': 'Ashe', 'male': '男', 'high': 185, 'weight': None, 'address': '北京'}</span></span><br><span class="line">print(delDict.pop(<span class="string">'职业'</span>,<span class="string">'没有此键'</span>))  <span class="comment">#没有此键</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> a[<span class="string">'x'</span>]  <span class="comment"># 删除key</span></span><br><span class="line">print(a[<span class="string">'y'</span>])  <span class="comment"># 2</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>pop(key[,default])</code><br>删除字典给定键 key 所对应的值，返回值为被删除的值。<br>key: 要删除的键值<br>default: 如果没有 key，返回 default 值</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">site = {<span class="string">'name'</span>: <span class="string">'菜鸟教程'</span>, <span class="string">'alexa'</span>: <span class="number">10000</span>, <span class="string">'url'</span>: <span class="string">'www.runoob.com'</span>}</span><br><span class="line">pop_obj = site.pop(<span class="string">'name'</span>)</span><br><span class="line">print(pop_obj)  <span class="comment"># 菜鸟教程</span></span><br><span class="line"></span><br><span class="line">dict1 = {<span class="number">1</span>: <span class="string">"a"</span>, <span class="number">2</span>: [<span class="number">1</span>, <span class="number">2</span>]}</span><br><span class="line">print(dict1.pop(<span class="number">1</span>), dict1)</span><br><span class="line"><span class="comment"># a {2: [1, 2]}</span></span><br><span class="line">print(dict1.pop(<span class="number">3</span>, <span class="string">"nokey"</span>), dict1)  <span class="comment"># 设置默认值，必须添加，否则报错</span></span><br><span class="line"><span class="comment"># nokey {2: [1, 2]}</span></span><br><span class="line">print(dict1.pop(<span class="number">3</span>), dict1)  <span class="comment"># 没用设置默认值，报错</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   print(dict1.pop(3), dict1)</span></span><br><span class="line"><span class="comment"># KeyError: 3</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>popitem()</code>删除，随机删除，返回的是一个元组，元组里面存储的删除的键值</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">delDict = {</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Ashe'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">16</span>,</span><br><span class="line">    <span class="string">'male'</span>: <span class="string">'男'</span>,</span><br><span class="line">    <span class="string">'high'</span>: <span class="number">185</span>,</span><br><span class="line">    <span class="string">'weight'</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">'address'</span>: <span class="string">'北京'</span></span><br><span class="line">}</span><br><span class="line">print(delDict.pop(<span class="string">'age'</span>))  <span class="comment"># 16</span></span><br><span class="line">print(delDict)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'male': '男', 'high': 185, 'weight': None, 'address': '北京'}</span></span><br><span class="line">print(delDict.pop(<span class="string">'职业'</span>, <span class="string">'没有此键'</span>))  <span class="comment"># 没有此键</span></span><br><span class="line"></span><br><span class="line">print(delDict.popitem())</span><br><span class="line"><span class="comment"># ('address', '北京') 随机删除，返回值是删除的键值对</span></span><br><span class="line">print(delDict)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'male': '男', 'high': 185, 'weight': None}</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>del()</code>可以删除整个字典，也可以删除字典的某个键，如果删除的键不存在，则会出现报错</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">delDict = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'male'</span>: <span class="string">'男'</span>, <span class="string">'high'</span>: <span class="number">185</span>, <span class="string">'weight'</span>: <span class="literal">None</span>}</span><br><span class="line"><span class="keyword">del</span> delDict[<span class="string">'name'</span>]</span><br><span class="line">print(delDict)  <span class="comment"># {'male': '男', 'high': 185, 'weight': None}</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用del清空列表</span></span><br><span class="line"><span class="keyword">del</span> delDict</span><br><span class="line">print(delDict)  <span class="comment"># NameError: name 'delDict' is not defined</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>.clear()</code>清空列表也可以使用，该函数没有任何返回值</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delDict = {<span class="string">'name'</span>: <span class="string">'Ashe'</span>, <span class="string">'male'</span>: <span class="string">'男'</span>, <span class="string">'high'</span>: <span class="number">185</span>, <span class="string">'weight'</span>: <span class="literal">None</span>}</span><br><span class="line">print(delDict.clear())  <span class="comment"># None</span></span><br><span class="line">print(delDict)  <span class="comment"># {}</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改字典</span></span><br><span class="line">x = {<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>}</span><br><span class="line">x.update(y)  <span class="comment"># 这里注意我是直接改变的x变量，具体根据程序逻辑来定，可以用其它变量接受。</span></span><br><span class="line">print(x)  <span class="comment"># {'a': 1, 'b': 2, 'c': 3, 'd': 4}</span></span><br><span class="line"></span><br><span class="line">x = {<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'a'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>}</span><br><span class="line">x.update(y)  <span class="comment"># 这里注意我是直接改变的x变量，具体根据程序逻辑来定，可以用其它变量接受。</span></span><br><span class="line">print(x)  <span class="comment"># {'a': 3, 'b': 2, 'd': 4}</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典合并的方法</span></span><br><span class="line">print(<span class="string">'===='</span>)</span><br><span class="line">x = {<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>}</span><br><span class="line"><span class="comment"># 法一</span></span><br><span class="line">z = {}</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> x.items():</span><br><span class="line">    z[k] = v</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> y.items():</span><br><span class="line">    z[k] = v</span><br><span class="line">print(z)</span><br><span class="line"><span class="comment"># {'a': 1, 'b': 2, 'c': 3, 'd': 4}</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 法二</span></span><br><span class="line">q = {**x, **y}</span><br><span class="line">print(q)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'^^^^^^^'</span>)</span><br><span class="line">a = {<span class="string">"A"</span>: <span class="number">1</span>, <span class="string">"B"</span>: <span class="number">2</span>}</span><br><span class="line">b = {<span class="string">"A"</span>: <span class="number">3</span>, <span class="string">"D"</span>: <span class="number">4</span>}</span><br><span class="line"></span><br><span class="line">print({**a, **b})</span><br><span class="line"><span class="comment"># {'A': 3, 'B': 2, 'D': 4}  # 这里取的是b中的A，即b覆盖了a</span></span><br><span class="line">print(<span class="string">'-----'</span>)</span><br><span class="line">print(dict(a, **b))</span><br><span class="line"><span class="comment"># {'A': 3, 'B': 2, 'D': 4}</span></span><br></pre></td></tr></tbody></table></figure>

<p>字符串<br>是否包含某个子串<code>print("慕课网" in name)  # True</code><br><code>string.index(sub_string, start, end)</code>返回开始的索引值，没找到则抛出异常。</p>
<p><code>str.startswith(substr, beg=0, end=len(string))</code> 检查字符串是否是以指定子字符串开头，如果是则返回 True，否则返回 False。如果参数 beg 和 end 指定值，则在指定范围内检查。beg – 开始索引，默认为0。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">"this is string example....wow!!!"</span></span><br><span class="line">print(str.startswith(<span class="string">'this'</span>))</span><br><span class="line"><span class="comment"># True 字符串是否以 this 开头</span></span><br><span class="line">print(str.startswith(<span class="string">'string'</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># True 从第九个字符开始的字符串是否以 string 开头</span></span><br><span class="line">print(str.startswith(<span class="string">'this'</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment"># False 从第2个字符开始到第四个字符结束的字符串是否以 this 开头</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>str.endswith(substr, beg=0, end=len(string))</code></p>
<p><code>str.find(str, beg=0, end=len(string))</code> 检测字符串中是否包含子字符串 str ，如果指定 beg（开始） 和 end（结束） 范围，则检查是否包含在指定范围内，如果指定范围内如果包含指定索引值，返回的是索引值在字符串中的起始位置。如果不包含索引值，返回-1。<br>beg – 开始索引，默认为0。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">info = <span class="string">'abca'</span></span><br><span class="line">print(info.find(<span class="string">'a'</span>))  <span class="comment"># 0 从下标0开始，查找在字符串里第一个出现的子串</span></span><br><span class="line">print(info.find(<span class="string">'a'</span>, <span class="number">1</span>))  <span class="comment"># 3 从下标1开始，查找在字符串里第一个出现的子串</span></span><br><span class="line">print(info.find(<span class="string">'3'</span>))  <span class="comment"># -1 查找不到</span></span><br><span class="line"></span><br><span class="line">str1 = <span class="string">"Runoob example....wow!!!"</span></span><br><span class="line">str2 = <span class="string">"exam"</span></span><br><span class="line"></span><br><span class="line">print(str1.find(str2))  <span class="comment"># 7</span></span><br><span class="line">print(str1.find(str2, <span class="number">5</span>))  <span class="comment"># 7  第2个参数5，表示从素引5的位置开始往后查找</span></span><br><span class="line">print(str1.find(str2, <span class="number">10</span>))  <span class="comment"># -1</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>str.lstrip([chars])</code> 方法用于截掉字符串左边的空格或指定字符。<br><code>str.rstrip([chars])</code> 方法用于截掉字符串右边的空格或指定字符。</p>
<p>从左到右移除字符串的指定字符，<br><code>.strip()</code>无字符集参数或为 None 时 去除首位空格<br>匹配时不是按照整个字符串匹配的，而是一个个匹配的。<br>移除所有属于字符集子串的字符一旦不属于则停止移除并返回字符串副本。</p>
<p>chars –指定截取的字符。<br>返回截掉字符串左边的空格或指定字符后生成的新字符串。</p>
<p><code>.strip().strip(‘-a’)</code>去除首位空格和字符</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">"     this is string example....wow!!!     "</span></span><br><span class="line">print(str.lstrip())</span><br><span class="line"><span class="comment"># this is string example....wow!!!</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"88888888this is string example....wow!!!8888888"</span></span><br><span class="line">print(str.lstrip(<span class="string">'8'</span>))</span><br><span class="line"><span class="comment"># this is string example....wow!!!8888888</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'www.example.com'</span>.lstrip(<span class="string">'we.'</span>))</span><br><span class="line"><span class="comment"># xample.com</span></span><br><span class="line">print(<span class="string">'www.example.com'</span>.lstrip(<span class="string">'we'</span>))</span><br><span class="line"><span class="comment"># '.example.com'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'www.example.com'</span>.lstrip(<span class="string">'e'</span>))</span><br><span class="line"><span class="comment"># 'www.example.com'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'www.example.com'</span>.lstrip(<span class="string">'cmowz.'</span>))</span><br><span class="line"><span class="comment"># 'example.com'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'www.example.com'</span>.lstrip(<span class="string">'cmoz.'</span>))</span><br><span class="line"><span class="comment"># 'www.example.com'</span></span><br><span class="line"></span><br><span class="line">message = <span class="string">"\tpython xue xi\t"</span></span><br><span class="line"><span class="comment"># 每个单词的首字母大写的写法</span></span><br><span class="line">print(message.title())</span><br><span class="line"><span class="comment"># 单词全部大写的写法</span></span><br><span class="line">print(message.upper())</span><br><span class="line"><span class="comment"># 单词全部小写的写法</span></span><br><span class="line">print(message.lower())</span><br><span class="line"><span class="comment"># 去除字符串前面的空白</span></span><br><span class="line">print(message.lstrip())</span><br><span class="line"><span class="comment"># 去除字符串后面的空白</span></span><br><span class="line">print(message.rstrip())</span><br><span class="line"><span class="comment"># 去除字符串两边的空白</span></span><br><span class="line">print(message.strip())</span><br><span class="line"><span class="comment">#         Python Xue Xi</span></span><br><span class="line"><span class="comment">#         PYTHON XUE XI</span></span><br><span class="line"><span class="comment">#         python xue xi</span></span><br><span class="line"><span class="comment"># python xue xi        </span></span><br><span class="line"><span class="comment">#         python xue xi</span></span><br><span class="line"><span class="comment"># python xue xi    </span></span><br></pre></td></tr></tbody></table></figure>

<p>S[:3]+S[5:] 拼接字符串，去除某个字符</p>
<p><code>.replace(‘a’,’b’)</code> 替换字符</p>
<p><code>re.sub(‘a’,’b’,s)</code> 替换字符</p>
<p><code>ord(a)</code>它以一个字符（长度为1）作为参数，返回对应的 ascii-&gt;gbk-&gt;unicode 数值（返回值是对应的十进制整数），并不是简单意义上ascii码值并不准确，<br>如果所给的 Unicode 字符超出了你的 Python 定义范围，则会引发一个 TypeError 的异常。<br>因为python里不像C++那样两个字符相减可以求出ASCII数值差</p>
<p><code>chr(a)</code> 函数（对于8位的ASCII字符串）或 unichr() 函数（对于Unicode对象）的配对函数 是ord的逆过程，将ASCII数值转化成该编码对应的字符</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">print(ord(<span class="string">' '</span>), type(ord(<span class="string">' '</span>)))  <span class="comment"># 32 &lt;class 'int'&gt; 空格的ascii码</span></span><br><span class="line">print(ord(<span class="string">'0'</span>))  <span class="comment"># 48</span></span><br><span class="line">print(ord(<span class="string">'1'</span>))  <span class="comment"># 49</span></span><br><span class="line">print(ord(<span class="string">'2'</span>))  <span class="comment"># 50</span></span><br><span class="line">print(ord(<span class="string">'2'</span>), type(ord(<span class="string">'2'</span>)))  <span class="comment"># 50  &lt;class 'int'&gt;</span></span><br><span class="line">print(ord(<span class="string">'3'</span>))  <span class="comment"># 51</span></span><br><span class="line"><span class="comment"># print(ord('10')) TypeError: ord() expected a character, but string of length 2 found</span></span><br><span class="line">print(ord(<span class="string">'A'</span>))  <span class="comment"># 65</span></span><br><span class="line">print(ord(<span class="string">'B'</span>))  <span class="comment"># 66</span></span><br><span class="line">print(ord(<span class="string">'C'</span>))  <span class="comment"># 67</span></span><br><span class="line">print(ord(<span class="string">'a'</span>))  <span class="comment"># 97</span></span><br><span class="line">print(ord(<span class="string">'b'</span>))  <span class="comment"># 98</span></span><br><span class="line">print(ord(<span class="string">'c'</span>))  <span class="comment"># 99</span></span><br><span class="line">print(ord(<span class="string">'华'</span>))  <span class="comment"># 21326 中文对应的Unicode</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(chr(<span class="number">32</span>))  <span class="comment"># 空格</span></span><br><span class="line">print(chr(<span class="number">50</span>), type(chr(<span class="number">50</span>)))  <span class="comment"># 2  &lt;class 'str'&gt;</span></span><br><span class="line">print(chr(<span class="number">65</span>))  <span class="comment"># A</span></span><br><span class="line">print(chr(<span class="number">97</span>))  <span class="comment"># a</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">upper_letters = list(chr(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">65</span>, <span class="number">91</span>))</span><br><span class="line">lower_letters = list(chr(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">97</span>, <span class="number">123</span>))</span><br><span class="line">number = list(chr(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">48</span>, <span class="number">58</span>))</span><br><span class="line"></span><br><span class="line">print(*upper_letters)</span><br><span class="line"><span class="comment"># A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</span></span><br><span class="line">print(*lower_letters)</span><br><span class="line"><span class="comment"># a b c d e f g h i j k l m n o p q r s t u v w x y z</span></span><br><span class="line">print(*number)</span><br><span class="line"><span class="comment"># 0 1 2 3 4 5 6 7 8 9</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>str.title()</code> 方法返回”标题化”的字符串，就是说所有单词的首个字母转化为大写，其余字母均为小写<br>返回”标题化”的字符串,就是说所有单词的首字母都转化为大写。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">"this is string example from runoob....wow!!!"</span></span><br><span class="line">print(str.title())</span><br><span class="line"><span class="comment"># This Is String Example From Runoob....Wow!!! </span></span><br></pre></td></tr></tbody></table></figure>

<p>非字母后的第一个字母将转换为大写字母</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">txt = <span class="string">"hello b2b2b2 and 3g3g3g"</span></span><br><span class="line">print(txt.title())  <span class="comment"># Hello B2B2B2 And 3G3G3G</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>str.split(str="", num=string.count(str))</code><br>通过指定分隔符对字符串进行切片，不是对列表对象切片<br>返回分割后的字符串列表。<br>如果第二个参数 num 有指定值，则分割为 num+1 个子字符串。<br>str – 分隔符，默认为所有的空字符，包括空格、换行(\n)、制表符(\t)等。<br>num – 分割次数。默认为 -1, 即分隔所有。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">"http://www.baidu.com/python/image/123456.jpg"</span></span><br><span class="line">print(url.split())  <span class="comment"># 以空格为分隔符</span></span><br><span class="line"><span class="comment"># ['http://www.baidu.com/python/image/123456.jpg']</span></span><br><span class="line">print(url.split(<span class="string">"/"</span>))  <span class="comment"># 以“/” 进行分隔</span></span><br><span class="line"><span class="comment"># ['http:', '', 'www.baidu.com', 'python', 'image', '123456.jpg']</span></span><br><span class="line">print(url.split(<span class="string">'/'</span>, <span class="number">1</span>))  <span class="comment"># 以 / 为分隔符，分割为2个字符串列表</span></span><br><span class="line"><span class="comment"># ['http:', '/www.baidu.com/python/image/123456.jpg']</span></span><br><span class="line">print(url.split(<span class="string">"/"</span>)[<span class="number">-1</span>])  <span class="comment"># 分隔符分割后列表最后一个元素(字符串类型），图片名称的获取</span></span><br><span class="line"><span class="comment"># 123456.jpg</span></span><br><span class="line">print(url.split(<span class="string">"/"</span>)[<span class="number">0</span>])  <span class="comment"># 分隔符分割后列表第一个元素(字符串类型）</span></span><br><span class="line"><span class="comment"># http:</span></span><br><span class="line">print(url[<span class="number">1</span>:<span class="number">-1</span>], type(url[<span class="number">1</span>:<span class="number">-1</span>]))  <span class="comment"># 切片，去除第一个和最后一个元素</span></span><br><span class="line"><span class="comment"># ttp://www.baidu.com/python/image/123456.jp &lt;class 'str'&gt;</span></span><br><span class="line">print(url[<span class="number">1</span>:<span class="number">-1</span>].split(<span class="string">"/"</span>)[<span class="number">0</span>])  <span class="comment"># 列表第一个元素(字符串类型）</span></span><br><span class="line"><span class="comment"># ttp:</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">"[http://www.baidu.com/python/image/123456.jpg]"</span></span><br><span class="line">print(url[:], type(url[:]))</span><br><span class="line"><span class="comment"># [http://www.baidu.com/python/image/123456.jpg] &lt;class 'str'&gt;</span></span><br><span class="line">print(url[:].split(<span class="string">"/"</span>)[<span class="number">0</span>])  <span class="comment"># 列表第一个元素(字符串类型）</span></span><br><span class="line"><span class="comment"># [http:</span></span><br><span class="line"></span><br><span class="line">data = <span class="string">'[1, 2, 3, null, 4, 5, null]'</span></span><br><span class="line">print(data[<span class="number">1</span>:<span class="number">-1</span>], type(data[<span class="number">1</span>:<span class="number">-1</span>]))</span><br><span class="line"><span class="comment"># 1, 2, 3, null, 4, 5, null &lt;class 'str'&gt;</span></span><br><span class="line">print(data[<span class="number">1</span>:<span class="number">-1</span>].split(<span class="string">','</span>), type(data[<span class="number">1</span>:<span class="number">-1</span>].split(<span class="string">','</span>)))</span><br><span class="line"><span class="comment"># ['1', ' 2', ' 3', ' null', ' 4', ' 5', ' null'] &lt;class 'list'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>str.splitlines([keepends])</code><br>按照行(‘\r’, ‘\r\n’, \n’)分隔，返回一个包含各行作为元素的列表，<br>keepends – 在输出结果里是否去掉换行符(‘\r’, ‘\r\n’, \n’)，<br>默认为 <code>False</code>，不包含换行符，<br>如果为 <code>True</code>，则保留换行符。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'ab c\n\nde fg\rkl\r\n'</span>.splitlines())</span><br><span class="line"><span class="comment"># ['ab c', '', 'de fg', 'kl']</span></span><br><span class="line">print(<span class="string">'ab c\n\nde fg\rkl\r\n'</span>.splitlines(<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># ['ab c\n', '\n', 'de fg\r', 'kl\r\n']</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="39-sep-39-join-seq"><a href="#39-sep-39-join-seq" class="headerlink" title="'sep'.join(seq)"></a><code>'sep'.join(seq)</code></h3><p>以sep作为分隔符，将seq所有的元素合并成一个新的字符串<br>将字符串、元组、列表中的元素以指定的字符(分隔符)连接生成一个新的字符串</p>
<p>参数说明<br>sep：分隔符。string（字符串），可以为空<br>seq：要连接的元素列表、字符串、元组、字典<br>返回值：返回一个以分隔符sep连接各个元素后生成的字符串</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对字符串进行操作</span></span><br><span class="line">print(<span class="string">':'</span>.join(<span class="string">"hello good boy "</span>))</span><br><span class="line"><span class="comment"># h:e:l:l:o: :g:o:o:d: :b:o:y:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用字符串把字符串列表里的字符串连接起来</span></span><br><span class="line"><span class="comment"># 用空字符串''隔开</span></span><br><span class="line">print(<span class="string">''</span>.join([<span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"!"</span>]))  <span class="comment"># helloworld!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用' '隔开，用空格</span></span><br><span class="line">print(<span class="string">' '</span>.join([<span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"!"</span>]))  <span class="comment"># hello world !</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用'-'隔开</span></span><br><span class="line">print(<span class="string">'-'</span>.join([<span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"!"</span>]))  <span class="comment"># hello-world-!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对元组进行操作</span></span><br><span class="line">seq3 = (<span class="string">'hello'</span>, <span class="string">'good'</span>, <span class="string">'boy'</span>)</span><br><span class="line">print(<span class="string">':'</span>.join(seq3))</span><br><span class="line"><span class="comment"># hello:good:boy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对字典进行操作</span></span><br><span class="line">seq4 = {<span class="string">'hello'</span>: <span class="number">1</span>, <span class="string">'good'</span>: <span class="number">2</span>, <span class="string">'boy'</span>: <span class="number">3</span>}</span><br><span class="line">print(<span class="string">':'</span>.join(seq4))</span><br><span class="line"><span class="comment"># hello:good:boy</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/sql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/sql/" class="post-title-link" itemprop="url">sql</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-28 14:34:27" itemprop="dateModified" datetime="2021-06-28T14:34:27Z">2021-06-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>mysql命令行中执行多行命令时，<br>如果前边输入的命令发生错误，<br>通过<code>\c</code>来取消当前的命令，重新进入“mysql-&gt;”提示符</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br></pre></td><td class="code"><pre><span class="line">```\q```退出mysql</span><br><span class="line">```\h```帮助信息</span><br><span class="line">```\d```改变执行符号</span><br><span class="line">```\s```显示服务器状态</span><br><span class="line"></span><br><span class="line">### 整数类型范围</span><br><span class="line">1，tinyint类型占用的字节最小，表示1字节整数。取值范围也是最小的。</span><br><span class="line">2，smalllint类，表示2个字节整数。</span><br><span class="line">3，mediumint类型占用的字节最大，表示3字节整数。</span><br><span class="line">4，int类型，表示4字节整数，和integer类型的字节数和取值范围是一样的，</span><br><span class="line">5，bigint类型占用的字节最大，表示8字节整数。气质范围是最大的。</span><br><span class="line"></span><br><span class="line">属性 字段约束</span><br><span class="line">任何整数类型后面都可以加一个```unsigned```属性，表示数据是无符号的，即非负整数。</span><br><span class="line">用此类型可以增加数据长度。</span><br><span class="line">例如如果tinyint最大是127，那tinyint unsigned最大就可以到127 * 2。</span><br><span class="line">例如：int类型的整数，有符号值：-128到127，无符号值：0到255。</span><br><span class="line">不同类型的整数类型的字节数不同，根据类型所占的字节数可以算出该类型的取值范围。</span><br><span class="line">比如intyint的空间是一个字节，一个字节是8位。那么</span><br><span class="line">tinyint无符号数的最大值就是2的8次-1，也就是255。</span><br><span class="line">tinyint有符号数的最大值就是2的7次-1，也就是127。</span><br><span class="line"></span><br><span class="line">default</span><br><span class="line"></span><br><span class="line">zerofill。该属性参数表示数字不足的显示空间由0来填补。</span><br><span class="line">使用zerofill参数时，MySQL会自动加上unsinged属性。</span><br><span class="line">那么该整数类型只能表示无符号数，其显示宽度比默认宽度小1。</span><br><span class="line">默认没有零填充</span><br><span class="line"></span><br><span class="line">整数类型还有一个auto_increment属性，该属性可是使字段成为自增字段，具有该属性的字段，在插入新的记录时，该字段的值都会在前一条记录的基础上1。所以这个时候就不用人为的设值了呢，一般用来主键的设置上该属性。</span><br><span class="line">主键约束PRIMARY KEY(字段名)，自带索引，不能为null，不能重复</span><br><span class="line">为表加上一个列用来存储唯一标志即主键列建议用数字类型，</span><br><span class="line">检索速度快，加上auoto_increment自增长</span><br><span class="line">非空约束 not null</span><br><span class="line">唯一约束 unique 可以为NULL，如果不为NULL，必须唯一</span><br><span class="line">外键约束 foreign key （子表字段名）reference 父表名(字段名) 保持关联数据的逻辑性</span><br><span class="line">MySQL中显示的字段名是：外键属性名_id。</span><br><span class="line"></span><br><span class="line">数据类型参数是整数数据类型的名称</span><br><span class="line"></span><br><span class="line">定义后面Length字段，并不是指的数值范围，而是指数据库里面可见的最大数据的长度。</span><br><span class="line">int(5)就是指定int类型的显示字符的长度是5，始终是4个字节，可以存1234</span><br><span class="line">INT(11)表示长度为11的INT类型，对大多数应用是没有意义的,它不会限制值的合法范围,只会影响显示字符的个数，只是当定义了UNSIGNED ZEROFILL属性配合使用才有意义。</span><br><span class="line"></span><br><span class="line">`int(3) zerofill`自动填充0，可以存1234，012</span><br><span class="line">`int(5) zerofill`自动填充0，可以存01234，00012</span><br><span class="line">假定类型设定为INT(5)，属性为UNSIGNED ZEROFILL，如果用户插入的数据为12的话，那么数据库实际存储数据为00012。</span><br><span class="line"></span><br><span class="line">### 实数类型</span><br><span class="line">DECIMAL可存储比 BIGINT还大的整数，存储精确的小数</span><br><span class="line">FLOAT和 DOUBLE 是有取值范围的，支持使用标准的浮点进行近似计算</span><br><span class="line">FLOAT类型数据可以存储至多8位十进制数，并在内存中占4字节。</span><br><span class="line">DOUBLE类型数据可以存储至多18位十进制数，并在内存中占8字节。</span><br><span class="line"></span><br><span class="line">### 字符串类型</span><br><span class="line">VARCHAR、CHAR、TEXT、BLOB</span><br><span class="line">VARCHAR类型用于存储可变长字符串,它比定长类型更节省空间</span><br><span class="line">VARCHAR使用1或2个额外字节记录字符串的长度,</span><br><span class="line">列长度小于255字节,使用1个字节表示,否则用2个</span><br><span class="line">内部存储varchar是存入的实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，</span><br><span class="line">VARCHAR长度，如果存储内容超出指定长度，会被截断</span><br><span class="line">VARCHAR值保存时不进行填充。当值保存和检索时尾部的空格仍保留</span><br><span class="line"></span><br><span class="line">CHAR是定长的，根据定义的字符串长度分配足够的空间</span><br><span class="line">CHAR会根据需要采用空格进行填充以方便比较</span><br><span class="line">CHAR适合存储很短的字符串,或者所有值都接近同一个长度</span><br><span class="line">CHAR存储的内容超出设置的长度时，内容同样会被截断。</span><br><span class="line"></span><br><span class="line">当保存CHAR值时，在它们的右边填充空格以达到指定的长度。当检索到CHAR值时，尾部的空格被删除掉。</span><br><span class="line">在存储或检索过程中不进行大小写转换。</span><br><span class="line">CHAR存储定长数据很方便，</span><br><span class="line">CHAR字段上的索引效率级高，</span><br><span class="line">对于经常变更的数据,CHAR比 VARCHAR更好,CHAR不容易产生碎片</span><br><span class="line">对于非常短的列,CHAR比 VARCHAR在存储空间上更有效率</span><br><span class="line">只分配真正需要的空间,更长的列会消耗更多的内存</span><br><span class="line"></span><br><span class="line">定义一个CHAR[10]和VARCHAR[10],如果存进去的是‘ABCD’, char(10)不论你存储的数据是否达到了10个字节，都要占去10个字节的空间,不足的自动用空格填充，除了字符‘ABCD’外，后面跟六个空格，而varchar(50)中50的含义是最多存放50个字符，VARCHAR的长度变为4了，</span><br><span class="line">取数据的时候，CHAR类型的要用trim()去掉多余的空格，而VARCHAR类型是不需要的。</span><br><span class="line">char(16)表示固定长度字符串，长度为16、</span><br><span class="line">varchar(16)表示可变长度字符串，长度为16、</span><br><span class="line"></span><br><span class="line">text表示字符串类型，内部存储text是实际字符数+2个字节。能存储大字符串，最多存储65535字节数据</span><br><span class="line">尽量避免使用BLOB/TEXT类型，查询会使用临时表,导致严重的性能开销。</span><br><span class="line"></span><br><span class="line">请说明varchar和text的区别</span><br><span class="line">varchar可指定字符数，text不能指定，</span><br><span class="line">text类型不能有默认值。</span><br><span class="line">varchar可直接创建索引，text创建索引要指定前多少个字符。</span><br><span class="line">varchar查询速度快于text，在都创建索引的情况下，text的索引几乎不起作用。</span><br><span class="line"></span><br><span class="line">### 枚举类型（ENUM），</span><br><span class="line">把不重复的数据存储为一个预定义的集合。</span><br><span class="line">有时可以使用ENUM代替常用的字符串类型。</span><br><span class="line">ENUM存储非常紧凑，会把列表值压缩到一个或两个字节。</span><br><span class="line">ENUM在内部存储时，其实存的是整数。</span><br><span class="line">尽量避免使用数字作为ENUM枚举的常量，因为容易混乱。</span><br><span class="line">排序是按照内部存储的整数</span><br><span class="line">枚举表会使表大小大大减小</span><br><span class="line"></span><br><span class="line">### 日期和时间类型</span><br><span class="line">尽量使用timestamp，空间效率高于datetime，</span><br><span class="line">用整数保存时间戳通常不方便处理。</span><br><span class="line">如果需要存储微妙，可以使用bigint存储。</span><br><span class="line"></span><br><span class="line">```SELECT CURRENT_DATE();```获取当前日期</span><br><span class="line"></span><br><span class="line">### InnoDB表引擎，默认事务型引擎</span><br><span class="line">数据存储在共享表空间,可以通过配置分开，也就是多个表和索引都存储在一个表空间中，可以通过配置文件改变此配置。</span><br><span class="line">对主键查询的性能高于其他类型的存储引擎</span><br><span class="line">内部做了很多优化,从磁盘读取数据时自动在内存构建hash索引，插入数据时自动构建插入缓冲区</span><br><span class="line">通过一些机制和工具支持真正的热备份</span><br><span class="line">- 支持崩溃后的安全恢复、回滚，适合对数据安全性较高的业务场景</span><br><span class="line">- 支持事务 提供了对数据库ACID事务的支持；</span><br><span class="line">- 支持行级锁和表锁，提供了数据库的并发操作能力，主键有效才能确定扫描范围，行级锁才有效；主键无效不能确定扫描范围</span><br><span class="line">- 支持外键约束，在范式设计的原则下，保证数据的完整性</span><br><span class="line">- 不支持全文索引</span><br><span class="line">- 插入缓冲（insert buffer)</span><br><span class="line">- 二次写(double write)</span><br><span class="line">- 自适应哈希索引(ahi)</span><br><span class="line">- 预读(read ahead)</span><br><span class="line">- 没有保存表的行数</span><br><span class="line"></span><br><span class="line">### MyISAM表引擎</span><br><span class="line">- 表数据的存储分为三个文件</span><br><span class="line">  - ```myisam_table.MYD```存储数据文件</span><br><span class="line">  - ```myisam_table.MYI```存储索引文件，如果索引越多跟的当数据变化时要更新的索引文件也就一个</span><br><span class="line">  - ```myisam_table.frm```存储表结构、表定义</span><br><span class="line">其中```myisam_table```表名称 </span><br><span class="line">- 在进行数据的备份、迁移、恢复等操作时,非常的容易。只要对文件进行操作就可以</span><br><span class="line">- 拥有全文索引、压缩、空间函数</span><br><span class="line">- 不支持外键</span><br><span class="line">- 不支持事务安全，但每次读的操作是具有原子性的，所以不必担心脏读等情况</span><br><span class="line">- 只支持表锁，没有行级锁</span><br><span class="line">- 不支持崩溃后的安全恢复</span><br><span class="line">- 存储了表的行数</span><br><span class="line">- 设计简单，某些场景下性能很好，例如获取整个表有多少条数据，性能很高。</span><br><span class="line">- 全文索引不是很常用，不如使用外部的ElasticSearch或Lucene。</span><br><span class="line"></span><br><span class="line">### 其他表引擎</span><br><span class="line">Archive、Blackhole、CSV、Memory</span><br><span class="line"></span><br><span class="line">### 锁机制</span><br><span class="line">表锁是日常开发当中常见的问题,因此也是面试当中最常见的考察点,</span><br><span class="line">当多个查询同一时刻进行数据修改时,就会产生并发控制的问题</span><br><span class="line"></span><br><span class="line">#### 共享锁和排他锁，其实就是读锁和写锁</span><br><span class="line">读锁：共享的，不堵塞，多个用户可以同时读一个资源，互不干扰。</span><br><span class="line">写锁：排他的，一个写锁会阻塞其他的读锁和写锁，这样可以只允许一个用户进行写入，防止其他用户读取正在写入的资源。</span><br><span class="line"></span><br><span class="line">#### 锁粒度</span><br><span class="line">行锁，最大程度的支持并发处理，但是也带来了最大的锁开销</span><br><span class="line">表锁，系统性能开销最小，会锁定整张表，MyIsam使用表锁。</span><br><span class="line"></span><br><span class="line">### 存储过程</span><br><span class="line">为以后的使用而保存的一条或多条 MySQL语句的集合</span><br><span class="line">存储过程就是有业务逻辑和流程的集合</span><br><span class="line">可以在存储过程中创建表，更新数据，删除等等</span><br><span class="line"></span><br><span class="line">使用场景：</span><br><span class="line">通过把处理封装在容易使用的单元中，简化复杂的操作</span><br><span class="line">保证数据的一致性</span><br><span class="line">简化对变动的管理</span><br><span class="line"></span><br><span class="line">### 触发器</span><br><span class="line">是指一段代码，当触发某个事件时，自动执行这些代码。</span><br><span class="line">提供给程序员和数据分析员来保证数据完整性的一种方法，</span><br><span class="line">它是与表事件相关的特殊的存储过程</span><br><span class="line">使用场景</span><br><span class="line">可通过数据库中的相关表实现级联更改</span><br><span class="line">实时监控某张表中的某个字段的更改而需要做出相应的处理</span><br><span class="line">某些业务编号的生成等</span><br><span class="line">滥用会造成数据库及应用程序的维护困难</span><br><span class="line"></span><br><span class="line">在MySQL数据库中有如下六种</span><br><span class="line">1、Before Insert</span><br><span class="line">2、After Insert</span><br><span class="line">3、Before Update</span><br><span class="line">4、After Update</span><br><span class="line">5、Before Delete</span><br><span class="line">6、After Delete</span><br><span class="line"></span><br><span class="line">十进制的浮点数转换从二进制的浮点数会丢失数据</span><br><span class="line"></span><br><span class="line">IP 该如何保存?</span><br><span class="line">最简单的办法是使用字符串（varchar）来保存，如果从效率考虑的话，</span><br><span class="line">可以将ip 保存为整型（unsigned int），</span><br><span class="line">使用 mysql 提供的函数将 ip 转换为整型，然后存储即可。</span><br><span class="line">MySQL 函数：inet_aton()和 inet_ntoa</span><br><span class="line"></span><br><span class="line">为什么要进行数据库优化</span><br><span class="line">1、避免网站出现访问错误</span><br><span class="line">1）数据库链接timout产生页面5xx错误</span><br><span class="line">2）慢查询造成的页面无法加载</span><br><span class="line">3）阻塞造成数据无法提交</span><br><span class="line">2、增加数据库的稳定性</span><br><span class="line">1）很多数据库问题都是由于低效的查询引起的</span><br><span class="line">2）随着时间的推移，系统变得极其臃肿，数据库中的数据越来越大，数据检索越来越困难，整个系统带来的资源消耗就越来越大，系统越发不稳定</span><br><span class="line">3、优化用户体验</span><br><span class="line">1）流畅的页面访问速度</span><br><span class="line">2）良好的网站功能体验</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql数据库优化层面</span><br><span class="line"></span><br><span class="line">1、商业需求层面</span><br><span class="line"></span><br><span class="line">1）不合理需求造成资源投入产出比过低</span><br><span class="line"></span><br><span class="line">2）无用的功能堆积使得系统过度繁杂，影响整体新能</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">2、系统架构层面</span><br><span class="line"></span><br><span class="line">1）数据库中存放的数据都是适合在数据库中存放么？</span><br><span class="line"></span><br><span class="line">#例如多媒体文件,寻找第三方存储服务器，例如fastdfs，oss</span><br><span class="line"></span><br><span class="line">#流水队列数据，不断的insert update会不停的膨胀，日志不停的翻倍堆积，解决方式：消息队列削峰</span><br><span class="line"></span><br><span class="line">#超大文本数据，性能低下和空间占用问题</span><br><span class="line"></span><br><span class="line">2）合理利用应用层的Cache机制</span><br><span class="line"></span><br><span class="line">#活跃的变化较少的数据使用缓存来缓解数据库的压力</span><br><span class="line"></span><br><span class="line">3）数据层实现尽量精简</span><br><span class="line"></span><br><span class="line">#合理的利用索引和函数机制等，解决性能提升</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">3、SQL及索引优化层面</span><br><span class="line"></span><br><span class="line">1）根据需求写出良好的SQL，并创建有效的索引，实现某一种需求可以有多重写法，我们就要选择一种最高效的写法，SQL优化</span><br><span class="line"></span><br><span class="line">2）SQL优化的目的之一就是减少中间结果集，降低物理IO，例如多表关联查询</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">4、数据库表结构优化</span><br><span class="line"></span><br><span class="line">1）根据数据库的范式，设计表结构，表结构设计的好坏直接关系到SQL语句的复杂程度</span><br><span class="line"></span><br><span class="line">2）适当的将表进行拆分，原本需要做join的查询，只需要一张单表查询就可以</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">5、系统配置优化</span><br><span class="line"></span><br><span class="line">1）大多数运行在Linux机器上，如tcp链接数的限制、打开文件数的限制，安全性的限制，因为我们要对这些配置进行相应的优化</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">6、硬件配置优化</span><br><span class="line"></span><br><span class="line">1）数据库主机的IO性能是最需要优先考虑的因素</span><br><span class="line"></span><br><span class="line">2）数据库主机和普通的应用程序服务器相比，资源要相对集中很多，单台主机上所需要进行的计算量自然也比较多，所以数据库主机的CPU处理能力也是一个重要因素</span><br><span class="line"></span><br><span class="line">3）数据库主机的网络设备（网卡）的性能也可能成为系统的瓶颈</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">慢查询</span><br><span class="line"></span><br><span class="line">1、检查慢查询开关</span><br><span class="line">show variables like '%slow_query_log%';</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、设置检查慢开关</span><br><span class="line"></span><br><span class="line">set global slow_query_log=on;</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">3、慢查日志判断标准</span><br><span class="line"></span><br><span class="line">show variables like 'long_query_time';</span><br><span class="line"></span><br><span class="line">&nbsp;</span><br><span class="line"></span><br><span class="line">4、设置慢查日志时间，以秒为单位</span><br><span class="line"></span><br><span class="line">set global long_query_time=1;</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「power_kai」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https://blog.csdn.net/popping_kai/article/details/109657749</span><br><span class="line"></span><br><span class="line">解题方法</span><br><span class="line">对于此类考题，先说明如何定位低效SQL语句，然后根据SQL语句可能低效的原因做排查，先从索引着手，如果索引没有问题，考虑以上几个方面，数据访问的问题，长难查询句的问题还是一些特定类型优化的问题，逐一回答。</span><br><span class="line"></span><br><span class="line">请简述项目中优化SQL语句执行效率的方法，从哪些方面，SQL语句性能如何分析？</span><br><span class="line">考点分析：SQL语句查询速度慢的方法</span><br><span class="line">延伸考点：</span><br><span class="line">优化查询过程中的数据访问</span><br><span class="line">优化长难的查询语句</span><br><span class="line">优化特定类型的查询语句</span><br><span class="line"></span><br><span class="line">排查查询速度慢的原因</span><br><span class="line">1. 开启并且查询慢查询日志，慢查询通常是缺少索引，索引不合理或者业务代码实现导致</span><br><span class="line">开启慢查询功能</span><br><span class="line">slow_query_log_file 慢查询日志文件路径</span><br><span class="line">slow_query_log 用于指定是否打开慢查询日志</span><br><span class="line">long_query_time 超过多少秒的查询就写入日志</span><br><span class="line">2. 调整数据修改索引；业务代码层限制不合理访问，如：因为数据类型不匹配导致全表扫描；一次获取太多数据等</span><br><span class="line"></span><br><span class="line">查找分析查询速度慢的原因</span><br><span class="line">1. 记录慢查询日志。分析查询日志，不要直接打开慢查询日志进行分析，这样比较浪费时间和精力，可以使用pt-query-digest工具进行分析</span><br><span class="line">如何排查慢查询？ </span><br><span class="line">2. 使用show profile，通过临时表的主键ID去查一条sql语句是在什么地方发生慢的操作。</span><br><span class="line">```sql</span><br><span class="line">set profiling=1; # 开启，服务器上所有执行语句会记录执行时间，存到临时表中</span><br><span class="line">mysql&gt; show profiles; # 查看临时表</span><br><span class="line">+----------+------------+-------------------+</span><br><span class="line">| Query_ID | Duration   | Query             |</span><br><span class="line">+----------+------------+-------------------+</span><br><span class="line">|        1 | 0.00315025 | SELECT DATABASE() |</span><br><span class="line">|        2 | 0.04271325 | select * from a   |</span><br><span class="line">+----------+------------+-------------------+</span><br><span class="line">2 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></tbody></table></figure>

<p>show profile for query 临时表ID，通过临时表的主键ID去查一条sql语句是在什么地方发生慢的操作。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profile for query 2;</span><br><span class="line">+<span class="comment">----------------------+----------+</span></span><br><span class="line">| Status               | Duration |</span><br><span class="line">+<span class="comment">----------------------+----------+</span></span><br><span class="line">| starting             | 0.001101 |</span><br><span class="line">| checking permissions | 0.000016 |</span><br><span class="line">| Opening tables       | 0.037732 |</span><br><span class="line">| init                 | 0.000040 |</span><br><span class="line">| System <span class="keyword">lock</span>          | <span class="number">0.000021</span> |</span><br><span class="line">| optimizing           | <span class="number">0.000006</span> |</span><br><span class="line">| <span class="keyword">statistics</span>           | <span class="number">0.002043</span> |</span><br><span class="line">| preparing            | <span class="number">0.000025</span> |</span><br><span class="line">| executing            | <span class="number">0.000003</span> |</span><br><span class="line">| Sending <span class="keyword">data</span>         | <span class="number">0.001608</span> |</span><br><span class="line">| <span class="keyword">end</span>                  | <span class="number">0.000006</span> |</span><br><span class="line">| <span class="keyword">query</span> <span class="keyword">end</span>            | <span class="number">0.000007</span> |</span><br><span class="line">| closing <span class="keyword">tables</span>       | <span class="number">0.000013</span> |</span><br><span class="line">| freeing items        | <span class="number">0.000071</span> |</span><br><span class="line">| cleaning up          | <span class="number">0.000022</span> |</span><br><span class="line">+<span class="comment">----------------------+----------+</span></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> <span class="keyword">warning</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li><p>使用show status<br>show status会返回一些计数器，<br>show global status会查看所有服务器级别的所有计数<br>有时根据这些计数，可以推测出哪些操作代价较高或者消耗时间多</p>
</li>
<li><p>show processlist</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show processlist;</span><br><span class="line">+<span class="comment">----+------+-----------------+------+---------+------+----------+------------------+</span></span><br><span class="line">| Id | User | Host            | db   | Command | Time | State    | Info             |</span><br><span class="line">+<span class="comment">----+------+-----------------+------+---------+------+----------+------------------+</span></span><br><span class="line">|  3 | root | localhost:14778 | test | Query   |    0 | starting | <span class="keyword">show</span> <span class="keyword">processlist</span> |</span><br><span class="line">+<span class="comment">----+------+-----------------+------+---------+------+----------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></tbody></table></figure>
<p>观察是否有大量线程处于不正常的状态或特征</p>
</li>
<li><p>使用<code>explain sql语句</code>执行计划 分析查询性能 单条SQL语句、排查索引问题，注意格式化 \G 输出后不需要加分号。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> ...;</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>说明：关于MySQL更多的知识尤其是性能调优和运维方面的内容，推荐大家阅读网易出品的《深入浅出MySQL（第2版）》，网易出品必属精品。</p>
</blockquote>
</li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from a;</span><br><span class="line">+<span class="comment">----+-------------+-------+------------+------+---------------+------+---------+</span></span><br><span class="line">| id | select_type | table | partitions | type | possible_keys | key  | key_len |</span><br><span class="line">+<span class="comment">----+-------------+-------+------------+------+---------------+------+---------+</span></span><br><span class="line">|  1 | SIMPLE      | a     | NULL       | ALL  | NULL          | NULL | NULL    |</span><br><span class="line">+<span class="comment">----+-------------+-------+------------+------+---------------+------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span>, <span class="number">1</span> <span class="keyword">warning</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from a\G  -- 注意:格式化输出内容，\G相当于;</span><br><span class="line">*************************** 1. row **********</span><br><span class="line">           id: 1</span><br><span class="line">  select_type: SIMPLE</span><br><span class="line">        table: a</span><br><span class="line">   partitions: NULL</span><br><span class="line">         type: ALL</span><br><span class="line">possible_keys: NULL</span><br><span class="line">          key: NULL</span><br><span class="line">      key_len: NULL</span><br><span class="line">          ref: NULL</span><br><span class="line">         rows: 2</span><br><span class="line">     filtered: 100.00</span><br><span class="line">        Extra: NULL</span><br><span class="line">1 row in <span class="keyword">set</span>, <span class="number">1</span> <span class="keyword">warning</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></tbody></table></figure>

<p><code>explain</code>结果解析：</p>
<h4 id="id列"><a href="#id列" class="headerlink" title="id列"></a>id列</h4><p>数字越大越先执行，如果数字一样大，那么就往从上往下依次执行，id列为null就标识这个是一个结果集，不需要使用它来进行查询</p>
<h4 id="select-type列"><a href="#select-type列" class="headerlink" title="select_type列"></a>select_type列</h4><p>表示select操作的类型，常见的值有SIMPLE（简单查询，没有使用子查询或者表连接查询）、PRIMARY（主查询，外层的查询）、UNION（并集操作中的第二个或者后面的查询）、SUBQUERY（子查询中的第一个SELECT）等。<br>simple:标识不需要union操作或者不包含子查询的简单select查询，有链接查询时，外层的查询为simple，且只有一个<br>primary:一个需要union操作或者含有子查询的select，位于最外层的查询，select_type即为primary，且只有一个<br>union:union连接的两个select查询，第一个查询是dervied派生表，除了第一个表外，第二个以后的表select_type都union<br>union_result:包含union的结果集，在union和union all语句中，因为它不需要参与查询，所以id字段为null<br>dependent_union:与union一样，出现在union或者union all语句中，但是这个查询要受到外部查询的影响 #explain select * from film_category where film_id in (select film_id from film&nbsp; union all select film_id from film_actor)\G</p>
<p>subquery:除了from子句中包含的子查询外，其他地方出现的子查询都可能是subquery</p>
<p>dependent_subquery:与dependent union类似，标识subquery的查询要收到外部表查询的影响</p>
<p>derived:from字段中出现的子查询，也叫做派生表，其他数据库中可能叫做内联视图或者嵌套select</p>
<p>materialization:物化通过将子查询结果作为一个临时表来加快查询速度，正常来说是常驻内存，下次查询会再次引用临时表</p>
<h4 id="table列-输出结果的表。"><a href="#table列-输出结果的表。" class="headerlink" title="table列 输出结果的表。"></a>table列 输出结果的表。</h4><p>显示的查询表明，如果查询使用了别名，那么这里显示的是别名，如果不涉及对数据表的操作，<br>那么这里显示null，如果显示为监控好括起来<derived n="">就表示这个是临时表，后边的N就是<br>执行计划中的id，标识结果来自于这个查询产生，如果是尖括号括起来的&lt;union M,N&gt;，与<derived n="">类似，也是一个临时表，标识这个结果来自于union查询的id为M,N的结果集</derived></derived></p>
<h4 id="type列：MySQL在表中找到所需行的方式，也称为访问类型，常见的值有："><a href="#type列：MySQL在表中找到所需行的方式，也称为访问类型，常见的值有：" class="headerlink" title="type列：MySQL在表中找到所需行的方式，也称为访问类型，常见的值有："></a>type列：MySQL在表中找到所需行的方式，也称为访问类型，常见的值有：</h4><ul>
<li>ALL：全表扫描数据文件（遍历全表找到匹配的行），然后再在server层进行过滤返回符合要求的记录</li>
<li>index：索引全表扫描，（遍历整个索引），把索引从头到尾扫一遍，常见于使用索引列就可以处理不需要读取数据文件的查询，可以使用索引排序或者分组查询</li>
<li>range：索引范围扫描，常见于使用&gt;,&lt;is null,between,in,like等运算符的查询中</li>
<li>ref：非唯一索引扫描或唯一索引的前缀扫描，不像eq_ref那样要求链接顺序，也没有主键和唯一索引的要求，只要使用相等条件检索时就可能出现，常见与服务索引的等值查找或者多列主键、唯一索引中，使用第一个列之外的列作为等值查找也会出现，总之，返回数据不唯一的等值查找就可能出现</li>
<li>eq_ref：唯一索引扫描 出现在要链接多个表的查询计划中，驱动表循环获取数据，这行数据是第二个表的主键或者唯一索引，作为条件查询只返回一条数据，且必须为not null,唯一索引和主键是多列时，所有的列都用作比较时才会出现eq_ref</li>
<li>NULL：不用访问表或者索引</li>
<li>const / system：表中最多有一行匹配<br>system:表中只有一行数据或者是空表，且只能用于myisam和memory表，如果是Innodb引擎，type列在这个情况通常都是all或者index<br>const:使用唯一索引或者主键，返回记录一定是1行记录的等值where条件时，通常type是const，其他数据库也叫做唯一索引扫描</li>
</ul>
<p>fulltext:全文索引检索，全文索引的优先级很高，若全文索引和普通索引同时存在时，mysql不管代价，优先选择使用全文索引<br>ref_on_null:与ref方法类似，只是增加了null值的比较，实际用的不多<br>unique_subquery:用于where中的in形式子查询，子查询返回不重复唯一值<br>index_subquery:用于in形式子查询使用到了辅助索引或者in常数列表，子查询可能返回重复值，可以使用索引将子查询去重<br>index_merge:标识查询使用了两个以上的索引，最后取交际或者并集，常见and，or的条件使用了不同的索引，官方排序这个ref_or_null之后，但是实际上由于要取多个索引，性能可能大部分时间不如range</p>
<p>type列总结<br>依次性能从好到差:system，const，eq_ref,ref,fulltext,ref_or_null,unique_subquery,index,subquery,range,index_merge,index,ALL,除了all之外，其他的type都已使用到索引，除了index_merge之外，取它的type只可以用到一个索引，好的sql查询至少要达到range级别，最好要达到ref级别</p>
<p>&nbsp;</p>
<h4 id="possible-key列：查询时可能用到的索引。"><a href="#possible-key列：查询时可能用到的索引。" class="headerlink" title="possible_key列：查询时可能用到的索引。"></a>possible_key列：查询时可能用到的索引。</h4><p>查询可能使用到的索引</p>
<h4 id="key：实际使用的索引。"><a href="#key：实际使用的索引。" class="headerlink" title="key：实际使用的索引。"></a>key：实际使用的索引。</h4><p>查询真正使用到的索引</p>
<h4 id="key-len列：使用到索引字段的长度。"><a href="#key-len列：使用到索引字段的长度。" class="headerlink" title="key_len列：使用到索引字段的长度。"></a>key_len列：使用到索引字段的长度。</h4><p>用于处理查询的索引长度，如果是单列索引，那就是整个索引长度，如果是多列索引，那么查询不一定都能使用到所有的列，具体使用到了多少个列索引，这里就会计算机进去，没有使用的列不会计算进去，留意下这个列的值，算一下你的多列索引总长度就知道有没有使用到所有列了，另外，key_len自己算where条件用到的索引长度，而排序和分组就算用到了索引，也不会计算到key_len中</p>
<h4 id="ref列"><a href="#ref列" class="headerlink" title="ref列"></a>ref列</h4><p>如果是使用的常数等值查询，这里会显示const，如果是连接查询，被驱动表的执行计划这里会显示驱动表的关联字段，如果是条件使用了表达式或者函数，或者条件列发生了内部隐式转换，这里可能显示为func</p>
<p>&nbsp;</p>
<h4 id="row列：扫描行的数量。"><a href="#row列：扫描行的数量。" class="headerlink" title="row列：扫描行的数量。"></a>row列：扫描行的数量。</h4><p>这里是执行计划中估算的扫描行数，不是精确数值</p>
<p>&nbsp;</p>
<h4 id="extra列：额外的信息（执行情况的说明或描述）"><a href="#extra列：额外的信息（执行情况的说明或描述）" class="headerlink" title="extra列：额外的信息（执行情况的说明或描述）"></a>extra列：额外的信息（执行情况的说明或描述）</h4><p>no table used:不带from字句的查询或者From dual查询</p>
<p>NULL：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引</p>
<p>Using where Using index:查询的列被索引覆盖，并且where筛选条件是索引列，但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据</p>
<p>Using index condition:与Using where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围</p>
<p>Using temporary:标识使用了临时表存储中间结果。临时表可以是内存临时表和磁盘临时表，执行计划中看不出来，需要查看status变量，used_tmp_table,used_tmp_disk_table才能看出来</p>
<p>Using filesort:mysql会对结果使用一个外部索引排序，而不是按索引次序从表里读取行，此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索信息，这种情况下一般也是要考虑使用索引优化</p>
<p>Using intersect:表示使用and的各个索引的条件，该信息表示从处理结果获得交集</p>
<p>Using union:表示使用or连接各个使用索引的条件时候，该信息表示从处理结果获取并集</p>
<p>Using sort_union和Using sort_intersection:用and和or查询信息量大时，先查询主键，然后进行排序合并后返回结果集</p>
<p>Fistnatcg(tb_name):5.6.X开始引入的优化子查询的新特性之一，常见于where字句含有in()类型的子查询，如果表内的数据量比较大，就可能出现这个</p>
<p>Loosescan(m…n):5.6.x之后引入的优化子查询的新特性之一，在in()类型的子查询中，子查询返回的可能有重复记录时，就可能出现这个</p>
<p>&nbsp;</p>
<h4 id="filtered列"><a href="#filtered列" class="headerlink" title="filtered列"></a>filtered列</h4><p>使用explain extended时会出现这个列，5.7之后的版本默认就有了这个字段，不需要使用explain extended了，这个字段表示存储引擎返回的数据在server层过滤后，剩下多少满足条件的查询记录数据量的比例，注意是百分比，不是具体记录数</p>
<h4 id="join-buffer-size"><a href="#join-buffer-size" class="headerlink" title="join_buffer_size"></a>join_buffer_size</h4><p>mysql连接缓冲区的大小，这个是在关联时候必不可少的，主要是控制关联时候加载驱动表的数据进入到缓冲区大小，如果缓冲区开辟的越大，说明存储的表偏移量数据越多，查询效率越快</p>
<h4 id="缓冲区处理零时临时处理数据的大小"><a href="#缓冲区处理零时临时处理数据的大小" class="headerlink" title="缓冲区处理零时临时处理数据的大小"></a>缓冲区处理零时临时处理数据的大小</h4><p>show rariables like ‘%sort_buffer_size%’;</p>
<h4 id="二次读取缓冲区的大小"><a href="#二次读取缓冲区的大小" class="headerlink" title="二次读取缓冲区的大小"></a>二次读取缓冲区的大小</h4><p>show rariables like ‘%read_rnd_buffer_size%’;</p>
<p>优化查询过程中的数据访问<br>访问数据太多导致查询性能下降<br>确定应用程序是否在检索大量超过需要的数据，可能是太多行或列<br>确认MySQL服务器是否在分析大量不必要的数据行<br>避免犯如下SQL语句错误<br>查询不需要的数据。解决办法：使用limit解决<br>多表关联返回全部列。解决办法：指定列名<br>总是返回全部列。解决办法：避免使用 SELECT *<br>重复查询相同的数据。解决办法：可以缓存数据，下次直接读取缓存<br>是否在扫描额外的记录。解决办法：<br>使用explain进行分析，如果发现查询需要扫描大量的数据，但只返回少数的行，可以通过如下技巧去优化：<br>使用索引覆盖扫描，把所有的列都放到索引中，这样存储引擎不需要回表获取对应行就可以返回结果。<br>改变数据库和表的结构，修改数据表范式<br>重写SQL语句，让优化器可以以更优的方式执行查询。</p>
<p>优化长难的查询语句<br>一个复杂查询还是多个简单查询<br>MySQL内部每秒能扫描内存中上百万行数据，相比之下，响应数据给客户端就要慢得多<br>使用尽可能小的查询是好的，但是有时将一个大的查询分解为多个小的查询是很有必要的。<br>切分查询<br>将一个大的查询分为多个小的相同的查询<br>一次性删除1000万的数据要比一次删除1万，暂停一会的方案更加损耗服务器开销。</p>
<p>分解关联查询，<br>将一条关联语句分解成多条SQL来执行<br>让缓存的效率更高。<br>执行单个查询可以减少锁的竞争。<br>在应用层做关联更容易对数据库进行拆分。<br>查询效率会有大幅提升。<br>较少冗余记录的查询。</p>
<p>优化特定类型的查询语句<br>count(列名) 返回指定列的值的数目，包含非空值的记录数<br>会忽略列值为空（这里的空不是只空字符串或者0，而是表示null）的计数，<br>&nbsp;即某个字段值为NULL时，不统计。<br>count(字段) 会统计该字段在表中出现的次数，忽略字段为null 的情况。即&nbsp;不统计字段为null 的记录。&nbsp;&nbsp;<br>count(*)会忽略所有的列，直接统计所有列数，相当于行数，不会忽略列值为NULL&nbsp;&nbsp;比count(列名)效率高</p>
<p>返回表中包含空值的记录数<br>count(1) 会统计表中的所有的记录数，包含字段为null 的记录<br>包括了忽略所有列，用1代表代码行，<br>COUNT(DISTINCT column_name) 函数返回指定列的不同值的数目、<br>不重复的记录条数</p>
<p>GROUP BY product_type<br>HAVING count(*) &gt; 1 #分组内的化为一行的数量</p>
<p>MyISAM中，没有任何where条件的count(<em>)非常快。<br>当有where条件时，MyISAM的count统计不一定比其它引擎快。<br>可以使用explain查询近似值，用近似值替代count(</em>)<br>增加汇总表<br>使用缓存</p>
<p>优化GROUP BY和DISTINCT<br>这两种查询据可以使用索引来优化，是最有效的优化方法<br>关联查询中，使用标识列分组的效率更高<br>如果不需要ORDER BY，进行GROUP BY时加ORDER BY NULL，MySQL不会再进行文件排序。<br>WITH ROLLUP超级聚合，可以挪到应用程序处理</p>
<p>优化LIMIT分页<br>LIMIT偏移量大的时候，查询效率较低<br>可以记录上次查询的最大ID，下次查询时直接根据该ID来查询</p>
<p>常规sql优化思路（众多解决方案之一）<br>1、查看slow-log，分析slow-log，分析出查询慢的语句。<br>2、按照一定优先级，进行一个一个的排查所有慢语句。<br>3、分析top sql，进行explain调试，查看语句执行时间。<br>4、调整索引或语句本身。</p>
<p>SQL语句优化的一些方法？<br>1.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。<br>2.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span> <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></tbody></table></figure>
<p>可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>=</span><br></pre></td></tr></tbody></table></figure>
<p>3.应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则引擎将放弃使用索引而进行全表扫描。<br>4.应尽量避免在 where 子句中使用or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>=<span class="number">10</span> <span class="keyword">or</span> <span class="keyword">num</span>=<span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>
<p>可以这样查询：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> </span><br><span class="line"><span class="keyword">from</span> t </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">num</span>=<span class="number">10</span> </span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>=<span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>

<p>5.in 和 not in 也要慎用，否则会导致全表扫描，如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span> <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) </span><br></pre></td></tr></tbody></table></figure>
<p>对于连续的数值，能用 between 就不要用 in 了：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span> <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>

<p>6.下面的查询也将导致全表扫描：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%李%'</span></span><br></pre></td></tr></tbody></table></figure>
<p>若要提高效率，可以考虑全文检索。</p>
<ol start="7">
<li>如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>=@<span class="keyword">num</span></span><br></pre></td></tr></tbody></table></figure>
可以改为强制查询使用索引：<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">with</span>(<span class="keyword">index</span>(索引名)) <span class="keyword">where</span> <span class="keyword">num</span>=@<span class="keyword">num</span></span><br></pre></td></tr></tbody></table></figure>

</li>
</ol>
<p>8.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>/<span class="number">2</span>=<span class="number">100</span></span><br></pre></td></tr></tbody></table></figure>
<p>应改为:</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">num</span>=<span class="number">100</span>*<span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>

<p>9.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">substring</span>(<span class="keyword">name</span>,<span class="number">1</span>,<span class="number">3</span>)=<span class="string">'abc'</span></span><br></pre></td></tr></tbody></table></figure>
<p>name以abc开头的id应改为:</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'abc%'</span></span><br></pre></td></tr></tbody></table></figure>

<p>10.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。</p>
<p>分区表的工作原理<br>对用户而言，分区表是一个独立的逻辑表，但是底层MySQL将其分成了多个物理子表，这对用户来说是透明的，每一个分区表都会使用一个独立的表文件。</p>
<p>如图所示：MySQL将表分成多个物理字表，但PHP客户端并无感知，仍然认为操作的是一个表。</p>
<p>创建表时使用partition by子句定义每个分区存放的数据，执行查询时，优化器会根据分区定义过滤那些没有需要的数据的分区，这样只需要查询数据所在分区即可。</p>
<p>这样子表相对于未分区的表来说占用空间小，数据量更小，因此操作速度更快。</p>
<p>分区的主要目的是将数据按照一个较粗的粒度分在不同的表中，这样可以将相关的数据存放在一起，而且如果想一次性的删除整个分区的数据也和方便。</p>
<p>适用场景<br>1、表非常大，无法全部存在内存，或者只在表的最后有热点数据，其他都是历史数据。<br>2、分区表的数据更易维护，可以对独立的分区进行独立的操作。<br>3、分区表的数据可以分布在不同的机器上，从而高效适用资源。<br>4、可以使用分区表来避免某些特殊的瓶颈<br>5、可以备份和恢复独立的分区<br>限制<br>1、一个表最多只能有1024个分区<br>2、5.1版本中，分区表表达式必须是整数，5.5可以使用列分区<br>3、分区表字段如果有主键和唯一索引列，那么主键列和唯一索引列都必须包含进来<br>4、分区表中无法使用外键约束<br>5、需要对现有表的结构进行修改<br>6、所有分区都必须使用相同的存储引擎<br>7、分区函数中可以使用的函数和表达式会有一些限制<br>8、某些存储引擎不支持分区<br>9、对于MyISAM的分区表，不能使用load index into cache<br>10、对于MyISAM表，使用分区表时需要打开更多的文件描述符</p>
<p>分库分表的工作原理<br>通过一些HASH算法或者工具实现将一张数据表垂直或者水平进行物理切分<br>适用场景<br>1、单表记录条数达到百万或千万级别时<br>2、解决表锁的问题<br>分表方式<br>水平分割：表很大，分割后可以降低在查询时需要读的数据和索引的页数，同时也降低了索引的层数，提高查询次数</p>
<p>适用场景<br>1、表中的数据本身就有独立性，例如表中分表记录各个地区的数据或者不同时期的数据，特别是有些数据常用，有些不常用。<br>2、需要把数据存放在多个介质上。</p>
<p>水平切分的缺点<br>1、给应用增加复杂度，通常查询时需要多个表名，查询所有数据都需UNION操作<br>2、在许多数据库应用中，这种复杂度会超过它带来的优点，查询时会增加读一个索引层的磁盘次数</p>
<p>垂直分表<br>把主键和一些列放在一个表，然后把主键和另外的列放在另一个表中<br>适用场景<br>1、如果一个表中某些列常用，另外一些列不常用<br>2、可以使数据行变小，一个数据页能存储更多数据，查询时减少I/O次数<br>垂直分表缺点<br>管理冗余列，查询所有数据需要join操作</p>
<p>分表缺点<br>有些分表的策略基于应用层的逻辑算法，一旦逻辑算法改变，整个分表逻辑都会改变，扩展性较差<br>对于应用层来说，逻辑算法增加开发成本</p>
<p>MySQL的复制原理及负载均衡<br>MySQL主从复制工作原理<br>在主库上把数据更高记录到二进制日志<br>从库将主库的日志复制到自己的中继日志<br>从库读取中继日志的事件，将其重放到从库数据中</p>
<p>MySQL主从复制解决的问题<br>数据分布：随意开始或停止复制，并在不同地理位置分布数据备份<br>负载均衡：降低单个服务器的压力<br>高可用和故障切换：帮助应用程序避免单点失败<br>升级测试：可以用更高版本的MySQL作为从库</p>
<p>解题方法<br>充分掌握分区分表的工作原理和适用场景，在面试中，此类题通常比较灵活，会给一些现有公司遇到问题的场景，大家可以根据分区分表，MySQL复制、负载均衡的适用场景来根据情况进行回答</p>
<p>问:28：设定网站用户数量在千万级，但是活跃用户数量只有1%，如何通过优化数据库提高活跃用户访问速度？<br>可以使用MySQL的分区，把活跃用户分在一个区，不活跃用户分在另外一个区，本身活跃用户区数据量比较少，因此可以提高活跃用户访问速度。<br>还可以水平分表，把活跃用户分在一张表，不活跃用户分在另一张表，可以提高活跃用户访问速度。</p>
<p>常见的web安全问题,原理和防范措施。安全意识<br>◆SQL注入<br>◆XSS(跨站脚本攻击, Cross-Site Scripting)<br>◆CSRF(跨站请求伪造, Cross- site request forgery)</p>
<p>web 安全一大原则：永远不要相信用户的任何输入<br>对输入参数做好检查(类型和范围)；过滤和转义特殊字符<br>不要直接拼接sql，使用ORM 有安全性考虑，通过传参的形式不会有 sql 注入问题，<br>查询错误信息不要返回给用户，将错误记录到日志，<br>不要明文存储敏感信息。<br>1、定期做数据备份<br>2、不给查询用户root权限，合理分配权限<br>3、关闭远程访问数据库权限<br>4、修改root口令，不用默认口令，使用较复杂的口令<br>5、删除多余的用户<br>6、改变root用户的名称<br>7、限制一般用户浏览其它库<br>8、限制用户对数据文件的访问权限 后端<br>前端的参数检查，权限控制仅仅是为了防止用户错误的输入或访问，稍微会使用浏览器的开发者工具的，都可以绕过，更别说爬虫，</p>
<p>问题29：SQL语句应该考虑哪些安全性？SQL查询的安全方案、MySQL的其它安全设置<br>解题方法<br>SQL安全的优先考虑SQL注入的防护手段。</p>
<p>sql语句是解释性语言，<br>SQL注入的关键是单引号的闭合，</p>
<ul>
<li>通过构造特殊的输入参数传入Web应用，</li>
<li>通常由于程序员未对输入过滤，直接动态拼接 SQL 产生</li>
<li>可以使用开源工具 sqlmap，SQLninja 检测</li>
</ul>
<p>SQL注入（SQLi）是一种注入攻击，可以执行恶意SQL语句。<br>它通过将任意SQL代码插入数据库查询，使攻击者能够完全控制Web应用程序后面的数据库服务器。<br>攻击者可以使用SQL注入漏洞绕过应用程序安全措施；<br>可以绕过网页或Web应用程序的身份验证和授权，并检索整个SQL数据库的内容；<br>还可以使用SQL注入来添加，修改和删除数据库中的记录。</p>
<p>1、使用预处理语句防止SQL注入，</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">id</span> = ?</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SQL注入代码演示示例</span></span><br><span class="line"><span class="string">    1）创建users表和插入相应信息</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line"> <span class="comment">--  创建users数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`users`</span>(</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">    <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">    <span class="string">`password`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- 插入users表三条数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">users</span> (<span class="keyword">name</span>,email,<span class="keyword">password</span>) <span class="keyword">values</span> (<span class="string">'zhangsan'</span>,<span class="string">'zhangsan@qq.com'</span>,<span class="keyword">md5</span>(<span class="string">'zhangsan123'</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">users</span> (<span class="keyword">name</span>,email,<span class="keyword">password</span>) <span class="keyword">values</span> (<span class="string">'lisi'</span>,<span class="string">'lisi@qq.com'</span>,<span class="keyword">md5</span>(<span class="string">'lisi123'</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">users</span> (<span class="keyword">name</span>,email,<span class="keyword">password</span>) <span class="keyword">values</span> (<span class="string">'wangwu'</span>,<span class="string">'wangwu@qq.com'</span>,<span class="keyword">md5</span>(<span class="string">'wangwu123'</span>));</span><br></pre></td></tr></tbody></table></figure>

<p> 2） 存在SQL漏洞代码示例：在终端下输入名称和密码然后查询用户信息</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sql_inject_demo.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> MySQLdb   <span class="comment"># pip install mysqlclient</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 新建数据库链接</span></span><br><span class="line">db = MySQLdb.connect(</span><br><span class="line">    host=<span class="string">'localhost'</span>,</span><br><span class="line">    user=<span class="string">'root'</span>,</span><br><span class="line">    passwd=<span class="string">'123456'</span>,</span><br><span class="line">    db=<span class="string">'test'</span></span><br><span class="line">)</span><br><span class="line">cur = db.cursor()</span><br><span class="line"> </span><br><span class="line">name = input(<span class="string">'Enter name: '</span>)</span><br><span class="line">print(<span class="string">'您输入的用户name是: {}'</span>.format(name))</span><br><span class="line">password = input(<span class="string">'Enter password：'</span>)</span><br><span class="line">print(<span class="string">'您输入的密码是: {}'</span>.format(password))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接拼接 sql 参数,使用md5的 password</span></span><br><span class="line">sql = <span class="string">"SELECT * FROM users WHERE name='"</span> + name + <span class="string">"'"</span>+<span class="string">"AND password=md5('"</span> + password + <span class="string">"')"</span></span><br><span class="line">print(sql)</span><br><span class="line">cur.execute(sql)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cur.fetchall():</span><br><span class="line">    print(<span class="string">'查询结果：'</span>, row)</span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></tbody></table></figure>

<p> 3）SQL注入演示结果<br>运行后再终端输入</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 输入正确的用户名和密码</span></span><br><span class="line">Enter name: lisi</span><br><span class="line">您输入的用户name是: lisi</span><br><span class="line">Enter password：lisi123</span><br><span class="line">您输入的密码是: lisi123</span><br><span class="line">SELECT * FROM users WHERE name='lisi'AND password=md5('lisi123')</span><br><span class="line">查询结果：(2, 'lisi', 'lisi@qq.com', 'c3cb6d12c40908943b64bc0681af47db')</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 输出错误密码</span></span><br><span class="line">Enter name: lisi</span><br><span class="line">您输入的用户name是: lisi</span><br><span class="line">Enter password：1234</span><br><span class="line">您输入的密码是: 1234</span><br><span class="line">SELECT * FROM users WHERE name='lisi'AND password=md5('1234')</span><br><span class="line"><span class="meta">#</span><span class="bash"> 没有返回查询结果用户信息的一行，说明密码不正确</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 因为代码有sql注入漏洞，在用户名后面加入中线，这里还输错误密码，</span></span><br><span class="line">Enter name: lisi' -- '   # -- 中线前后都有空格，中线在sql语句中表示注释 ，--后面的部分当作注释，不起作用</span><br><span class="line">您输入的用户name是: lisi' -- '</span><br><span class="line">Enter password：123456 </span><br><span class="line">您输入的密码是: 123456</span><br><span class="line">SELECT * FROM users WHERE name='lisi' -- ''AND password=md5('123456')</span><br><span class="line">查询结果：(2, 'lisi', 'lisi@qq.com', 'c3cb6d12c40908943b64bc0681af47db')</span><br><span class="line"><span class="meta">#</span><span class="bash"> 还是返回查询结果，这里就是通过SQL注入方式绕过网站的安全验证</span></span><br></pre></td></tr></tbody></table></figure>

<p>4）怎么修复sql注入问题，其实只要把使用拼接的地方直接换成占位符就可以</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只需要修改成以下方式</span></span><br><span class="line">sql = <span class="string">"SELECT * from users WHERE name=%s and password=md5(%s)"</span></span><br><span class="line">print(sql)</span><br><span class="line">cur.execute(sql, (name, password)) <span class="comment"># execute它会自动执行转义操作</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Enter name: lisi' -- '</span><br><span class="line">您输入的用户name是: lisi' -- '</span><br><span class="line">Enter password：123456</span><br><span class="line">您输入的密码是: 123456</span><br><span class="line">SELECT * from users WHERE name=%s and password=md5(%s)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 没有返回查询结果用户信息的一行，说明密码不正确，并没有像上面的一样绕过安全验证</span></span><br></pre></td></tr></tbody></table></figure>

<p>数据库的三大范式：<br>第一范式:  每一列都不可以再拆分；<br>第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不是主键的一部分。<br>第三范式：在第二范式的基础上，非主键完全依赖于主键，而不是其他的非主键。关联性，每列都与主键有直接关系,不存在传递依赖</p>
<p><code>select version();</code>查询数据库版本<br><code>select database();</code>查询数据库名</p>
<ol>
<li>数据类型为int(11)，注意到后面的数字11，这表示的是该数据类型指定的显示宽度，指定能够显示的数值中数字的个数。其他数据类型也可以在定义表结构的时候指定所需要的显示宽度，如果不指定，则系统为每一种类型指定默认的宽度。</li>
<li>MySQL使用浮点数和定点数表示小数。单精度浮点类型有两种：单精度浮点型(float)和双精度浮点型(double)。定点类型只有一种：decimal。浮点类型和定点类型都可以用(M，N)来表示，其中M称为进度，表示总共的位数；N称为标度，表示的是小数的位数。</li>
<li>不论是定点还是浮点类型，如果用户指定的进度超出了进度范围，这回四舍五入进行处理。</li>
<li>浮点数相对于定点数的有点是在长度一定的情况下，浮点数能够表示更大的数据范围，它的缺点是会引起进度问题。</li>
<li>MySQL中，定点数以字符串的形式存储，在对进度要求比较高的时候(比如货币和科学计算)使用decimal的类型比较好，另外两个浮点数进行减法和比较运算时也容易出现问题，所以在使用浮点型时需要注意，尽避免做浮点数比较。</li>
<li>保存为YEAR类型时，既可以传入整型，也可以传入字符型。若是插入超过了YEAR类型的取值范围，值将被转换为2000。</li>
<li>保存为TIME类型时，如果不合法，存储时将变为00:00:00。</li>
<li>可以使用字符串类型或者数字类型的数据插入DATE类型数据，只要符合DATE的日期格式即可。</li>
<li>MySQL允许“不严格”的语法：任何标点符号都可以用作日期部分之间的间隔符。例如“98-10-19”、“98.10.18”、“98/10/19”和“98@10@19@”都是等价的，这些字也是可以正确的插入到数据库的。</li>
<li>插入DATETIME类型数据时，可以使用字符串类型和数字类型的数据插入，只要符合DATETIME的日期格式即可。例如：“YYYY-MM-DD HH:MM:SS”、“YYYYMMDDHHMMSS”、或者用数字YYYYMMDDHHMMSS、YYMMDDHHMMSS表示均可。</li>
<li>MySQL允许“不严格”语法：任何标点符号都可以用作日期部分或者时间部分之间的间隔，例如：“98-10-19 12:12:12”、“98.10.19 12+12+12”、“98@10@9 12<em>12</em>12”、“98#10#19 12:12:12”都是等效且被允许的。</li>
<li>字符串类型用来存储字符串数据，除了可以存储字符串数据外，还可以存储其他数据，比如图片、声音的二进制数据。</li>
<li>MySQL至此两类字符型数据：文本字符串和二进制字符串。</li>
<li>VARCHAR、TEXT、BLOB都是变长类型，对于其存储需求取决于列值得实际长度，而不是取决于类型的最大可能长度。例如，一个VARCHAR(10)能保存最大长度为10个字符的一个字符串，实际的存储需要字符串实际长度L加上一个字节(用于记录字符串的长度)。对于字符串“abcd”，L是4，而存储需要5个字节。</li>
<li>CHAR(M)为固定长度的字符串，在定义时指定字符串长度。当保存时在右侧填充空格到指定的长度。M表示列长度，M的范围是0~255个字符。当检索到CHAR值时，尾部的空格将被删除。</li>
<li>VARCHAR(M)是可变长的字符串，M表示最大列长度。M的范围是0~65535.VARCHAR在只保存和检索时尾部的空格人保留。</li>
<li>等于运算符(=)不能用于null的判断，但是安全等于运算符(&lt;=&gt;)可以。</li>
<li>用LIKE匹配字符时：<br>　　“%”匹配任何数目的字符，甚至包括零字符<br>　　“_”只能匹配一个字符。</li>
<li>如果想删除表中所有记录，除了使用DELETE FROM 表名 表名 的方式之外，还可以使用TRUNCATETABLE语句，TRUNCATE将直接删除原来的表，并重新创建一个新的表。TRUNCATE直接说删除表而不是删除记录，因此执行速度比DELETE快。</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/vue/" class="post-title-link" itemprop="url">vue</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-02 08:17:42" itemprop="dateModified" datetime="2021-07-02T08:17:42Z">2021-07-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Vetur VUE语言包<br>没有安装该插件之前之前编写后缀名为.vue的文件时代码是白色的</p>
<h3 id="广泛使用的前端开发框架"><a href="#广泛使用的前端开发框架" class="headerlink" title="广泛使用的前端开发框架"></a>广泛使用的前端开发框架</h3><p>-PC端网页<br>-移动端H5站点<br>-小程序<br>-App(安卓、ios)</p>
<h3 id="用于开发单页面应用"><a href="#用于开发单页面应用" class="headerlink" title="用于开发单页面应用"></a>用于开发单页面应用</h3><p>-只有一个HTML页面( Single Page web Application,SPA)<br>-使用 JavaScript动态切换HTML内容</p>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>用户体验更好</li>
<li>减轻服务器的压力</li>
<li>前后端完全分离,通过接口( Restful api)进行通信</li>
<li>接口代码的复用</li>
</ul>
<p>1.体积小<br>压缩后33K<br>2.更高的运行效率<br>基于虚拟dom,一种可以预先通过 JavaScript进行各种计算,把最终的DOM操作<br>计算出来并优化的技术,由于这个DOM操作属于预处理操作,并没有真实的操<br>作DOM,所以叫做虚拟DOM<br>3.双向数据绑定<br>让开发者不用再去操作dom对象,把更多的精力投入到业务逻辑上<br>4生态丰富、学习成本低<br>市场上拥有大量成熟、稳定的基于 vue.S的u框架、常用组件!拿来<br>即用实现快速开发!<br>对初学者友好、入门容易、学习资料多;</p>
<p>Vue生态圈<br>-官方维护开发的框架及扩展<br>-第三方UI框架、组件库<br>如:实战中要使用的 VantUI<br>-基于 Node.js的模块<br>-完整的技术文档和学习资料</p>
<p>vue项目</p>
<ul>
<li><p>方式一:引用 vue.js 文件，我们仍然推荐从CDN服务器加载它。</p>
 <figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 本地加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./vue.Js&gt;&lt;/script&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">&lt;!-- CDN加载 --&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">&lt;script src="</span><span class="attr">https:</span>//<span class="attr">cdn.jsdelivr.net</span>/<span class="attr">npm</span>/<span class="attr">vue</span>"&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>方式二: 使用脚手架 - vue-cli</p>
</li>
</ul>
<p>Vue为商业项目开发提供了非常便捷的脚手架工具vue-cli，通过工具可以省去手工配置开发环境、测试环境和运行环境的步骤，让开发者只需要关注要解决的问题。</p>
<ol>
<li>安装脚手架。</li>
<li>创建项目。</li>
<li>安装依赖包。</li>
<li>运行项目。</li>
</ol>
<p>vue的实例</p>
<ul>
<li><p>示例代码<br><code>var app= new Vue(options)</code></p>
</li>
<li><p><code>el</code>参数<br>挂载到某个HTML标签</p>
</li>
<li><p><code>data</code>参数/属性</p>
<ul>
<li>存放当前组件所需要的数据</li>
<li>它是响应式的,data某一属性改变当值发生改变的同时，视图也会改变，浏览器dom结构当中会自动跟随改变<br>放在data中的属性。</li>
</ul>
</li>
<li><p><code>computed</code>计算属性</p>
<ul>
<li>用于复杂的逻辑</li>
<li>定义的js函数没有形式参数</li>
<li>必须有返回值，使用插值语法，在界面上显示</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">computed: {</span><br><span class="line">    a() {</span><br><span class="line"></span><br><span class="line">    },</span><br><span class="line">    b() {</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p><code>methods</code>参数，不能少复数的<code>s</code></p>
<ul>
<li>可以直接通过∨ue实例访问的方法</li>
<li>定义的js函数有形式参数，可以相互调用</li>
<li>处理js事件</li>
</ul>
</li>
<li><p><code>template</code>参数</p>
</li>
<li><p>模板,如果不指定,则使用默认的html模板</p>
<ul>
<li>有template参数选项，可以通过 <code>render</code>参数从组建渲染,将其作为模板编译成render函数。</li>
<li>如果没有template选项，则将外部HTML作为模板编译。</li>
<li>template中的模板优先级要高于outer HTML的优先级。</li>
</ul>
</li>
</ul>
<p>MVVM架构<br>       View Model<br>View  DOM Listeners =&gt; model<br>(DOM)  Directives       JavaScript Object<br>        DOM操作</p>
<p>Vue.js中 ViewModel层处理了DOM的操作，使我们的开发更简单</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-model, @click都是vue.js的属性  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 点击事件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>{{ uname }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in dataList"</span>&gt;</span>{{item}}<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">            el: <span class="string">"#app"</span>,  <span class="comment">// Vue实例接管el指定的标签id ="app"当中所有的内容</span></span></span><br><span class="line"><span class="javascript">            data: { <span class="attr">username</span>: <span class="string">'admin'</span>, <span class="attr">dataList</span>: [] },</span></span><br><span class="line">            computed: {</span><br><span class="line">                uname() {</span><br><span class="line"><span class="javascript">                    <span class="comment">// 类方法中的this指向类的实例</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="built_in">this</span>.username[<span class="number">0</span>] + <span class="string">"***"</span></span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            methods: {</span><br><span class="line">                submit() {</span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">"获取表单的值："</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.load()</span></span><br><span class="line">                },</span><br><span class="line">                load() {</span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.dataList = [<span class="string">'Beijing'</span>, <span class="string">'Shanghai'</span>, <span class="string">'Guangzhou'</span>, <span class="string">'Shenzhen'</span>]</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        })</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>在通过live server在浏览器中，F12或右键inspector-console，<br>点击提交按钮，控制台会输出<code>获取表单的值： admin</code><br>页面会加载’Beijing’, ‘Shanghai’, ‘Guangzhou’, ‘Shenzhen’</p>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p>对于一个程序或Vue.js中的一个实例来说，其生命周期经过一系列的初始化过程开始创建，<br>一个程序本身和程序中的每一个实例和组件都存在生命周期。<br>生命周期：就是从一个组件或实例开始初始化、创建实例到该实例被销毁的过程。</p>
<p>在这个生命周期之间，进行初始化事件，进行数据的观测，可以看到在created的时候数据已经和data属性进行绑定<br>每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会。</p>
<h3 id="钩子函数-不能使用箭头函数"><a href="#钩子函数-不能使用箭头函数" class="headerlink" title="钩子函数 不能使用箭头函数"></a>钩子函数 不能使用箭头函数</h3><p>Vue实例从创建到销毁的过程中 ，这些过程中会伴随着一些函数的自调用，在某一个时间点Vue实例会自动执行的函数称为钩子函数。<br>为什么叫做钩子呢？原因是对于某个实例事件发生后需要响应已经预设好的代码，即某一个钩子钩住了一个实例的状态或者事件。</p>
<ol>
<li><p>beforeCreate<br>在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用。此时的 data 和 methods 中的 数据都还没有没初始化。</p>
</li>
<li><p>created<br>在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，属性和方法的运算，watch/event 事件回调。也就是此时 data 和 methods已经初始化完成了。然而，挂载阶段还没开始，<code>$el</code> 属性目前尚不可用。 页面还没有渲染出来。<br>注意：<br>如果要调用 methods 中的方法，或者操作 data 中的数据，最早只能在 created 中进行操作。</p>
</li>
<li><p>beforeMount</p>
</li>
</ol>
<ul>
<li>如果有<code>el</code>和<code>template</code>，在挂载开始之前被调用。此时页面上还看不到真实的数据，因为模板在内存中编译完成了，但是还没有把模板渲染到页面中。<br>注意：<br>在 beforeMount 执行的时候，页面中的元素还没有被真正替换过来，显示的是之前写的一些模板字符串。</li>
</ul>
<p>以下代码在浏览器显示是一级标题的test，<code>template: '&lt;h1&gt;test&lt;/h1&gt;'</code>替换了<code>el: '#app'</code>也就是替换了<code>id="app"</code>为<code>&lt;div&gt;</code>的所有内容</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({  <span class="comment">// app是全局变量，在浏览器控制台输入app可以访问到此象</span></span></span><br><span class="line"><span class="javascript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span></span><br><span class="line">        data: {</span><br><span class="line"><span class="javascript">            username: <span class="string">'admin'</span>,</span></span><br><span class="line">            dataList: []</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            submit() {</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'获取表单的值：'</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line">            },</span><br><span class="line">            load() {</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.dataList = [<span class="string">'北京'</span>, <span class="string">'上海'</span>, <span class="string">'广州'</span>, <span class="string">'深圳'</span>]</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        beforeCreate() {  <span class="comment">// 没有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.load())</span></span></span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        <span class="comment">// beforeCreate: () =&gt; {</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   console.log('beforeCreate')</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   // console.log(this.load())</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// },</span></span></span><br><span class="line">        created() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'created'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.load())</span></span><br><span class="line">        },</span><br><span class="line">        beforeMount() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        mounted() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'mounted'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeDestroy() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        destroyed() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeUpdate() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        updated() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span></span><br><span class="line">        }</span><br><span class="line">    })</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">beforeCreate</span></span><br><span class="line"><span class="selector-tag">created</span></span><br><span class="line"><span class="selector-tag">undefined</span></span><br><span class="line"><span class="selector-tag">beforeMount</span></span><br><span class="line"><span class="selector-tag">mounted</span></span><br><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:98</span> <span class="selector-tag">Live</span> <span class="selector-tag">reload</span> <span class="selector-tag">enabled</span>.</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>如果没有<code>el</code>，浏览器显示<code>id="app"</code>为<code>&lt;div&gt;</code>的所有内容</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({  <span class="comment">// app是全局变量，在浏览器控制台输入app可以访问到此象</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// el: '#app',</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span></span><br><span class="line">        data: {</span><br><span class="line"><span class="javascript">            username: <span class="string">'admin'</span>,</span></span><br><span class="line">            dataList: []</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            submit() {</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'获取表单的值：'</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line">            },</span><br><span class="line">            load() {</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.dataList = [<span class="string">'北京'</span>, <span class="string">'上海'</span>, <span class="string">'广州'</span>, <span class="string">'深圳'</span>]</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        beforeCreate() {  <span class="comment">// 没有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.load())</span></span></span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        <span class="comment">// beforeCreate: () =&gt; {</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   console.log('beforeCreate')</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   // console.log(this.load())</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// },</span></span></span><br><span class="line">        created() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'created'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.load())</span></span><br><span class="line">        },</span><br><span class="line">        beforeMount() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        mounted() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'mounted'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeDestroy() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        destroyed() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeUpdate() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        updated() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span></span><br><span class="line">        }</span><br><span class="line">    })</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight actionscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate</span><br><span class="line">created</span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>如果没有<code>el</code>，在手动<code>$mount('#app')</code>指定挂载到</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({  <span class="comment">// app是全局变量，在浏览器控制台输入app可以访问到此象</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// el: '#app',</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span></span><br><span class="line">        data: {</span><br><span class="line"><span class="javascript">            username: <span class="string">'admin'</span>,</span></span><br><span class="line">            dataList: []</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            submit() {</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'获取表单的值：'</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line">            },</span><br><span class="line">            load() {</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.dataList = [<span class="string">'北京'</span>, <span class="string">'上海'</span>, <span class="string">'广州'</span>, <span class="string">'深圳'</span>]</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        beforeCreate() {  <span class="comment">// 没有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.load())</span></span></span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        <span class="comment">// beforeCreate: () =&gt; {</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   console.log('beforeCreate')</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   // console.log(this.load())</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// },</span></span></span><br><span class="line">        created() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'created'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.load())</span></span><br><span class="line">        },</span><br><span class="line">        beforeMount() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        mounted() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'mounted'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeDestroy() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        destroyed() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeUpdate() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        updated() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span></span><br><span class="line">        }</span><br><span class="line"><span class="javascript">    }).$mount(<span class="string">'#app'</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:37</span> <span class="selector-tag">beforeCreate</span></span><br><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:45</span> <span class="selector-tag">created</span></span><br><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:46</span> <span class="selector-tag">undefined</span></span><br><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:49</span> <span class="selector-tag">beforeMount</span></span><br><span class="line"><span class="selector-tag">indexVue</span><span class="selector-class">.html</span><span class="selector-pseudo">:52</span> <span class="selector-tag">mounted</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>如果没有<code>template</code>和<code>el</code>属性，浏览器显示<code>id="app"</code>为<code>&lt;div&gt;</code>的所有内容</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({  <span class="comment">// app是全局变量，在浏览器控制台输入app可以访问到此象</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// el: '#app',</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        // template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span></span><br><span class="line">        data: {</span><br><span class="line"><span class="javascript">            username: <span class="string">'admin'</span>,</span></span><br><span class="line">            dataList: []</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            submit() {</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'获取表单的值：'</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line">            },</span><br><span class="line">            load() {</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.dataList = [<span class="string">'北京'</span>, <span class="string">'上海'</span>, <span class="string">'广州'</span>, <span class="string">'深圳'</span>]</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        beforeCreate() {  <span class="comment">// 没有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.load())</span></span></span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        <span class="comment">// beforeCreate: () =&gt; {</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   console.log('beforeCreate')</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//   // console.log(this.load())</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// },</span></span></span><br><span class="line">        created() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'created'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.load())</span></span><br><span class="line">        },</span><br><span class="line">        beforeMount() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        mounted() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'mounted'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeDestroy() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        destroyed() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeUpdate() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        updated() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span></span><br><span class="line">        }</span><br><span class="line"><span class="javascript">    }).$mount(<span class="string">'#app'</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">beforeCreate</span></span><br><span class="line"><span class="keyword">created</span></span><br><span class="line"><span class="keyword">undefined</span></span><br><span class="line"><span class="keyword">beforeMount</span></span><br><span class="line"><span class="keyword">mounted</span></span><br></pre></td></tr></tbody></table></figure>
<p>在浏览器控制台输入<code>app</code></p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app</span><br><span class="line"><span class="keyword">wn</span>&nbsp;{_uid: <span class="number">0</span>, _isVue: true, $option<span class="variable">s:</span> {…}, _renderProxy: <span class="keyword">wn</span>, _self: <span class="keyword">wn</span>,&nbsp;…}$attr<span class="variable">s:</span> (...)$children: []$createElemen<span class="variable">t:</span> ƒ (<span class="keyword">e</span>,n,r,i)$<span class="keyword">e</span><span class="variable">l:</span> div#app$listener<span class="variable">s:</span> (...)$option<span class="variable">s:</span> {component<span class="variable">s:</span> {…}, directive<span class="variable">s:</span> {…}, <span class="built_in">filter</span><span class="variable">s:</span> {…}, _base: ƒ, dat<span class="variable">a:</span> ƒ,&nbsp;…}$paren<span class="variable">t:</span> undefined$ref<span class="variable">s:</span> {}$roo<span class="variable">t:</span> <span class="keyword">wn</span>&nbsp;{_uid: <span class="number">0</span>, _isVue: true, $option<span class="variable">s:</span> {…}, _renderProxy: <span class="keyword">wn</span>, _self: <span class="keyword">wn</span>,&nbsp;…}$scopedSlot<span class="variable">s:</span> {}$slot<span class="variable">s:</span> {}$vnode: undefineddataLis<span class="variable">t:</span> (...)load: ƒ ()submi<span class="variable">t:</span> ƒ ()username: (...)_c: ƒ (<span class="keyword">e</span>,n,r,i)_dat<span class="variable">a:</span> {__ob__: we}_directInactive: false_event<span class="variable">s:</span> {}_hasHookEven<span class="variable">t:</span> false_inactive: null_isBeingDestroyed: false_isDestroyed: false_isMounted: true_isVue: true_renderProxy: <span class="keyword">wn</span>&nbsp;{_uid: <span class="number">0</span>, _isVue: true, $option<span class="variable">s:</span> {…}, _renderProxy: <span class="keyword">wn</span>, _self: <span class="keyword">wn</span>,&nbsp;…}_self: <span class="keyword">wn</span>&nbsp;{_uid: <span class="number">0</span>, _isVue: true, $option<span class="variable">s:</span> {…}, _renderProxy: <span class="keyword">wn</span>, _self: <span class="keyword">wn</span>,&nbsp;…}_staticTree<span class="variable">s:</span> null_uid: <span class="number">0</span>_vnode: <span class="keyword">pe</span>&nbsp;{<span class="keyword">ta</span><span class="variable">g:</span> <span class="string">"div"</span>, dat<span class="variable">a:</span> {…}, children: Array(<span class="number">11</span>), tex<span class="variable">t:</span> undefined, elm: div#app,&nbsp;…}_watcher: fn&nbsp;{<span class="keyword">vm</span>: <span class="keyword">wn</span>, deep: false, user: false, lazy: false, <span class="keyword">sync</span>: false,&nbsp;…}_watcher<span class="variable">s:</span> [fn]$dat<span class="variable">a:</span> (...)$isServer: (...)$prop<span class="variable">s:</span> (...)$ssrContex<span class="variable">t:</span> (...)<span class="built_in">get</span> $attr<span class="variable">s:</span> ƒ ()<span class="keyword">set</span> $attr<span class="variable">s:</span> ƒ (t)<span class="built_in">get</span> $listener<span class="variable">s:</span> ƒ ()<span class="keyword">set</span> $listener<span class="variable">s:</span> ƒ (t)<span class="built_in">get</span> dataLis<span class="variable">t:</span> ƒ ()<span class="keyword">set</span> dataLis<span class="variable">t:</span> ƒ (<span class="keyword">e</span>)<span class="built_in">get</span> username: ƒ ()<span class="keyword">set</span> username: ƒ (<span class="keyword">e</span>)__proto__: Object</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>在浏览器控制台输入<code>app.$destroy()</code></p>
<figure class="highlight stata"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">app</span>.<span class="variable">$destroy</span>()</span><br><span class="line">beforeDestroy</span><br><span class="line">destroyed</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>mounted</li>
</ol>
<ul>
<li>如果有<code>el</code>，实例被挂载后调用，这时 <code>el</code> 被新创建的 <code>vm.$el</code> 替换了。此时数据已经真实渲染到页面上了。<br>mounted 是实例创建期间的最后一个生命周期函数，当执行完 mounted 就表示，实例已经被完全创建好了。</li>
</ul>
<p>注意：<br>mounted 不会保证所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以在 mounted 内部使用 vm.$nextTick：</p>
<ol start="5">
<li>beforeUpdate Update<br>当vue发现data中的数据发生了改变，会触发对应组件的重新渲染，先后调用beforeUpdate和updated钩子函数。</li>
</ol>
<p>console能打印出来并不一定就是有“值”，console当打印出来的是基本数据类型时候当然没问题，否则对于复杂数据类型是会发生改变的，因为只是地址引用而已</p>
<p>在通过live server在浏览器中，F12或右键inspect-console，<br>点击提交按钮，控制台会输出</p>
<p>以下代码在浏览器显示是一级标题的test，<code>template: '&lt;h1&gt;test&lt;/h1&gt;'</code>替换了<code>el: '#app'</code>也就是替换了<code>id="app"</code>为<code>&lt;div&gt;</code>的所有内容</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单操作<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>动态列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"加载"</span> @<span class="attr">click</span>=<span class="string">"load"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in dataList"</span>&gt;</span>{{ item }}<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">        <span class="comment">// el: '#app',</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        // template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span></span><br><span class="line">        data: {</span><br><span class="line"><span class="javascript">            username: <span class="string">'admin'</span>,</span></span><br><span class="line">            dataList: []</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            submit() {</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'获取表单的值：'</span>, <span class="built_in">this</span>.username)</span></span><br><span class="line">            },</span><br><span class="line">            load() {</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.dataList = [<span class="string">'北京'</span>, <span class="string">'上海'</span>, <span class="string">'广州'</span>, <span class="string">'深圳'</span>]</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        beforeCreate: <span class="function">() =&gt;</span> {  <span class="comment">// 有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)  <span class="comment">// window 指向window</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.load())  // 报错，不可以调用vue的实例的方法</span></span></span><br><span class="line">        },</span><br><span class="line"><span class="javascript">        created() {  <span class="comment">// 没有箭头函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'created'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)  <span class="comment">// wn  指向vue的实例</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.load())  <span class="comment">// 可以调用vue的实例的方法</span></span></span><br><span class="line">        },</span><br><span class="line">        beforeMount() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        mounted() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'mounted'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeDestroy() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        destroyed() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        beforeUpdate() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span></span><br><span class="line">        },</span><br><span class="line">        updated() {</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span></span><br><span class="line">        }</span><br><span class="line">    })</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight groovy"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate</span><br><span class="line">Window&nbsp;{<span class="attr">window:</span> Window, <span class="attr">self:</span> Window, <span class="attr">document:</span> document, <span class="attr">name:</span> <span class="string">""</span>, <span class="attr">location:</span> Location,&nbsp;…}</span><br><span class="line">created</span><br><span class="line">wn&nbsp;{<span class="attr">_uid:</span> <span class="number">0</span>, <span class="attr">_isVue:</span> <span class="literal">true</span>, <span class="attr">$options:</span> {…}, <span class="attr">_renderProxy:</span> wn, <span class="attr">_self:</span> wn,&nbsp;…}</span><br><span class="line">undefined</span><br></pre></td></tr></tbody></table></figure>

<hr>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>{{ message }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">            el: <span class="string">"#app"</span>,</span></span><br><span class="line">            data() {</span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> { <span class="attr">message</span>: <span class="string">"Hello World"</span> }</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"created"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            beforeCreate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"beforeCreate"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            beforeMount: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"beforeMount"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            beforeUpdate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"beforeUpdate"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"mounted"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            beforeDestroy: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"beforeDestroy"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            updated: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"updated"</span>)</span></span><br><span class="line">            },</span><br><span class="line"><span class="javascript">            destroyed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"destroyed"</span>)</span></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">beforeCreate</span></span><br><span class="line"><span class="keyword">created</span></span><br><span class="line"><span class="keyword">beforeMount</span></span><br><span class="line"><span class="keyword">mounted</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>vue生命周期学习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.4.2/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>{{message}}<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span>,</span></span><br><span class="line">    data: {</span><br><span class="line"><span class="javascript">      message: <span class="string">'Vue的生命周期'</span></span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'------beforeCreate创建前状态------'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span> , <span class="string">"el     : "</span> + <span class="built_in">this</span>.$el); <span class="comment">//undefined</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); <span class="comment">//undefined </span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message) </span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'------created创建完毕状态------'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el); <span class="comment">//undefined</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); <span class="comment">//已被初始化 </span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); <span class="comment">//已被初始化</span></span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'------beforeMount挂载前状态------'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + (<span class="built_in">this</span>.$el)); <span class="comment">//已被初始化</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); <span class="comment">//已被初始化  </span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); <span class="comment">//已被初始化  </span></span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'------mounted 挂载结束状态------'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el); <span class="comment">//已被初始化</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);    </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); <span class="comment">//已被初始化</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); <span class="comment">//已被初始化 </span></span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    beforeUpdate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'beforeUpdate 更新前状态===============》'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);   </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); </span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    updated: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'updated 更新完成状态===============》'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el); </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); </span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    beforeDestroy: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'beforeDestroy 销毁前状态===============》'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);    </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message); </span></span><br><span class="line">    },</span><br><span class="line"><span class="javascript">    destroyed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">'destroyed 销毁完成状态===============》'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"el     : "</span> + <span class="built_in">this</span>.$el);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el);  </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"data   : "</span> + <span class="built_in">this</span>.$data); </span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"%c%s"</span>, <span class="string">"color:red"</span>,<span class="string">"message: "</span> + <span class="built_in">this</span>.message)</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight ldif"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">------beforeCreate创建前状态------</span></span><br><span class="line"><span class="attribute">el     </span>: undefined</span><br><span class="line"><span class="attribute">data   </span>: undefined</span><br><span class="line"><span class="attribute">message</span>: undefined</span><br><span class="line"><span class="literal">------created创建完毕状态------</span></span><br><span class="line"><span class="attribute">el     </span>: undefined</span><br><span class="line"><span class="attribute">data   </span>: [object Object]</span><br><span class="line"><span class="attribute">message</span>: Vue的生命周期</span><br><span class="line"><span class="literal">------beforeMount挂载前状态------</span></span><br><span class="line"><span class="attribute">el     </span>: [object HTMLDivElement]</span><br><span class="line">&lt;div id=​"app"&gt;​…​&lt;/div&gt;​</span><br><span class="line"><span class="attribute">data   </span>: [object Object]</span><br><span class="line"><span class="attribute">message</span>: Vue的生命周期</span><br><span class="line"><span class="literal">------mounted 挂载结束状态------</span></span><br><span class="line"><span class="attribute">el     </span>: [object HTMLDivElement]</span><br><span class="line">&lt;div id=​"app"&gt;​…​&lt;/div&gt;​</span><br><span class="line"><span class="attribute">data   </span>: [object Object]</span><br><span class="line"><span class="attribute">message</span>: Vue的生命周期</span><br></pre></td></tr></tbody></table></figure>

<p>Vue CLI<br>-快速搭建项目<br>-内置 Babel、 ESlint、 PostCSS等插件<br>-基于 webpack,Webpack是一个前端资源加载、打包工具。它将根据模块间的依赖关系进行静态分析，然后根据指定的规则生成相应的静态资源。其实现了代码转换，将开发文件转化为基础的HTML、CSS、JavaScript文件等功能。可灵活配置，<br>-图形化的创建和管理工具</p>
<p>npm（node package manager）：<br>nodejs的包管理器，用于node插件管理（包括安装、卸载、管理依赖等）<br>cnpm:因为npm安装插件是从国外服务器下载，受网络的影响比较大，可能会出现异常，如果npm的服务器在中国就好了，<br>所以我们乐于分享的淘宝团队干了这事。<br>来自官网：“这是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。”</p>
<p><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br>D:\Program Files\nodejs\node_global\node_modules</p>
<p>安装一个项目所需要的包在项目主目录下执行<code>cnpm install</code>命令，生成<code>node_modules</code>目录文件夹<br>启动项目执行<code>cnpm run dev</code>命令，启动后可以访问<code>localhost:8080</code></p>
<h3 id="创建第一个Vue项目"><a href="#创建第一个Vue项目" class="headerlink" title="创建第一个Vue项目"></a>创建第一个Vue项目</h3><ul>
<li>切换项目路径<br><code>cd C:\Vue\</code></li>
<li>命令行创建，<br><code>vue create project_name</code><br><code>vue create hello-world</code></li>
<li>图形化界面创建<br><code>Vue ui</code></li>
<li>命令行启动，确定已经切换项目路径<br><code>npm run serve</code>不是<code>server</code></li>
</ul>
<h3 id="项目结构分析"><a href="#项目结构分析" class="headerlink" title="项目结构分析"></a>项目结构分析</h3><p>理解∨ue的项目结构才能开发单页面应用</p>
<ul>
<li>文件解释<ul>
<li><code>package.json</code>——项目描述文件（包含一些依赖配置）</li>
<li><code>vue.config.js</code>——配置文件扩展</li>
<li><code>src/</code>——源代码</li>
<li><code>dist/</code>——构建后的代码（混合、压缩）</li>
<li><code>public/</code>——公共的静态文件</li>
<li><code>node_modules/</code>——项目依赖的安装目录，对应python的site-packages</li>
</ul>
</li>
</ul>
<p>vue项目模板</p>
<ul>
<li><code>src/assets</code>:存放突变</li>
<li><code>src/components</code>:存放一组件文件</li>
<li><code>components/HelloWorld.vue</code>欢迎页面中的样式</li>
<li><code>src/App.vue</code> 项目入口文件，我们也可以直接将组建写这里，而不使用<br>Vue根组件，可以通过 render参数从组件渲染</li>
<li><code>src/mian.js</code> 程序的逻辑入口文件，项目核心文件</li>
<li>新建目录<code>src/views</code>，存放页面组件</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue3</span></span><br><span class="line"><span class="keyword">import</span> { createApp } <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"></span><br><span class="line">createApp(App).mount(<span class="string">'#app'</span>)</span><br><span class="line"><span class="comment">// Vue3里面没有全局的Vue，但是有个新的全局API：createApp</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue2.X</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    components: { App },</span><br><span class="line">    template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>
<p>public/index.html 模板文件</p>
<h3 id="面向组件编程"><a href="#面向组件编程" class="headerlink" title="面向组件编程"></a>面向组件编程</h3><p>组件化开发方式<br>把一个页面按照模块拆分成N个小块<br>做一个组件，只需要导入和组件相关的元素即可，从而加大了项目的纯度。</p>
<h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><p>带有一个名字：<br>可复用的 Vue 实例，<br>与<code>new vue</code>接收相同的选项，例如 <code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code> 以及生命周期钩子等。<br>仅有的例外是像 <code>el</code> 这样根实例特有的选项。</p>
<ul>
<li>按模块划分的前端代码片段，可分离</li>
<li>可复用的前端代码片段，每个组件都会各自独立</li>
<li>容易维护的前端代码片段<br>一个组件的模板必须有一个根节点<br>为了能在模板中使用，这些组件必须先注册以便 Vue 能够识别。</li>
</ul>
<h4 id="创建局部组件"><a href="#创建局部组件" class="headerlink" title="创建局部组件"></a>创建局部组件</h4><p>全局注册所有的组件意味着即便你已经不再使用一个组件了，它仍然会被包含在你最终的构建结果中。这造成了用户下载的 JavaScript 的无谓的增加。</p>
<p>创建vue对象，在vue函数的一个参数是一个对象形式，在对象内申明一个compoents属性，在内部进行组件的局部注册<br>对于 components 对象中的每个 property 来说，其 property 名就是自定义元素的名字，其 property 值就是这个组件的选项对象。</p>
<p>通过一个普通的 JavaScript 对象来定义组件</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ComponentA = { <span class="comment">/* ... */</span> }</span><br><span class="line"><span class="keyword">var</span> ComponentB = { <span class="comment">/* ... */</span> }</span><br><span class="line"><span class="keyword">var</span> ComponentC = { <span class="comment">/* ... */</span> }</span><br></pre></td></tr></tbody></table></figure>

<p>在 <code>components</code> 选项中定义你想要使用的组件</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    components: {</span><br><span class="line">        <span class="string">'component-a'</span>: ComponentA,</span><br><span class="line">        <span class="string">'component-b'</span>: ComponentB,</span><br><span class="line">        App: {</span><br><span class="line">            template: <span class="string">""</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>局部注册的组件在其子组件中不可用。<br>例如，如果你希望 <code>ComponentA</code> 在 <code>ComponentB</code> 中可用，则你需要这样写：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ComponentA = { <span class="comment">/* ... */</span> }</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ComponentB = {</span><br><span class="line">  components: {</span><br><span class="line">    <span class="string">'component-a'</span>: ComponentA</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="创建全局组件"><a href="#创建全局组件" class="headerlink" title="创建全局组件"></a>创建全局组件</h4><p>全局注册的组件可以用在其被注册之后的任何 (通过 <code>new Vue</code>) 新创建的 Vue 根实例，<br>也包括其组件树中的所有子组件的模板中。<br>在所有子组件中也是如此，也就是说这三个组件在各自内部也都可以相互使用。</p>
<ul>
<li>步骤一:新建组件vue文件，不写<code>.vue</code>后缀<br><code>Vue.component()</code>第一个参数是组件名称，第二个参数一对象的形式描述组件,ba’han</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-component-name'</span>, {</span><br><span class="line">    <span class="comment">// … options ...</span></span><br><span class="line">    data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> {</span><br><span class="line">            count: <span class="number">0</span></span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    template: <span class="string">'&lt;button v-on:click="count++"&gt;You clicked me {{ count }} times.&lt;/button&gt;'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>在一个通过 new Vue 创建的 Vue 根实例中，把这个组件作为自定义元素来使用：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue({ <span class="attr">el</span>: <span class="string">'#components-demo'</span> })</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"components-demo"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将组件进行任意次数的复用 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-component-name</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-component-name</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-component-name</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>步骤二:导入该组件</li>
<li>步骤三:注册该组件</li>
<li>步骤四:使用该组件</li>
</ul>
<h4 id="组件的复用"><a href="#组件的复用" class="headerlink" title="组件的复用"></a>组件的复用</h4><p>组件中的<code>data</code>属性必须是一个函数<br>一定要在<code>main.js</code>里面。<br>并不是像这样直接提供一个对象：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data: {</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>取而代之的是，一个组件的 <code>data</code> 选项必须是一个函数，</p>
<blockquote>
<p>因此每个实例可以维护一份被返回对象的独立的拷贝：</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="在模块系统中局部注册"><a href="#在模块系统中局部注册" class="headerlink" title="在模块系统中局部注册"></a>在模块系统中局部注册</h3><p>使用了诸如 Babel 和 webpack 的模块系统。<br>在这些情况下，我们推荐创建一个 <code>components</code> 目录，并将每个组件放置在其各自的文件中。<br>然后你需要在局部注册之前导入每个你想使用的组件。<br>使用<code>export default</code>命令，为模块指定默认输出，这样就不需要知道所要加载模块的变量名。</p>
<p>例如，在一个假设的 <code>ComponentB.js</code> 或 <code>ComponentB.vue</code> 文件中：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ComponentA <span class="keyword">from</span> <span class="string">'./ComponentA'</span></span><br><span class="line"><span class="keyword">import</span> ComponentC <span class="keyword">from</span> <span class="string">'./ComponentC'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  components: {</span><br><span class="line">    ComponentA,</span><br><span class="line">    ComponentC</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>现在 <code>ComponentA</code> 和 <code>ComponentC</code> 都可以在 <code>ComponentB</code> 的模板中使用了</p>
<h3 id="基础组件的自动化全局注册"><a href="#基础组件的自动化全局注册" class="headerlink" title="基础组件的自动化全局注册"></a>基础组件的自动化全局注册</h3><p>可能你的许多组件只是包裹了一个输入框或按钮之类的元素，是相对通用的。<br>我们有时候会把它们称为基础组件，它们会在各个组件中被频繁的用到。</p>
<p>所以会导致很多组件里都会有一个包含基础组件的长列表：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> BaseButton <span class="keyword">from</span> <span class="string">'./BaseButton.vue'</span></span><br><span class="line"><span class="keyword">import</span> BaseIcon <span class="keyword">from</span> <span class="string">'./BaseIcon.vue'</span></span><br><span class="line"><span class="keyword">import</span> BaseInput <span class="keyword">from</span> <span class="string">'./BaseInput.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  components: {</span><br><span class="line">    BaseButton,</span><br><span class="line">    BaseIcon,</span><br><span class="line">    BaseInput</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>而只是用于模板中的一小部分：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BaseInput</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"searchText"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">keydown.enter</span>=<span class="string">"search"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BaseButton</span> @<span class="attr">click</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BaseIcon</span> <span class="attr">name</span>=<span class="string">"search"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseButton</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果你恰好使用了 webpack (或在内部使用了 webpack 的 Vue CLI 3+)，那么就可以使用 require.context 只全局注册这些非常通用的基础组件。<br>这里有一份可以让你在应用入口文件 (比如 src/main.js) 中全局导入基础组件的示例代码：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> upperFirst <span class="keyword">from</span> <span class="string">'lodash/upperFirst'</span></span><br><span class="line"><span class="keyword">import</span> camelCase <span class="keyword">from</span> <span class="string">'lodash/camelCase'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requireComponent = <span class="built_in">require</span>.context(</span><br><span class="line">  <span class="comment">// 其组件目录的相对路径</span></span><br><span class="line">  <span class="string">'./components'</span>,</span><br><span class="line">  <span class="comment">// 是否查询其子目录</span></span><br><span class="line">  <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 匹配基础组件文件名的正则表达式</span></span><br><span class="line">  /Base[A-Z]\w+\.(vue|js)$/</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">requireComponent.keys().forEach(<span class="function"><span class="params">fileName</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// 获取组件配置</span></span><br><span class="line">  <span class="keyword">const</span> componentConfig = requireComponent(fileName)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取组件的 PascalCase 命名</span></span><br><span class="line">  <span class="keyword">const</span> componentName = upperFirst(</span><br><span class="line">    camelCase(</span><br><span class="line">      <span class="comment">// 获取和目录深度无关的文件名</span></span><br><span class="line">      fileName</span><br><span class="line">        .split(<span class="string">'/'</span>)</span><br><span class="line">        .pop()</span><br><span class="line">        .replace(<span class="regexp">/\.\w+$/</span>, <span class="string">''</span>)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 全局注册组件</span></span><br><span class="line">  Vue.component(</span><br><span class="line">    componentName,</span><br><span class="line">    <span class="comment">// 如果这个组件选项是通过 `export default` 导出的，</span></span><br><span class="line">    <span class="comment">// 那么就会优先使用 `.default`，</span></span><br><span class="line">    <span class="comment">// 否则回退到使用模块的根。</span></span><br><span class="line">    componentConfig.default || componentConfig</span><br><span class="line">  )</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>
<p>记住全局注册的行为必须在根 Vue 实例 (通过 new Vue) 创建之前发生。</p>
<h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><ul>
<li>显示普通文本<br><code>&lt;span&gt;消息内容:{{msg}}&lt;/span&gt;</code></li>
<li>JavaScript表达式<br><code>{{ msg.split('').reverse.join('')}}</code><br><code>{{ result &gt;0? 'YES':'NO'}}</code></li>
</ul>
<p>指令(Directives)是带有<code>v-</code>前缀的特殊属性</p>
<ul>
<li>富文本(HTML)<br><code>span V-html="rawHtml"&gt;&lt;/span&gt;</code></li>
<li>普通文本(text<br><code>span V-text="rawHtml"&gt;&lt;/span&gt;</code></li>
</ul>
<h4 id="V-bind"><a href="#V-bind" class="headerlink" title="V-bind"></a>V-bind</h4><ul>
<li><p>作用<br>响应式的更新HTML属性<br>数据双向绑定：<br>数据和页面的双向绑定，修改任何一个，另一个都会同步变化，MVVM也是这个概念，Angular、Vue都实现了数据双向绑定。</p>
</li>
<li><p>常用的场景<br>设置 class, style、href、src等<br><code>&lt;a v-bind:href="url"&gt;...&lt;/a&gt;</code>等同于<code>&lt;a :href="url"&gt;...&lt;/a&gt;</code></p>
</li>
<li><p>设置class</p>
<ul>
<li>对象语法<br><code>v-bind:class="{active:isActive, 'text-danger': hasError }</code></li>
<li>数组语法<br><code>bind:class="[{ active:isActive }, errorClass]"</code><br>加冒号<code>:</code>是<code>v-bind</code>语法</li>
</ul>
</li>
<li><p>设置style</p>
<ul>
<li><p>对象语法<br><code>v-bind:style="{ color: activeColor, fontSize:fontSize +'px'}"</code></p>
</li>
<li><p>数组语法<br><code>v-bind:style="[baseStyles, overridingStyles]"</code></p>
</li>
<li><p>浏览器适配(默认自动适配)<br><code>:style="{display:['-Webkit-box', '-ms-flexbox','flex']}</code></p>
</li>
</ul>
</li>
</ul>
<h4 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h4><p><code>v-else</code>元素必须紧跟在带<code>v-if</code>或者<code>v-else-if</code>的元素的后面<br>不满足条件时，在dom里面找不到元素</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"score&gt;=90"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">"score &gt;=80"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">"score &gt;=60"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>D<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h4><p>通过切换css的 display属性来控制元素的显示与隐藏<br>不满足条件时，在dom里面能找到元素</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">"hasError"</span>&gt;</span>还有错误哦!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="V-tor"><a href="#V-tor" class="headerlink" title="V-tor"></a>V-tor</h4><ul>
<li>基本语法</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">:key</span>=<span class="string">"item id"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item of items"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>key的作用<br>渲染性能优化（修改DOM还是替换DOM）</p>
</li>
<li><p>渲染数组</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in items"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">{{index}}-{{item.message}}</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>渲染对象</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(value, key, index) in object"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">{{index}}.{{key}}:{{value}}</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h4 id="v-on-指令监听-DOM-事件"><a href="#v-on-指令监听-DOM-事件" class="headerlink" title="v-on 指令监听 DOM 事件"></a><code>v-on</code> 指令监听 DOM 事件</h4><p>v-on指令后面“:”后的参数是要触发的事件类型。<br>v-on的事件类型由参数指定。<br><code>&lt;button v-on:click="counter += 1"&gt;Add 1&lt;/button&gt;</code><br><code>&lt;button @click="counter += 1"&gt;Add 1&lt;/button&gt;</code></p>
<h3 id="鼠标事件修饰符"><a href="#鼠标事件修饰符" class="headerlink" title="鼠标事件修饰符"></a>鼠标事件修饰符</h3><ul>
<li>阻止事件冒泡<br><code>&lt;a v-on:click.stop="doThis"&gt;&lt;/a&gt;</code></li>
<li>阻止默认行为<br><code>&lt;a v-on:click.prevent="doThis"&gt;&lt;/a&gt;</code></li>
<li>点击事件只触发一次<br><code>&lt;a v-on:click.once="doThis"&gt;&lt;/a&gt;</code></li>
</ul>
<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><ul>
<li><p>监听事件 每次输入键盘抬起的时候<br><code>&lt;input type="text" v-on:keyup="submit"&gt;</code><br><code>&lt;input type="text" @keyup="submit"&gt;</code></p>
</li>
<li><p>监听回车键<br><code>&lt;input type="text" v-on:keyup.enter="submit"&gt;</code><br><code>&lt;input type="text" @keyup.enter="submit"&gt;</code></p>
</li>
<li><p>监听删除、退格键<br><code>&lt;input type="text" v-on:keyup.delete="submit"&gt;</code><br>`&lt;input type=”text” @keyup=”submit”&gt;</p>
</li>
</ul>
<h3 id="表单输入绑定"><a href="#表单输入绑定" class="headerlink" title="表单输入绑定"></a>表单输入绑定</h3><ul>
<li>基本语法<br><code>&lt;input v-model="message"&gt;</code></li>
<li>单选、多选的绑定</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">"hobby"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">:value</span>=<span class="string">"opion"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(opion, index) in opitons"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span>{{opion.text}}<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>您选择了： {{hobby.text}}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>修饰符：检索代码量<br><code>trim</code>自动过滤首位输入的空白<br><code>number</code>自动转为数值类型</li>
</ul>
<h3 id="过滤器是一个JavaScript函数"><a href="#过滤器是一个JavaScript函数" class="headerlink" title="过滤器是一个JavaScript函数"></a>过滤器是一个JavaScript函数</h3><p>但是在 vue3.x 中过滤器属性已删除，不再支持</p>
<h4 id="过滤器的注册"><a href="#过滤器的注册" class="headerlink" title="过滤器的注册"></a>过滤器的注册</h4><ul>
<li>在组件内注册,在该组件内使用</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">filters: {</span><br><span class="line">  priceFormat: <span class="function"><span class="keyword">function</span>(<span class="params">price</span>) </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 过滤器的内容 格式化价格显示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (price === <span class="literal">undefined</span> || price === <span class="literal">null</span> || <span class="built_in">isNaN</span>(price)) {</span><br><span class="line">      <span class="keyword">return</span> price</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'￥'</span> + (price).toFixed(<span class="number">2</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>过滤器的使用</p>
<ul>
<li>方式一:在双大括号中 已经过时？<br><code>{{ message |priceFormat }}</code></li>
<li>方式二:在v-bind中<br><code>&lt;div v-bind:id="rawld | priceFormat"&gt;&lt;/div&gt;</code></li>
</ul>
</li>
<li><p>全局注册,在所有组件内均可使用</p>
</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(<span class="string">'priceFormat'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>{</span><br><span class="line">    <span class="comment">//过滤器的内容</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>组件中的常见的通信方式</p>
<ul>
<li>参数传递</li>
<li>全局共享<ul>
<li>浏览器的存储(storage、 cookie)</li>
<li>Vuex</li>
</ul>
</li>
</ul>
<p>父组件到子组件的数据传递</p>
<ul>
<li>传递方式<br>为子组件定义<code>props</code>属性</li>
<li>传递的数据类型<br>数值、布尔值、数组、对象</li>
<li>添加数据类型验证</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">  userName1: {</span><br><span class="line">    type:<span class="built_in">String</span>,</span><br><span class="line">    required:<span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>设置默认值<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">  userName1: {</span><br><span class="line">    type:<span class="built_in">Number</span>,</span><br><span class="line">    <span class="keyword">default</span>:<span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>type</code>所支持的类型</p>
<ul>
<li>String:字符串</li>
<li>Object:对象</li>
<li>Number:数字</li>
<li>Date:日期</li>
<li>Boolean:布尔值</li>
<li>Function:方法/函数</li>
<li>Array:数组</li>
<li>Symbol</li>
</ul>
<p>子组件到父组件的数据传递</p>
<ul>
<li>在子组件触发自定义事件<br><code>this.$emit('myEvent')</code></li>
<li>在父组件监听事件<br><code>&lt;my-component v-on:myEvent="doSomething"&gt;&lt;my-component&gt;</code></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/jian-zhi-offer40-50/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/jian-zhi-offer40-50/" class="post-title-link" itemprop="url">剑指offer40 -50</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-27 08:15:24" itemprop="dateModified" datetime="2021-06-27T08:15:24Z">2021-06-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="字符串比较大小就是字典序的大小"><a href="#字符串比较大小就是字典序的大小" class="headerlink" title="字符串比较大小就是字典序的大小"></a>字符串比较大小就是字典序的大小</h2><p>字符串的比较是通过 内置函数 ord() 获得每个字符的 Unicode 编码进行大小比较</p>
<p>单个字符<br>常见ASCII码的大小规则：<code>0～9　&lt;　A～Z　&lt;　a～z</code>。<br>1）数字比字母要小。如 “7”&lt;“F”；<br>2）数字0比数字9要小，并按0到9顺序递增。<br>3）字母A比字母Z要小，并按A到Z顺序递增。<br>4）同个字母的大写字母比小写字母要小32。如“A”&lt;“a” 。</p>
<p>多个字符<br>按位进行字符比对，从字符串的第一个字符开始比较，谁的ASCII码大谁就大。<br>只有首字符相同、再去比较下一个字符，以此类推。如果都相同则相等</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'xnjilhntm'</span>==<span class="string">'xnjilhntm'</span>)   <span class="comment"># True</span></span><br><span class="line">print(<span class="string">'xnjilhntm'</span>&lt;<span class="string">'xnjilhntz'</span>)  <span class="comment"># True</span></span><br><span class="line">print(<span class="string">'abbbbbbb'</span>&gt;<span class="string">'b'</span>)  <span class="comment"># False</span></span><br><span class="line">print(<span class="string">''</span>&gt;<span class="string">'a'</span>)  <span class="comment"># False</span></span><br><span class="line">print(<span class="string">'A'</span>&gt;<span class="string">'a'</span>)  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'3'</span> &gt; <span class="string">'20'</span> &gt; <span class="string">'100'</span>)  <span class="comment"># True</span></span><br><span class="line">print(<span class="string">'20'</span> &lt; <span class="string">'200'</span>)  <span class="comment"># True</span></span><br><span class="line">print(max([<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>]))  <span class="comment"># 3</span></span><br><span class="line">print(max([<span class="string">'31'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>]))  <span class="comment"># 31</span></span><br><span class="line">print(max([<span class="string">'13'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>]))  <span class="comment"># 3</span></span><br><span class="line">print(max([<span class="string">'10'</span>, <span class="string">'11'</span>, <span class="string">'12'</span>]))  <span class="comment"># 12</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="179-最大数"><a href="#179-最大数" class="headerlink" title="179. 最大数"></a>179. 最大数</h2><p>给定一组非负整数 nums，重新排列它们每个数字的顺序（每个数字不可拆分）使之组成一个最大的整数。</p>
<p>注意：输出结果可能非常大，所以你需要返回一个字符串而不是整数。</p>
<p>示例 1：</p>
<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">10</span>,<span class="number">2</span>]</span><br><span class="line">输出：<span class="string">"210"</span></span><br></pre></td></tr></tbody></table></figure>
<p>示例 2：</p>
<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">3</span>,<span class="number">30</span>,<span class="number">34</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">输出：<span class="string">"9534330"</span></span><br></pre></td></tr></tbody></table></figure>
<p>示例 3：</p>
<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">1</span>]</span><br><span class="line">输出：<span class="string">"1"</span></span><br></pre></td></tr></tbody></table></figure>
<p>示例 4：</p>
<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">10</span>]</span><br><span class="line">输出：<span class="string">"10"</span></span><br></pre></td></tr></tbody></table></figure>

<p>想法<br>为了构建最大数字，希望越高位的数字越大越好。</p>
<p>设计一个类似从高位开始的基数排序。但在处理不同位长数的排序时，我发现很难给出一个统一的大小判别规律，例如962,96,9的最优排序是996962，而162,16,1的最优排序是162161。因此这个思路就只能毙掉了</p>
<p>算法<br>首先，将每个整数变成字符串。然后进行排序。<br>如果仅按降序排序，有相同的开头数字的时候会出现问题。<br>比方说，样例 2 按降序排序得到的数字是 95343303 ，<br>然而交换 3 和 30 的位置可以得到正确答案 9534330 。</p>
<p>例如962,96,9962,96,9的最优排序是996962996962,<br>而162,16,1162,16,1的最优排序是162161162161。</p>
<p>因此，每一对数在排序的比较过程中，比较两种连接顺序哪一种更好。<br>可以证明这样的做法是正确的：</p>
<p>假设（不是一般性），某一对整数 a 和 b ，的比较结果是 a 应该在 b 前面，<br>这意味着 a⌢b&gt;b⌢a ，其中 ⌢ 表示连接。<br>如果排序结果是错的，说明存在一个 c ， b 在 c 前面且 c 在 a 的前面。<br>这产生了矛盾，因为 a⌢b&gt;b⌢a 和 b⌢c&gt;c⌢b 意味着 a⌢c&gt;c⌢a 。<br>换言之，我们的自定义比较方法保证了传递性，所以这样子排序是对的。</p>
<p>一旦数组排好了序，最“重要”的数字会在最前面。<br>有一个需要注意的情况是如果数组只包含 0 ，我们直接返回结果 0 即可。<br>否则，我们用排好序的数组形成一个字符串并返回。</p>
<p>反证法：<br>假设存在一个最大序列不满足该排序规则，<br>那么至少存在两个数字的顺序不按上述传递性的定义排列，<br>如……s2s1…….，其中s2s1 &lt; s1s2。接下来，其他字符串的位置不变，<br>按照传递性定义，将s2和s1交换位置后，<br>可证明……s1s2…… &gt; ……s2s1……，这与假设不符，<br>即……s2s1…….并不是最大序列，所以最优序列必定满足上述传递性的定义。</p>
<p>已知：s1应该在s2前边，s2应该在s3前边；<br>求证：s1应该在s3前边。<br>证明：<br>假设“s3在s1前面”成立，则结合已知“s2应该在s3前边”，推出“s2在s1前面”，与已知“s1应该在s2前边”矛盾，故假设不成立，得证。</p>
<ul>
<li><p>时间复杂度：O(nlgn)<br>尽管我们在比较函数中做了一些额外的工作，但是这只是一个常数因子。</p>
</li>
<li><p>空间复杂度：O(n)<br>用了 O(n) 的额外空间去保存 nums 的副本。<br>尽管我们就地进行了一些额外的工作，但最后返回的数组需要 O(n) 的空间。<br>因此，需要的额外空间与 nums 大小成线性关系。</p>
</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">```key```仅仅支持接受一个参数的函数，该函数用于从从每个被排序元素中提取一个比较键(例如，key=str.lower)。对列表中每个项对应的键计算一次，并返回另一个用以排序的值的可调用对象用于整个排序过程。</span><br><span class="line">None的默认值意味着列表项是直接排序的，不需要计算单独的键值。就无法实现两个参数之间的对比</span><br><span class="line">这里传入一个类名，生成的实际上是这个类对象。</span><br><span class="line"></span><br><span class="line">&gt;```sorted()```在对元素进行默认排序是从低到高时会用到小于号&lt;</span><br><span class="line"></span><br><span class="line">经历如下过程：</span><br><span class="line">- 从元素a(用a指代待排序列表中的元素)中提取比较键：LargerNumKey(a)类对象</span><br><span class="line">- 比较这些类对象的大小，&lt;调用LargerNumKey类的自定义的富比较函数__lt__进行排序. </span><br><span class="line">这样就实现了按自定义排序规则进行排序。</span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">from typing import List</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class LargerNumKey(str):</span><br><span class="line">    # LargerNumKey类继承了字符串str类，数组中所有元素类型改为字符串</span><br><span class="line">    # 所以可以直接使用类名作为函数</span><br><span class="line">    def __lt__(x, y):</span><br><span class="line">        """重写了富比较方法"""</span><br><span class="line">        # x 就是 self, 正常点的写法 就是 __lt__(self, y)</span><br><span class="line">        # self 只是惯例，可以叫其他名字</span><br><span class="line">        # 本题根据官方题解的字符排列传导性，</span><br><span class="line">        # x + y &gt; y + x 等价于 x 必须排在 y 的前面，即compare函数返回 -1</span><br><span class="line">        # x + y &lt; y + x 等价于 y 必须排在 x 的前面，即compare函数返回 1</span><br><span class="line">        return x + y &gt; y + x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Solution:</span><br><span class="line">    def largestNumber(self, nums: List[int]) -&gt; str:</span><br><span class="line">        # key指向一个类，利用了类的实例化生成类对象用作比较键。</span><br><span class="line">        # sorted(map(str, nums), key=LargerNumKey) 比较的是字符串大小，我之前想的是根据 __lt__(x, y) 返回的布尔值比较大小。</span><br><span class="line">        largest_num = ''.join(sorted(map(str, nums), key=LargerNumKey))</span><br><span class="line">        # If, after being sorted, the largest number is `0`, the entire number is zero.</span><br><span class="line">        return '0' if largest_num[0] == '0' else largest_num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == "__main__":</span><br><span class="line">    arr = [10, 3, 20]</span><br><span class="line">    s = Solution()</span><br><span class="line">    print(s.largestNumber(arr))  # 32010</span><br><span class="line">    print(s.largestNumber([824, 8247]) == '8248247')</span><br><span class="line">    print(s.largestNumber([0, 0]) == '0')</span><br><span class="line">    print(s.largestNumber([1, 1, 1]) == '111')</span><br><span class="line">    print(s.largestNumber([3, 30, 34, 5, 9]) == "9534330")</span><br><span class="line">    print(s.largestNumber([10, 2]) == '210')</span><br><span class="line">    print(s.largestNumber([0, 2]) == '20')</span><br><span class="line">    print(s.largestNumber([1]) == '1')</span><br><span class="line">    print(s.largestNumber([0]) == '0')</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sqf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">10</span>, <span class="number">3</span>, <span class="number">20</span>]</span><br><span class="line">key=LargerNumKey继承 <span class="built_in">str</span> 的，把int变成<span class="built_in">str</span></span><br><span class="line">x 就是 self</span><br><span class="line"></span><br><span class="line">开始执行<span class="built_in">sort</span>()</span><br><span class="line">默认排序是从低到高，两个元素比较用到小于号&lt;，调用<span class="variable">__lt__</span>(x, y)</span><br><span class="line"></span><br><span class="line"><span class="variable">__lt__</span>(<span class="string">'3'</span>, <span class="string">'10'</span>)</span><br><span class="line">x = <span class="string">'3'</span> y = <span class="string">'10'</span>  </span><br><span class="line"><span class="string">'3'</span> + <span class="string">'10'</span> &gt; <span class="string">'10'</span> + <span class="string">'3'</span>  </span><br><span class="line">返回<span class="literal">True</span></span><br><span class="line">所以 <span class="string">'3'</span> &lt; <span class="string">'10'</span>为 <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="variable">__lt__</span>(<span class="string">'20'</span>, <span class="string">'3'</span>)</span><br><span class="line">x = <span class="string">'20'</span> y = <span class="string">'3'</span>  </span><br><span class="line"><span class="string">'20'</span> + <span class="string">'3'</span> &gt; <span class="string">'3'</span> + <span class="string">'20'</span>  </span><br><span class="line">返回<span class="literal">False</span></span><br><span class="line">所以 <span class="string">'20'</span> &lt; <span class="string">'3'</span>为 <span class="literal">False</span></span><br><span class="line">即<span class="string">'3'</span> &lt; <span class="string">'20'</span>为 <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="variable">__lt__</span>(<span class="string">'20'</span>, <span class="string">'10'</span>)</span><br><span class="line">x = <span class="string">'20'</span> y = <span class="string">'10'</span>  </span><br><span class="line"><span class="string">'20'</span> + <span class="string">'10'</span> &gt; <span class="string">'10'</span> + <span class="string">'20'</span>  </span><br><span class="line">返回<span class="literal">True</span></span><br><span class="line">所以 <span class="string">'20'</span> &lt; <span class="string">'10'</span>为 <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">所以<span class="string">"10"</span>, <span class="string">"3"</span>, <span class="string">"20"</span>的从小到大的顺序为[<span class="string">"3"</span>, <span class="string">"20"</span>, <span class="string">"10"</span>]</span><br><span class="line">largest_num = <span class="string">''</span>.<span class="built_in">join</span>([<span class="string">"3"</span>, <span class="string">"20"</span>, <span class="string">"10"</span>]) = <span class="string">'32010'</span></span><br><span class="line">largest_num[<span class="number">0</span>] == <span class="string">'3'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StrLt</span>(<span class="params">str</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self + y &gt; y + self</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line"></span><br><span class="line">        nums.sort(key=StrLt)</span><br><span class="line">        res = <span class="string">""</span>.join(map(str, nums))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"0"</span> <span class="keyword">if</span> res[<span class="number">0</span>] == <span class="string">"0"</span> <span class="keyword">else</span> res</span><br></pre></td></tr></tbody></table></figure>

<p>把sorted的reverse参数设置为True，排序的顺序是大到小。<br>__lt__方法的返回值和小于的原意一样，<br>可以直接用&lt;、&gt;来比较两个类实例的大小关系，<br>也可以将类传入sorted和sort函数的key参数中，用于类元素组成的序列等的排序。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerNumKey</span>(<span class="params">str</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">x, y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> x + y &lt; y + x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        largest_num = <span class="string">''</span>.join(</span><br><span class="line">            sorted(map(str, nums), key=LargerNumKey, reverse=<span class="literal">True</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> largest_num[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> largest_num</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerNumKey</span>(<span class="params">str</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span>(<span class="params">x, y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> x + y &gt; y + x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        largest_num = <span class="string">''</span>.join(</span><br><span class="line">            sorted(map(str, nums), key=LargerNumKey, reverse=<span class="literal">True</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> largest_num[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> largest_num</span><br></pre></td></tr></tbody></table></figure>

<p>法二<br>不再让LargerNumKey类去继承str类，<br>这个函数的比较实现依赖传入参数value的类型，只要value类型支持‘+’和比较运算符，这个函数就能正常工作。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerNumKey</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.value + other.value &gt; other.value + self.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        ans = <span class="string">''</span>.join(sorted(map(str, nums), key=LargerNumKey))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> ans[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">cmp_large</span>:</span></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, value</span>):</span></span><br><span class="line">                self.value = str(value)</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">                <span class="keyword">return</span> self.value + other.value &gt; other.value + self.value</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">                <span class="keyword">return</span> self.value + other.value &lt; other.value + self.value</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">                <span class="keyword">return</span> self.value + other.value == other.value + self.value</span><br><span class="line"></span><br><span class="line">        res = [cmp_large(value) <span class="keyword">for</span> value <span class="keyword">in</span> nums]</span><br><span class="line">        ans = <span class="string">""</span>.join(a.value <span class="keyword">for</span> a <span class="keyword">in</span> sorted(res))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> ans[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">large_num</span>(<span class="params">str</span>):</span></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">                <span class="keyword">return</span> self + other &gt; other + self</span><br><span class="line"></span><br><span class="line">        largest_num = <span class="string">""</span>.join(sorted(map(str, nums), key=large_num))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> largest_num[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> largest_num</span><br></pre></td></tr></tbody></table></figure>

<p>假设a,b,c分别有m,n,k位数<br>ab &gt; ba =&gt; a * 10^n + b &gt; b * 10^m+ a<br>bc &gt; cb =&gt; b * 10^k + c &gt; c * 10^n + b)<br>可以推出: a * 10^k + c &gt; c * 10^m + a =&gt; ac &gt; ca<br>a=123 b=34，m=3,n=2<br>ab=12334=123*10^2+34;</p>
<p>法三：<br>cmp_to_key 函数，接收比较函数cmp(x, y) 接受两个参数用于比较 2 个对象</p>
<ul>
<li>返回1，是 x &gt; y，</li>
<li>返回-1，表示 x &lt; y，</li>
<li>返回0，表示 x == y</li>
</ul>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> cmp_to_key</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">cmp</span>(<span class="params">x, y</span>):</span></span><br><span class="line">            <span class="keyword">if</span> x + y &gt; y + x:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">            <span class="keyword">elif</span> x + y &lt; y + x:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        ans = <span class="string">""</span>.join(sorted(map(str, nums), key=cmp_to_key(cmp)))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> ans[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">3</span>, <span class="number">20</span>]</span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(x, y)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'20'</span>, <span class="string">'3'</span>)</span></span></span><br><span class="line"><span class="string">'20'</span> + <span class="string">'3'</span> &lt; <span class="string">'3'</span> + <span class="string">'20'</span></span><br><span class="line"><span class="string">'203'</span> &lt; <span class="string">'320'</span></span><br><span class="line">return <span class="number">1</span></span><br><span class="line"><span class="string">'20'</span> &gt; <span class="string">'3'</span> </span><br><span class="line"><span class="string">'3'</span> &lt; <span class="string">'20'</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> cmp_to_key</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">cmp</span>(<span class="params">a, b</span>):</span>  <span class="comment"># eg.30&lt;3</span></span><br><span class="line">            <span class="keyword">if</span> a + b &lt; b + a:  <span class="comment"># 30+3&lt;3+30-&gt;-1</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">            <span class="keyword">elif</span> a + b &gt; b + a:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        res = <span class="string">''</span>.join(</span><br><span class="line">            sorted(map(str, nums), key=cmp_to_key(cmp), reverse=<span class="literal">True</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> res[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> res</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">3</span>, <span class="number">20</span>]</span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(x, y)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'3'</span>, <span class="string">'20'</span>)</span></span></span><br><span class="line"><span class="string">'3'</span> + <span class="string">'20'</span> &gt; <span class="string">'20'</span> + <span class="string">'3'</span></span><br><span class="line"><span class="string">'320'</span> &gt; <span class="string">'203'</span></span><br><span class="line">return <span class="number">1</span></span><br><span class="line"><span class="string">'3'</span> &gt; <span class="string">'20'</span> </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">3</span>, <span class="number">20</span>]</span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(x, y)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'3'</span>, <span class="string">'20'</span>)</span></span></span><br><span class="line"><span class="string">'3'</span> + <span class="string">'20'</span> &gt; <span class="string">'20'</span> + <span class="string">'3'</span></span><br><span class="line">return <span class="number">1</span></span><br><span class="line"><span class="string">'3'</span> &gt; <span class="string">'20'</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'10'</span>, <span class="string">'3'</span>)</span></span></span><br><span class="line"><span class="string">'10'</span> + <span class="string">'3'</span> &lt; <span class="string">'3'</span> + <span class="string">'10'</span></span><br><span class="line">return -<span class="number">1</span></span><br><span class="line"><span class="string">'10'</span> &lt; <span class="string">'3'</span> </span><br><span class="line"><span class="string">'3'</span> &gt; <span class="string">'10'</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'10'</span>, <span class="string">'20'</span>)</span></span></span><br><span class="line"><span class="string">'10'</span> + <span class="string">'20'</span> &lt; <span class="string">'20'</span> + <span class="string">'10'</span></span><br><span class="line">return -<span class="number">1</span></span><br><span class="line"><span class="string">'10'</span> &lt; <span class="string">'20'</span> </span><br><span class="line"><span class="string">'20'</span> &gt; <span class="string">'10'</span> </span><br></pre></td></tr></tbody></table></figure>

<p>如果是int对象比较大小，一般用 x - y来返回，这样就可以很形象的体现两者之间的位置关系了。<br>把数字转换成字符串。然后需要定义一种比较两个数的规则，<br>即把数字m和n拼接为mn，nm，只需要按照字符串大小的比较。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> cmp_to_key</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">str_cmp</span>(<span class="params">a, b</span>):</span></span><br><span class="line">            <span class="keyword">return</span> int(a + b) - int(b + a)</span><br><span class="line"></span><br><span class="line">        strs = [str(i) <span class="keyword">for</span> i <span class="keyword">in</span> nums]</span><br><span class="line">        strs.sort(key=cmp_to_key(str_cmp), reverse=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> str(int(<span class="string">''</span>.join(strs)))</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">strs = [<span class="string">'10'</span>, <span class="string">'3'</span>, <span class="string">'20'</span>]</span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'3'</span>, <span class="string">'20'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">int</span><span class="params">(a + b)</span></span> - int(<span class="selector-tag">b</span> + a)</span><br><span class="line"><span class="function"><span class="title">int</span><span class="params">(<span class="string">'3'</span> + <span class="string">'20'</span>)</span></span> - int(<span class="string">'20'</span> + <span class="string">'3'</span>)</span><br><span class="line"><span class="number">320</span> - <span class="number">203</span> = <span class="number">117</span></span><br><span class="line"><span class="string">'3'</span> &gt; <span class="string">'20'</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'10'</span>, <span class="string">'3'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">int</span><span class="params">(<span class="string">'10'</span> + <span class="string">'3'</span>)</span></span> - int(<span class="string">'3'</span> + <span class="string">'10'</span>)</span><br><span class="line"><span class="number">103</span> - <span class="number">310</span> = -<span class="number">207</span> </span><br><span class="line"><span class="string">'10'</span> &lt; <span class="string">'3'</span> </span><br><span class="line"><span class="string">'3'</span> &gt; <span class="string">'10'</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">cmp</span><span class="params">(<span class="string">'10'</span>, <span class="string">'20'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">int</span><span class="params">(<span class="string">'10'</span> + <span class="string">'20'</span>)</span></span> - int(<span class="string">'20'</span> + <span class="string">'10'</span>)</span><br><span class="line"><span class="number">1020</span> - <span class="number">2010</span> = -<span class="number">990</span></span><br><span class="line"><span class="string">'10'</span> &lt; <span class="string">'20'</span> </span><br><span class="line"><span class="string">'20'</span> &gt; <span class="string">'10'</span> </span><br><span class="line"></span><br><span class="line">-<span class="number">990</span> &lt; -<span class="number">207</span> &lt; <span class="number">117</span></span><br><span class="line">strs = [<span class="string">'3'</span>, <span class="string">'20'</span>, <span class="string">'10'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>返回大于0的值代表x&gt;y，令x排在y后面</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> cmp_to_key</span><br><span class="line">        <span class="comment"># 比较两个数xy和yx的大小</span></span><br><span class="line">        key = cmp_to_key(<span class="keyword">lambda</span> x, y: int(y + x) - int(x + y))</span><br><span class="line">        <span class="comment"># lstrip() 方法: 截掉字符串左边的空格或指定字符  0012-&gt;12</span></span><br><span class="line">        res = <span class="string">''</span>.join(sorted(map(str, nums), key=key)).lstrip(<span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">return</span> res <span class="keyword">or</span> <span class="string">'0'</span></span><br></pre></td></tr></tbody></table></figure>

<p>冒泡<br>把需要判断的两个连续的字符串连起来，直接比较大小，然后根据比较的大小来决定需不需要做交换。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(nums)-i<span class="number">-1</span>):</span><br><span class="line">                <span class="keyword">if</span> str(nums[j]) + str(nums[j+<span class="number">1</span>]) &lt; str(nums[j+<span class="number">1</span>])+ str(nums[j]):</span><br><span class="line">                    nums[j] ,nums[j+<span class="number">1</span>] =nums[j+<span class="number">1</span>], nums[j]</span><br><span class="line">        res=<span class="string">""</span>.join(str(i) <span class="keyword">for</span> i <span class="keyword">in</span> nums)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"0"</span> <span class="keyword">if</span> nums[<span class="number">0</span>]==<span class="number">0</span> <span class="keyword">else</span> res</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(nums) - i - <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> str(nums[j]) + str(nums[j + <span class="number">1</span>]) &gt; str(nums[j + <span class="number">1</span>]) + str(nums[j]):</span><br><span class="line">                    nums[j], nums[j + <span class="number">1</span>] = nums[j + <span class="number">1</span>], nums[j]</span><br><span class="line">        s = <span class="string">''</span></span><br><span class="line">        <span class="keyword">if</span> nums[<span class="number">-1</span>] == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span>(<span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">            s = str(i) + s</span><br><span class="line">        <span class="keyword">return</span> s</span><br></pre></td></tr></tbody></table></figure>

<p>本质是排序算法，只是在判断大小的地方，把直接通过数学&lt;、&gt;的地方改成compare函数；<br>快速排序实现</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span>(<span class="params">self, nums</span>):</span></span><br><span class="line">        self.quickSort(nums, <span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 边界case</span></span><br><span class="line">        <span class="keyword">if</span> nums[<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"0"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>.join((str(n) <span class="keyword">for</span> n <span class="keyword">in</span> nums))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quickSort</span>(<span class="params">self, nums, L, R</span>):</span></span><br><span class="line">        <span class="keyword">if</span> L &lt; R:</span><br><span class="line">            p = self.partition(nums, L, R)</span><br><span class="line">            self.quickSort(nums, L, p - <span class="number">1</span>)</span><br><span class="line">            self.quickSort(nums, p + <span class="number">1</span>, R)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">partition</span>(<span class="params">self, nums, L, R</span>):</span></span><br><span class="line">        plv = nums[L]</span><br><span class="line"></span><br><span class="line">        i = L + <span class="number">1</span></span><br><span class="line">        j = R</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">            <span class="keyword">if</span> self.custom_compare(nums[i], plv) == <span class="number">-1</span>:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.custom_compare(nums[j], plv) == <span class="number">1</span>:</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h2 id="剑指-Offer-45-把数组排成最小的数"><a href="#剑指-Offer-45-把数组排成最小的数" class="headerlink" title="剑指 Offer 45. 把数组排成最小的数"></a>剑指 Offer 45. 把数组排成最小的数</h2><p><strong>输入一个非负整数数组，把数组里所有数字拼接起来排成一个数，打印能拼接出的所有数字中最小的一个。</strong></p>
<blockquote>
<p>输出结果可能非常大，所以你需要返回一个字符串而不是整数<br>拼接起来的数字可能会有前导 0，最后结果不需要去掉前导 0</p>
</blockquote>
<p>示例 1:</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [<span class="number">10</span>,<span class="number">2</span>]</span><br><span class="line">输出: <span class="string">"102"</span></span><br></pre></td></tr></tbody></table></figure>

<p>示例 2:</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [<span class="number">3</span>,<span class="number">30</span>,<span class="number">34</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">输出: <span class="string">"3033459"</span></span><br></pre></td></tr></tbody></table></figure>

<p>本题的“数字”指的就是每个元素整体</p>
<p>放数字的顺序肯定是先放第一位(最左边一位)最小的元素，如果第一位相等，比较第二位….，以此类推。<br>排列大小比较和字符串大小有点区别，比如 3 和 30，明显 30 排在前面比较好，</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(ord(<span class="string">"3"</span> &gt; <span class="string">"30"</span>))  <span class="comment"># TypeError: ord() expected a character, but string of length 2 found</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字典序方法</span><br><span class="line"><span class="string">"330"</span> &gt; <span class="string">"303"</span></span><br><span class="line"><span class="string">"3"</span> + <span class="string">"30"</span> &gt; <span class="string">"30"</span> + <span class="string">"3"</span></span><br><span class="line"><span class="string">"3"</span> &gt; <span class="string">"30"</span></span><br></pre></td></tr></tbody></table></figure>

<p>解题思路：</p>
<ul>
<li><p>此题求拼接起来的 “最小数字” ，本质上是一个排序问题。</p>
</li>
<li><p>排序判断规则： 设 nums 任意两数字的字符串格式 x 和 y ，则</p>
<ul>
<li>若拼接字符串 x + y &gt; y + x ，则 x &gt; y ；</li>
<li>反之，若 x + y &lt; y + x ，则 x &lt; y ；<br>不能加等于，要执行严格弱序，编译器发现相等会反序参数调用。也就是说a compare b和b compare a的结果必须是相反的。  </li>
</ul>
</li>
<li><p>根据以上规则，套用任何排序方法对 nums 执行排序即可。</p>
</li>
</ul>
<p>算法流程：</p>
<ol>
<li>初始化： 字符串列表 strs ，保存各数字的字符串格式；</li>
<li>列表排序： 应用以上 “排序判断规则” ，对 strs 执行排序；</li>
<li>返回值： 拼接 strs 中的所有字符串，并返回。</li>
</ol>
<p>复杂度分析：<br>时间复杂度 O(NlogN) ： N 为最终返回值的字符数量（ strs 列表的长度 ≤ N ）；使用快排或内置函数的平均时间复杂度为 O(NlogN) ，最差为 O(N^2) 。<br>空间复杂度 O(N) ： 字符串列表 strs 占用线性大小的额外空间。</p>
<p>法一<br>快速排序：</p>
<ul>
<li>需修改快速排序函数中的排序判断规则。字符串大小（字典序）对比的实现方法：</li>
</ul>
<p>跟 l 还是 r 比取决于我们把哪个元素看作”哨兵“，跟 l 比也可以，<br>如果要用 l ，哨兵 i, j 的移动先后顺序也要对换<br>因为最后要把 strs[i], strs[l] 交换，因此要保证 ``strs[i] &gt; strs[l]` （和 r 的情况正好相反），这样交换后才符合快排定义。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line"></span><br><span class="line">        arr = [str(i) <span class="keyword">for</span> i <span class="keyword">in</span> nums]</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span>(<span class="params">left, right</span>):</span></span><br><span class="line">            <span class="keyword">if</span> left &gt;= right: <span class="keyword">return</span> </span><br><span class="line">            low, high = left, right</span><br><span class="line">            target = arr[left]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> arr[right] + target &gt;= target + arr[right] : right -= <span class="number">1</span></span><br><span class="line">                arr[left] = arr[right]</span><br><span class="line">                <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> arr[left] + target &lt;= target + arr[left]: left += <span class="number">1</span></span><br><span class="line">                arr[right] = arr[left]</span><br><span class="line">            </span><br><span class="line">            arr[left] = target</span><br><span class="line">            quick_sort(low, left<span class="number">-1</span>)</span><br><span class="line">            quick_sort(right+<span class="number">1</span>, high)</span><br><span class="line"></span><br><span class="line">        quick_sort(<span class="number">0</span>, len(arr)<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(arr)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">fast_sort</span>(<span class="params">l, r</span>):</span></span><br><span class="line">            <span class="keyword">if</span> l &gt;= r: <span class="keyword">return</span></span><br><span class="line">            i, j = l, r</span><br><span class="line">            <span class="keyword">while</span> i &lt; j:</span><br><span class="line">                <span class="keyword">while</span> strs[j] + strs[l] &gt;= strs[l] + strs[j] <span class="keyword">and</span> i &lt; j:</span><br><span class="line">                    j -= <span class="number">1</span>  <span class="comment"># 先移动 j</span></span><br><span class="line">                <span class="keyword">while</span> strs[i] + strs[l] &lt;= strs[l] + strs[i] <span class="keyword">and</span> i &lt; j:</span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">                strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">            strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">            fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">            fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line"></span><br><span class="line">        strs = [str(num) <span class="keyword">for</span> num <span class="keyword">in</span> nums]</span><br><span class="line">        fast_sort(<span class="number">0</span>, len(strs) - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(strs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    solution = Solution()</span><br><span class="line">    nums1 = [<span class="number">10</span>, <span class="number">2</span>]</span><br><span class="line">    nums2 = [<span class="number">3</span>, <span class="number">30</span>, <span class="number">34</span>, <span class="number">5</span>, <span class="number">9</span>]</span><br><span class="line">    print(solution.minNumber(nums1))  <span class="comment"># 102</span></span><br><span class="line">    <span class="comment"># print(solution.minNumber(nums2))  # 3033459</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">3</span>, <span class="number">30</span>, <span class="number">34</span>, <span class="number">5</span>, <span class="number">9</span>]</span><br><span class="line">strs = ['<span class="number">3</span>', '<span class="number">30</span>', '<span class="number">34</span>', '<span class="number">5</span>', '<span class="number">9</span>']</span><br><span class="line">fast_sort(<span class="number">0</span>, len(strs) - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">5</span> - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">i = l = <span class="number">0</span>, j = r = <span class="number">4</span></span><br><span class="line">strs[j] + strs[l] &gt;= strs[l] + strs[j] and i &lt; j</span><br><span class="line">strs[<span class="number">4</span>] + strs[<span class="number">0</span>] &gt; strs[<span class="number">0</span>] + strs[<span class="number">4</span>] and <span class="number">0</span> &lt; <span class="number">4</span></span><br><span class="line">'<span class="number">9</span>' + '<span class="number">3</span>' &gt; '<span class="number">3</span>' + '<span class="number">9</span>' and <span class="number">0</span> &lt; <span class="number">4</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">4</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">3</span></span><br><span class="line">strs[<span class="number">3</span>] + strs[<span class="number">0</span>] &gt; strs[<span class="number">0</span>] + strs[<span class="number">3</span>] and <span class="number">0</span> &lt; <span class="number">3</span></span><br><span class="line">'<span class="number">5</span>' + '<span class="number">3</span>' &gt; '<span class="number">3</span>' + '<span class="number">5</span>' and <span class="number">0</span> &lt; <span class="number">3</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">3</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">2</span></span><br><span class="line">strs[<span class="number">2</span>] + strs[<span class="number">0</span>] &gt; strs[<span class="number">0</span>] + strs[<span class="number">2</span>] and <span class="number">0</span> &lt; <span class="number">2</span></span><br><span class="line">'<span class="number">34</span>' + '<span class="number">3</span>' &gt; '<span class="number">3</span>' + '<span class="number">34</span>' and <span class="number">0</span> &lt; <span class="number">2</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">2</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">1</span></span><br><span class="line">strs[<span class="number">1</span>] + strs[<span class="number">0</span>] &lt; strs[<span class="number">0</span>] + strs[<span class="number">1</span>] and <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line">'<span class="number">30</span>' + '<span class="number">3</span>' &lt; '<span class="number">3</span>' + '<span class="number">30</span>' and <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line">i = i + <span class="number">1</span> = <span class="number">0</span> + <span class="number">1</span> = j </span><br><span class="line">strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">strs[<span class="number">1</span>], strs[<span class="number">1</span>] = strs[<span class="number">1</span>], strs[<span class="number">1</span>]</span><br><span class="line">跳出循环</span><br><span class="line">strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">strs[<span class="number">1</span>], strs[<span class="number">0</span>] = strs[<span class="number">0</span>], strs[<span class="number">1</span>]</span><br><span class="line">strs = ['<span class="number">30</span>', '<span class="number">3</span>', '<span class="number">34</span>', '<span class="number">5</span>', '<span class="number">9</span>']</span><br><span class="line"></span><br><span class="line">fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">1</span> - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">i = <span class="number">0</span> = j</span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">fast_sort(<span class="number">1</span> + <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fast_sort(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">i = l = <span class="number">2</span>, j = r = <span class="number">4</span></span><br><span class="line">strs[j] + strs[l] &gt;= strs[l] + strs[j] and i &lt; j</span><br><span class="line">strs[<span class="number">4</span>] + strs[<span class="number">2</span>] &gt; strs[<span class="number">2</span>] + strs[<span class="number">4</span>] and <span class="number">2</span> &lt; <span class="number">4</span></span><br><span class="line">'<span class="number">9</span>' + '<span class="number">34</span>' &gt; '<span class="number">34</span>' + '<span class="number">9</span>' and <span class="number">2</span> &lt; <span class="number">4</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">4</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">3</span></span><br><span class="line">strs[<span class="number">3</span>] + strs[<span class="number">2</span>] &gt; strs[<span class="number">2</span>] + strs[<span class="number">3</span>] and <span class="number">2</span> &lt; <span class="number">3</span></span><br><span class="line">'<span class="number">5</span>' + '<span class="number">34</span>' &gt; '<span class="number">34</span>' + '<span class="number">5</span>' and <span class="number">2</span> &lt; <span class="number">3</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">3</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">2</span> = i</span><br><span class="line">strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">strs[<span class="number">2</span>], strs[<span class="number">2</span>] = strs[<span class="number">2</span>], strs[<span class="number">2</span>]</span><br><span class="line">跳出循环</span><br><span class="line">strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">strs[<span class="number">2</span>], strs[<span class="number">2</span>] = strs[<span class="number">2</span>], strs[<span class="number">2</span>]</span><br><span class="line">strs = ['<span class="number">30</span>', '<span class="number">3</span>', '<span class="number">34</span>', '<span class="number">5</span>', '<span class="number">9</span>']</span><br><span class="line"></span><br><span class="line">fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">2</span>, <span class="number">2</span> - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">fast_sort(<span class="number">2</span> + <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fast_sort(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">i = l = <span class="number">3</span>, j = r = <span class="number">4</span></span><br><span class="line">strs[j] + strs[l] &gt;= strs[l] + strs[j] and i &lt; j</span><br><span class="line">strs[<span class="number">4</span>] + strs[<span class="number">3</span>] &gt; strs[<span class="number">3</span>] + strs[<span class="number">4</span>] and <span class="number">3</span> &lt; <span class="number">4</span></span><br><span class="line">'<span class="number">9</span>' + '<span class="number">5</span>' &gt; '<span class="number">5</span>' + '<span class="number">9</span>' and <span class="number">3</span> &lt; <span class="number">4</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">4</span> - <span class="number">1</span> = <span class="number">0</span> = <span class="number">3</span> = i</span><br><span class="line">strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">strs[<span class="number">3</span>], strs[<span class="number">3</span>] = strs[<span class="number">3</span>], strs[<span class="number">3</span>]</span><br><span class="line">跳出循环</span><br><span class="line">strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">strs[<span class="number">3</span>], strs[<span class="number">3</span>] = strs[<span class="number">3</span>], strs[<span class="number">3</span>]</span><br><span class="line">strs = ['<span class="number">30</span>', '<span class="number">3</span>', '<span class="number">34</span>', '<span class="number">5</span>', '<span class="number">9</span>']</span><br><span class="line"></span><br><span class="line">fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">fast_sort(<span class="number">3</span> + <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">fast_sort(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">reuturn</span><br><span class="line"></span><br><span class="line">return ''.join(strs) = '<span class="number">3303459</span>'</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight lsl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">10</span>, <span class="number">2</span>]</span><br><span class="line">strs = ['<span class="number">10</span>', '<span class="number">2</span>']</span><br><span class="line">fast_sort(<span class="number">0</span>, len(strs) - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">2</span> - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">i = l = <span class="number">0</span>, j = r = <span class="number">1</span></span><br><span class="line">strs[j] + strs[l] &gt;= strs[l] + strs[j] and i &lt; j</span><br><span class="line">strs[<span class="number">1</span>] + strs[<span class="number">0</span>] &gt; strs[<span class="number">0</span>] + strs[<span class="number">1</span>] and <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line">'<span class="number">2</span>' + '<span class="number">10</span>' &gt; '<span class="number">10</span>' + '<span class="number">2</span>' and <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">1</span> - <span class="number">1</span> = <span class="number">0</span> = i</span><br><span class="line"></span><br><span class="line">strs[j] + strs[l] &gt;= strs[l] + strs[j] and i &lt; j</span><br><span class="line">strs[<span class="number">1</span>] + strs[<span class="number">0</span>] &gt;= strs[<span class="number">0</span>] + strs[<span class="number">1</span>] and <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line">j = j - <span class="number">1</span> = <span class="number">1</span> - <span class="number">1</span> = <span class="number">0</span> = i</span><br><span class="line">strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">strs[<span class="number">0</span>], strs[<span class="number">0</span>] = strs[<span class="number">0</span>], strs[<span class="number">0</span>]</span><br><span class="line">j = <span class="number">0</span> = i</span><br><span class="line"></span><br><span class="line">strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">strs[<span class="number">0</span>], strs[<span class="number">0</span>] = strs[<span class="number">0</span>], strs[<span class="number">0</span>]</span><br><span class="line">跳出循环</span><br><span class="line">strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">strs[<span class="number">0</span>], strs[<span class="number">0</span>] = strs[<span class="number">0</span>], strs[<span class="number">0</span>]</span><br><span class="line">strs = ['<span class="number">10</span>', '<span class="number">2</span>']</span><br><span class="line"></span><br><span class="line">fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">0</span> - <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">i = l = <span class="number">0</span> &gt; j = r = <span class="number">-1</span></span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">fast_sort(<span class="number">0</span> + <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fast_sort(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">i = l = <span class="number">1</span> = j = r </span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">return ''.join(strs) = '<span class="number">102</span>'</span><br></pre></td></tr></tbody></table></figure>

<p>本文排序规则的传递性证明：</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">字符串 xy &lt; yx , yz &lt; zy ，需证明 xz &lt; zx 一定成立。</span><br><span class="line"></span><br><span class="line">设十进制数 x, y, z 分别有 a, b, c 位，则有：</span><br><span class="line">（左边是字符串拼接，右边是十进制数计算，两者等价）</span><br><span class="line">xy = x * <span class="number">10</span>^b + y </span><br><span class="line">yx = y * <span class="number">10</span>^a + x</span><br><span class="line"></span><br><span class="line">则 xy &lt; yx 可转化为：</span><br><span class="line">x * <span class="number">10</span>^b + y &lt; y * <span class="number">10</span>^a + x</span><br><span class="line">x (<span class="number">10</span>^b - <span class="number">1</span>) &lt; y (<span class="number">10</span>^a - <span class="number">1</span>)</span><br><span class="line">x / (<span class="number">10</span>^a - <span class="number">1</span>) &lt; y / (<span class="number">10</span>^b - <span class="number">1</span>)     ①</span><br><span class="line"></span><br><span class="line">同理， 可将 yz &lt; zy 转化为：</span><br><span class="line">y / (<span class="number">10</span>^b - <span class="number">1</span>) &lt; z / (<span class="number">10</span>^c - <span class="number">1</span>)     ②</span><br><span class="line"></span><br><span class="line">将 ① ② 合并，整理得：</span><br><span class="line">x / (<span class="number">10</span>^a - <span class="number">1</span>) &lt; y / (<span class="number">10</span>^b - <span class="number">1</span>) &lt; z / (<span class="number">10</span>^c - <span class="number">1</span>)</span><br><span class="line">x / (<span class="number">10</span>^a - <span class="number">1</span>) &lt; z / (<span class="number">10</span>^c - <span class="number">1</span>)</span><br><span class="line">x (<span class="number">10</span>^c - <span class="number">1</span>) &lt; z (<span class="number">10</span>^a - <span class="number">1</span>)</span><br><span class="line">x * <span class="number">10</span>^c + z &lt; z * <span class="number">10</span>^a + x</span><br><span class="line">∴  可推出 xz &lt; zx ，传递性证毕</span><br></pre></td></tr></tbody></table></figure>

<p>跟 l 还是 r 比取决于我们把哪个元素看作”哨兵“，跟 r 比也可以，<br>如果要用 r ，哨兵 i, j 的移动先后顺序也要对换<br>因为最后要把 strs[i], strs[r] 交换，因此要保证 ``strs[i] &gt; strs[r]` （和 l 的情况正好相反），这样交换后才符合快排定义。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">fast_sort</span>(<span class="params">l , r</span>):</span></span><br><span class="line">            <span class="keyword">if</span> l &gt;= r: <span class="keyword">return</span></span><br><span class="line">            i, j = l, r</span><br><span class="line">            <span class="keyword">while</span> i &lt; j:</span><br><span class="line">                <span class="keyword">while</span> strs[i] + strs[r] &lt;= strs[r] + strs[i] <span class="keyword">and</span> i &lt; j:</span><br><span class="line">                    i += <span class="number">1</span>  <span class="comment"># 先移动 i</span></span><br><span class="line">                <span class="keyword">while</span> strs[j] + strs[r] &gt;= strs[r] + strs[j] <span class="keyword">and</span> i &lt; j: </span><br><span class="line">                    j -= <span class="number">1</span></span><br><span class="line">                strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">            strs[i], strs[r] = strs[r], strs[i]</span><br><span class="line">            fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">            fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">        </span><br><span class="line">        strs = [str(num) <span class="keyword">for</span> num <span class="keyword">in</span> nums]</span><br><span class="line">        fast_sort(<span class="number">0</span>, len(strs) - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(strs)</span><br></pre></td></tr></tbody></table></figure>

<p>函数 A 内部 定义 函数B ，则 B 的用途就是让 A 去调用的。函数 A 外，是无法访问函数 B 的，可以运行以下代码理解：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        strs = [str(num) <span class="keyword">for</span> num <span class="keyword">in</span> nums]</span><br><span class="line">        fast_sort(<span class="number">0</span>, len(strs) - <span class="number">1</span>) <span class="comment"># 报错 not defined</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(strs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">fast_sort</span>(<span class="params">l , r</span>):</span></span><br><span class="line">            <span class="keyword">if</span> l &gt;= r: <span class="keyword">return</span></span><br><span class="line">            i, j = l, r</span><br><span class="line">            <span class="keyword">while</span> i &lt; j:</span><br><span class="line">                <span class="keyword">while</span> strs[j] + strs[l] &gt;= strs[l] + strs[j] <span class="keyword">and</span> i &lt; j: j -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> strs[i] + strs[l] &lt;= strs[l] + strs[i] <span class="keyword">and</span> i &lt; j: i += <span class="number">1</span></span><br><span class="line">                strs[i], strs[j] = strs[j], strs[i]</span><br><span class="line">            strs[i], strs[l] = strs[l], strs[i]</span><br><span class="line">            fast_sort(l, i - <span class="number">1</span>)</span><br><span class="line">            fast_sort(i + <span class="number">1</span>, r)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>内置函数：<br>需定义排序规则：<br>Python 定义在函数 sort_rule(x, y) 中；<br>本题可以转化为排序问题，因此我们要定义一个“有效的排序规则”，然后按照这个排序规则、使用任意排序方法，将数组排序~<br>3.8 新版功能.<br><code>functools.cmp_to_key(func)</code><br>将(旧式的)比较函数转换为新式的 key function . 在类似于 sorted() ， min() ， max() ， heapq.nlargest() ， heapq.nsmallest() ， itertools.groupby() 等函数的 key 参数中使用。此函数主要用作将 Python 2 程序转换至新版的转换工具，以保持对比较函数的兼容。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">sort_rule</span>(<span class="params">x, y</span>):</span></span><br><span class="line">            a, b = x + y, y + x</span><br><span class="line">            <span class="keyword">if</span> a &gt; b: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> a &lt; b: <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        strs = [str(num) <span class="keyword">for</span> num <span class="keyword">in</span> nums]</span><br><span class="line">        strs.sort(key=functools.cmp_to_key(sort_rule))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(strs)</span><br></pre></td></tr></tbody></table></figure>


<p>key 指向这个cmpSmaller ，然后sorted调用过程中，会强制转换类型 将原先的 str 字符串类型改为 这个 cmpSmaller 类型，然后排序的时候，就会调用这个 重写 的 <strong>lt</strong> 方法，从而使用了自定义的 排序规则，得到了最终结果。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cmpSmaller</span>(<span class="params">str</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self + y &lt; y + self  <span class="comment"># 字符串拼接比较(两两比较)</span></span><br><span class="line">    <span class="comment"># 按由小到大来排列</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        res=sorted(map(str, nums),key=cmpSmaller)</span><br><span class="line">        smallest = <span class="string">''</span>.join(res)</span><br><span class="line">        <span class="keyword">return</span> smallest</span><br></pre></td></tr></tbody></table></figure>


<p>冒泡</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumber</span>(<span class="params">self, nums: List[int]</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            nums[i] = str(nums[i])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>,len(nums)):</span><br><span class="line">                <span class="keyword">if</span> nums[i] + nums[j] &gt; nums[j] + nums[i]:</span><br><span class="line">                    nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(nums)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h2 id="386-字典序排数"><a href="#386-字典序排数" class="headerlink" title="386. 字典序排数"></a>386. 字典序排数</h2><p><strong>给定一个整数&nbsp;n, 返回从&nbsp;1&nbsp;到&nbsp;n&nbsp;的字典顺序。</strong></p>
<p>例如，<br>给定 n =13，返回 [1,10,11,12,13,2,3,4,5,6,7,8,9] 。</p>
<p>例子是1在10之前<br>数字最高位是以1-9开头的，<br>给你一个数字1，把这个数字开头的，并且不大于n的所有数字按照位数由低到高依次排列<br>给你一个数字2，把这个数字开头的，并且不大于n的所有数字按照位数由低到高依次排列<br>当两个数字最高位相同的时候，就需要比较其次高位，比较方式与最高位的比较方式是一致的，也就是递归下去。（这是我的理解，可能有点不太准确）</p>
<p>将n个数按照一定的顺序构建成树，然后从左到右对每棵树进行dfs就行了</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                    root</span><br><span class="line">            /           |            |          \  </span><br><span class="line">            <span class="number">1</span>            <span class="number">2</span>            <span class="number">3</span>    ...     <span class="number">9</span></span><br><span class="line">        /      \       \ </span><br><span class="line">      <span class="number">10</span>        <span class="number">11</span>    </span><br><span class="line">   /  |   \     /  |  |  \ </span><br><span class="line"><span class="number">100</span>  <span class="number">101</span>   <span class="number">109</span> <span class="number">110</span></span><br></pre></td></tr></tbody></table></figure>

<p>时间复杂度: O(N)，使用了递归，时间复杂度为进入递归函数的次数，我们遍历了每一个结点<br>空间复杂度: O(1)</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lexicalOrder</span>(<span class="params">self, n: int</span>) -&gt; List[int]:</span></span><br><span class="line">        res = []</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">cur</span>):</span>  <span class="comment"># N叉树 深度优先搜索 对每棵树进行dfs cur为根结点</span></span><br><span class="line">            <span class="keyword">if</span> cur &gt; n:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            res.append(cur)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10</span>):  <span class="comment"># 遍历0 ~ 9</span></span><br><span class="line">                dfs(cur * <span class="number">10</span> + j)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):  <span class="comment"># 遍历1 ~ 9</span></span><br><span class="line">            dfs(i)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Solution()</span><br><span class="line">print(s.lexicalOrder(<span class="number">13</span>))</span><br><span class="line"><span class="comment"># [1, 10, 11, 12, 13, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">print(s.lexicalOrder(<span class="number">0</span>))  <span class="comment"># []</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">13</span></span><br><span class="line">res = []</span><br><span class="line"></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line">dfs(<span class="number">1</span>)</span><br><span class="line">    cur = <span class="number">1</span> &lt; n = <span class="number">13</span></span><br><span class="line">    res.append(cur)</span><br><span class="line">    res= [<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">    dfs(<span class="number">10</span>)</span><br><span class="line">        cur = <span class="number">10</span> &lt; n = <span class="number">13</span></span><br><span class="line">        res.append(cur)</span><br><span class="line">        res= [<span class="number">1</span>, <span class="number">10</span>]</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">10</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">        dfs(<span class="number">100</span>)</span><br><span class="line">            cur = <span class="number">100</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        j = <span class="number">1</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">10</span> * <span class="number">10</span> + <span class="number">1</span>)</span><br><span class="line">        dfs(<span class="number">101</span>)</span><br><span class="line">            cur = <span class="number">101</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>        </span><br><span class="line">        ....</span><br><span class="line">        j = <span class="number">9</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">10</span> * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">109</span>)</span><br><span class="line">            cur = <span class="number">109</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>               </span><br><span class="line"></span><br><span class="line">    j = <span class="number">1</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">1</span>)</span><br><span class="line">    dfs(<span class="number">11</span>)</span><br><span class="line">        cur = <span class="number">11</span> &lt; n = <span class="number">13</span></span><br><span class="line">        res.append(cur)</span><br><span class="line">        res= [<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>]</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">11</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">        dfs(<span class="number">110</span>)</span><br><span class="line">            cur = <span class="number">110</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        j = <span class="number">1</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">11</span> * <span class="number">10</span> + <span class="number">1</span>)</span><br><span class="line">        dfs(<span class="number">111</span>)</span><br><span class="line">            cur = <span class="number">111</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>  </span><br><span class="line">        ....</span><br><span class="line">        j = <span class="number">9</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">11</span> * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">119</span>)</span><br><span class="line">            cur = <span class="number">119</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>      </span><br><span class="line"></span><br><span class="line">    j = <span class="number">2</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">2</span>)</span><br><span class="line">    dfs(<span class="number">12</span>)</span><br><span class="line">        cur = <span class="number">12</span> &lt; n = <span class="number">13</span></span><br><span class="line">        res.append(cur)</span><br><span class="line">        res= [<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">12</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">        dfs(<span class="number">120</span>)</span><br><span class="line">            cur = <span class="number">120</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        j = <span class="number">1</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">12</span> * <span class="number">10</span> + <span class="number">1</span>)</span><br><span class="line">        dfs(<span class="number">121</span>)</span><br><span class="line">            cur = <span class="number">121</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>  </span><br><span class="line">        ....</span><br><span class="line">        j = <span class="number">9</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">12</span> * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">129</span>)</span><br><span class="line">            cur = <span class="number">129</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>  </span><br><span class="line"></span><br><span class="line">    j = <span class="number">3</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">3</span>)</span><br><span class="line">    dfs(<span class="number">13</span>)</span><br><span class="line">        cur = <span class="number">13</span> = n</span><br><span class="line">        res.append(cur)</span><br><span class="line">        res= [<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>]</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">13</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">        dfs(<span class="number">130</span>)</span><br><span class="line">            cur = <span class="number">130</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        j = <span class="number">1</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">        dfs(<span class="number">13</span> * <span class="number">10</span> + <span class="number">1</span>)</span><br><span class="line">        dfs(<span class="number">131</span>)</span><br><span class="line">            cur = <span class="number">131</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>  </span><br><span class="line"></span><br><span class="line">        ....</span><br><span class="line"></span><br><span class="line">        j = <span class="number">9</span></span><br><span class="line">        dfs(cur * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">13</span> * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">        dfs(<span class="number">139</span>)</span><br><span class="line">            cur = <span class="number">139</span> &gt; n = <span class="number">13</span></span><br><span class="line">            <span class="keyword">return</span>  </span><br><span class="line"></span><br><span class="line">    j = <span class="number">4</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">4</span>)</span><br><span class="line">    dfs(<span class="number">14</span>)</span><br><span class="line">        cur = <span class="number">14</span> &gt; n = <span class="number">13</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    j = <span class="number">5</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">5</span>)</span><br><span class="line">    dfs(<span class="number">15</span>)</span><br><span class="line">        cur = <span class="number">15</span> &gt; n = <span class="number">13</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    j = <span class="number">9</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">1</span> * <span class="number">10</span> + <span class="number">9</span>)</span><br><span class="line">    dfs(<span class="number">19</span>)</span><br><span class="line">        cur = <span class="number">19</span> &gt; n = <span class="number">13</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">i = <span class="number">2</span></span><br><span class="line">dfs(<span class="number">2</span>)</span><br><span class="line">    cur = <span class="number">2</span> &lt; n = <span class="number">13</span></span><br><span class="line">    res.append(cur)</span><br><span class="line">    res= [<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">2</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">    dfs(<span class="number">20</span>)</span><br><span class="line">        cur = <span class="number">20</span> &gt; n = <span class="number">13</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">i = <span class="number">3</span></span><br><span class="line">dfs(<span class="number">3</span>)</span><br><span class="line">    cur = <span class="number">3</span> &lt; n = <span class="number">13</span></span><br><span class="line">    res.append(cur)</span><br><span class="line">    res= [<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    dfs(cur * <span class="number">10</span> + j)</span><br><span class="line">    dfs(<span class="number">3</span> * <span class="number">10</span> + <span class="number">0</span>)</span><br><span class="line">    dfs(<span class="number">30</span>)</span><br><span class="line">        cur = <span class="number">30</span> &gt; n = <span class="number">13</span></span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lexicalOrder</span>(<span class="params">self, n: int</span>) -&gt; List[int]:</span></span><br><span class="line">        self.n, self.res = n, []</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">cur</span>):</span> </span><br><span class="line">            <span class="keyword">if</span> cur &gt; self.n: <span class="keyword">return</span> </span><br><span class="line">            self.res.append(cur)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">                dfs(<span class="number">10</span> * cur + i)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">            dfs(i)</span><br><span class="line">        <span class="keyword">return</span> self.res</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lexicalOrder</span>(<span class="params">self, n: int</span>) -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">return</span> sorted(range(<span class="number">1</span>, n+<span class="number">1</span>), key=str) </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lexicalOrder</span>(<span class="params">self, n: int</span>) -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">return</span> sorted(list(range(<span class="number">1</span>,n+<span class="number">1</span>)),key=<span class="keyword">lambda</span> x:str(x))</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h2 id="剑指-Offer-19-正则表达式匹配"><a href="#剑指-Offer-19-正则表达式匹配" class="headerlink" title="剑指 Offer 19. 正则表达式匹配"></a>剑指 Offer 19. 正则表达式匹配</h2><p><strong>请实现一个函数用来匹配包含<code>'. '</code>和<code>'*'</code>的正则表达式。模式中的字符<code>'.'</code>表示任意一个字符，而<code>'*'</code>表示它前面的字符可以出现任意次（含0次）。在本题中，匹配是指字符串的所有字符匹配整个模式。例如，字符串<code>"aaa"</code>与模式<code>"a.a"</code>和<code>"ab*ac*a"</code>匹配，但与<code>"aa.a"</code>和<code>"ab*a"</code>均不匹配。</strong></p>
<p>示例 1:</p>
<figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">输入:</span></span><br><span class="line">s = <span class="string">"aa"</span></span><br><span class="line">p = <span class="string">"a"</span></span><br><span class="line"><span class="section">输出: false</span></span><br><span class="line"><span class="section">解释: "a" 无法匹配 "aa" 整个字符串。</span></span><br></pre></td></tr></tbody></table></figure>

<p>示例 2:</p>
<figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入:</span><br><span class="line">s = <span class="comment">"aa"</span></span><br><span class="line">p = <span class="comment">"a*"</span></span><br><span class="line">输出: <span class="keyword">true</span></span><br><span class="line">解释: 因为 <span class="string">'*'</span> 代表可以匹配零个或多个前面的那一个元素, 在这里前面的元素就是 <span class="string">'a'</span>。因此，字符串 <span class="comment">"aa"</span> 可被视为 <span class="string">'a'</span> 重复了一次。</span><br></pre></td></tr></tbody></table></figure>

<p>示例 3:</p>
<figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">输入:</span></span><br><span class="line">s = <span class="string">"ab"</span></span><br><span class="line">p = <span class="string">".*"</span></span><br><span class="line"><span class="section">输出: true</span></span><br><span class="line"><span class="section">解释: ".*" 表示可匹配零个或多个（'*'）任意字符（'.'）。</span></span><br></pre></td></tr></tbody></table></figure>

<p>示例 4:</p>
<figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入:</span><br><span class="line">s = <span class="comment">"aab"</span></span><br><span class="line">p = <span class="comment">"c*a*b"</span></span><br><span class="line">输出: <span class="keyword">true</span></span><br><span class="line">解释: 因为 <span class="string">'*'</span> 表示零个或多个，这里 <span class="string">'c'</span> 为 <span class="number">0</span> 个, <span class="string">'a'</span> 被重复一次。因此可以匹配字符串 <span class="comment">"aab"</span>。</span><br></pre></td></tr></tbody></table></figure>
<p>示例 5:</p>
<figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">输入:</span></span><br><span class="line">s = <span class="string">"mississippi"</span></span><br><span class="line">p = <span class="string">"mis*is*p*."</span></span><br><span class="line"><span class="section">输出: false</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>s 可能为空，且只包含从 a-z 的小写字母。</li>
<li>p 可能为空，且只包含从 a-z 的小写字母以及字符 . 和 <em>，无连续的 ‘</em>‘。</li>
</ul>
<p>解题思路：</p>
<blockquote>
<p>设 s 的长度为 n ， p 的长度为 m ；将 s 的第 i 个字符记为 s_i ，p 的第 j 个字符记为 p_j ，将 s 的前 i 个字符组成的子字符串记为 s[:i] , 同理将 p 的前 j 个字符组成的子字符串记为 p[:j] 。</p>
</blockquote>
<blockquote>
<p>因此，本题可转化为求 s[:n] 是否能和 p[:m] 匹配。</p>
</blockquote>
<p>总体思路是从 s[:1] 和 p[:1] 是否能匹配开始判断，每轮添加一个字符并判断是否能匹配，直至添加完整个字符串 s 和 p 。展开来看，假设 s[:i] 与 p[:j] 可以匹配，那么下一状态有两种：</p>
<ol>
<li>添加一个字符 s_{i+1} 后是否能匹配？</li>
<li>添加字符 p_{j+1} 后是否能匹配？</li>
</ol>
<p>因此，本题的状态共有 m×n 种，应定义状态矩阵 dp ，dp[i][j] 代表 s[:i] 与 p[:j] 是否可以匹配。</p>
<p>做好状态定义，接下来就是根据 「<code>普通字符</code>」 , 「<code>.</code>」 , 「<code>*</code>」三种字符的功能定义，分析出动态规划的转移方程。</p>
<h3 id="动态规划解析："><a href="#动态规划解析：" class="headerlink" title="动态规划解析："></a>动态规划解析：</h3><ul>
<li><p>状态定义： 设动态规划矩阵 <code>dp</code> ， <code>dp[i][j]</code> 代表字符串 <code>s</code> 的前 <code>i</code> 个字符和 <code>p</code> 的前 <code>j</code> 个字符能否匹配。</p>
</li>
<li><p>转移方程： 需要注意，由于 <code>dp[0][0]</code> 代表的是空字符的状态， 因此 <code>dp[i][j]</code> 对应的添加字符是 <code>s[i - 1]</code> 和 <code>p[j - 1]</code> 。</p>
</li>
</ul>
<p>当 <code>p[j - 1] = '*'</code> 时， dp[i][j] 在当以下任一情况为 truetrue 时等于 truetrue ：</p>
<p>dp[i][j - 2]： 即将字符组合 p[j - 2] * 看作出现 0 次时，能否匹配；<br>dp[i][j - 1]： 即将字符组合 p[j - 2] * 看作出现 1 次时，能否匹配；<br>dp[i - 1][j] 且 s[i - 1] = p[j - 2]: 即让字符 p[j - 2] 多出现 1 次时，能否匹配；<br>dp[i - 1][j] 且 p[j - 2] = ‘.’: 即让字符 ‘.’ 多出现 1 次时，能否匹配；<br>当 p[j - 1] != ‘*’ 时， dp[i][j] 在当以下任一情况为 truetrue 时等于 truetrue ：</p>
<p>dp[i - 1][j - 1] 且 s[i - 1] = p[j - 1]： 即让字符 p[j - 1] 多出现一次时，能否匹配；<br>dp[i - 1][j - 1] 且 p[j - 1] = ‘.’： 即将字符 . 看作字符 s[i - 1] 时，能否匹配；<br>初始化： 需要先初始化 dp 矩阵首行，以避免状态转移时索引越界。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">```dp[0][j] = dp[0][j - 2]``` 且 ```p[j - 1] = '*'```： 首行 s 为空字符串，因此当 p 的偶数位为 * 时才能够匹配（即让 p 的奇数位出现 0 次，保持 p 是空字符串）。因此，循环遍历字符串 p ，步长为 2（即只看偶数位）。</span><br><span class="line"></span><br><span class="line">- 返回值： ```dp``` 矩阵右下角字符，代表字符串 s 和 p 能否匹配。</span><br><span class="line"></span><br><span class="line">时间复杂度 O(MN) ： 其中 M, N 分别为 ```s``` 和 ```p``` 的长度，状态转移需遍历整个 ```dp``` 矩阵。</span><br><span class="line">空间复杂度 O(MN) ： 状态矩阵 ```dp``` 使用 O(MN) 的额外空间。</span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">class Solution:</span><br><span class="line">    def isMatch(self, s: str, p: str) -&gt; bool:</span><br><span class="line">        m, n = len(s) + 1, len(p) + 1</span><br><span class="line">        dp = [[False] * n for _ in range(m)]</span><br><span class="line">        dp[0][0] = True</span><br><span class="line">        # 初始化首行</span><br><span class="line">        for j in range(2, n, 2):</span><br><span class="line">            dp[0][j] = dp[0][j - 2] and p[j - 1] == '*'</span><br><span class="line">        # 状态转移</span><br><span class="line">        for i in range(1, m):</span><br><span class="line">            for j in range(1, n):</span><br><span class="line">                if p[j - 1] == '*':</span><br><span class="line">                    if dp[i][j - 2]:</span><br><span class="line">                        dp[i][j] = True  # 1.</span><br><span class="line">                    elif dp[i][j - 1]:</span><br><span class="line">                        dp[i][j] = True  # 2.</span><br><span class="line">                    elif dp[i - 1][j] and s[i - 1] == p[j - 2]:</span><br><span class="line">                        dp[i][j] = True  # 3.</span><br><span class="line">                    elif dp[i - 1][j] and p[j - 2] == '.':</span><br><span class="line">                        dp[i][j] = True  # 4.</span><br><span class="line">                else:</span><br><span class="line">                    if dp[i - 1][j - 1] and s[i - 1] == p[j - 1]:</span><br><span class="line">                        dp[i][j] = True  # 1.</span><br><span class="line">                    elif dp[i - 1][j - 1] and p[j - 1] == '.':</span><br><span class="line">                        dp[i][j] = True  # 2.</span><br><span class="line">        return dp[-1][-1]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == '__main__':</span><br><span class="line">    solution = Solution()</span><br><span class="line">    nums1 = 'aaa'</span><br><span class="line">    nums2 = 'ab*.*'</span><br><span class="line">    print(solution.isMatch(nums1, nums2))  # True</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">s = 'aaa'</span><br><span class="line">p = 'ab<span class="emphasis">*.*</span>'</span><br><span class="line">m = len(s) + 1 = 4</span><br><span class="line">n = len(p) + 1 = 6</span><br><span class="line"></span><br><span class="line"><span class="emphasis">_ = 0</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">dp = [</span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False] </span></span><br><span class="line"><span class="emphasis">    ]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">0</span>] = True</span></span><br><span class="line"><span class="emphasis">dp = [</span></span><br><span class="line"><span class="emphasis">    [True, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">    [False, False, False, False, False, False, False, False] </span></span><br><span class="line"><span class="emphasis">    ]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">j = 2   </span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">j</span>] = dp[<span class="string">0</span>][<span class="symbol">j - 2</span>]</span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">2</span>] = dp[<span class="string">0</span>][<span class="symbol">2 - 2</span>]</span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">2</span>] = dp[<span class="string">0</span>][<span class="symbol">0</span>]</span></span><br><span class="line"><span class="emphasis">p[j - 1] == '*'</span></span><br><span class="line"><span class="emphasis">p[2 - 1] == '*'</span></span><br><span class="line"><span class="emphasis">p[1] == '*'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">j = 4</span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">4</span>] = dp[<span class="string">0</span>][<span class="symbol">4 - 2</span>]</span></span><br><span class="line"><span class="emphasis">dp[<span class="string">0</span>][<span class="symbol">4</span>] = dp[<span class="string">0</span>][<span class="symbol">2</span>]</span></span><br><span class="line"><span class="emphasis">p[j - 1] == '*'</span></span><br><span class="line"><span class="emphasis">p[4 - 1] == '*'</span></span><br><span class="line"><span class="emphasis">p[3] == '*'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">i = 1</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 1</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[1 - 1] == p[0] = 'a' != '*'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">1 - 1</span>][<span class="symbol">1 - 1</span>]  = dp[<span class="string">0</span>][<span class="symbol">0</span>] = True</span></span><br><span class="line"><span class="emphasis">    s[i - 1] = s[1 - 1] == s[0] = 'a' = p[1 - 1] = p[0]</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j</span>] = dp[<span class="string">1</span>][<span class="symbol">1</span>] = True</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp = [</span></span><br><span class="line"><span class="emphasis">        [True, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, True, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False, False, False] </span></span><br><span class="line"><span class="emphasis">        ]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 2</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[2 - 1] == p[1] = 'b' != '*'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">1 - 1</span>][<span class="symbol">2 - 1</span>]  = dp[<span class="string">0</span>][<span class="symbol">1</span>] = True</span></span><br><span class="line"><span class="emphasis">    s[i - 1] = s[1 - 1] == s[0] = 'a' != p[2 - 1] = p[1] = 'b'</span></span><br><span class="line"><span class="emphasis">    False</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">1 - 1</span>][<span class="symbol">2 - 1</span>] = dp[<span class="string">0</span>][<span class="symbol">1</span>] = False</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 3</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[3 - 1] == p[2] = '*'</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j - 2</span>] = dp[<span class="string">1</span>][<span class="symbol">3 - 2</span>] = dp[<span class="string">1</span>][<span class="symbol">1</span>] = True</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j</span>] = dp[<span class="string">1</span>][<span class="symbol">3</span>] = True</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp = [</span></span><br><span class="line"><span class="emphasis">        [True, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, True, False, True, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False, False, False] </span></span><br><span class="line"><span class="emphasis">        ]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 4</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[4 - 1] == p[3] = '.' != '*'</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">1 - 1</span>][<span class="symbol">4 - 1</span>] = dp[<span class="string">0</span>][<span class="symbol">3</span>] = False</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 5</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[5 - 1] == p[4] = '*'</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j - 2</span>] = dp[<span class="string">1</span>][<span class="symbol">5 - 2</span>] = dp[<span class="string">1</span>][<span class="symbol">3</span>] = True</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j</span>] = dp[<span class="string">1</span>][<span class="symbol">5</span>] = True</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    dp = [</span></span><br><span class="line"><span class="emphasis">        [True, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, True, False, True, False, True], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False], </span></span><br><span class="line"><span class="emphasis">        [False, False, False, False, False, False] </span></span><br><span class="line"><span class="emphasis">        ]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">i = 2</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 1</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[1 - 1] == p[0] = 'a' != '*'</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">2 - 1</span>][<span class="symbol">1 - 1</span>]  = dp[<span class="string">1</span>][<span class="symbol">0</span>] = False</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 2</span></span><br><span class="line"><span class="emphasis">    p[j - 1] == p[2 - 1] == p[1] = 'b' != '*'</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">2 - 1</span>][<span class="symbol">2 - 1</span>]  = dp[<span class="string">1</span>][<span class="symbol">1</span>] = True</span></span><br><span class="line"><span class="emphasis">    s[i - 1] = s[2 - 1] = s[1] = 'a' != p[j - 1] = p[2 - 1] = p[1] = 'b'</span></span><br><span class="line"><span class="emphasis">    False</span></span><br><span class="line"><span class="emphasis">    p[j - 1] = p[2 - 1] = p[1] = 'b' != '.'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    j = 3</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j - 2</span>] = dp[<span class="string">2</span>][<span class="symbol">3 - 2</span>] = dp[<span class="string">2</span>][<span class="symbol">1</span>] = False</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i</span>][<span class="symbol">j - 1</span>] = dp[<span class="string">2</span>][<span class="symbol">3 - 1</span>] = dp[<span class="string">2</span>][<span class="symbol">2</span>] = False</span></span><br><span class="line"><span class="emphasis">    dp[<span class="string">i - 1</span>][<span class="symbol">j</span>] = dp[<span class="string">2 - 1</span>][<span class="symbol">3</span>] = dp[<span class="string">1</span>][<span class="symbol">3</span>] = False</span></span><br><span class="line"><span class="emphasis"></span></span><br></pre></td></tr></tbody></table></figure>

<p>利用布尔运算实现简短长度</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isMatch</span>(<span class="params">self, s: str, p: str</span>) -&gt; bool:</span></span><br><span class="line">        m, n = len(s) + <span class="number">1</span>, len(p) + <span class="number">1</span></span><br><span class="line">        dp = [[<span class="literal">False</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>, n, <span class="number">2</span>):</span><br><span class="line">            dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j - <span class="number">2</span>] <span class="keyword">and</span> p[j - <span class="number">1</span>] == <span class="string">'*'</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">                dp[i][j] = dp[i][j - <span class="number">2</span>] <span class="keyword">or</span> dp[i][j - <span class="number">1</span>] <span class="keyword">or</span> dp[i - <span class="number">1</span>][j] <span class="keyword">and</span> (s[i - <span class="number">1</span>] == p[j - <span class="number">2</span>] <span class="keyword">or</span> p[j - <span class="number">2</span>] == <span class="string">'.'</span>) \</span><br><span class="line">                           <span class="keyword">if</span> p[j - <span class="number">1</span>] == <span class="string">'*'</span> <span class="keyword">else</span> \</span><br><span class="line">                           dp[i - <span class="number">1</span>][j - <span class="number">1</span>] <span class="keyword">and</span> (p[j - <span class="number">1</span>] == <span class="string">'.'</span> <span class="keyword">or</span> s[i - <span class="number">1</span>] == p[j - <span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/leetcode-sql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/leetcode-sql/" class="post-title-link" itemprop="url">leetcode sql</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-29 02:54:28" itemprop="dateModified" datetime="2021-06-29T02:54:28Z">2021-06-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>正常情况下SELECT的书写顺序和执行顺序</p>
<h3 id="写法顺序："><a href="#写法顺序：" class="headerlink" title="写法顺序："></a>写法顺序：</h3><p>SELECT →FROM → JOIN → ON → WHERE → GROUP BY → HAVING → ORDER BY→ LIMIT</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询列表                ⑦                    </span><br><span class="line"><span class="keyword">FROM</span> 表 <span class="number">1</span>                    ①                                      </span><br><span class="line">【连接类型】 <span class="keyword">JOIN</span> 表 <span class="number">2</span>        ③                           </span><br><span class="line"><span class="keyword">ON</span> 连接条件                    ②</span><br><span class="line"><span class="keyword">WHERE</span> 筛选条件                ④</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列表            ⑤</span><br><span class="line"><span class="keyword">HAVING</span> 分组后的筛选条件        ⑥</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序的字段            ⑧</span><br><span class="line"><span class="keyword">LIMIT</span> 起始的条目索引，条目数;    ⑨</span><br></pre></td></tr></tbody></table></figure>

<h3 id="执行顺序："><a href="#执行顺序：" class="headerlink" title="执行顺序："></a>执行顺序：</h3><p>FROM → ON → JOIN → WHERE → GROUP BY → with HAVING → SELECT → ORDER BY→ LIMIT<br>TOP</p>
<p>若 每页显示条目数：<code>pageSize</code>，要显示的页数：<code>page</code><br>则有：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表 <span class="keyword">LIMIT</span> （page<span class="number">-1</span>）* pageSize,pageSize</span><br></pre></td></tr></tbody></table></figure>

<p>解题方法<br>根据考题要搞清楚表的结果和多表之间的关系，根据想要的结果思考使用那种关联方式，通常把要查询的列先写出来，然后分析这些列都属于哪些表，才考虑使用关联查询</p>
<p>其中每一个操作都会产生一张虚拟的表，这个虚拟的表作为一个处理的输入，只是这些虚拟的表对用户来说是透明的，但是只有最后一个虚拟的表才会被作为结果返回。如果没有在语句中指定某一个子句，那么将会跳过相应的步骤</p>
<p>因为ON是先把不符合条件的记录过滤后才进行统计，它就可以减少中间运算要处理的数据，按理说应该速度是最快的，WHERE也应该比HAVING快点的，因为它过滤数据后才进行SUM，在两个表联接时才用ON的，所以在一个表的时候，就剩下WHERE跟HAVING比较了。</p>
<p>表连接，同时查询多张表格，效率高于子查询<br>数据库在通过连接两张或多张表来返回记录时，都会生成一张中间的临时表，然后再将这张临时表返回给用户。</p>
<p>from子句中on条件主要用来连接表，其他不属于连接表的条件可以使用where子句来指定；<br>考虑联接优先顺序：<br>join连接分为三种  外连接的outer 和内连接的inner 都可以省略：</p>
<ol>
<li>内连接 inner join ，默认，所以可以省略inner关键字，又叫等值连接，只返回两个表中不一定必须有同名字段，只要连接字段相等的行、公共数据、符合连接条件。查询条件放在&nbsp;on子句和where子句的返回的结果集是相同的。<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> A,B <span class="keyword">WHERE</span> A.id=B.id</span><br></pre></td></tr></tbody></table></figure>
或者<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> a <span class="keyword">inner</span> <span class="keyword">Join</span> b <span class="keyword">on</span> A.id=B.id</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> a <span class="keyword">Join</span> b <span class="keyword">on</span> A.id=B.id <span class="keyword">JOIN</span> c <span class="keyword">on</span> B.id=c.id;</span><br></pre></td></tr></tbody></table></figure>

</li>
</ol>
<p>自连接（自身连接）的本质是把一张表复制出多张一模一样的表来使用。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名 </span><br><span class="line"><span class="keyword">from</span> 表名 <span class="keyword">as</span> 别名<span class="number">1</span>,表名 <span class="keyword">as</span> 别名<span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> A T1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> A T2 <span class="keyword">ON</span> T1.id=T2.pid</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li><p>外连接 outer join 是指的要保存未匹配信息 包括<br>left join,在mysql是left outer join的简写 ，左外连接，左联结</p>
<p>在使用&nbsp;left jion&nbsp;时，on&nbsp;和&nbsp;where&nbsp;条件的区别如下：<br>• on&nbsp;条件是在生成临时表时使用的补充条件，以左表为主,先查询出左表,不管&nbsp;on&nbsp;上的条件是否为真，都会返回左表的全部数据都会在结果集中，左表有而右表中不匹配的行，右表选择字段列置为null<br>• where&nbsp;条件是在临时表生成好后，再对临时表进行过滤的条件。这时已经没有&nbsp;left join&nbsp;的含义（必须返回左边表的记录）了，条件不为真的就过滤掉，条件真假直接影响结果实际的执行效果相当于inner join .</p>
</li>
</ol>
<p>right join right outer join ，右外连接，结果表中除了匹配行外，还包括右表有而左表中不匹配的行，对于这样的行，左表选择列置为null </p>
<ol start="3">
<li>full join 是full outer join的简写，全连接，<br>mysql不支持full outer join，Mysql可以用left join+union+right join来解决<br>将多个查询语句的结果进行合并</li>
</ol>
<p>联合查询</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FROM</span> A <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">FROM</span> B <span class="keyword">UNION</span></span><br></pre></td></tr></tbody></table></figure>
<p>就是把多个结果集集中在一起, UNION前的结果为基准,需要注意的是联合查询的列数要相等,相同的记录行会合并,字段个数相同，结果集字段名称相同</p>
<p>SELECT FRoM A left Join b on A id=B id UNIOn<br>SELECT FRoM A RIGHT Join BoN A. id=Bid</p>
<p>查询语句 union （查询语句）union （查询语句）<br>如果使用 UNION ALL,不会合并重复的记录行,会显示重复的数据<br>优化UNION查询 UNION ALL的效率高于UNION</p>
<p>natural join，自然连接，分为natural left outer join和natural right outer join，语义定义与inner join相同 </p>
<p>3：cross join，交叉连接，没有任何关联条件,将两个表进行笛卡尔积运算，结果表的行数等于两表行数之积，就是第一个表的行数乘以第二个表的行数。结果集会很大,没有意义,很少使用</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> A B(,C)</span><br></pre></td></tr></tbody></table></figure>
<p>或者</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> A <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> B (<span class="keyword">CROSS</span> <span class="keyword">JOIN</span> C)</span><br></pre></td></tr></tbody></table></figure>

<p>在IN后面值的列表中，将出现最频繁的值放在最前面，出现得最少的放在最后面，减少判断的次数。</p>
<p>子查询是一种查询中嵌套在 where子句 from子句 select子句查询的语句，<br>效率不好把握<br>不能写在order子句</p>
<p>当一个SQL语句的结果是作为另外一条SQL语句的条件时则需要用到子查询。</p>
<p>from子查询不是相关子查询，把结果集作为一张表，与其他的数据表做表连接</p>
<p>嵌套子查询：执行不依赖与外部的查询。<br>优化子查询：用关联查询替代<br>执行过程：先执行子查询再执行主查询<br>（1）执行子查询总共执行一次，执行完毕后结果不被显示，而是=将值传递给外部查询，作为外部查询的条件使用。<br>（2）执行外部查询，并显示整个结果。　　<br>嵌套子查询一般可以分为：</p>
<ol>
<li>返回单值的子查询 单行子查询：返回一条记录<br>查询底薪超过公司平均底薪的员工的信息<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WHERE 价格 &gt;</span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(价格)</span><br><span class="line">    <span class="keyword">FROM</span> Books</span><br><span class="line">  )</span><br></pre></td></tr></tbody></table></figure></li>
<li>返回一个列表的子查询 ，多行子查询：返回多条记录，只能出现在where from子句<br>select子句中其他字段的一条记录没办法和子查询的多条记录合并</li>
</ol>
<p>相关子查询，先执行主查询再执行子查询。<br>外部查询执行一行，子查询就执行一次。执行依赖于外部查询。<br>优化关联查询<br>确定ON或者USING子句中是否有索引。<br>确保GROUP BY和ORDER BY只有一个表中的列，这样MySQL才有可能使用索引。<br>一般是子查询的WHERE子句中引用了外部查询的表。<br>可以用IN、NOT IN、EXISTS、NOT EXISTS引入<br>执行过程：<br>（1）从外层查询中取出一个元组（即一行），将元组相关列的值传给内层查询。<br>什么是元组？关系是一张表，表中的每行bai（即数据库中的每条记录）就是一个元组。<br>（2）执行内层查询，得到子查询操作的值。<br>（3）外查询根据子查询返回的结果或结果集得到满足条件的行。<br>（4）然后外层查询取出下一个元组重复做步骤1-3，直到外层的元组全部处理完毕。<br>对于外部查询返回的每一行数据，内部查询都要执行一次。另外，在关联子查询中是信息流是双向的。外部查询的每行数据传递一个值给子查询，然后子查询为每一行数据执行一次并返回它的记录。然后，外部查询根据返回的记录做出决策。</p>
<p>“选取出各商品种类中高于该商品种类的平均销售单价的商品。” 的关联子查询SELECT语句：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_type , product_name, sale_price</span><br><span class="line"><span class="keyword">FROM</span> Product <span class="keyword">AS</span> P1</span><br><span class="line"><span class="keyword">WHERE</span> sale_price &gt; (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sale_price)</span><br><span class="line">    <span class="keyword">FROM</span> Product <span class="keyword">AS</span> P2</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> product_type</span><br><span class="line">    );</span><br></pre></td></tr></tbody></table></figure>
<p>这个语句是错误的，原因是sale_price是一行数据，子查询的结果是3行数据，无法进行比较。更无法得到我们想要的“选取出各商品种类中高于该商品种类的平均销售单价的商品。”这个结果。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_type , product_name, sale_price</span><br><span class="line"><span class="keyword">FROM</span> Product <span class="keyword">AS</span> P1</span><br><span class="line"><span class="keyword">WHERE</span> sale_price &gt; (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sale_price)</span><br><span class="line">    <span class="keyword">FROM</span> Product <span class="keyword">AS</span> P2</span><br><span class="line">    <span class="keyword">WHERE</span> P1.product_type = P2.product_type</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> product_type</span><br><span class="line">    );</span><br></pre></td></tr></tbody></table></figure>
<p>实际上，‘WHERE P1.product_type = P2.product_type’这个语句是关联子查询，<br>关联子查询的执行逻辑和正常的SELECT语句执行逻辑完全不同<br>下面，我们来说明一下上面的关联子查询代码的执行过程：</p>
<p>先执行主查询， select 语句的 from，，把  Product 表里面每行数据查询出来，查询每一行数据，都要执行一次内层 select 语句，这个时候是完整的执行内层 select 语句，就是内层里面的 from … where … group by … select avg(sale_price)，作用是把和外层查询出来的一行数据里面的 type 相同的所有行取出来，算sale_price列的平均值，然后继续执行外层的 where 条件，最后选出需要的列数据</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_type , product_name, sale_price</span><br><span class="line"><span class="keyword">FROM</span> Product <span class="keyword">AS</span> P1</span><br></pre></td></tr></tbody></table></figure>

<p>该子查询从主查询一个“product_type”的值。而这个值是个变量，随SQLSever检索Product表中的不同行而改变<br>先将Product表中的第一条记录的“product_type”取第一个值=‘衣服’，通过WHERE P1.product_type = P2.product_type传入子查询，子查询变为：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">AVG</span>(sale_price)</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    Product <span class="keyword">AS</span> P2</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    P2.product_type = ‘衣服’</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    product_type);</span><br></pre></td></tr></tbody></table></figure>
<p>子查询得到的结果为该类product_type的平均价格，AVG(sale_price)=2500，<br>返回主查询：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_type , product_name, sale_price</span><br><span class="line"><span class="keyword">FROM</span> Product <span class="keyword">AS</span> P1</span><br><span class="line"><span class="keyword">WHERE</span> sale_price &gt; <span class="number">2500</span> <span class="keyword">AND</span> product_type = ‘衣服’</span><br></pre></td></tr></tbody></table></figure>
<p>如果WHERE条件为True，则第一条结果包括在结果集中，则否不包括。</p>
<p>然后，product _type取第二个值，得到整个语句的第二结果，依次类推，把product _type全取值一遍，所有行运行相同的过程，最后形成整个语句的的结果集及最后返回结果。</p>
<p>事实上，所有关联子查询的执行过程都和上面的过程一样。<br>（1）先从主查询的Product表中product _type列取出第一个值，进入子查询中，得到子查询结果，然后返回父查询，判断父查询的where子句条件，则返回整个语句的第1条结果。<br>（2）重复上述操作，直到所有主查询中的Product表中product _type列记录取完为止。得出整个语句的结果集，就是最后的答案。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table counttest(name char(1), age char(2));</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt; insert into counttest values</span><br><span class="line">    -&gt; ('a', '14'),('a', '15'), ('a', '15'), </span><br><span class="line">    -&gt; ('b', NULL), ('b', '16'), </span><br><span class="line">    -&gt; ('c', '17'),</span><br><span class="line">    -&gt; ('d', null), </span><br><span class="line">    -&gt;('e', '');</span><br><span class="line">Query OK, 8 rows affected (0.01 sec)</span><br><span class="line">Records: 8  Duplicates: 0  Warnings: 0</span><br><span class="line"> </span><br><span class="line">mysql&gt; select * from counttest;</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">| name | age  |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">| a    | 14   |</span><br><span class="line">| a    | 15   |</span><br><span class="line">| a    | 15   |</span><br><span class="line">| b    | NULL |</span><br><span class="line">| b    | 16   |</span><br><span class="line">| c    | 17   |</span><br><span class="line">| d    | NULL |</span><br><span class="line">| e    |      |</span><br><span class="line">+<span class="comment">------+------+</span></span><br><span class="line">8 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">name</span>, <span class="keyword">count</span>(<span class="keyword">name</span>), <span class="keyword">count</span>(<span class="number">1</span>), <span class="keyword">count</span>(*), <span class="keyword">count</span>(age), <span class="keyword">count</span>(<span class="keyword">distinct</span>(age))</span><br><span class="line">    -&gt; <span class="keyword">from</span> counttest</span><br><span class="line">    -&gt; <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">name</span>;</span><br><span class="line">+<span class="comment">------+-------------+----------+----------+------------+----------------------+</span></span><br><span class="line">| name | count(name) | count(1) | count(*) | count(age) | count(distinct(age)) |</span><br><span class="line">+<span class="comment">------+-------------+----------+----------+------------+----------------------+</span></span><br><span class="line">| a    |           3 |        3 |        3 |          3 |                    2 |</span><br><span class="line">| b    |           2 |        2 |        2 |          1 |                    1 |</span><br><span class="line">| c    |           1 |        1 |        1 |          1 |                    1 |</span><br><span class="line">| d    |           1 |        1 |        1 |          0 |                    0 |</span><br><span class="line">| e    |           1 |        1 |        1 |          1 |                    1 |</span><br><span class="line">+<span class="comment">------+-------------+----------+----------+------------+----------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></tbody></table></figure>

<p>经典topN问题：每组最大的N条记录。<br>涉及到“既要分组，又要排序”的情况，要能想到用窗口函数来实现。</p>
<p>窗口函数，OLAP函数（Online Anallytical Processing，联机分析处理）<br>1）同时具有分组（partition by）和排序（order by）的功能<br>2）不减少原表的行数，所以经常用来在每组内排名<br>group by分组汇总后改变了表的行数，一行只有一个类别。<br>当一条sql语句没有group by的话，整张表的数据会自成一组。</p>
<p>比如下面的业务需求：<br>每组内排名问题：每个部门按业绩来排名<br>topN问题：找出每个部门排名前N的员工进行奖励：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt;</span><br><span class="line">                order by &lt;用于排序的列名&gt;)</span><br></pre></td></tr></tbody></table></figure>
<p>partition子句可是省略，省略就是不指定分组排名<br>&lt;窗口函数&gt;的位置，可以放以下两种函数：<br>1） 专用窗口函数，包括后面要讲到的rank, dense_rank, row_number等专用窗口函数。<br>2） 聚合函数，如sum. avg, count, max, min等</p>
<p>因为窗口函数是对where或者group by子句处理后的结果进行操作，所以窗口函数原则上只能写在select子句中。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *,</span><br><span class="line">   <span class="keyword">rank</span>() <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 成绩 <span class="keyword">desc</span>) <span class="keyword">as</span> ranking,</span><br><span class="line">   <span class="keyword">dense_rank</span>() <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 成绩 <span class="keyword">desc</span>) <span class="keyword">as</span> dese_rank,</span><br><span class="line">   row_number() <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 成绩 <span class="keyword">desc</span>) <span class="keyword">as</span> row_num</span><br><span class="line"><span class="keyword">from</span> 班级</span><br></pre></td></tr></tbody></table></figure>
<p>专用窗口函数后面的括号不需要任何参数，保持()空着就可以。<br>1）rank函数：如果有并列名次的行，会占用下一名次的位置，同薪同名重复但总排名不连续。比如正常排名是1，2，3，4，但是现在前3名是并列的名次，结果是：1，1，1，4。 </p>
<p>2）dense_rank函数：如果有并列名次的行，不占用下一名次的位置，同薪同名但总排名连续。比如正常排名是1，2，3，4，但是现在前3名是并列的名次，结果是：1，1，1，2。 </p>
<p>3）row_number函数：不考虑并列名次的情况，连续排名不重复，。比如前3名是并列的名次，排名是正常的1，2，3，4。每一条数据加一个序号，用于分页查询<br> 例如薪水3000、2000、2000、1000排名结果为1-2-3-4，体现同薪不同名，排名类似于编号</p>
<p>聚和窗口函数和上面提到的专用窗口函数用法完全相同，只需要把聚合函数写在窗口函数的位置即可，但是函数后面括号里面不能为空，需要指定聚合的列名。聚合函数作为窗口函数，可以在每一行的数据里直观的看到，截止到本行数据，统计数据是多少（最大值、最小值等）。同时可以看出每一行数据，对整体统计数据的影响。想要知道所有人成绩的总和、平均等聚合结果，看最后一行即可。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *,</span><br><span class="line">   <span class="keyword">sum</span>(成绩) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 学号) <span class="keyword">as</span> current_sum,</span><br><span class="line">   <span class="keyword">avg</span>(成绩) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 学号) <span class="keyword">as</span> current_avg,</span><br><span class="line">   <span class="keyword">count</span>(成绩) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 学号) <span class="keyword">as</span> current_count,</span><br><span class="line">   <span class="keyword">max</span>(成绩) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 学号) <span class="keyword">as</span> current_max,</span><br><span class="line">   <span class="keyword">min</span>(成绩) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> 学号) <span class="keyword">as</span> current_min</span><br><span class="line"><span class="keyword">from</span> 班级表</span><br></pre></td></tr></tbody></table></figure>

<p>查询结果排序，默认升序<br>select 字段1，字段2 from 表名 order by 列名 ASC或者DESC;</p>
<p>查询结果分页<br><code>limit y offset x</code>简写成<code>limit x, y</code><br>参数x为可选参数，表示查询结果跳过前 x 条数据，x 默认为 0，从第 x+1 条数据开始取，<br>参数y为必选参数，表示取前 y 条(行)数据</p>
<p>eg1：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="number">5</span>;     //检索前 5 个记录行</span><br></pre></td></tr></tbody></table></figure>
<p>等价于</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">5</span>;     //检索前 5 个记录行,0可以省略不写</span><br></pre></td></tr></tbody></table></figure>
<p>eg2：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="number">5</span>,<span class="number">10</span>;  // 检索记录行 6-15</span><br></pre></td></tr></tbody></table></figure>
<p>eg3：<br>为了检索某行开始到最后的所有数据，可以设置第二个参数为-1</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="number">95</span>,<span class="number">-1</span>; // 检索记录行 96-last</span><br></pre></td></tr></tbody></table></figure>

<h3 id="175-组合两个表"><a href="#175-组合两个表" class="headerlink" title="175. 组合两个表"></a>175. 组合两个表</h3><p><strong>编写一个 SQL 查询，获取 Employee&nbsp;表中第二高的薪水（Salary）。</strong><br>表1: Person</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">| 列名         | 类型     |</span><br><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">| PersonId    | int     |</span><br><span class="line">| FirstName   | varchar |</span><br><span class="line">| LastName    | varchar |</span><br><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">PersonId 是上表主键</span><br></pre></td></tr></tbody></table></figure>
<p>表2: Address</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">| 列名         | 类型    |</span><br><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">| AddressId   | int     |</span><br><span class="line">| PersonId    | int     |</span><br><span class="line">| City        | varchar |</span><br><span class="line">| State       | varchar |</span><br><span class="line"><span class="code">+-------------+</span>---------+</span><br><span class="line">AddressId 是上表主键</span><br></pre></td></tr></tbody></table></figure>
<p>编写一个 SQL 查询，满足条件：无论 person 是否有地址信息，都需要基于上述两表提供&nbsp;person 的以下信息：</p>
<figure class="highlight autohotkey"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FirstName,</span> LastName, City, State</span><br></pre></td></tr></tbody></table></figure>

<p>使用 outer join<br>算法</p>
<p>因为表 Address 中的 personId 是表 Person 的外关键字，所以我们可以连接这两个表来获取一个人的地址信息。</p>
<p>考虑到可能不是每个人都有地址信息，我们应该使用 outer join 而不是默认的 inner join。所以是左连接保留所有的人名。right连接的话是会保留右表所有的地址信息<br>注意：如果没有某个人的地址信息，使用 where 子句过滤记录将失败，因为它不会显示姓名信息。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> FirstName, LastName, City, State</span><br><span class="line"><span class="keyword">from</span> Person <span class="keyword">left</span> <span class="keyword">join</span> Address</span><br><span class="line"><span class="keyword">on</span> Person.PersonId = Address.PersonId;</span><br><span class="line">```~</span><br><span class="line"></span><br><span class="line">```~sql</span><br><span class="line"><span class="keyword">select</span> P.FirstName, P.LastName, A.City, A.State</span><br><span class="line"><span class="keyword">from</span> Person <span class="keyword">as</span> P <span class="keyword">left</span> <span class="keyword">join</span> Address <span class="keyword">as</span> A </span><br><span class="line"><span class="keyword">on</span> (P.PersonId = A.PersonId);</span><br><span class="line">```~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">---</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 176. 第二高的薪水</span></span><br><span class="line">**编写一个 SQL 查询，获取 Employee&nbsp;表中第二高的薪水（Salary）。**</span><br></pre></td></tr></tbody></table></figure>
<p>+—-+——–+<br>| Id | Salary |<br>+—-+——–+<br>| 1  | 100    |<br>| 2  | 200    |<br>| 3  | 300    |<br>+—-+——–+</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">例如上述</span>&nbsp;<span class="string">Employee</span>&nbsp;<span class="string">表，SQL查询应该返回</span>&nbsp;<span class="number">200</span> <span class="string">作为第二高的薪水。如果不存在第二高的薪水，那么查询应返回</span> <span class="literal">null</span><span class="string">。</span></span><br></pre></td></tr></tbody></table></figure>
<p>+———————+<br>| SecondHighestSalary |<br>+———————+<br>| 200                 |<br>+———————+</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">方法一：使用子查询和 <span class="keyword">LIMIT</span> 子句  </span><br><span class="line">降序排列再返回第二条记录可以得到第二大的值。</span><br><span class="line">```<span class="keyword">distinct</span>```排除掉多行数据并列第二的情况，例如只有两行记录都是 <span class="number">100</span>，<span class="number">100</span>，此时结果应当是<span class="keyword">null</span>，如果不用<span class="keyword">distinct</span>，得到结果就是<span class="number">100</span>  </span><br><span class="line"></span><br><span class="line">关键是这个不存在返回<span class="keyword">null</span>，不存在又分为表数据不够，比如表只有一行。或者另一种情况，薪水全部一样，则也不存在第二高的薪水，因此这题除了按薪水降序排序外，还需要筛掉薪水相同的记录。可以像下面这样写使用<span class="keyword">group</span> <span class="keyword">by</span>或者用<span class="keyword">distinct</span> + <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line"></span><br><span class="line">```<span class="keyword">SQL</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">DISTINCT</span> Salary <span class="keyword">AS</span> SecondHighestSalary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    Salary <span class="keyword">AS</span> SecondHighestSalary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>然而，如果没有这样的第二最高工资，不存在第二高记录的话会返回为空的结果集。而不是null，这个解决方案将被判断为 “错误答案”，因为本表可能只有一项记录。为了克服这个问题，我们可以将其作为临时表。 执行返回结果集不为空包含一行为NULL的记录，</p>
<figure class="highlight plain"><figcaption><span>NULL```返回null值，可以不接from单独用，子查询数据出虚表嵌套查询虚表,如果查询不到会返回null。相当于查询的列。</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在oracle中只写查询列没有查询表需要加上 from dual（伪表）。</span><br><span class="line">而mysql不用写</span><br><span class="line">```SQL</span><br><span class="line">SELECT</span><br><span class="line">    (SELECT DISTINCT</span><br><span class="line">            Salary</span><br><span class="line">        FROM</span><br><span class="line">            Employee</span><br><span class="line">        ORDER BY Salary DESC</span><br><span class="line">        LIMIT 1 OFFSET 1) AS SecondHighestSalary</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        Salary</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        Employee</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> Salary </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">    <span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span></span><br><span class="line">) <span class="keyword">AS</span> SecondHighestSalary</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> (</span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        Salary </span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        Employee</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span></span><br><span class="line">    <span class="keyword">limit</span> <span class="number">1</span>,<span class="number">1</span></span><br><span class="line">) <span class="keyword">as</span> SecondHighestSalary</span><br></pre></td></tr></tbody></table></figure>

<p>方法二：<br>求最大值。一定要借助于MAX函数<br>先去掉最大的，然后第二大的就是最大的了,<br>考虑了扩展性，求第三，求第四呢?一直套</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(Salary) SecondHighestSalary </span><br><span class="line"><span class="keyword">from</span> Employee</span><br><span class="line"><span class="keyword">where</span> Salary &lt; (<span class="keyword">select</span> <span class="keyword">max</span>(Salary) <span class="keyword">from</span> Employee);</span><br></pre></td></tr></tbody></table></figure>

<p>方法三：使用 IFNULL 和 LIMIT 子句</p>
<p>mysql中isnull,ifnull,nullif的用法如下：</p>
<p>isnull(expr) 的用法： 如expr 为null，那么isnull() 的返回值为 1，否则返回值为 0。<br>mysql&gt; select isnull(1+1);<br>-&gt; 0<br>mysql&gt; select isnull(1/0);<br>-&gt; 1 使用= 的null 值对比通常是错误的。</p>
<p>isnull() 函数同 is null比较操作符具有一些相同的特性。请参见有关is null 的说明。</p>
<p>IFNULL(expr1,expr2)的用法：条件函数 写在查询条件里面里面<br>判断是否为null的，不是判断是否为空。如下所示。<br>假如expr1 不为 NULL，则 IFNULL() 的返回值为 expr1;<br>假如expr1 为 NULL，其返回值为 expr2。<br>IFNULL()的返回值是数字或是字符串，具体情况取决于其所使用的语境。<br>ifnull(x, null) 如果返回null值，不就已经说明 x 的值为null</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT IFNULL(1,0);</span><br><span class="line">-&gt; 1</span><br><span class="line">mysql&gt; SELECT IFNULL(NULL,10);</span><br><span class="line">-&gt; 10</span><br><span class="line">mysql&gt; SELECT IFNULL(1/0,10);</span><br><span class="line">-&gt; 10</span><br><span class="line">mysql&gt; SELECT</span><br><span class="line">IFNULL(1/0,'yes');</span><br><span class="line">-&gt;   'yes</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">IFNULL</span>(</span><br><span class="line">      (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">       <span class="keyword">FROM</span> Employee</span><br><span class="line">       <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">        <span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>),</span><br><span class="line">    <span class="literal">NULL</span>) <span class="keyword">AS</span> SecondHighestSalary</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="177-第N高的薪水"><a href="#177-第N高的薪水" class="headerlink" title="177. 第N高的薪水"></a>177. 第N高的薪水</h3><p><strong>编写一个 SQL 查询，获取 Employee 表中第 n 高的薪水（Salary）。</strong></p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>--------+</span><br><span class="line">| Id | Salary |</span><br><span class="line"><span class="code">+----+</span>--------+</span><br><span class="line">| 1  | 100    |</span><br><span class="line">| 2  | 200    |</span><br><span class="line">| 3  | 300    |</span><br><span class="line"><span class="code">+----+</span>--------+</span><br></pre></td></tr></tbody></table></figure>
<p>例如上述 Employee 表，n = 2 时，应返回第二高的薪水 200。如果不存在第 n 高的薪水，那么查询应返回 null。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+------------------------+</span></span><br><span class="line">| getNthHighestSalary(2) |</span><br><span class="line"><span class="code">+------------------------+</span></span><br><span class="line">| 200                    |</span><br><span class="line"><span class="code">+------------------------+</span></span><br></pre></td></tr></tbody></table></figure>

<p>思路1：单表查询<br>本题不存在分组排序，只需返回全局第N高的一个，所以自然想到的想法是用order by排序加limit限制得到。需要注意两个细节：</p>
<ol>
<li>同薪同名且不跳级的问题，解决办法是用group by按薪水分组后再order by</li>
<li>排名第N高意味着要跳过N-1个薪水，由于无法直接用limit N-1，所以需先在函数开头用set把N赋值为N=N-1。调整下limit的起始点即可，<br>注：这里不能直接用limit N-1,1，这样写要报语法错误，是因为limit和offset字段后面只接受正整数（意味着负数、小数都不行, limit的偏移从0开始。0是可以 但是没有啥意义）或者单一变量（意味着不能用表达式），也就是说想取一条，limit 2-1、limit 1.1这类的写法都是报错的。<br>注：这种解法形式最为简洁直观，但仅适用于查询全局排名问题，如果要求各分组的每个第N名，则该方法不适用；而且也不能处理存在重复值的情况。</li>
</ol>
<p>第N个变成参数变量时，要改为N-1。不是数字。作者认为出题的目的是不使用变量的情况下解题</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> getNthHighestSalary(N <span class="built_in">int</span>) <span class="keyword">returns</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">set</span> n=N<span class="number">-1</span>;  // sql 不区分到小写，所以只有一个N</span><br><span class="line">    return (</span><br><span class="line">        <span class="keyword">select</span>(</span><br><span class="line">            <span class="keyword">select</span> </span><br><span class="line">                <span class="keyword">distinct</span> Salary</span><br><span class="line">            <span class="keyword">from</span> </span><br><span class="line">                Employee</span><br><span class="line">            <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">                Salary <span class="keyword">desc</span></span><br><span class="line">            <span class="keyword">limit</span> n,<span class="number">1</span></span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="built_in">INT</span>) <span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">set</span> n = N<span class="number">-1</span>;</span><br><span class="line">  RETURN (</span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">ifnull</span>(</span><br><span class="line">          (</span><br><span class="line">          <span class="keyword">select</span> </span><br><span class="line">              <span class="keyword">distinct</span> Salary </span><br><span class="line">          <span class="keyword">from</span> </span><br><span class="line">              Employee</span><br><span class="line">          <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">              Salary <span class="keyword">desc</span></span><br><span class="line">          <span class="keyword">limit</span> n, <span class="number">1</span></span><br><span class="line">          )</span><br><span class="line">          , <span class="literal">null</span>)</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>窗口函数</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="built_in">INT</span>) <span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">RETURN</span> (</span><br><span class="line">      <span class="comment"># Write your MySQL query statement below.</span></span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">distinct</span> Salary </span><br><span class="line">      <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span>) <span class="keyword">num</span>,Salary <span class="keyword">from</span> Employee</span><br><span class="line">      ) t </span><br><span class="line">      <span class="keyword">where</span> t.num=N</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>法2：子查询<br>排名第N的薪水意味着该表中存在N-1个比其更高的薪水<br>注意这里的N-1个更高的薪水是指去重后的N-1个，实际对应人数可能不止N-1个<br>最后返回的薪水也应该去重，因为可能不止一个薪水排名第N<br>由于对于每个薪水的where条件都要执行一遍子查询，注定其效率低下</p>
<p>对每一个薪水A，只要大于等于A的不同薪水个数等于N即可。<br>子查询查找比当前薪资大与等于的个数，个数即排名。<br>也就是在做查找当前记录的排名，对salary进行了排名，salary相同的排同一个名次</p>
<p>假设现在给你一个分数X，如何算出它的排名Rank呢？<br>我们可以先提取出大于等于X的所有分数集合H，将H去重后的元素个数就是X的排名。<br>比如你考了99分，但最高的就只有99分，那么去重之后集合H里就只有99一个元素，个数为1，因此你的Rank为1。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="built_in">INT</span>) <span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">RETURN</span> (</span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        <span class="keyword">distinct</span> t1.Salary</span><br><span class="line">    <span class="keyword">from</span> </span><br><span class="line">        Employee t1</span><br><span class="line">    <span class="keyword">where</span> N = (</span><br><span class="line">        <span class="keyword">select</span> </span><br><span class="line">            <span class="keyword">count</span>(<span class="keyword">distinct</span> t2.Salary)</span><br><span class="line">        <span class="keyword">from</span> </span><br><span class="line">            Employee t2</span><br><span class="line">        <span class="keyword">where</span> </span><br><span class="line">            t2.Salary &gt;= t1.Salary</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>
<p>只用一个sql，那么要先查出前N薪水，然后取最小就好了，注意可能总数不够前N，count一下比较即可<br>取的distinct后的前N条吧，去重以后就是N条，但是如果有重复的就会导至原本可能有N条，去重以后就小于 N条，所以最后的选择步骤会加上一个IF条件判断是否有到达第N个，达不到返回NULL。比如原本100个数，其中有60个是相同的，其余40个是不同的；要取第50大的，就会返回NULL，因为不重复的数只有41个，只对这41个数排序取值。</p>
<figure class="highlight plain"><figcaption><span>里面的 列变量。</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">```SQL</span><br><span class="line">CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT</span><br><span class="line">BEGIN</span><br><span class="line">  RETURN (     </span><br><span class="line">  SELECT  IF(count&lt;N,NULL,min) // N &gt; count 那么取 NULL 否者 取 min 的值</span><br><span class="line">  FROM</span><br><span class="line">    (SELECT MIN(Salary) AS min, COUNT(1) AS count</span><br><span class="line">    FROM</span><br><span class="line">      (SELECT DISTINCT Salary</span><br><span class="line">      FROM Employee ORDER BY Salary DESC LIMIT N) AS a</span><br><span class="line">    ) as b</span><br><span class="line">  );</span><br><span class="line">END</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> <span class="keyword">count</span>(*) &lt; N </span><br><span class="line"><span class="keyword">then</span> <span class="literal">NULL</span> </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">min</span>(Salary) </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">distinct</span> Salary </span><br><span class="line">    <span class="keyword">from</span> Employee </span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span> </span><br><span class="line">    <span class="keyword">limit</span> N) </span><br><span class="line">    temp</span><br></pre></td></tr></tbody></table></figure>

<p>mysql中自定义变量需要用@作为前缀符引导符，针对于当前会话（连接）有效，同于会话变量的作用域应用在任何地方<br>定义@r表示排名信息(rank)，<br>定义@p表示前一个薪水(previous) </p>
<p>对用户变量赋值有两种方式，一种是直接用”=”号，另一种是用”:=”号。<br>其区别在于使用set命令对用户变量进行赋值时，两种方式都可以使用；<br>当使用select语句对用户变量进行赋值时，只能使用”:=”方式，因为在select语句中，”=”号被看作是比较操作符。<br>“:=”用来给变量rank赋值</p>
<hr>
<h3 id="178-分数排名"><a href="#178-分数排名" class="headerlink" title="178. 分数排名"></a>178. 分数排名</h3><p><strong>编写一个 SQL 查询来实现分数排名。</strong></p>
<p>如果两个分数相同，则两个分数排名（Rank）相同。<br>请注意，平分后的下一个名次应该是下一个连续的整数值。<br>换句话说，名次之间不应该有“间隔”。</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Score </span>|</span><br><span class="line">+----+-------+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string"> 3.50  </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string"> 3.65  </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string"> 4.00  </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string"> 3.85  </span>|</span><br><span class="line">|<span class="string"> 5  </span>|<span class="string"> 4.00  </span>|</span><br><span class="line">|<span class="string"> 6  </span>|<span class="string"> 3.65  </span>|</span><br><span class="line">+----+-------+</span><br></pre></td></tr></tbody></table></figure>

<p>例如，根据上述给定的 Scores 表，你的查询应该返回（按分数从高到低排列）：</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-------+------+</span><br><span class="line">|<span class="string"> Score </span>|<span class="string"> Rank </span>|</span><br><span class="line">+-------+------+</span><br><span class="line">|<span class="string"> 4.00  </span>|<span class="string"> 1    </span>|</span><br><span class="line">|<span class="string"> 4.00  </span>|<span class="string"> 1    </span>|</span><br><span class="line">|<span class="string"> 3.85  </span>|<span class="string"> 2    </span>|</span><br><span class="line">|<span class="string"> 3.65  </span>|<span class="string"> 3    </span>|</span><br><span class="line">|<span class="string"> 3.65  </span>|<span class="string"> 3    </span>|</span><br><span class="line">|<span class="string"> 3.50  </span>|<span class="string"> 4    </span>|</span><br><span class="line">+-------+------+</span><br></pre></td></tr></tbody></table></figure>
<p>重要提示：对于 MySQL 解决方案，如果要转义用作列名的保留字，可以在关键字之前和之后使用撇号。例如 <code>Rank</code> rank是mysql的关键字不能使用</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> score, </span><br><span class="line">       <span class="keyword">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> Score <span class="keyword">desc</span>) <span class="keyword">as</span> <span class="string">`Rank`</span></span><br><span class="line"><span class="keyword">from</span> Scores;</span><br></pre></td></tr></tbody></table></figure>

<p>法二：<br>最后的结果包含两个部分，<br>第一部分是降序排列的分数</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.Score <span class="keyword">as</span> Score</span><br><span class="line"><span class="keyword">from</span> Scores a</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.Score <span class="keyword">DESC</span></span><br></pre></td></tr></tbody></table></figure>

<p>第二部分是每个分数对应的排名<br>假设现在给你一个分数X，如何算出它的排名Rank呢？<br>我们可以先提取出大于等于X的所有分数集合H，将H去重后的元素个数就是X的排名。<br>比如你考了99分，但最高的就只有99分，那么去重之后集合H里就只有99一个元素，个数为1，因此你的Rank为1。<br>先提取集合H：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    b.Score </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    Scores b </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">    b.Score &gt;= X;</span><br></pre></td></tr></tbody></table></figure>
<p>我们要的是集合H去重之后的元素个数就是X的排名，因此升级为：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    <span class="keyword">count</span>(<span class="keyword">distinct</span> b.Score) </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    Scores b </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">    b.Score &gt;= X <span class="keyword">as</span> <span class="keyword">Rank</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>而从结果的角度来看，第二部分的Rank是对应第一部分的分数来的，<br>所以这里的X就是上面的a.Score，把两部分结合在一起为：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    a.Score <span class="keyword">as</span> Score,</span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">select</span> </span><br><span class="line">            <span class="keyword">count</span>(<span class="keyword">distinct</span> b.Score) </span><br><span class="line">        <span class="keyword">from</span> </span><br><span class="line">            Scores b </span><br><span class="line">        <span class="keyword">where</span> </span><br><span class="line">            b.Score &gt;= a.Score</span><br><span class="line">        ) <span class="keyword">as</span> <span class="string">'Rank'</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    Scores a</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">    a.Score <span class="keyword">DESC</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="180-连续出现的数字"><a href="#180-连续出现的数字" class="headerlink" title="180. 连续出现的数字"></a>180. 连续出现的数字</h3><p><strong>编写一个 SQL 查询，查找所有至少连续出现三次的数字。</strong></p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+----+-----+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Num </span>|</span><br><span class="line">+----+-----+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string">  2  </span>|</span><br><span class="line">|<span class="string"> 5  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 6  </span>|<span class="string">  2  </span>|</span><br><span class="line">|<span class="string"> 7  </span>|<span class="string">  2  </span>|</span><br><span class="line">+----+-----+</span><br></pre></td></tr></tbody></table></figure>
<p>例如，给定上面的 Logs 表， 1 是唯一连续出现至少三次的数字。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+-----------------+</span></span><br><span class="line">| ConsecutiveNums |</span><br><span class="line"><span class="code">+-----------------+</span></span><br><span class="line">| 1               |</span><br><span class="line"><span class="code">+-----------------+</span></span><br></pre></td></tr></tbody></table></figure>

<p>思路：</p>
<ol>
<li><p>由于要获取至少连续三次出现的数字，看到这个题肯定是会变的，<br>如果是至少连续出现四次呢(100次呢)，咱们连接四个表(连接一千个?)？<br>这种方法肯定是不可取的。</p>
</li>
<li><p>找规律，找出这连续起来的数字有什么规律呢，我们会发现连续的数字是相同的数字，<br>但是id有可能不是连续的，工作的生产环境某一行记录经常会被删除,<br>所以id=1之后下一个id可能是3也可以是10000，我们就需要通过对结果集进行再次编号，让其变成连续的。</p>
</li>
<li><p>首先我们获取到对每条数据编号从1开始使用row_number()函数使用id来排序，<code>row_number() over(order by id)</code><br>4、然后我们通过另一种方式排序将，这些num值一样的进行排序，然后对其编号同样使用row_bumber()使用num来分组使用id排序 over(partition by num order by id)<br>5、通过3、4步骤我们能得到什么呢，两个相减之后我们可以得到，只要是相等的，则相减的值是一样的。而且如果不连续的话相减值也不一样。</p>
</li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">NUM</span> <span class="keyword">As</span> ConsecutiveNums </span><br><span class="line"><span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> <span class="keyword">Num</span>,<span class="keyword">count</span>(*) <span class="keyword">as</span> Num_count </span><br><span class="line">    <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> *, </span><br><span class="line">        row_number() <span class="keyword">over</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span>)</span><br><span class="line">        - row_number() <span class="keyword">over</span> (</span><br><span class="line">            <span class="keyword">PARTITION</span> <span class="keyword">by</span> <span class="keyword">Num</span> </span><br><span class="line">            <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span></span><br><span class="line">            )<span class="keyword">AS</span> orde </span><br><span class="line">        <span class="keyword">FROM</span> <span class="keyword">logs</span> </span><br><span class="line">    ) <span class="keyword">as</span> W <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">Num</span>,orde </span><br><span class="line">)<span class="keyword">as</span> S </span><br><span class="line"><span class="keyword">WHERE</span> Num_count&gt;=<span class="number">3</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>对应id的减的是row_number（）函数的排序号<br>如果pre与t.num 相等，则cnt加1， 否则cnt重置为1</p>
<p>法二<br>定义为一张表：(select @pre:= null,@count:=1) as pc<br>Logs与pc叉积，计算出与每行数字连续相同的数字个数。</p>
<p>①首先遍历一遍整张表，找出每个数字的连续重复次数<br>定义两个用户变量并初始化<br>@pre：记录的是当前行的num值，在下一次循环里，pre和下一次循环if（）里的num值比较<br>pre初始值最好不要赋值为一个数字，因为不确定赋值的数字是否会出现在测试表中。</p>
<p>@count：记录上一个数字已经连续出现的次数。与前一行数据连续相同的个数，统计连续次数</p>
<p>然后调用if()函数，与前一行数据比较的逻辑为：<br>如果pre和当前行数字相同，count加1即为连续出现的次数；<br>如果不同，意味着重新开始一个数字，count重新从1开始。<br>最后，将当前的Num数字赋值给pre，开始下一行扫描。</p>
<p>这些结果形成一张新表：a(Num,count,USELESS)。<br>适用连续重复次数为n的情况，无论需要连续重复多少次，只需要改最后的数字就可以了，复用性很好。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">        <span class="keyword">Num</span>,    <span class="comment">#当前的Num 数字</span></span><br><span class="line">        <span class="keyword">if</span>(@pre=<span class="keyword">Num</span>,@<span class="keyword">count</span> := @<span class="keyword">count</span>+<span class="number">1</span>,@<span class="keyword">count</span> := <span class="number">1</span>) <span class="keyword">as</span> nums, <span class="comment">#判断 和 计数</span></span><br><span class="line">        @pre:=<span class="keyword">Num</span>   <span class="comment">#将当前Num赋值给pre</span></span><br><span class="line">    <span class="keyword">from</span> <span class="keyword">Logs</span> <span class="keyword">as</span> l ,</span><br><span class="line">        (<span class="keyword">select</span> @pre:= <span class="literal">null</span>,@<span class="keyword">count</span>:=<span class="number">1</span>) <span class="keyword">as</span> pc <span class="comment">#这里需要别名</span></span><br><span class="line">    <span class="comment">#上面这段代码执行结果就是一张三列为Num,count as nums,pre的表。</span></span><br></pre></td></tr></tbody></table></figure>
<p>②将上面表的结果中，重复次数大于等于3的数字选出，<br>再去重即为连续至少出现三次的数字。最终只要从a中取出count大于等于3的行。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    <span class="keyword">distinct</span> <span class="keyword">Num</span> <span class="keyword">as</span> ConsecutiveNums </span><br><span class="line"><span class="keyword">from</span>  </span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">Num</span>,</span><br><span class="line">            <span class="keyword">if</span>(@pre=<span class="keyword">Num</span>,@<span class="keyword">count</span> := @<span class="keyword">count</span>+<span class="number">1</span>,@<span class="keyword">count</span> := <span class="number">1</span>) <span class="keyword">as</span> <span class="keyword">count</span>,</span><br><span class="line">            @pre:=<span class="keyword">Num</span></span><br><span class="line">        <span class="keyword">from</span> <span class="keyword">Logs</span> <span class="keyword">as</span> l ,</span><br><span class="line">            (<span class="keyword">select</span> @pre:= <span class="literal">null</span>,@<span class="keyword">count</span>:=<span class="number">1</span>) <span class="keyword">as</span> pc</span><br><span class="line">    ) <span class="keyword">as</span> n</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">count</span> &gt;=<span class="number">3</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>Every derived table must have its own alias，<br>进行嵌套查询的时候子查询出来的的结果是作为一个派生表来进行上一级的查询的，所以子查询的结果临时表必须要有一个别名，应该是一种规范吧！</p>
<hr>
<h3 id="181-超过经理收入的员工"><a href="#181-超过经理收入的员工" class="headerlink" title="181. 超过经理收入的员工"></a>181. 超过经理收入的员工</h3><p><strong>Employee 表包含所有员工，他们的经理也属于员工。每个员工都有一个 Id，此外还有一列对应员工的经理的 Id。</strong></p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+--------+-----------+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Name  </span>|<span class="string"> Salary </span>|<span class="string"> ManagerId </span>|</span><br><span class="line">+----+-------+--------+-----------+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string"> Joe   </span>|<span class="string"> 70000  </span>|<span class="string"> 3         </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string"> Henry </span>|<span class="string"> 80000  </span>|<span class="string"> 4         </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string"> Sam   </span>|<span class="string"> 60000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string"> Max   </span>|<span class="string"> 90000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">+----+-------+--------+-----------+</span><br></pre></td></tr></tbody></table></figure>
<p>给定 Employee 表，编写一个 SQL 查询，该查询可以获取收入超过他们经理的员工的姓名。在上面的表格中，Joe 是唯一一个收入超过他的经理的员工。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----------+</span></span><br><span class="line">| Employee |</span><br><span class="line"><span class="code">+----------+</span></span><br><span class="line">| Joe      |</span><br><span class="line"><span class="code">+----------+</span></span><br></pre></td></tr></tbody></table></figure>

<p>”和自己的xxx比”这种问题基本都是自连接问题。<br>方法 1：使用 WHERE 语句<br>算法</p>
<p>如下面表格所示，表格里存有每个雇员经理的信息，我们也许需要从这个表里获取两次信息。<br>从两个表里使用 Select 语句可能会导致产生 笛卡尔乘积 。<br>不指定两个表的连接方式、 没有关联条件，这种情况下就会产生笛卡尔积，这是笛卡尔积的定义<br>在这种情况下，输出会产生 4*4=16 个记录。<br>然而我们只对雇员工资高于经理的人感兴趣。<br>所以我们应该用 WHERE 语句加 2 个判断条件。<br>a表的经理Id=b表的员工Id，即b表中的人员都是a表的经理</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    a.Name <span class="keyword">AS</span> Employee</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee <span class="keyword">AS</span> a,</span><br><span class="line">    Employee <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    a.ManagerId = b.Id</span><br><span class="line">        <span class="keyword">AND</span> a.Salary &gt; b.Salary</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<p>方法 2：使用 JOIN 语句<br>JOIN 是一个更常用也更有效的将表连起来的办法，我们使用 ON 来指明条件。<br>因为JOIN 运算优先级高于逗号<br>join相关联查语句，使用小表驱动大表，可以提高效率。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">     a.NAME <span class="keyword">AS</span> Employee</span><br><span class="line"><span class="keyword">FROM</span> Employee <span class="keyword">AS</span> a <span class="keyword">JOIN</span> Employee <span class="keyword">AS</span> b</span><br><span class="line">     <span class="keyword">ON</span> a.ManagerId = b.Id</span><br><span class="line">     <span class="keyword">AND</span> a.Salary &gt; b.Salary</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">Name</span> Employee</span><br><span class="line"><span class="keyword">from</span> Employee E1</span><br><span class="line"><span class="keyword">where</span> Salary &gt; (<span class="keyword">select</span> Salary</span><br><span class="line">                <span class="keyword">from</span> Employee </span><br><span class="line">                <span class="keyword">where</span> <span class="keyword">Id</span> = E1.ManagerId);</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.Name <span class="keyword">as</span> Employee </span><br><span class="line"><span class="keyword">from</span> Employee a </span><br><span class="line"><span class="keyword">where</span> a.Salary &gt; (<span class="keyword">select</span> b.Salary </span><br><span class="line">                    <span class="keyword">from</span> Employee b </span><br><span class="line">                    <span class="keyword">where</span> b.Id = a.ManagerId)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="182-查找重复的电子邮箱"><a href="#182-查找重复的电子邮箱" class="headerlink" title="182. 查找重复的电子邮箱"></a>182. 查找重复的电子邮箱</h3><p><strong>编写一个 SQL 查询，查找 Person 表中所有重复的电子邮箱。</strong><br>示例：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>---------+</span><br><span class="line">| Id | Email   |</span><br><span class="line"><span class="code">+----+</span>---------+</span><br><span class="line">| 1  | a@b.com |</span><br><span class="line">| 2  | c@d.com |</span><br><span class="line">| 3  | a@b.com |</span><br><span class="line"><span class="code">+----+</span>---------+</span><br></pre></td></tr></tbody></table></figure>
<p>根据以上输入，你的查询应返回以下结果：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+---------+</span></span><br><span class="line">| Email   |</span><br><span class="line"><span class="code">+---------+</span></span><br><span class="line">| a@b.com |</span><br><span class="line"><span class="code">+---------+</span></span><br></pre></td></tr></tbody></table></figure>
<p>说明：所有电子邮箱都是小写字母。</p>
<p>方法一：看到“找重复”的关键字眼，首先要用分组函数（group by），<br>再用聚合函数中的计数函数count()给电子邮件列计数。</p>
<p>分组汇总后，生成了一个如下的表。使用临时表</p>
<p>从这个表里选出计数大于1的电子邮件，就是重复的电子邮件。<br>重复的电子邮箱存在多次。要计算每封电子邮件的存在次数</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Email, <span class="keyword">count</span>(Email) <span class="keyword">as</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">from</span> Person</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Email;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Email   </span>|<span class="string"> num </span>|</span><br><span class="line">|<span class="string">---------</span>|<span class="string">-----</span>|</span><br><span class="line">|<span class="string"> a@b.com </span>|<span class="string"> 2   </span>|</span><br><span class="line">|<span class="string"> c@d.com </span>|<span class="string"> 1   </span>|</span><br></pre></td></tr></tbody></table></figure>
<p>以此作为临时表，我们可以得到下面的解决方案。<br>将“创建辅助表”的步骤放入子查询<br>选出辅助表中计数大于1的姓名</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Email <span class="keyword">from</span></span><br><span class="line">(</span><br><span class="line">  <span class="keyword">select</span> Email, <span class="keyword">count</span>(Email) <span class="keyword">as</span> <span class="keyword">num</span></span><br><span class="line">  <span class="keyword">from</span> Person</span><br><span class="line">  <span class="keyword">group</span> <span class="keyword">by</span> Email</span><br><span class="line">) <span class="keyword">as</span> statistic</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">num</span> &gt; <span class="number">1</span></span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<p>方法二：使用 GROUP BY 和 HAVING 条件<br>向 GROUP BY 添加条件的一种更常用的方法是使用 HAVING 子句，该子句更为简单高效。<br>在 SQL 中增加 HAVING 子句原因是，where后面不能接聚合函数，<br>因为where子句的运行顺序排在group by之前，表还没有被分组。<br>HAVING 子句对分组后的分组查询的结果进行筛选<br>having子句即可包含聚合函数作用的字段也可包括普通的标量字段<br>having子句必须于group&nbsp;by&nbsp;子句同时使用，不能单独使用<br>where在分组前过滤，having在分组后过滤，两者之间不冲突。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    Email</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    Person</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    Email</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(Email)&gt;<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>
<p>法三自联结。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> p1.Email </span><br><span class="line"><span class="keyword">from</span> Person <span class="keyword">as</span> p1, Person <span class="keyword">as</span> p2 </span><br><span class="line"><span class="keyword">where</span> p1.Email =p2.Email <span class="keyword">and</span> p1.Id!=p2.Id;</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="183-从不订购的客户"><a href="#183-从不订购的客户" class="headerlink" title="183. 从不订购的客户"></a>183. 从不订购的客户</h3><p><strong>某网站包含两个表，Customers 表和 Orders 表。编写一个 SQL 查询，找出所有从不订购任何东西的客户。</strong><br>Customers 表：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>-------+</span><br><span class="line">| Id | Name  |</span><br><span class="line"><span class="code">+----+</span>-------+</span><br><span class="line">| 1  | Joe   |</span><br><span class="line">| 2  | Henry |</span><br><span class="line">| 3  | Sam   |</span><br><span class="line">| 4  | Max   |</span><br><span class="line"><span class="code">+----+</span>-------+</span><br></pre></td></tr></tbody></table></figure>
<p>Orders 表：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>------------+</span><br><span class="line">| Id | CustomerId |</span><br><span class="line"><span class="code">+----+</span>------------+</span><br><span class="line">| 1  | 3          |</span><br><span class="line">| 2  | 1          |</span><br><span class="line"><span class="code">+----+</span>------------+</span><br></pre></td></tr></tbody></table></figure>
<p>例如给定上述表格，你的查询应返回：</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+-----------+</span></span><br><span class="line">| Customers |</span><br><span class="line"><span class="code">+-----------+</span></span><br><span class="line">| Henry     |</span><br><span class="line">| Max       |</span><br><span class="line"><span class="code">+-----------+</span></span><br></pre></td></tr></tbody></table></figure>
<p>方法：使用子查询和 NOT IN 子句<br>如果我们有一份曾经订购过的客户名单，就很容易知道谁从未订购过。<br>我们可以使用下面的代码来获得这样的列表。<br><code>select customerid from orders;</code><br>然后，我们可以使用 NOT IN 查询不在此列表中的客户。<br>集合差定义：C=A-B。C中的元素等于在A中但是不在B中。因此，对A中的每个元素a，如果元素a不在B中，则元素a就是集合C的元素。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    t1.name <span class="keyword">as</span> Customers</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    customers t1</span><br><span class="line"><span class="keyword">where</span> t1.id <span class="keyword">not</span> <span class="keyword">in</span>(</span><br><span class="line">    <span class="keyword">select</span> customerid </span><br><span class="line">    <span class="keyword">from</span> orders</span><br><span class="line">    )</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<p>法二：<br>如果订单表orders太大，那么会导致使用in的时候，信息都放入内存，效率降低；<br>使用left join只是做了个笛卡尔积运算，不占内存，求集合差的方法。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t1.Name Customers </span><br><span class="line"><span class="keyword">FROM</span> Customers t1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Orders t2 </span><br><span class="line"><span class="keyword">ON</span> t1.Id = t2.CustomerId </span><br><span class="line"><span class="keyword">WHERE</span> t2.CustomerId <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></tbody></table></figure>
<p> =后面要讲一个确定的值，而null不能算一个确定的值，<br> 因为int型的可为null，varchar型的可为nul</p>
<p>方法三<br>EXISTS是布尔运算符，常用于测试子查询。<br>当subquery返回任何行时，EXISTS返回true，否则返回false。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    select_list</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    a_table</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    [<span class="keyword">NOT</span>] <span class="keyword">EXISTS</span>(subquery);</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> C.name <span class="keyword">as</span> <span class="string">`Customers`</span></span><br><span class="line"><span class="keyword">from</span> Customers <span class="keyword">as</span> C </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">distinct</span> customerid</span><br><span class="line">    <span class="keyword">from</span> Orders <span class="keyword">as</span> O</span><br><span class="line">    <span class="keyword">where</span> O.customerid = C.id</span><br><span class="line">) ;</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="184-部门工资最高的员工"><a href="#184-部门工资最高的员工" class="headerlink" title="184. 部门工资最高的员工"></a>184. 部门工资最高的员工</h3><p><strong>Employee 表包含所有员工信息，每个员工有其对应的 Id, salary 和 department Id。</strong></p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+--------+--------------+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Name  </span>|<span class="string"> Salary </span>|<span class="string"> DepartmentId </span>|</span><br><span class="line">+----+-------+--------+--------------+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string"> Joe   </span>|<span class="string"> 70000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string"> Jim   </span>|<span class="string"> 90000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string"> Henry </span>|<span class="string"> 80000  </span>|<span class="string"> 2            </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string"> Sam   </span>|<span class="string"> 60000  </span>|<span class="string"> 2            </span>|</span><br><span class="line">|<span class="string"> 5  </span>|<span class="string"> Max   </span>|<span class="string"> 90000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">+----+-------+--------+--------------+</span><br></pre></td></tr></tbody></table></figure>
<p>Department 表包含公司所有部门的信息。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>----------+</span><br><span class="line">| Id | Name     |</span><br><span class="line"><span class="code">+----+</span>----------+</span><br><span class="line">| 1  | IT       |</span><br><span class="line">| 2  | Sales    |</span><br><span class="line"><span class="code">+----+</span>----------+</span><br></pre></td></tr></tbody></table></figure>
<p>编写一个 SQL 查询，找出每个部门工资最高的员工。对于上述表，您的 SQL 查询应返回以下行（行的顺序无关紧要）。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+------------+</span>----------<span class="code">+--------+</span></span><br><span class="line">| Department | Employee | Salary |</span><br><span class="line"><span class="code">+------------+</span>----------<span class="code">+--------+</span></span><br><span class="line">| IT         | Max      | 90000  |</span><br><span class="line">| IT         | Jim      | 90000  |</span><br><span class="line">| Sales      | Henry    | 80000  |</span><br><span class="line"><span class="code">+------------+</span>----------<span class="code">+--------+</span></span><br></pre></td></tr></tbody></table></figure>
<p>解释：Max 和 Jim 在 IT 部门的工资都是最高的，Henry 在销售部的工资最高。</p>
<p>方法一：使用 JOIN 和 IN 语句</p>
<p>首先对 DepartmentId 字段分组查询每个部门内查询最高工资。<br>有可能有多个员工同时拥有最高工资，所以最好在这个查询中不包含雇员名字的信息，<br>包含 Salary 和 DepartmentId 字段，<br>例如技术部最高20k 但是客服部有个人20k 这样没有部门ID的话条件不足的</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    DepartmentId, <span class="keyword">MAX</span>(Salary)</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> DepartmentId;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> DepartmentId </span>|<span class="string"> MAX(Salary) </span>|</span><br><span class="line">|<span class="string">--------------</span>|<span class="string">-------------</span>|</span><br><span class="line">|<span class="string"> 1            </span>|<span class="string"> 90000       </span>|</span><br><span class="line">|<span class="string"> 2            </span>|<span class="string"> 80000       </span>|</span><br></pre></td></tr></tbody></table></figure>

<p>然后判断表中每条数据的分组和Salary是否和这个相等<br>把表 Employee 和 Department 连接，<br>再在这张临时表里用where或者IN语句筛选出 符合【工资=这个部门最高工资】 的员工信息。根据 Salary 和 DepartmentId 查找 Department.Name 字段</p>
<p>当两列同时作为关键字段进行条件查询时，是将两列合成二元组(部门id,部门最高薪水)作为一个值来查找。<br>，结合in判断 是否在已存在的组合中。<br>比如这个案例里是(课程号,成绩) in，<br>比如，“语文”和“90”合并为值“语文 90”。<br>如果部门A的最高薪水和部门B第二高的薪水是一样的，<br>此时不把DepartmentId对应起来的话，<br>仅仅是通过薪水查询则会把部门A薪水第二高的员工也查询出来，这是不符合要求的。</p>
<p>所以这两列的顺序要和子查询里列的顺序保持一致。<br>如果列的段顺序不一样，比如“90 语文”和“语文 90”就匹配不上，那么查询结果就是空的了。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    Department.name <span class="keyword">AS</span> <span class="string">'Department'</span>,</span><br><span class="line">    Employee.name <span class="keyword">AS</span> <span class="string">'Employee'</span>,</span><br><span class="line">    Salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">JOIN</span></span><br><span class="line">    Department <span class="keyword">ON</span> Employee.DepartmentId = Department.Id</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    (Employee.DepartmentId , Salary) <span class="keyword">IN</span>(</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            DepartmentId, <span class="keyword">MAX</span>(Salary)</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            Employee</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> </span><br><span class="line">            DepartmentId</span><br><span class="line">    )</span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<p>使用left join 要注意 部门名字 不能是NULL 。所以，如果使用Left join在官方解答后面加上一句判断 AND Department.name is not null… 。两张表都有可能为空，所以不能left和right，departmentid是null，leftjoin就会保留null</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    Department.name <span class="keyword">AS</span> <span class="string">'Department'</span>,</span><br><span class="line">    Employee.name <span class="keyword">AS</span> <span class="string">'Employee'</span>,</span><br><span class="line">    Salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">    Department <span class="keyword">ON</span> Employee.DepartmentId = Department.Id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    (Employee.DepartmentId , Salary) <span class="keyword">IN</span></span><br><span class="line">    (   <span class="keyword">SELECT</span></span><br><span class="line">            DepartmentId, <span class="keyword">MAX</span>(Salary)</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            Employee</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> DepartmentId</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">AND</span> Department.name <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<p>法二<br>连接临时表<br>Employee和查询出来的每个分组的最大值连接。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department, e.Name <span class="keyword">as</span> Employee, e.Salary</span><br><span class="line"><span class="keyword">from</span> Employee e </span><br><span class="line"><span class="keyword">join</span> Department d <span class="keyword">on</span> e.DepartmentId = d.Id </span><br><span class="line"><span class="keyword">join</span> (</span><br><span class="line">    <span class="keyword">select</span> DepartmentId, <span class="keyword">max</span>(Salary) <span class="keyword">as</span> Salary</span><br><span class="line">    <span class="keyword">from</span> Employee</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> DepartmentId</span><br><span class="line">    ) t </span><br><span class="line">    <span class="keyword">on</span> e.DepartmentId = t.DepartmentId <span class="keyword">and</span> e.Salary = t.Salary;</span><br></pre></td></tr></tbody></table></figure>

<p>法三<br>Employee和自身连接，on的条件为部门相同且同时约束Salary的大小。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department, e1.Name <span class="keyword">as</span> Employee, e1.Salary</span><br><span class="line"><span class="keyword">from</span> Employee e1 </span><br><span class="line"><span class="keyword">join</span> Department d <span class="keyword">on</span> e1.DepartmentId = d.Id </span><br><span class="line"><span class="keyword">join</span> Employee e2 <span class="keyword">on</span> e1.DepartmentId = e2.DepartmentId <span class="keyword">and</span> e1.Salary &lt;= e2.Salary</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> e1.Id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary) = <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>


<hr>
<h3 id="185-部门工资前三高的所有员工"><a href="#185-部门工资前三高的所有员工" class="headerlink" title="185. 部门工资前三高的所有员工"></a>185. 部门工资前三高的所有员工</h3><p><strong>Employee 表包含所有员工信息，每个员工有其对应的工号&nbsp;Id，姓名 Name，工资 Salary 和部门编号 DepartmentId 。</strong></p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+--------+--------------+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Name  </span>|<span class="string"> Salary </span>|<span class="string"> DepartmentId </span>|</span><br><span class="line">+----+-------+--------+--------------+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string"> Joe   </span>|<span class="string"> 85000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string"> Henry </span>|<span class="string"> 80000  </span>|<span class="string"> 2            </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string"> Sam   </span>|<span class="string"> 60000  </span>|<span class="string"> 2            </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string"> Max   </span>|<span class="string"> 90000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 5  </span>|<span class="string"> Janet </span>|<span class="string"> 69000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 6  </span>|<span class="string"> Randy </span>|<span class="string"> 85000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">|<span class="string"> 7  </span>|<span class="string"> Will  </span>|<span class="string"> 70000  </span>|<span class="string"> 1            </span>|</span><br><span class="line">+----+-------+--------+--------------+</span><br></pre></td></tr></tbody></table></figure>
<p>Department 表包含公司所有部门的信息。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>----------+</span><br><span class="line">| Id | Name     |</span><br><span class="line"><span class="code">+----+</span>----------+</span><br><span class="line">| 1  | IT       |</span><br><span class="line">| 2  | Sales    |</span><br><span class="line"><span class="code">+----+</span>----------+</span><br></pre></td></tr></tbody></table></figure>
<p>编写一个&nbsp;SQL 查询，找出每个部门获得前三高工资的所有员工。例如，根据上述给定的表，查询结果应返回：</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+------------+----------+--------+</span><br><span class="line">|<span class="string"> Department </span>|<span class="string"> Employee </span>|<span class="string"> Salary </span>|</span><br><span class="line">+------------+----------+--------+</span><br><span class="line">|<span class="string"> IT         </span>|<span class="string"> Max      </span>|<span class="string"> 90000  </span>|</span><br><span class="line">|<span class="string"> IT         </span>|<span class="string"> Randy    </span>|<span class="string"> 85000  </span>|</span><br><span class="line">|<span class="string"> IT         </span>|<span class="string"> Joe      </span>|<span class="string"> 85000  </span>|</span><br><span class="line">|<span class="string"> IT         </span>|<span class="string"> Will     </span>|<span class="string"> 70000  </span>|</span><br><span class="line">|<span class="string"> Sales      </span>|<span class="string"> Henry    </span>|<span class="string"> 80000  </span>|</span><br><span class="line">|<span class="string"> Sales      </span>|<span class="string"> Sam      </span>|<span class="string"> 60000  </span>|</span><br><span class="line">+------------+----------+--------+</span><br></pre></td></tr></tbody></table></figure>
<p>IT 部门中，Max 获得了最高的工资，Randy 和 Joe 都拿到了第二高的工资，Will 的工资排第三。<br>销售部门（Sales）只有两名员工，Henry 的工资最高，Sam 的工资排第二。</p>
<p>感觉应该改为各部门工资级别前三的员工<br>不能理解为前三名员工，如果拿90000的有四个人的话，你只取三个人，那怎么取都是错的了</p>
<p>方法：使用 JOIN 和子查询<br>公司里前 3 高的薪水意味着有不超过 3 个工资值比这些值大。</p>
<p>统计了有多少人的工资比 e1.Salary 高</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e1.Name <span class="keyword">as</span> <span class="string">'Employee'</span>, e1.Salary</span><br><span class="line"><span class="keyword">from</span> Employee e1</span><br><span class="line"><span class="keyword">where</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary)</span><br><span class="line">    <span class="keyword">from</span> Employee e2</span><br><span class="line">    <span class="keyword">where</span> e2.Salary &gt; e1.Salary</span><br><span class="line">    ) &lt; <span class="number">3</span> </span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>
<p>样例的输出应该如下所示。</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Employee </span>|<span class="string"> Salary </span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">--------</span>|</span><br><span class="line">|<span class="string"> Joe      </span>|<span class="string"> 85000  </span>|</span><br><span class="line">|<span class="string"> Henry    </span>|<span class="string"> 80000  </span>|</span><br><span class="line">|<span class="string"> Max      </span>|<span class="string"> 90000  </span>|</span><br><span class="line">|<span class="string"> Randy    </span>|<span class="string"> 85000  </span>|</span><br></pre></td></tr></tbody></table></figure>
<p>当 &lt;3 改为 =0,第一高工资 比他高的工资 个数为0 </p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Employee </span>|<span class="string"> Salary </span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">--------</span>|</span><br><span class="line">|<span class="string"> Max      </span>|<span class="string"> 90000  </span>|</span><br></pre></td></tr></tbody></table></figure>
<p>当 &lt;3 改为 =1，第二高工资 ,比他的高的 工资个数为1，</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Employee </span>|<span class="string"> Salary </span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">--------</span>|</span><br><span class="line">|<span class="string"> Joe      </span>|<span class="string"> 85000  </span>|</span><br><span class="line">|<span class="string"> Randy    </span>|<span class="string"> 85000  </span>|</span><br></pre></td></tr></tbody></table></figure>
<p>当 &lt;3 改为 =2，有2个比某个数大，就是最3大，</p>
<figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Employee </span>|<span class="string"> Salary </span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">--------</span>|</span><br><span class="line">|<span class="string"> Henry    </span>|<span class="string"> 80000  </span>|</span><br></pre></td></tr></tbody></table></figure>

<p>题目要查出为同一部门的前三高工资，在同一部门内 其他的工资&gt;该员工的薪资 的个数小于3  ，即为子查询里面的条件<br>把表 Employee 和表 Department 连接来获得部门信息。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">工资是同一个部门里的，不加这个条件的话，就会所有部门比较了</span><br><span class="line">SQL查询e1表是按行查询的，每查询一行，执行一次where后面的内容，</span><br><span class="line">也就是拿这一行的salary跟e2表里同部门的所有salary作比较，</span><br><span class="line">得到不超过这一行里salary值的个数。</span><br><span class="line">```SQL</span><br><span class="line">SELECT</span><br><span class="line">    d.Name AS 'Department', e1.Name AS 'Employee', e1.Salary</span><br><span class="line">FROM</span><br><span class="line">    Employee e1</span><br><span class="line">JOIN</span><br><span class="line">    Department d ON e1.DepartmentId = d.Id</span><br><span class="line">WHERE (SELECT</span><br><span class="line">            COUNT(DISTINCT e2.Salary)</span><br><span class="line">        FROM</span><br><span class="line">            Employee e2</span><br><span class="line">        WHERE</span><br><span class="line">            e2.Salary &gt; e1.Salary</span><br><span class="line">                AND e1.DepartmentId = e2.DepartmentId</span><br><span class="line">        ) &lt; 3 </span><br><span class="line">;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Write your MySQL query statement below</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">解题思路:先对Employee表进行部门分组工资排名，</span></span><br><span class="line"><span class="comment">再关联Department表查询部门名称，</span></span><br><span class="line"><span class="comment">再使用WHERE筛选出排名小于等于3的数据（也就是每个部门排名前3的工资）。</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">D.Name <span class="keyword">AS</span> Department,</span><br><span class="line">A.Name <span class="keyword">AS</span> Employee,</span><br><span class="line">A.Salary</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">partition</span> <span class="keyword">by</span> DepartmentId <span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span>) <span class="keyword">AS</span> ranking,DepartmentId,<span class="keyword">Name</span>,Salary</span><br><span class="line">      <span class="keyword">FROM</span> Employee) <span class="keyword">AS</span> A</span><br><span class="line"><span class="keyword">JOIN</span> Department <span class="keyword">AS</span> D <span class="keyword">ON</span> A.DepartmentId=D.id</span><br><span class="line"><span class="keyword">WHERE</span> A.ranking&lt;=<span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">d.Name <span class="keyword">AS</span> <span class="string">'Department'</span>, e1.Name <span class="keyword">AS</span> <span class="string">'Employee'</span>, e1.Salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> Employee e1</span><br><span class="line"><span class="keyword">JOIN</span></span><br><span class="line">Department d <span class="keyword">ON</span> e1.DepartmentId = d.Id</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="comment">#工资级别数量小于等于3，即最多只有3个工资级别，也就是前三高</span></span><br><span class="line"> <span class="number">3</span> &gt;= (</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> e2.Salary)</span><br><span class="line"> <span class="keyword">FROM</span></span><br><span class="line">Employee e2</span><br><span class="line">  <span class="keyword">WHERE</span></span><br><span class="line"><span class="comment">#e2的工资级别大于等于e1的工资级别</span></span><br><span class="line"> e2.Salary &gt;= e1.Salary</span><br><span class="line"> <span class="keyword">AND</span> e1.DepartmentId = e2.DepartmentId</span><br><span class="line"> )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> e1.DepartmentId,e1.Salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    t2.Name <span class="keyword">as</span> Department,</span><br><span class="line">    t1.Name <span class="keyword">as</span> Employee,</span><br><span class="line">    t1.Salary <span class="keyword">as</span> Salary</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    Employee <span class="keyword">as</span> t1,</span><br><span class="line">    Department <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    t1.DepartmentId = t2.Id <span class="keyword">and</span></span><br><span class="line">    <span class="number">3</span> &gt; (</span><br><span class="line">            <span class="keyword">select</span> </span><br><span class="line">                <span class="keyword">count</span>(<span class="keyword">distinct</span> Salary)</span><br><span class="line">            <span class="keyword">from</span></span><br><span class="line">                Employee</span><br><span class="line">            <span class="keyword">where</span></span><br><span class="line">                Salary&gt;t1.Salary <span class="keyword">and</span></span><br><span class="line">                DepartmentId = t1.DepartmentId</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t2.Name,t1.Salary <span class="keyword">desc</span></span><br></pre></td></tr></tbody></table></figure>
<p>这一题做的有点混乱了，本来按自己的想法来说，前几前几这种问题，一般都是排好序之后用limit，但是好像很多题目都是两表连接，用比较符盒count判断，这个思路要学会转换。还有就是看了一些别人题解，发现也有用自定义变量等这些方法的，姿势还是很多的，哎，太菜了。</p>
<p>为了记录足球比赛的结果，设计表如下：<br>team：参赛队伍表<br>match：赛程表<br>match赛程表中的 hostTeamID与 guestTeamID都和team表中的 teamID关联,查询2006-6-1到2006-7-1之间举行的所有比赛,并且用以下形式列出:<br>拜仁 2:0 不莱梅 2006-6-21<br>首先列出需要查询的列：<br>参赛队伍表 team<br>字段名称 字段类型 描述<br>teamID int 主键<br>teamName varchar(20) 队伍名称<br>赛程表match<br>字段名称 字段类型 描述<br>match ID int 主键<br>hostTeamID int 主队的ID<br>guestTeamID int 客队的ID<br>matchTime date   比赛开始时间<br>matchResult varchar(20) 比赛结果，如（2:0）<br>其次列出结果列：<br>主队 结果 客对 时间</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建参赛队伍表CREATE TABLE team(</span></span><br><span class="line">teamID INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, teamName VARCHAR(30) NOT NULL</span><br><span class="line">);</span><br><span class="line"><span class="comment">#向参赛队伍表中插入记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">' 拜 仁 '</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">' 不 莱 梅 '</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">'皇家马德里'</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">'巴塞罗那'</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">' 切 尔 西 '</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">' 曼 联 '</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">'AC 米 兰 '</span>); <span class="keyword">INSERT</span> <span class="keyword">INTO</span> team(teamName) <span class="keyword">VALUES</span>(<span class="string">'国际米兰'</span>);</span><br><span class="line"><span class="comment">#创建 match 赛程表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mat(</span><br><span class="line">matchID <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEy</span>,</span><br><span class="line">hostTeamID <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, guestTeamID <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">matchResult <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, matchTime <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">#向赛程表中插入几条记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mat(hostTeamID,guestTeamID,matchResult,matchTime) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'3:1'</span>,<span class="string">'2006-6-15'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mat(hostTeamID,guestTeamID,matchResult,matchTime) <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="number">4</span>,<span class="string">'2:2'</span>,<span class="string">'2006-6-28'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mat(hostTeamID,guestTeamID,matchResult,matchTime) <span class="keyword">VALUES</span>(<span class="number">5</span>,<span class="number">6</span>,<span class="string">'0:2'</span>,<span class="string">'2006-7-10'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mat(hostTeamID,guestTeamID,matchResult,matchTime) <span class="keyword">VALUES</span>(<span class="number">7</span>,<span class="number">8</span>,<span class="string">'5:3'</span>,<span class="string">'2006-5-30'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>1、先进行一次左连接 得到主队的名字</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> hid,m1.tname,mres,gid,matime  <span class="keyword">from</span> m <span class="keyword">left</span> <span class="keyword">join</span> t <span class="keyword">as</span> m1 <span class="keyword">on</span> m.hid= m1.tid;</span><br><span class="line">1、先进行一次左连接 得到主队的名字</span><br></pre></td></tr></tbody></table></figure>

<p>2、再进行一次左连接 得到客队的名字</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> hid,m1.tname,mres,gid,t1.tname <span class="keyword">from</span> m <span class="keyword">left</span> <span class="keyword">join</span> t <span class="keyword">as</span> m1 <span class="keyword">on</span> m.hid= m1.tid <span class="keyword">left</span> <span class="keyword">join</span> t <span class="keyword">as</span> t1 <span class="keyword">on</span> m.gid=t1.tid;</span><br><span class="line">1、先进行一次左连接 得到主队的名字</span><br></pre></td></tr></tbody></table></figure>

<p>通过外键联表，完成最终SQL：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t1.teamName,m.matchResult,t2.teamName,m.matchTime </span><br><span class="line"><span class="keyword">from</span> <span class="keyword">match</span> <span class="keyword">as</span> m </span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> team <span class="keyword">as</span> t1 <span class="keyword">on</span> m.hostTeamID = t1.teamID, </span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> team <span class="keyword">as</span> t2 <span class="keyword">on</span> m.guestTeamID = t2.TeamID </span><br><span class="line"><span class="keyword">where</span> matchTime <span class="keyword">between</span> <span class="string">"2006-6-1"</span> <span class="keyword">and</span> <span class="string">"2006-7-1"</span></span><br></pre></td></tr></tbody></table></figure>


<p>问题22：一个6亿的表a，一个3亿的表b，通过外键tid关联，<br>你如何最快的查询出满足条件的第50000到第50200中的这200条数据记录。</p>
<p>1、如果A表TID是自增长,并且是连续的,B表的ID为索引</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> a,b </span><br><span class="line"><span class="keyword">where</span> a.tid = b.id <span class="keyword">and</span> a.tid&gt;<span class="number">50000</span> </span><br><span class="line"><span class="keyword">limit</span> <span class="number">200</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>2、如果A表的TID不是连续的,那么就需要使用覆盖索引.TID要么是主键,要么是辅助索引,B表ID也需要有索引。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> b , </span><br><span class="line">    (<span class="keyword">select</span> tid </span><br><span class="line">    <span class="keyword">from</span> a </span><br><span class="line">    <span class="keyword">limit</span> <span class="number">50000</span>,<span class="number">200</span>) a </span><br><span class="line"><span class="keyword">where</span> b.id = a .tid;</span><br></pre></td></tr></tbody></table></figure>

<p>拷贝表( 拷贝数据, 源表名：a 目标表名：b)</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b(a, b, c) <span class="keyword">select</span> d,e,f <span class="keyword">from</span> a;</span><br></pre></td></tr></tbody></table></figure>

<p>Student(S#,Sname,Sage,Ssex) 学生表 Course(C#,Cname,T#) 课程表 SC(S#,C#,score) 成绩表 Teacher(T#,Tname) 教师表 查询没学过“叶平”老师课的同学的学号、姓名</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.S<span class="comment">#,Student.Sname</span></span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> S<span class="comment"># not in (select distinct( SC.S#) </span></span><br><span class="line">    <span class="keyword">from</span> SC,Course,Teacher </span><br><span class="line">    <span class="keyword">where</span> SC.C<span class="comment">#=Course.C# and Teacher.T#=Course.T# and Teacher.Tname=’叶平’);</span></span><br></pre></td></tr></tbody></table></figure>

<p>随机取出10条数据</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">users</span> </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> &gt;= (</span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> <span class="keyword">users</span>)-(<span class="keyword">SELECT</span> <span class="keyword">MIN</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> <span class="keyword">users</span>)</span><br><span class="line">    ) * <span class="keyword">RAND</span>() + (<span class="keyword">SELECT</span> <span class="keyword">MIN</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> <span class="keyword">users</span>) </span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure>
<p>#此方法效率比直接用高很多</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">rand</span>() <span class="keyword">LIMIT</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/jian-zhi-offer-shi-ti/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/jian-zhi-offer-shi-ti/" class="post-title-link" itemprop="url">剑指offer试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="1-二维数组中的查找-本题考点-查找"><a href="#1-二维数组中的查找-本题考点-查找" class="headerlink" title="1.二维数组中的查找  [^本题考点 查找]"></a>1.二维数组中的查找  [^本题考点 <em>查找</em>]</h4><p>​    <strong>题目：在一个二维数组中（每个一维数组的长度相同），每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># array 二维列表</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 时间复杂度O(n^2) 291ms</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Find_1</span>(<span class="params">self, target, array</span>):</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(array)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(array[i])):</span><br><span class="line">                <span class="keyword">if</span> target == array[i][j]:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 时间复杂度O(n)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Find_2</span>(<span class="params">self, target, array</span>):</span></span><br><span class="line">        <span class="comment"># 行数为二维数组的长度</span></span><br><span class="line">        row_count = len(array)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 列数为任意一列的长度</span></span><br><span class="line">        column_count = len(array[<span class="number">0</span>])</span><br><span class="line">        j = column_count - <span class="number">1</span></span><br><span class="line">        <span class="comment"># 当i小于行数（即行数,也就是此时的i,取值0--row_count-1）且列数-1大于等于0（即列数，也将就是此时的j,取值0--column_count-1）的时候，循环</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; row_count <span class="keyword">and</span> <span class="number">0</span> &lt; j:</span><br><span class="line">            value = array[i][j]</span><br><span class="line">            <span class="keyword">if</span> value == target:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">elif</span> value &lt; target:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="2-替换空格-本题考点-字符串"><a href="#2-替换空格-本题考点-字符串" class="headerlink" title="2.替换空格 [^本题考点 字符串]"></a>2.替换空格 [^本题考点 <em>字符串</em>]</h4><p>​    <strong>题目：请实现一个函数，将一个字符串中的每个空格替换成“%20”。例如，当字符串为We Are Happy.则经过替换之后的字符串为We%20Are%20Happy。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># s 源字符串</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">replaceSpace</span>(<span class="params">self, s</span>):</span></span><br><span class="line">        strLen = len(s)</span><br><span class="line">        <span class="comment"># 定义空字符串准备接收</span></span><br><span class="line">        rep_str = <span class="string">''</span></span><br><span class="line">        <span class="comment"># 遍历，检测到空格就加上"%20"</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(strLen):</span><br><span class="line">            <span class="keyword">if</span> s[i].isspace():</span><br><span class="line">                rep_str += <span class="string">'%'</span></span><br><span class="line">                rep_str += <span class="string">'2'</span></span><br><span class="line">                rep_str += <span class="string">'0'</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rep_str += s[i]</span><br><span class="line">        <span class="comment"># 返回辅助字符串</span></span><br><span class="line">        <span class="keyword">return</span> rep_str</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="3-从尾到头打印链表-本题考点-链表"><a href="#3-从尾到头打印链表-本题考点-链表" class="headerlink" title="3.从尾到头打印链表 [^本题考点 链表]"></a>3.从尾到头打印链表 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：输入一个链表，按链表值从尾到头的顺序返回一个ArrayList。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回从尾部到头部的列表值序列，例如[1,2,3]</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printListFromTailToHead</span>(<span class="params">self, listNode</span>):</span></span><br><span class="line">        output = []</span><br><span class="line">        pTmp = listNode</span><br><span class="line">        <span class="keyword">while</span> pTmp:</span><br><span class="line">            output.insetr(<span class="number">0</span>, pTmp.val)</span><br><span class="line">            pTmp = pTmp.next</span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="4-重建二叉树-本题考点-二叉树"><a href="#4-重建二叉树-本题考点-二叉树" class="headerlink" title="4.重建二叉树 [^本题考点 二叉树]"></a>4.重建二叉树 [^本题考点 <em>二叉树</em>]</h4><p>​    <strong>题目：输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。例如输入前序遍历序列{1,2,4,7,3,5,6,8}和中序遍历序列{4,7,2,1,5,3,8,6}，则重建二叉树并返回。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回构造的TreeNode根节点</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reConstructBinaryTree</span>(<span class="params">self, pre, tin</span>):</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pre <span class="keyword">or</span> <span class="keyword">not</span> tin:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> len(pre) != len(tin):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 取出pre的值</span></span><br><span class="line">        root = pre[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># 新建一个根节点</span></span><br><span class="line">        rootNode = TreeNode(root)</span><br><span class="line">        <span class="comment"># 在tin中找到pos的位置</span></span><br><span class="line">        pos = tin.index(root)</span><br><span class="line">        <span class="comment"># 将tin以pos的位置分为左右两边（除去pos）</span></span><br><span class="line">        tinLeft = tin[: pos]</span><br><span class="line">        tinRight = tin[pos+<span class="number">1</span>: ]</span><br><span class="line">        <span class="comment"># 将pre以pos的位置分为左右两边（除去pos）</span></span><br><span class="line">        preLeft = pre[<span class="number">1</span>: pos+<span class="number">1</span>]</span><br><span class="line">        preRight = pre[pos+<span class="number">1</span>: ]</span><br><span class="line">        <span class="comment"># 将preLeft和tinLeft再次走一遍这个方法，递归下去</span></span><br><span class="line">        leftNode = self.reConstructBinaryTree(preLeft, tinLeft)</span><br><span class="line">        <span class="comment"># 将preRight和tinRight再次走一遍这个方法，递归下去</span></span><br><span class="line">        rightNode = self.reConstructBinaryTree(preRight, tinRight)</span><br><span class="line">        <span class="comment"># 将leftNode赋值给rootNode的左节点</span></span><br><span class="line">        rootNode.left = leftNode</span><br><span class="line">        <span class="comment"># 将rightNode赋值给rootNode的右节点</span></span><br><span class="line">        rootNode.right = rightNode</span><br><span class="line">        <span class="comment"># 返回根节点</span></span><br><span class="line">        <span class="keyword">return</span> rootNode</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="5-用两个栈实现队列-本题考点-队列-栈"><a href="#5-用两个栈实现队列-本题考点-队列-栈" class="headerlink" title="5.用两个栈实现队列 [^本题考点 队列  栈]"></a>5.用两个栈实现队列 [^本题考点 <em>队列  栈</em>]</h4><p>​    <strong>题目：用两个栈来实现一个队列，完成队列的Push和Pop操作。 队列中的元素为int类型。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.acceptStack = []</span><br><span class="line">        self.outputStack = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="comment"># 入栈操作，实现队列的Push操作</span></span><br><span class="line">        self.acceptStack.append(node)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 要出的列表要是没有东西，就将两个的内容弹出，加入</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.outputStack:</span><br><span class="line">            <span class="keyword">while</span> self.acceptStack:</span><br><span class="line">                self.outputStack.append(self.acceptStack.pop())</span><br><span class="line">        <span class="comment"># 给出一个出栈的返回值，实现队列的POP操作</span></span><br><span class="line">        <span class="keyword">if</span> self.outputStack:</span><br><span class="line">            <span class="keyword">return</span> self.outputStack.pop()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="6-旋转数组的最小数字-本题考点-查找"><a href="#6-旋转数组的最小数字-本题考点-查找" class="headerlink" title="6.旋转数组的最小数字 [^本题考点 查找]"></a>6.旋转数组的最小数字 [^本题考点 <em>查找</em>]</h4><p>​    <strong>题目：把一个数组最开始的若干个元素搬到数组的末尾，我们称之为数组的旋转。 输入一个非减排序的数组的一个旋转，输出旋转数组的最小元素。 例如数组{3,4,5,1,2}为{1,2,3,4,5}的一个旋转，该数组的最小值为1。 NOTE：给出的所有元素都大于0，若数组大小为0，请返回0。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumberInRotateArray</span>(<span class="params">self, rotateArray</span>):</span></span><br><span class="line">        <span class="comment"># 时间复杂度O(n)</span></span><br><span class="line">        <span class="comment"># minNum = 0</span></span><br><span class="line">        <span class="comment"># for i in range(0, len(rotateArray)):</span></span><br><span class="line">        <span class="comment">#     minNum = minNum if minNum  &lt; rotateArray[i] and minNum != 0 else rotateArray[i]</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># return minNum</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 时间复杂度O(logn)</span></span><br><span class="line">        <span class="comment"># 若数组大小为0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> rotateArray:</span><br><span class="line">            <span class="comment"># 返回0</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># 左侧索引</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 右侧索引</span></span><br><span class="line">        right = len(rotateArray) - <span class="number">1</span></span><br><span class="line">        <span class="comment"># 当左侧索引小于右侧索引时循环</span></span><br><span class="line">        <span class="keyword">while</span> left &lt;= right:  <span class="comment"># 直至left&gt;right结束。</span></span><br><span class="line">            <span class="comment"># 中间值为左侧索引和右侧索引求和再除以2，向下取整</span></span><br><span class="line">            mid = (left + right) &gt;&gt; <span class="number">1</span>  <span class="comment"># (left + right) // 2</span></span><br><span class="line">            <span class="comment"># 若中间索引对应的值小于它左侧一个的值，即为要取得值</span></span><br><span class="line">            <span class="keyword">if</span> rotateArray[mid] &lt; rotateArray[mid - <span class="number">1</span>]:</span><br><span class="line">                <span class="comment"># 返最小标值</span></span><br><span class="line">                <span class="keyword">return</span> rotateArray[mid]</span><br><span class="line">            <span class="comment"># 若中间索引对应的值小于右侧索引的值，最小值在左侧 51234</span></span><br><span class="line">            <span class="comment"># 假如最小值在右边， 53214，那么不能构成非递减</span></span><br><span class="line">            <span class="keyword">elif</span> rotateArray[mid] &lt; rotateArray[right]:</span><br><span class="line">                <span class="comment"># 将右侧索引置为中间索引-1</span></span><br><span class="line">                right = mid - <span class="number">1</span></span><br><span class="line">            <span class="comment"># 若中间索引对应的值大于右侧索引的值，最小值在右侧，</span></span><br><span class="line">            <span class="comment"># 假如最小值在左边，那么在非递减数组中间值就不会大于右边</span></span><br><span class="line">            <span class="comment"># if(rotateArray[mid] &gt; rotateArray[left])</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 将左侧索引置为中间索引+1</span></span><br><span class="line">                left = mid + <span class="number">1</span></span><br><span class="line">     </span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumberInRotateArray</span>(<span class="params">self, rotateArray</span>):</span></span><br><span class="line">        <span class="keyword">if</span> rotateArray <span class="keyword">is</span> <span class="literal">None</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        start = <span class="number">0</span></span><br><span class="line">        end = len(rotateArray) - <span class="number">1</span></span><br><span class="line">        mid = (start + end) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">while</span> start &lt; end:</span><br><span class="line">            <span class="keyword">if</span> rotateArray[mid] &gt; rotateArray[end]:</span><br><span class="line">                start = mid + <span class="number">1</span></span><br><span class="line">                mid = (start + end) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">elif</span> rotateArray[mid] == rotateArray[end]:</span><br><span class="line">                end -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                end = mid</span><br><span class="line">                mid = (start + end) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> rotateArray[start]</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="7-斐波那契数列-本题考点-递归，复杂度"><a href="#7-斐波那契数列-本题考点-递归，复杂度" class="headerlink" title="7.斐波那契数列  [^本题考点 递归，复杂度]"></a>7.斐波那契数列  [^本题考点 <em>递归，复杂度</em>]</h4><p>​    <strong>题目：大家都知道斐波那契数列，现在要求输入一个整数n，请你输出斐波那契数列的第n项（从0开始，第0项为0）。n&lt;=39</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 时间复杂度 O(n)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Fibonacci_1</span>(<span class="params">self, n</span>):</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            a, b = b, a+b</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 递归，时间复杂度 O(2^n)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Fibonacci_2</span>(<span class="params">n</span>):</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> n &gt; <span class="number">1</span>:</span><br><span class="line">            num = Fibonacci(n<span class="number">-1</span>) + Fibonacci(n<span class="number">-2</span>)</span><br><span class="line">            <span class="keyword">return</span> num</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda 表达式版</span></span><br><span class="line">fibonacci = <span class="keyword">lambda</span> n: n <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="8-跳台阶-本题考点-逻辑分析"><a href="#8-跳台阶-本题考点-逻辑分析" class="headerlink" title="8.跳台阶 [^本题考点 逻辑分析]"></a>8.跳台阶 [^本题考点 <em>逻辑分析</em>]</h4><p>​    <strong>题目：一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法（先后次序不同算不同的结果）。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 简单版</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jumpFloor_1</span>(<span class="params">self, number</span>):</span></span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">        reg = <span class="number">0</span></span><br><span class="line">        a = <span class="number">1</span></span><br><span class="line">        b = <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, number): <span class="comment"># 从2加到number-1</span></span><br><span class="line">            reg = a + b</span><br><span class="line">            a = b</span><br><span class="line">            b = reg</span><br><span class="line">        <span class="keyword">return</span> reg</span><br><span class="line">    <span class="comment"># 简化版</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jumpFloor_2</span>(<span class="params">self, number</span>):</span></span><br><span class="line">        a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(number):</span><br><span class="line">            a, b = b, a+b</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda 表达式版</span></span><br><span class="line">fibonacci = <span class="keyword">lambda</span> n: n <span class="keyword">if</span> n &lt;= <span class="number">2</span> <span class="keyword">else</span> fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="9-变态跳台阶-本题考点-逻辑分析"><a href="#9-变态跳台阶-本题考点-逻辑分析" class="headerlink" title="9.变态跳台阶 [^本题考点 逻辑分析]"></a>9.变态跳台阶 [^本题考点 <em>逻辑分析</em>]</h4><p>​    <strong>题目：一只青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">分析：</span></span><br><span class="line"><span class="string">1 (1)</span></span><br><span class="line"><span class="string">2 (11,2)</span></span><br><span class="line"><span class="string">3 (111,21,3,12)</span></span><br><span class="line"><span class="string">4 (1111,22,13,31,211,112,121,4)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    假设有n级台阶，青蛙从最后的第n级开始往前跳，可能性为：</span></span><br><span class="line"><span class="string">    f(n) = f(n-1) + f(n-2) + ... + f(2) + f(1)        ---&gt; ①</span></span><br><span class="line"><span class="string">    青蛙从最后的第n-1级开始往前跳，可能性为：</span></span><br><span class="line"><span class="string">    f(n-1) = f(n-2) + f(n-3) + ... + f(2) + f(1)    ---&gt; ②</span></span><br><span class="line"><span class="string">    将②式代入①式得：</span></span><br><span class="line"><span class="string">    f(n) = 2f(n-1)  n &gt; 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f(1) = 1 n = 1</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 简单版</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jumpFloorII_1</span>(<span class="params">self, number</span>):</span></span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">        ret = <span class="number">1</span></span><br><span class="line">        a = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, number+<span class="number">1</span>):</span><br><span class="line">            ret = <span class="number">2</span>*ret</span><br><span class="line">            a = ret</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">       <span class="comment"># 简化版</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jumpFloorII_2</span>(<span class="params">self, number</span>):</span></span><br><span class="line">        a, b = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(number<span class="number">-1</span>):</span><br><span class="line">            a, b = b, b*<span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> a</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="10-矩形覆盖-本题考点-逻辑分析"><a href="#10-矩形覆盖-本题考点-逻辑分析" class="headerlink" title="10.矩形覆盖 [^本题考点 逻辑分析]"></a>10.矩形覆盖 [^本题考点 <em>逻辑分析</em>]</h4><p>​    *<em>题目：我们可以用2</em>1的小矩形横着或者竖着去覆盖更大的矩形。请问用n个2<em>1的小矩形无重叠地覆盖一个2</em>n的大矩形，总共有多少种方法？**</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    也是斐波那契数列的变形</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rectCover</span>(<span class="params">self, number</span>):</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        a, b = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(number<span class="number">-1</span>):</span><br><span class="line">            a, b = b, a+b</span><br><span class="line">        <span class="keyword">return</span> a</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="11-包含min函数的栈-本题考点-栈"><a href="#11-包含min函数的栈-本题考点-栈" class="headerlink" title="11.包含min函数的栈 [^本题考点 栈]"></a>11.包含min函数的栈 [^本题考点 <em>栈</em>]</h4><p>​    <strong>题目：定义栈的数据结构，请在该类型中实现一个能够得到栈中所含最小元素的min函数（时间复杂度应为O（1））。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如果用固定空间做不出时间上的优化，就用空间换时间</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种是self.stack和self.minValue的长度时刻保持一致</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.stack = []</span><br><span class="line">        self.minValue = []</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.stack.append(node)</span><br><span class="line">        <span class="keyword">if</span> self.minValue:</span><br><span class="line">            <span class="keyword">if</span> node &lt; self.minValue[<span class="number">-1</span>]:</span><br><span class="line">                self.minValue.append(node)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.minValue.append(self.minValue[<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.minValue.append(node)</span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        self.minValue.pop()</span><br><span class="line">        <span class="keyword">return</span> self.stack.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">top</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.stack[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">min</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.minValue:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.minValue[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.stack = []</span><br><span class="line">        self.minValue = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.stack.append(node)</span><br><span class="line">        <span class="keyword">if</span> self.minValue:</span><br><span class="line">            <span class="keyword">if</span> node &lt;= self.minValue[<span class="number">-1</span>]:</span><br><span class="line">                self.minValue.append(node)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.minValue.append(node)</span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> self.stack[<span class="number">-1</span>] == self.minValue[<span class="number">-1</span>]:</span><br><span class="line">            self.minValue.pop()</span><br><span class="line">        <span class="keyword">return</span> self.stack.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">top</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.stack[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">min</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.minValue:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.minValue[<span class="number">-1</span>]</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="12-栈的压入、弹出序列-本题考点-栈"><a href="#12-栈的压入、弹出序列-本题考点-栈" class="headerlink" title="12.栈的压入、弹出序列 [^本题考点 栈]"></a>12.栈的压入、弹出序列 [^本题考点 <em>栈</em>]</h4><p>​    <strong>题目：输入两个整数序列，第一个序列表示栈的压入顺序，请判断第二个序列是否可能为该栈的弹出顺序。假设压入栈的所有数字均不相等。例如序列1,2,3,4,5是某栈的压入顺序，序列4,5,3,2,1是该压栈序列对应的一个弹出序列，但4,3,5,1,2就不可能是该压栈序列的弹出序列。（注意：这两个序列的长度是相等的）</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">IsPopOrder</span>(<span class="params">self, pushV, popV</span>):</span></span><br><span class="line">        <span class="comment"># 语法错误，返回错误</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pushV <span class="keyword">or</span> len(pushV) != len(popV):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        stack = []</span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        1,2,3,4,5</span></span><br><span class="line"><span class="string">        4,5,3,2,1 √</span></span><br><span class="line"><span class="string">        4,3,5,1,2 ×  因为若是4为首位出栈的话，123必定还在栈中，无论5什么时候入栈和出栈，都不可能出现1在2前面的现象，所以错误</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> pushV:</span><br><span class="line">            stack.append(i)</span><br><span class="line">            <span class="keyword">while</span> len(stack) <span class="keyword">and</span> stack[<span class="number">-1</span>] == popV[<span class="number">0</span>]:</span><br><span class="line">                stack.pop()</span><br><span class="line">                popV.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 不能合理实现辅助列表和要判断的列表之间全部清空</span></span><br><span class="line">        <span class="keyword">if</span> len(stack):</span><br><span class="line">            <span class="comment"># 返回错误</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># 都满足，返回正确</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="13-数组中只出现一次的数字-本题考点-数组"><a href="#13-数组中只出现一次的数字-本题考点-数组" class="headerlink" title="13.数组中只出现一次的数字 [^本题考点 数组]"></a>13.数组中只出现一次的数字 [^本题考点 <em>数组</em>]</h4><p>​    <strong>一个整型数组里除了两个数字之外，其他的数字都出现了偶数次。请写程序找出这两个只出现一次的数字。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回[a,b] 其中ab是出现一次的两个数字</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FindNumsAppearOnce</span>(<span class="params">self, array</span>):</span></span><br><span class="line">        <span class="keyword">if</span> len(array) &lt; <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果两个数相同，那么这两个数的异或操作就相同</span></span><br><span class="line">        <span class="comment"># 两个数异或的结果初始值</span></span><br><span class="line">        twoNumXor = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 循环array，找到两个数异或的最终结果</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> array:</span><br><span class="line">            <span class="keyword">if</span> twoNumXor == <span class="literal">None</span>:</span><br><span class="line">                twoNumXor = num</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                twoNumXor = twoNumXor ^ num</span><br><span class="line">        <span class="comment"># 找到这两个数是从第几位开始不一样的（找到第一个1）</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> twoNumXor % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            twoNumXor //= <span class="number">2</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 设置mask为第一个1往后加count个0</span></span><br><span class="line">        mask = <span class="number">1</span> &lt;&lt; count</span><br><span class="line">        <span class="comment"># 第一个出现一次的数</span></span><br><span class="line">        firstNum = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 第二次出现一次的数</span></span><br><span class="line">        secondNum = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 再次循环array</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> array:</span><br><span class="line">            <span class="comment"># 第一波数，其中会有第一个出现一次的数</span></span><br><span class="line">            <span class="keyword">if</span> mask &amp; num == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> firstNum == <span class="literal">None</span>:</span><br><span class="line">                    firstNum = num</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    firstNum = firstNum ^ num</span><br><span class="line">            <span class="comment"># 第二波数，其中会有第二个出现一次的数</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> secondNum == <span class="literal">None</span>:</span><br><span class="line">                    secondNum = num</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    secondNum = secondNum ^ num</span><br><span class="line">        <span class="comment"># 返回这两个只出现一次的数</span></span><br><span class="line">        <span class="keyword">return</span> firstNum, secondNum</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="14-链表中倒数第k个结点-本题考点-链表"><a href="#14-链表中倒数第k个结点-本题考点-链表" class="headerlink" title="14.链表中倒数第k个结点 [^本题考点 链表]"></a>14.链表中倒数第k个结点 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：输入一个链表，输出该链表中倒数第k个结点。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FindKthToTail</span>(<span class="params">self, head, k</span>):</span></span><br><span class="line">        <span class="comment"># 定义第一个游标</span></span><br><span class="line">        firstPoint = head</span><br><span class="line">        <span class="comment"># 定义第二个游标</span></span><br><span class="line">        secondPoint = head</span><br><span class="line">        <span class="comment"># 循环，让第一个游标增加k个单位的长度</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(k):</span><br><span class="line">            <span class="comment"># 在循环中若是游标为None，则达到临界条件，</span></span><br><span class="line">            <span class="comment"># 说明k比该链表的长度还要长，即返回None</span></span><br><span class="line">            <span class="keyword">if</span> firstPoint == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            firstPoint = firstPoint.next</span><br><span class="line">        <span class="comment"># 当第一个节点不是None，就一直循环，让两个节点同时往后移动，当第一个节点移动到最后为None的时候，第二个节点即为我们要返回的结点</span></span><br><span class="line">        <span class="keyword">while</span> firstPoint != <span class="literal">None</span>:</span><br><span class="line">            firstPoint = firstPoint.next</span><br><span class="line">            secondPoint = secondPoint.next</span><br><span class="line">        <span class="comment"># 返回最终倒数第K个节点</span></span><br><span class="line">        <span class="keyword">return</span> secondPoint</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="15-反转链表-本题考点-链表"><a href="#15-反转链表-本题考点-链表" class="headerlink" title="15.反转链表 [^本题考点 链表]"></a>15.反转链表 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：输入一个链表，反转链表后，输出新链表的表头。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">ReverseList</span>(<span class="params">self, pHead</span>):</span></span><br><span class="line">        <span class="comment"># 如果旧链表为空或者没有旧链表长度为1，就直接返回，无需反转</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pHead <span class="keyword">or</span> <span class="keyword">not</span> pHead.next:</span><br><span class="line">            <span class="keyword">return</span> pHead</span><br><span class="line">        newHead = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 只要旧链表不为空，就一直循环</span></span><br><span class="line">        <span class="keyword">while</span> pHead:</span><br><span class="line">            <span class="comment"># 在循环过程中，让旧链表的表头的下一个结点等于新表头，</span></span><br><span class="line">            <span class="comment"># 新表头等于旧表头，旧表头等于旧表头的下一个结点，依次循环</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 容易搞清的写法</span></span><br><span class="line">            <span class="comment"># temp = pHead.next</span></span><br><span class="line">            <span class="comment"># pHead.next = newHead</span></span><br><span class="line">            <span class="comment"># newHead = pHead</span></span><br><span class="line">            <span class="comment"># pHead = temp</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 简单写法</span></span><br><span class="line">            pHead.next, newHead, pHead = newHead, pHead, pHead.next</span><br><span class="line">        <span class="comment"># 最终就达到了翻转链表的效果，返回newHead即为新链表的表头</span></span><br><span class="line">        <span class="keyword">return</span> newHead</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="16-合并两个排序的链表-本题考点-链表"><a href="#16-合并两个排序的链表-本题考点-链表" class="headerlink" title="16.合并两个排序的链表 [^本题考点 链表]"></a>16.合并两个排序的链表 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：输入两个单调递增的链表，输出两个链表合成后的链表，当然我们需要合成后的链表满足单调不减规则。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回合并后列表</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Merge</span>(<span class="params">self, pHead1, pHead2</span>):</span></span><br><span class="line">        <span class="comment"># 若pHead1为空，直接输出pHead2</span></span><br><span class="line">        <span class="keyword">if</span> pHead1 == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> pHead2</span><br><span class="line">        <span class="comment"># 若pHead2为空，直接输出pHead1</span></span><br><span class="line">        <span class="keyword">if</span> pHead2 == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> pHead1</span><br><span class="line">        <span class="comment"># 新链表头（第一个指针）选取两个值小的</span></span><br><span class="line">        newHead = pHead1 <span class="keyword">if</span> pHead1.val &lt; pHead2.val <span class="keyword">else</span> pHead2</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 再定两个指针，用于后续循环中判断大小</span></span><br><span class="line">        pTmp1 = pHead1</span><br><span class="line">        pTmp2 = pHead2</span><br><span class="line">        <span class="comment"># 如果新链表头是pHead1，就将指针pTmp1往后移动</span></span><br><span class="line">        <span class="keyword">if</span> newHead == pHead1:</span><br><span class="line">            pTmp1 = pTmp1.next</span><br><span class="line">        <span class="comment"># 如果新链表头是pHead2，就将指针pTmp2往后移动</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pTmp2 = pTmp2.next</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第四个指针为两个指针比较完之后的值，不断往后延续</span></span><br><span class="line">        previous_Pointer = newHead</span><br><span class="line">        <span class="comment"># 当两个指针都不为空的时候循环</span></span><br><span class="line">        <span class="keyword">while</span> pTmp1 <span class="keyword">and</span> pTmp2:</span><br><span class="line">            <span class="comment"># 如果pTmp1的值小于pTmp2的值，就将第四个指针指向pTmp1，且将地址个指针的值也更新为pTmp1，方便下次接着延续</span></span><br><span class="line">            <span class="keyword">if</span> pTmp1.val &lt; pTmp2.val:</span><br><span class="line">                previous_Pointer.next = pTmp1</span><br><span class="line">                previous_Pointer = pTmp1</span><br><span class="line">                pTmp1 = pTmp1.next</span><br><span class="line">            <span class="comment"># 反之亦然</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                previous_Pointer.next = pTmp2</span><br><span class="line">                previous_Pointer = pTmp2</span><br><span class="line">                pTmp2 = pTmp2.next</span><br><span class="line">        <span class="comment"># 循环结束后，若pTmp1为空，则说明pTmp2有剩余，name就将pTmp2剩余的接到指针previous_Pointer之后即可</span></span><br><span class="line">        <span class="keyword">if</span> pTmp1 == <span class="literal">None</span>:</span><br><span class="line">            previous_Pointer.next = pTmp2</span><br><span class="line">        <span class="comment"># 反之亦然</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            previous_Pointer.next = pTmp1</span><br><span class="line">        <span class="comment"># 最终返回拼接好的第一个指针newHead</span></span><br><span class="line">        <span class="keyword">return</span> newHead</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="17-两个链表的第一个公共结点-本题考点-链表"><a href="#17-两个链表的第一个公共结点-本题考点-链表" class="headerlink" title="17.两个链表的第一个公共结点 [^本题考点 链表]"></a>17.两个链表的第一个公共结点 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：输入两个链表，找出它们的第一个公共结点。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FindFirstCommonNode</span>(<span class="params">self, pHead1, pHead2</span>):</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第一个参数给比较短的那个链表</span></span><br><span class="line">        <span class="comment"># 第二个参数是比较长的那个链表</span></span><br><span class="line">        <span class="comment"># 第三个参数是比较短的那个链表头</span></span><br><span class="line">        <span class="comment"># 第四个参数是比较长的那个链表头</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">find_equal</span>(<span class="params">shortPointer, longPointer, shortHead, longHead</span>):</span></span><br><span class="line">            k = <span class="number">0</span></span><br><span class="line">            <span class="comment"># 寻找出链表长度之间的差值</span></span><br><span class="line">            <span class="keyword">while</span> longPointer:</span><br><span class="line">                longPointer = longPointer.next</span><br><span class="line">                k += <span class="number">1</span></span><br><span class="line">            <span class="comment"># 先让长的那个走K步</span></span><br><span class="line">            shortPointer = shortHead</span><br><span class="line">            longPointer = longHead</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(k):</span><br><span class="line">                longPointer = longPointer.next</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> shortPointer != longPointer:</span><br><span class="line">                shortPointer = shortPointer.next</span><br><span class="line">                longPointer = longPointer.next</span><br><span class="line">            <span class="keyword">return</span> shortPointer</span><br><span class="line"></span><br><span class="line">        pTmp1 = pHead1</span><br><span class="line">        pTmp2 = pHead2</span><br><span class="line">        <span class="keyword">while</span> pTmp1 <span class="keyword">and</span> pTmp2:</span><br><span class="line">            <span class="comment"># 当两个链表一样长的时候，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> pTmp1 == pTmp2:</span><br><span class="line">                <span class="keyword">return</span> pTmp1</span><br><span class="line">            pTmp1 = pTmp1.next</span><br><span class="line">            pTmp2 = pTmp2.next</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pTmp1:</span><br><span class="line">            <span class="string">'''</span></span><br><span class="line"><span class="string">            k = 0</span></span><br><span class="line"><span class="string">            # 寻找出链表长度之间的差值</span></span><br><span class="line"><span class="string">            while pTmp1:</span></span><br><span class="line"><span class="string">                pTmp1 = pTmp1.next</span></span><br><span class="line"><span class="string">                k += 1</span></span><br><span class="line"><span class="string">            # 先让长的那个走K步</span></span><br><span class="line"><span class="string">            pTmp1 = pHead1</span></span><br><span class="line"><span class="string">            pTmp2 = pHead2</span></span><br><span class="line"><span class="string">            for i in range(k):</span></span><br><span class="line"><span class="string">                pTmp1 = pTmp1.next</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            while pTmp1 != pTmp2:</span></span><br><span class="line"><span class="string">                pTmp1 = pTmp1.next</span></span><br><span class="line"><span class="string">                pTmp2 = pTmp2.next</span></span><br><span class="line"><span class="string">            return pTmp1</span></span><br><span class="line"><span class="string">            '''</span></span><br><span class="line">            <span class="keyword">return</span> find_equal(pTmp2, pTmp1, pHead1, pHead2)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pTmp2:</span><br><span class="line">            <span class="string">'''</span></span><br><span class="line"><span class="string">            k = 0</span></span><br><span class="line"><span class="string">            # 寻找出链表长度之间的差值</span></span><br><span class="line"><span class="string">            while pTmp2:</span></span><br><span class="line"><span class="string">                pTmp2 = pTmp2.next</span></span><br><span class="line"><span class="string">                k += 1</span></span><br><span class="line"><span class="string">            # 先让长的那个走K步</span></span><br><span class="line"><span class="string">            pTmp1 = pHead1</span></span><br><span class="line"><span class="string">            pTmp2 = pHead2</span></span><br><span class="line"><span class="string">            for i in range(k):</span></span><br><span class="line"><span class="string">                pTmp2 = pTmp2.next</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            while pTmp1 != pTmp2:</span></span><br><span class="line"><span class="string">                pTmp1 = pTmp1.next</span></span><br><span class="line"><span class="string">                pTmp2 = pTmp2.next</span></span><br><span class="line"><span class="string">            return pTmp1</span></span><br><span class="line"><span class="string">            '''</span></span><br><span class="line">            <span class="keyword">return</span> find_equal(pTmp1, pTmp2, pHead1, pHead2)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="18-孩子们的游戏-本题考点-模拟"><a href="#18-孩子们的游戏-本题考点-模拟" class="headerlink" title="18.孩子们的游戏 [^本题考点 模拟]"></a>18.孩子们的游戏 [^本题考点 <em>模拟</em>]</h4><p>​    <strong>题目：每年六一儿童节,牛客都会准备一些小礼物去看望孤儿院的小朋友,今年亦是如此。HF作为牛客的资深元老,自然也准备了一些小游戏。其中,有个游戏是这样的:首先,让小朋友们围成一个大圈。然后,他随机指定一个数m,让编号为0的小朋友开始报数。每次喊到m-1的那个小朋友要出列唱首歌,然后可以在礼品箱中任意的挑选礼物,并且不再回到圈中,从他的下一个小朋友开始,继续0…m-1报数….这样下去….直到剩下最后一个小朋友,可以不用表演,并且拿到牛客名贵的“名侦探柯南”典藏版(名额有限哦!!^_^)。请你试着想下,哪个小朋友会得到这份礼品呢？(注：小朋友的编号是从0到n-1)</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">LastRemaining_Solution</span>(<span class="params">self, n, m</span>):</span></span><br><span class="line">        <span class="comment"># 通过推倒公式可得 f(n) = (f(n-1) + m) + n</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">1</span> <span class="keyword">or</span> m &lt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        value = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">            currentValue = (value + m) % index</span><br><span class="line">            value = currentValue</span><br><span class="line">        <span class="keyword">return</span> value</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="19-链表中环的入口结点-本题考点-链表"><a href="#19-链表中环的入口结点-本题考点-链表" class="headerlink" title="19.链表中环的入口结点 [^本题考点 链表]"></a>19.链表中环的入口结点 [^本题考点 <em>链表</em>]</h4><p>​    <strong>题目：给一个链表，若其中包含环，请找出该链表的环的入口结点，否则，输出null。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">EntryNodeOfLoop</span>(<span class="params">self, pHead</span>):</span></span><br><span class="line">        <span class="comment"># 需要定义两个指针，其中一个条两部，一个跳一步</span></span><br><span class="line">        <span class="comment"># 循环跳</span></span><br><span class="line">        <span class="comment"># 要么是快的指针为空（没有环），要么是快慢终又一次相等（有环）</span></span><br><span class="line">        <span class="keyword">if</span> pHead == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        fastPointer = pHead</span><br><span class="line">        slowPointer = pHead</span><br><span class="line">        <span class="keyword">while</span> fastPointer <span class="keyword">and</span> fastPointer.next:</span><br><span class="line">            fastPointer = fastPointer.next.next</span><br><span class="line">            slowPointer = slowPointer.next</span><br><span class="line">            <span class="keyword">if</span> fastPointer == slowPointer:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> fastPointer == <span class="literal">None</span> <span class="keyword">or</span> fastPointer.next == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果slow走了l的长度，那么fast就走了2l的长度</span></span><br><span class="line">        <span class="comment"># 假设从开始到入口点的长度为s，slow在环里面走的长度是d</span></span><br><span class="line">        <span class="comment"># 那么 l = s + d</span></span><br><span class="line">        <span class="comment"># 假设 slow没走的长度是m，fast走的长度是多少</span></span><br><span class="line">        <span class="comment"># fast走的长度就是 n*(m+d) + d + s = 2l</span></span><br><span class="line">        <span class="comment"># 代入 n*(m+d) + d + s = (m+d) * 2</span></span><br><span class="line">        <span class="comment"># n(m+d) = s+d</span></span><br><span class="line">        <span class="comment"># s = nm + (n-1)d</span></span><br><span class="line">        <span class="comment"># s = m + (n-1)(m+d)</span></span><br><span class="line"></span><br><span class="line">        fastPointer = pHead</span><br><span class="line">        <span class="keyword">while</span> fastPointer != slowPointer:</span><br><span class="line">            fastPointer = fastPointer.next</span><br><span class="line">            slowPointer = slowPointer.next</span><br><span class="line">        <span class="keyword">return</span> fastPointer</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="20-二进制中1的个数-本题考点-位运算"><a href="#20-二进制中1的个数-本题考点-位运算" class="headerlink" title="20.二进制中1的个数 [^本题考点 位运算]"></a>20.二进制中1的个数 [^本题考点 <em>位运算</em>]</h4><p>​    <strong>题目：输入一个整数，输出该数二进制表示中1的个数。其中负数用补码表示。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">NumberOf1</span>(<span class="params">self, n</span>):</span></span><br><span class="line">        <span class="comment"># 补码：正数不变，负数是它的整数的反码+1</span></span><br><span class="line"></span><br><span class="line">        n = <span class="number">0xFFFFFFFF</span> &amp; n</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第一种</span></span><br><span class="line">        <span class="comment"># count = 0</span></span><br><span class="line">        <span class="comment"># for i in str(bin(n)):</span></span><br><span class="line">        <span class="comment">#     if i == '1':</span></span><br><span class="line">        <span class="comment">#         count +=1</span></span><br><span class="line">        <span class="comment"># return count</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第二种</span></span><br><span class="line">        <span class="comment"># count = 0</span></span><br><span class="line">        <span class="comment"># for i in range(32):</span></span><br><span class="line">        <span class="comment">#     mask = 1 &lt;&lt; i</span></span><br><span class="line">        <span class="comment">#     if n &amp; mask != 0:</span></span><br><span class="line">        <span class="comment">#         count += 1</span></span><br><span class="line">        <span class="comment"># return count</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第三种</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> n:</span><br><span class="line">            n = n &amp; (n<span class="number">-1</span>)</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            n = <span class="number">0xFFFFFFFF</span> &amp; n</span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="21-不用加减乘除做加法-本题考点-发散思维能力"><a href="#21-不用加减乘除做加法-本题考点-发散思维能力" class="headerlink" title="21.不用加减乘除做加法 [^本题考点 发散思维能力]"></a>21.不用加减乘除做加法 [^本题考点 <em>发散思维能力</em>]</h4><p>​    *<em>写一个函数，求两个整数之和，要求在函数体内不得使用+、-、</em>、/四则运算符号。**</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Add</span>(<span class="params">self, num1, num2</span>):</span></span><br><span class="line">        <span class="comment"># 两数进行异或操作</span></span><br><span class="line">        xorNum = num1 ^ num2</span><br><span class="line">        <span class="comment"># 两数进行与操作</span></span><br><span class="line">        andNum = (num1 &amp; num2) &lt;&lt; <span class="number">1</span></span><br><span class="line">        <span class="comment"># 当两数的与不为0就一直循环</span></span><br><span class="line">        <span class="keyword">while</span> andNum:</span><br><span class="line">            <span class="comment"># 继续进行 异或操作数和与操作数的异或操作</span></span><br><span class="line">            tmp1 = xorNum ^ andNum</span><br><span class="line">            <span class="comment"># 继续进行 异或操作数和与操作数的与操作</span></span><br><span class="line">            tmp2 = (xorNum &amp; andNum) &lt;&lt; <span class="number">1</span></span><br><span class="line">            <span class="comment"># 限制tmp1为32位</span></span><br><span class="line">            tmp1 = tmp1 &amp; <span class="number">0xFFFFFFFF</span></span><br><span class="line">            <span class="comment"># 将tmp1重新赋值为xorNum</span></span><br><span class="line">            xorNum = tmp1</span><br><span class="line">            <span class="comment"># 将tmp2重新赋值为andNum</span></span><br><span class="line">            andNum = tmp2</span><br><span class="line">        <span class="comment"># 若是整数就返回xorNum，若是负数就得先限制位数再转为负数</span></span><br><span class="line">        <span class="keyword">return</span> xorNum <span class="keyword">if</span> xorNum &lt;= <span class="number">0x7FFFFFFF</span> <span class="keyword">else</span> ~(xorNum ^ <span class="number">0xFFFFFFFF</span>)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="22-数组中出现次数超过一半的数字-本题考点-数组"><a href="#22-数组中出现次数超过一半的数字-本题考点-数组" class="headerlink" title="22.数组中出现次数超过一半的数字 [^本题考点 数组]"></a>22.数组中出现次数超过一半的数字 [^本题考点 <em>数组</em>]</h4><p>​    <strong>题目：数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。例如输入一个长度为9的数组{1,2,3,2,2,2,5,4,2}。由于数字2在数组中出现了5次，超过数组长度的一半，因此输出2。如果不存在则输出0。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MoreThanHalfNum_Solution</span>(<span class="params">self, numbers</span>):</span></span><br><span class="line">        <span class="comment"># 时间复杂度O(n), 空间复杂度O(n)</span></span><br><span class="line">        <span class="comment"># numCount = {}</span></span><br><span class="line">        <span class="comment"># numLen = len(numbers)</span></span><br><span class="line">        <span class="comment"># for num in numbers:</span></span><br><span class="line">        <span class="comment">#     if num in numCount:</span></span><br><span class="line">        <span class="comment">#         numCount[num] += 1</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         numCount[num] = 1</span></span><br><span class="line">        <span class="comment">#     if numCount[num] &gt; (numLen &gt;&gt; 1):</span></span><br><span class="line">        <span class="comment">#         return num</span></span><br><span class="line">        <span class="comment"># return 0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 想要空间复杂度为O(1)，时间复杂度O(n)</span></span><br><span class="line">        <span class="comment"># 思路：遇到不相同的数据就相互抵消掉，最终剩下的数字就可能是大于一半的数字</span></span><br><span class="line">        numLen = len(numbers)</span><br><span class="line">        last = <span class="number">0</span></span><br><span class="line">        lastCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">            <span class="keyword">if</span> lastCount == <span class="number">0</span>:</span><br><span class="line">                last = num</span><br><span class="line">                lastCount = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> num == last:</span><br><span class="line">                    lastCount += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    lastCount -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> lastCount == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 这种情况是last可能是大于一半的数字</span></span><br><span class="line">            lastCount = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">                <span class="keyword">if</span> num == last:</span><br><span class="line">                    lastCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> lastCount &gt; (numLen &gt;&gt; <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">return</span> last</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="23-整数中1出现的次数（从1到n整数中1出现的次数）-本题考点-时间效率"><a href="#23-整数中1出现的次数（从1到n整数中1出现的次数）-本题考点-时间效率" class="headerlink" title="23.整数中1出现的次数（从1到n整数中1出现的次数） [^本题考点 时间效率]"></a>23.整数中1出现的次数（从1到n整数中1出现的次数） [^本题考点 <em>时间效率</em>]</h4><p>​    <strong>求出1<del>13的整数中1出现的次数,并算出100</del>1300的整数中1出现的次数？为此他特别数了一下1~13中包含1的数字有1、10、11、12、13因此共出现6次,但是对于后面问题他就没辙了。ACMer希望你们帮帮他,并把问题更加普遍化,可以很快的求出任意非负整数区间中1出现的次数（从1 到 n 中1出现的次数）。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">NumberOf1Between1AndN_Solution</span>(<span class="params">self, n</span>):</span></span><br><span class="line">        <span class="comment"># 第一种，不考虑时间复杂度</span></span><br><span class="line">        <span class="comment"># count = 0</span></span><br><span class="line">        <span class="comment"># for i in range(1, n + 1):</span></span><br><span class="line">        <span class="comment">#     for j in str(i):</span></span><br><span class="line">        <span class="comment">#         if j == '1':</span></span><br><span class="line">        <span class="comment">#             count += 1</span></span><br><span class="line">        <span class="comment"># return count</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第二种，简化事件复杂度</span></span><br><span class="line">        <span class="comment"># 起始参数的设定，从第一个开始，之后每次往右移动1个，即*10</span></span><br><span class="line">        precise = <span class="number">1</span></span><br><span class="line">        <span class="comment"># 参数位左侧的可能数量</span></span><br><span class="line">        highValue = <span class="number">1</span></span><br><span class="line">        <span class="comment"># 位数，用作乘方运算</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 最后的要返回的总数量</span></span><br><span class="line">        sumNum = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 当参数位左侧不为0时循环</span></span><br><span class="line">        <span class="keyword">while</span> highValue != <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># 取出高位</span></span><br><span class="line">            highValue = n // (precise * <span class="number">10</span>)</span><br><span class="line">            <span class="comment"># 取出参数位（每循环一次变一下）</span></span><br><span class="line">            midValue = (n // precise) % <span class="number">10</span></span><br><span class="line">            <span class="comment"># 取出低位</span></span><br><span class="line">            lowValue = n % precise</span><br><span class="line">            <span class="comment"># 每次都*10</span></span><br><span class="line">            precise = precise * <span class="number">10</span></span><br><span class="line">            <span class="comment"># 参数位分三种情况</span></span><br><span class="line">            <span class="comment"># 第一种，参数位等于0，若是该位想为1的话，只能进1，向左侧的可能性借1，右侧为10^count种可能性</span></span><br><span class="line">            <span class="keyword">if</span> midValue == <span class="number">0</span>:</span><br><span class="line">                num = (highValue <span class="number">-1</span> +<span class="number">1</span>) * pow(<span class="number">10</span>, count)</span><br><span class="line">            <span class="comment"># 第二种，参数位大于1，就不用向左侧去借位，右侧为10^count种可能性</span></span><br><span class="line">            <span class="keyword">elif</span> midValue &gt; <span class="number">1</span>:</span><br><span class="line">                num = (highValue + <span class="number">1</span>) * pow(<span class="number">10</span>, count)</span><br><span class="line">            <span class="comment"># 第三种，参数位就是1，有lowValue + 1个是需要进位的，其余不需要进位</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                num = highValue * pow(<span class="number">10</span>, count) + lowValue + <span class="number">1</span></span><br><span class="line">            <span class="comment"># 每次循环都更新总数量的值</span></span><br><span class="line">            sumNum += num</span><br><span class="line">            <span class="comment"># 更新count</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 返回结果</span></span><br><span class="line">        <span class="keyword">return</span> sumNum</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="24-丑数（从1到n整数中1出现的次数）-本题考点-时间空间效率的平衡"><a href="#24-丑数（从1到n整数中1出现的次数）-本题考点-时间空间效率的平衡" class="headerlink" title="24.丑数（从1到n整数中1出现的次数） [^本题考点 时间空间效率的平衡]"></a>24.丑数（从1到n整数中1出现的次数） [^本题考点 <em>时间空间效率的平衡</em>]</h4><p>​    <strong>题目：把只包含质因子2、3和5的数称作丑数（Ugly Number）。例如6、8都是丑数，但14不是，因为它包含质因子7。 习惯上我们把1当做是第一个丑数。求按从小到大的顺序的第N个丑数。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetUglyNumber_Solution</span>(<span class="params">self, index</span>):</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> index &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># 2的指针</span></span><br><span class="line">        twoPointer = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 3的指针</span></span><br><span class="line">        threePointer = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 5的指针</span></span><br><span class="line">        fivePointer = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 丑数列表</span></span><br><span class="line">        uglyList = [<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># uglyList的计数</span></span><br><span class="line">        count = <span class="number">1</span></span><br><span class="line">        <span class="comment"># 当计数小于index，就一直循环</span></span><br><span class="line">        <span class="keyword">while</span> count &lt; index:</span><br><span class="line">            <span class="comment"># 找到三者中的最小值</span></span><br><span class="line">            minValue = min(uglyList[twoPointer] * <span class="number">2</span>,</span><br><span class="line">                           uglyList[threePointer] * <span class="number">3</span>,</span><br><span class="line">                           uglyList[fivePointer] * <span class="number">5</span>)</span><br><span class="line">            <span class="comment"># 添加进uglyList</span></span><br><span class="line">            uglyList.append(minValue)</span><br><span class="line">            <span class="comment"># 若是当前uglyList的最后一个值等于uglyList[twoPointer]*2，就将2的指针往后移动一个</span></span><br><span class="line">            <span class="keyword">if</span> uglyList[<span class="number">-1</span>] == uglyList[twoPointer] * <span class="number">2</span>:</span><br><span class="line">                twoPointer += <span class="number">1</span></span><br><span class="line">            <span class="comment"># 若是当前uglyList的最后一个值等于uglyList[twoPointer]*3，就将3的指针往后移动一个</span></span><br><span class="line">            <span class="keyword">if</span> uglyList[<span class="number">-1</span>] == uglyList[threePointer] * <span class="number">3</span>:</span><br><span class="line">                threePointer += <span class="number">1</span></span><br><span class="line">            <span class="comment"># 若是当前uglyList的最后一个值等于uglyList[twoPointer]*5，就将5的指针往后移动一个</span></span><br><span class="line">            <span class="keyword">if</span> uglyList[<span class="number">-1</span>] == uglyList[fivePointer] * <span class="number">5</span>:</span><br><span class="line">                fivePointer += <span class="number">1</span></span><br><span class="line">            <span class="comment"># count自增1</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 最终返回丑数列表的最后一个值即为第index个丑数</span></span><br><span class="line">        <span class="keyword">return</span> uglyList[<span class="number">-1</span>]</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="25-调整数组顺序使奇数位于偶数前面-本题考点-数组"><a href="#25-调整数组顺序使奇数位于偶数前面-本题考点-数组" class="headerlink" title="25.调整数组顺序使奇数位于偶数前面 [^本题考点 数组]"></a>25.调整数组顺序使奇数位于偶数前面 [^本题考点 <em>数组</em>]</h4><p>​    <strong>题目：输入一个整数数组，实现一个函数来调整该数组中数字的顺序，使得所有的奇数位于数组的前半部分，所有的偶数位于数组的后半部分，并保证奇数和奇数，偶数和偶数之间的相对位置不变。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reOrderArray</span>(<span class="params">self, array</span>):</span></span><br><span class="line">        n = len(array)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(n-i<span class="number">-1</span>):</span><br><span class="line">                <span class="keyword">if</span> array[j] % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">and</span> array[j+<span class="number">1</span>] % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">                    array[j], array[j+<span class="number">1</span>] = array[j+<span class="number">1</span>], array[j]</span><br><span class="line">        <span class="keyword">return</span> array</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="26-树的子结构-本题考点-树"><a href="#26-树的子结构-本题考点-树" class="headerlink" title="26.树的子结构 [^本题考点 树]"></a>26.树的子结构 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：输入两棵二叉树A，B，判断B是不是A的子结构。（ps：我们约定空树不是任意一个树的子结构）</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">HasSubtree</span>(<span class="params">self, pRoot1, pRoot2</span>):</span></span><br><span class="line">        <span class="comment"># 若两个结点有一个为空，不符合要求</span></span><br><span class="line">        <span class="keyword">if</span> pRoot2 == <span class="literal">None</span> <span class="keyword">or</span> pRoot1 == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">hasEqual</span>(<span class="params">pRoot1, pRoot2</span>):</span></span><br><span class="line">            <span class="comment"># 若是右侧为空，肯定符合要求</span></span><br><span class="line">            <span class="keyword">if</span> pRoot2 == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="comment"># 如果左侧为空，肯定不合适</span></span><br><span class="line">            <span class="keyword">if</span> pRoot1 == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> pRoot1.val == pRoot2.val:</span><br><span class="line">                <span class="comment"># 如果一个结点的左结点为空，左侧肯定符合要求</span></span><br><span class="line">                <span class="keyword">if</span> pRoot2.left == <span class="literal">None</span>:</span><br><span class="line">                    leftEqual = <span class="literal">True</span></span><br><span class="line">                <span class="comment"># 如果不是就继续递归判断</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    leftEqual = hasEqual(pRoot1.left, pRoot2.left)</span><br><span class="line">                <span class="comment"># 如果一个结点的右结点为空，右侧肯定符合要求</span></span><br><span class="line">                <span class="keyword">if</span> pRoot2.right == <span class="literal">None</span>:</span><br><span class="line">                    rightEqual = <span class="literal">True</span></span><br><span class="line">                <span class="comment"># 如果不是就继续递归判断</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    rightEqual = hasEqual(pRoot1.right, pRoot2.right)</span><br><span class="line">                <span class="comment"># 返回左右两侧的判断情况</span></span><br><span class="line">                <span class="keyword">return</span> leftEqual <span class="keyword">and</span> rightEqual</span><br><span class="line">            <span class="comment"># 都不符合就返回False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果两个节点相等，就进行判断左右两个分支相不相等</span></span><br><span class="line">        <span class="keyword">if</span> pRoot1.val == pRoot2.val:</span><br><span class="line">            ret = hasEqual(pRoot1, pRoot2)</span><br><span class="line">            <span class="keyword">if</span> ret:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="comment">#判断左侧结点</span></span><br><span class="line">        ret = self.HasSubtree(pRoot1.left, pRoot2)</span><br><span class="line">        <span class="keyword">if</span> ret:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="comment"># 判断右侧结点</span></span><br><span class="line">        ret = self.HasSubtree(pRoot1.right, pRoot2)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></tbody></table></figure>



<hr>
<h4 id="27-二叉树的镜像-本题考点-树"><a href="#27-二叉树的镜像-本题考点-树" class="headerlink" title="27.二叉树的镜像 [^本题考点 树]"></a>27.二叉树的镜像 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：操作给定的二叉树，将其变换为源二叉树的镜像。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回镜像树的根节点</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Mirror</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 处理根节点</span></span><br><span class="line">        root.left, root.right = root.right, root.left</span><br><span class="line">        <span class="comment"># 处理左子树</span></span><br><span class="line">        self.Mirror(root.left)</span><br><span class="line">        <span class="comment"># 处理右子树</span></span><br><span class="line">        self.Mirror(root.right)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="28-从上往下打印二叉树-本题考点-树"><a href="#28-从上往下打印二叉树-本题考点-树" class="headerlink" title="28.从上往下打印二叉树 [^本题考点 树]"></a>28.从上往下打印二叉树 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：从上往下打印出二叉树的每个节点，同层节点从左至右打印。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">PrintFromTopToBottom</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        <span class="comment"># 如果根结点为空，直接返回空列表</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        support = [root]</span><br><span class="line">        ret = []</span><br><span class="line">        <span class="comment"># 当support不为空时一直循环</span></span><br><span class="line">        <span class="keyword">while</span> support:</span><br><span class="line">            <span class="comment"># 取出support中的第一个结点</span></span><br><span class="line">            tmpNode = support[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># 将此结点的值添加到ret</span></span><br><span class="line">            ret.append(tmpNode.val)</span><br><span class="line">            <span class="comment"># 如果取出的当前结点有左子结点就将其添加到support</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                support.append(tmpNode.left)</span><br><span class="line">            <span class="comment"># 如果取出的当前结点有右子结点就将其添加到support</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                support.append(tmpNode.right)</span><br><span class="line">            <span class="comment"># 删除掉support中的第一个用过的值</span></span><br><span class="line">            support.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 返回最后的结果</span></span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="29-二叉搜索树的后序遍历序列-本题考点-举例让抽象具体化"><a href="#29-二叉搜索树的后序遍历序列-本题考点-举例让抽象具体化" class="headerlink" title="29.二叉搜索树的后序遍历序列 [^本题考点 举例让抽象具体化]"></a>29.二叉搜索树的后序遍历序列 [^本题考点 <em>举例让抽象具体化</em>]</h4><p>​    <strong>题目：输入一个整数数组，判断该数组是不是某二叉搜索树的后序遍历的结果。如果是则输出Yes,否则输出No。假设输入的数组的任意两个数字都互不相同。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">VerifySquenceOfBST</span>(<span class="params">self, sequence</span>):</span></span><br><span class="line">        <span class="keyword">if</span> sequence == []:</span><br><span class="line">            <span class="comment"># 此处按照二叉搜索树的定义应为True，但是为了跑通程序写了False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># 找到根结点</span></span><br><span class="line">        rootNum = sequence.pop()</span><br><span class="line">        <span class="comment"># 删除掉根结点</span></span><br><span class="line">        <span class="comment"># del sequence[-1]</span></span><br><span class="line">        <span class="comment"># 定义第一个大于根结点值索引位置</span></span><br><span class="line">        index = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 循环sequence</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(sequence)):</span><br><span class="line">            <span class="comment"># 找到第一个大于根结点值索引位置</span></span><br><span class="line">            <span class="keyword">if</span> index == <span class="literal">None</span> <span class="keyword">and</span> rootNum &lt; sequence[i]:</span><br><span class="line">                index = i</span><br><span class="line">            <span class="comment"># 如果找到之后还有比根结点的值小的值，就返回错误</span></span><br><span class="line">            <span class="keyword">if</span> sequence[i] &lt; rootNum <span class="keyword">and</span> index != <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> sequence[:index] == []:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> sequence[index: ] == []:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="comment"># 继续查找左子树</span></span><br><span class="line">        leftRet = self.VerifySquenceOfBST(sequence[ :index])</span><br><span class="line">        <span class="comment"># 继续查找右子树</span></span><br><span class="line">        rightRet = self.VerifySquenceOfBST(sequence[index: ])</span><br><span class="line">        <span class="comment"># 返回左与右</span></span><br><span class="line">        <span class="keyword">return</span> leftRet <span class="keyword">and</span> rightRet</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="30-二叉树中和为某一值的路径-本题考点-举例让抽象具体化"><a href="#30-二叉树中和为某一值的路径-本题考点-举例让抽象具体化" class="headerlink" title="30.二叉树中和为某一值的路径 [^本题考点 举例让抽象具体化]"></a>30.二叉树中和为某一值的路径 [^本题考点 <em>举例让抽象具体化</em>]</h4><p>​    <strong>题目：输入一颗二叉树的跟节点和一个整数，打印出二叉树中结点值的和为输入整数的所有路径。路径定义为从树的根结点开始往下一直到叶结点所经过的结点形成一条路径。(注意: 在返回值的list中，数组长度大的数组靠前)</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回二维列表，内部每个列表表示找到的路径</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FindPath</span>(<span class="params">self, root, expectNumber</span>):</span></span><br><span class="line">        <span class="comment"># 若根结点为空，就返回空列表</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 定义最终返回列表</span></span><br><span class="line">        ret = []</span><br><span class="line">        <span class="comment"># 定义保存路径的二维列表</span></span><br><span class="line">        supportArrayList = [[root.val]]</span><br><span class="line">        <span class="comment"># 定义广度优先遍历的列表</span></span><br><span class="line">        support = [root]</span><br><span class="line">        <span class="comment"># 当support中有值时一直循环</span></span><br><span class="line">        <span class="keyword">while</span> support:</span><br><span class="line">            <span class="comment"># 取出support中的第一个值，结点</span></span><br><span class="line">            tmpNode = support[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># 取出supportArrayList中的第一个值，列表，存放路径</span></span><br><span class="line">            tmpArrayList = supportArrayList[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># 如果取出的节点为叶子叶节点，就判断tmpArrayList的和是否和目标值相等，若相等就将其列表（路径）添加到返回列表当中</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.left == <span class="literal">None</span> <span class="keyword">and</span> tmpNode.right == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">if</span> sum(tmpArrayList) == expectNumber:</span><br><span class="line">                    ret.insert(<span class="number">0</span>, tmpArrayList)</span><br><span class="line">            <span class="comment"># 如果有左子结点，就执行下面</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                <span class="comment"># 将左子结点添加到广度优先列表中</span></span><br><span class="line">                support.append(tmpNode.left)</span><br><span class="line">                <span class="comment"># 将tmpArrayList进行浅拷贝得到newTmpArrayList</span></span><br><span class="line">                newTmpArrayList = copy.copy(tmpArrayList)</span><br><span class="line">                <span class="comment"># 给newTmpArrayList添加左子结点的值</span></span><br><span class="line">                newTmpArrayList.append(tmpNode.left.val)</span><br><span class="line">                <span class="comment"># 将newTmpArrayList添加到supportArrayList</span></span><br><span class="line">                supportArrayList.append(newTmpArrayList)</span><br><span class="line">            <span class="comment"># 如果有右子结点，就执行下面</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                <span class="comment"># 将右子结点添加到广度优先列表中</span></span><br><span class="line">                support.append(tmpNode.right)</span><br><span class="line">                <span class="comment"># 将tmpArrayList进行浅拷贝得到newTmpArrayList</span></span><br><span class="line">                newTmpArrayList = copy.copy(tmpArrayList)</span><br><span class="line">                <span class="comment"># 给newTmpArrayList添加左子结点的值</span></span><br><span class="line">                newTmpArrayList.append(tmpNode.right.val)</span><br><span class="line">                <span class="comment"># 将newTmpArrayList添加到supportArrayList</span></span><br><span class="line">                supportArrayList.append(newTmpArrayList)</span><br><span class="line">            <span class="comment"># 删除广度优先的列表的第一个值</span></span><br><span class="line">            support.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="comment"># 删除保存路径的二维列表的第一个值</span></span><br><span class="line">            supportArrayList.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 返回最终结果</span></span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="31-二叉树与双向链表-本题考点-分解让复杂问题简单"><a href="#31-二叉树与双向链表-本题考点-分解让复杂问题简单" class="headerlink" title="31.二叉树与双向链表 [^本题考点 分解让复杂问题简单]"></a>31.二叉树与双向链表 [^本题考点 <em>分解让复杂问题简单</em>]</h4><p>​    <strong>题目：输入一棵二叉搜索树，将该二叉搜索树转换成一个排序的双向链表。要求不能创建任何新的结点，只能调整树中结点指针的指向。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Convert</span>(<span class="params">self, pRootOfTree</span>):</span></span><br><span class="line">        <span class="comment"># 定义寻找最右结点的函数</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">find_right</span>(<span class="params">node</span>):</span></span><br><span class="line">            <span class="comment"># 如果结点右子结点不为空就循环</span></span><br><span class="line">            <span class="keyword">while</span> node.right:</span><br><span class="line">                <span class="comment"># 一直往右找</span></span><br><span class="line">                node = node.right</span><br><span class="line">            <span class="comment"># 返回最右侧的结点</span></span><br><span class="line">            <span class="keyword">return</span> node</span><br><span class="line">        <span class="comment"># 如果pRootOfTree为空，返回空</span></span><br><span class="line">        <span class="keyword">if</span> pRootOfTree == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 递归寻找左子结点</span></span><br><span class="line">        leftNode = self.Convert(pRootOfTree.left)</span><br><span class="line">        <span class="comment"># 递归寻找右子结点</span></span><br><span class="line">        rightNode = self.Convert(pRootOfTree.right)</span><br><span class="line">        <span class="comment"># 要返回的结点为最左子结点</span></span><br><span class="line">        retNode = leftNode</span><br><span class="line">        <span class="comment"># 如果左结点存在，就找到它最右边的结点</span></span><br><span class="line">        <span class="keyword">if</span> leftNode:</span><br><span class="line">            leftNode = find_right(leftNode)</span><br><span class="line">        <span class="comment"># 如果没有左子结点,返回的结点就是pRootOfTree</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            retNode = pRootOfTree</span><br><span class="line">        <span class="comment"># pRootOfTree的左子结点链上leftNode</span></span><br><span class="line">        pRootOfTree.left = leftNode</span><br><span class="line">        <span class="comment"># pRootOfTree的右子结点链上右子结点</span></span><br><span class="line">        pRootOfTree.right = rightNode</span><br><span class="line">        <span class="comment"># 如果左子结点不为空</span></span><br><span class="line">        <span class="keyword">if</span> leftNode:</span><br><span class="line">            <span class="comment"># 此处为左子结点的最右侧链上pRootOfTree</span></span><br><span class="line">            leftNode.right = pRootOfTree</span><br><span class="line">        <span class="comment"># 如果右子结点不为空</span></span><br><span class="line">        <span class="keyword">if</span> rightNode:</span><br><span class="line">            <span class="comment"># 此处为右子结点的最左侧链上pRootOfTree</span></span><br><span class="line">            rightNode.left = pRootOfTree</span><br><span class="line">        <span class="comment"># 返回最左侧结点</span></span><br><span class="line">        <span class="keyword">return</span> retNode</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="32-最小的K个数-本题考点-时间效率"><a href="#32-最小的K个数-本题考点-时间效率" class="headerlink" title="32.最小的K个数 [^本题考点 时间效率]"></a>32.最小的K个数 [^本题考点 <em>时间效率</em>]</h4><p>​    <strong>输入n个整数，找出其中最小的K个数。例如输入4,5,1,6,2,7,3,8这8个数字，则最小的4个数字是1,2,3,4,。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetLeastNumbers_Solution</span>(<span class="params">self, tinput, k</span>):</span></span><br><span class="line">        <span class="comment"># 第一种</span></span><br><span class="line">        <span class="comment"># if len(tinput) &lt; k:</span></span><br><span class="line">        <span class="comment">#     return []</span></span><br><span class="line">        <span class="comment"># ret = sorted(tinput)</span></span><br><span class="line">        <span class="comment"># return ret[:k]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 第二种,使用最大堆</span></span><br><span class="line">        <span class="comment"># 创建或者是插入最大堆</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">createMaxHeap</span>(<span class="params">num</span>):</span></span><br><span class="line">            maxHeap.append(num)</span><br><span class="line">            currentIndex = len(maxHeap) - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> currentIndex != <span class="number">0</span>:</span><br><span class="line">                parentIndex = (currentIndex - <span class="number">1</span>) &gt;&gt; <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> maxHeap[parentIndex] &lt; maxHeap[currentIndex]:</span><br><span class="line">                    maxHeap[parentIndex], maxHeap[currentIndex] = maxHeap[currentIndex], maxHeap[parentIndex]</span><br><span class="line">                    currentIndex = parentIndex</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 调整最大堆，头节点发生改变</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">adjustMaxHeap</span>(<span class="params">num</span>):</span></span><br><span class="line">            <span class="keyword">if</span> num &lt; maxHeap[<span class="number">0</span>]:</span><br><span class="line">                maxHeap[<span class="number">0</span>] = num</span><br><span class="line"></span><br><span class="line">            maxHeapLen = len(maxHeap)</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> index &lt; maxHeapLen:</span><br><span class="line">                leftIndex = index * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">                rightIndex = index * <span class="number">2</span> + <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> rightIndex &lt; maxHeapLen:</span><br><span class="line">                    <span class="keyword">if</span> maxHeap[rightIndex] &lt; maxHeap[leftIndex]:</span><br><span class="line">                        largerIndex = leftIndex</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        largerIndex = rightIndex</span><br><span class="line">                <span class="keyword">elif</span> leftIndex &lt; maxHeapLen:</span><br><span class="line">                    largerIndex = leftIndex</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> maxHeap[index] &lt; maxHeap[largerIndex]:</span><br><span class="line">                    maxHeap[index], maxHeap[largerIndex] = maxHeap[largerIndex], maxHeap[index]</span><br><span class="line">                index = largerIndex</span><br><span class="line"></span><br><span class="line">        maxHeap = []</span><br><span class="line">        tinputLen = len(tinput)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> tinputLen &lt; k <span class="keyword">or</span> k &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(tinputLen):</span><br><span class="line">            <span class="keyword">if</span> i &lt; k:</span><br><span class="line">                createMaxHeap(tinput[i])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                adjustMaxHeap(tinput[i])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sorted(maxHeap)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="33-数据流中的中位数-本题考点-树"><a href="#33-数据流中的中位数-本题考点-树" class="headerlink" title="33.数据流中的中位数 [^本题考点 树]"></a>33.数据流中的中位数 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：如何得到一个数据流中的中位数？如果从数据流中读出奇数个数值，那么中位数就是所有数值排序之后位于中间的数值。如果从数据流中读出偶数个数值，那么中位数就是所有数值排序之后中间两个数的平均值。我们使用Insert()方法读取数据流，使用GetMedian()方法获取当前读取数据的中位数。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如何得到一个数据流中的中位数？如果从数据流中读出奇数个数值，那么中位数就是所有数值排序之后位于中间的数值。如果从数据流中读出偶数个数值，那么中位数就是所有数值排序之后中间两个数的平均值。我们使用Insert()方法读取数据流，使用GetMedian()方法获取当前读取数据的中位数。</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未封装版本</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.littleValueMaxHeap = []</span><br><span class="line">        self.bigValueMinHeap = []</span><br><span class="line">        self.maxHeapCount = <span class="number">0</span></span><br><span class="line">        self.minHeapCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createMaxHeap</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        self.littleValueMaxHeap.append(num)</span><br><span class="line">        tmpIndex = len(self.littleValueMaxHeap) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex != <span class="number">0</span>:</span><br><span class="line">            parentIndex = (tmpIndex - <span class="number">1</span>) &gt;&gt; <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> self.littleValueMaxHeap[parentIndex] &lt; self.littleValueMaxHeap[tmpIndex]:</span><br><span class="line">                self.littleValueMaxHeap[parentIndex], self.littleValueMaxHeap[tmpIndex] = self.littleValueMaxHeap[tmpIndex], self.littleValueMaxHeap[parentIndex]</span><br><span class="line">                tmpIndex = parentIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adjustMaxHeap</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        <span class="keyword">if</span> num &lt; self.littleValueMaxHeap[<span class="number">0</span>]:</span><br><span class="line">            self.littleValueMaxHeap[<span class="number">0</span>] = num</span><br><span class="line">        maxHeapLen = len(self.littleValueMaxHeap)</span><br><span class="line">        tmpIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex &lt; maxHeapLen:</span><br><span class="line">            leftIndex = tmpIndex * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">            rightIndex = tmpIndex *<span class="number">2</span> + <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> rightIndex &lt; maxHeapLen:</span><br><span class="line">                largerIndex = rightIndex <span class="keyword">if</span> self.littleValueMaxHeap[leftIndex] &lt; self.littleValueMaxHeap[rightIndex] <span class="keyword">else</span> leftIndex</span><br><span class="line">            <span class="keyword">elif</span> leftIndex &lt; maxHeapLen:</span><br><span class="line">                largerIndex = leftIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> self.littleValueMaxHeap[tmpIndex] &lt; self.littleValueMaxHeap[largerIndex]:</span><br><span class="line">                self.littleValueMaxHeap[tmpIndex], self.littleValueMaxHeap[largerIndex] = self.littleValueMaxHeap[largerIndex], self.littleValueMaxHeap[tmpIndex]</span><br><span class="line">                tmpIndex = largerIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createMinHeap</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        self.bigValueMinHeap.append(num)</span><br><span class="line">        tmpIndex = len(self.bigValueMinHeap) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex != <span class="number">0</span>:</span><br><span class="line">            parentIndex = (tmpIndex - <span class="number">1</span>) &gt;&gt; <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> self.bigValueMinHeap[tmpIndex] &lt; self.bigValueMinHeap[parentIndex]:</span><br><span class="line">                self.bigValueMinHeap[parentIndex], self.bigValueMinHeap[tmpIndex] = self.bigValueMinHeap[tmpIndex], self.bigValueMinHeap[parentIndex]</span><br><span class="line">                tmpIndex = parentIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adjustMinHeap</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        <span class="keyword">if</span> num &lt; self.bigValueMinHeap[<span class="number">0</span>]:</span><br><span class="line">            self.littleValueMaxHeap[<span class="number">0</span>] = num</span><br><span class="line">        minHeapLen = len(self.bigValueMinHeap)</span><br><span class="line">        tmpIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex &lt; minHeapLen:</span><br><span class="line">            leftIndex = tmpIndex * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">            rightIndex = tmpIndex *<span class="number">2</span> + <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> rightIndex &lt; minHeapLen:</span><br><span class="line">                smallerIndex = rightIndex <span class="keyword">if</span> self.bigValueMinHeap[rightIndex] &lt; self.bigValueMinHeap[leftIndex] <span class="keyword">else</span> leftIndex</span><br><span class="line">            <span class="keyword">elif</span> leftIndex &lt; minHeapLen:</span><br><span class="line">                smallerIndex = leftIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> self.bigValueMinHeap[smallerIndex] &lt; self.bigValueMinHeap[tmpIndex]:</span><br><span class="line">                self.bigValueMinHeap[tmpIndex], self.bigValueMinHeap[smallerIndex] = self.bigValueMinHeap[smallerIndex], self.bigValueMinHeap[tmpIndex]</span><br><span class="line">                tmpIndex = smallerIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Insert</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.minHeapCount &lt; self.maxHeapCount:</span><br><span class="line">            self.minHeapCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num &lt; self.littleValueMaxHeap[<span class="number">0</span>]:</span><br><span class="line">                tmpNum = self.littleValueMaxHeap[<span class="number">0</span>]</span><br><span class="line">                self.adjustMaxHeap(num)</span><br><span class="line">                self.createMinHeap(tmpNum)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.createMinHeap(num)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.maxHeapCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> self.littleValueMaxHeap == []:</span><br><span class="line">                self.createMaxHeap(num)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> self.bigValueMinHeap[<span class="number">0</span>] &lt; num:</span><br><span class="line">                    tmpNum = self.bigValueMinHeap[<span class="number">0</span>]</span><br><span class="line">                    self.adjustMinHeap(num)</span><br><span class="line">                    self.createMaxHeap(tmpNum)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.createMaxHeap(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetMedian</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.minHeapCount &lt; self.maxHeapCount:</span><br><span class="line">            <span class="keyword">return</span> self.littleValueMaxHeap[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> (self.bigValueMinHeap[<span class="number">0</span>] + self.littleValueMaxHeap[<span class="number">0</span>]) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 封装版本</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.littleValueMaxHeap = []</span><br><span class="line">        self.bigValueMinHeap = []</span><br><span class="line">        self.maxHeapCount = <span class="number">0</span></span><br><span class="line">        self.minHeapCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHeap</span>(<span class="params">self, num, heap, cmpFunc</span>):</span></span><br><span class="line">        heap.append(num)</span><br><span class="line">        tmpIndex = len(heap) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex != <span class="number">0</span>:</span><br><span class="line">            parentIndex = (tmpIndex - <span class="number">1</span>) &gt;&gt; <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> cmpFunc(heap[tmpIndex], heap[parentIndex]):</span><br><span class="line">                heap[parentIndex], heap[tmpIndex] = heap[tmpIndex], heap[parentIndex]</span><br><span class="line">                tmpIndex = parentIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adjustHeap</span>(<span class="params">self, num, heap, cmpFunc</span>):</span></span><br><span class="line">        <span class="keyword">if</span> num &lt; heap[<span class="number">0</span>]:</span><br><span class="line">            heap[<span class="number">0</span>] = num</span><br><span class="line">        heapLen = len(heap)</span><br><span class="line">        tmpIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> tmpIndex &lt; heapLen:</span><br><span class="line">            leftIndex = tmpIndex * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">            rightIndex = tmpIndex *<span class="number">2</span> + <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> rightIndex &lt; heapLen:</span><br><span class="line">                largerIndex = rightIndex <span class="keyword">if</span> cmpFunc(heap[rightIndex], heap[leftIndex]) <span class="keyword">else</span> leftIndex</span><br><span class="line">            <span class="keyword">elif</span> leftIndex &lt; heapLen:</span><br><span class="line">                largerIndex = leftIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> cmpFunc(heap[largerIndex], heap[tmpIndex]):</span><br><span class="line">                heap[tmpIndex], heap[largerIndex] = heap[largerIndex], heap[tmpIndex]</span><br><span class="line">                tmpIndex = largerIndex</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Insert</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">cmpMaxHeap</span>(<span class="params">a, b</span>):</span></span><br><span class="line">            <span class="keyword">return</span> b &lt; a</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">cmpMinHeap</span>(<span class="params">a, b</span>):</span></span><br><span class="line">            <span class="keyword">return</span> a &lt; b</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.minHeapCount &lt; self.maxHeapCount:</span><br><span class="line">            self.minHeapCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num &lt; self.littleValueMaxHeap[<span class="number">0</span>]:</span><br><span class="line">                tmpNum = self.littleValueMaxHeap[<span class="number">0</span>]</span><br><span class="line">                self.adjustHeap(num, self.littleValueMaxHeap, cmpMaxHeap)</span><br><span class="line">                self.createHeap(tmpNum, self.bigValueMinHeap, cmpMinHeap)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.createHeap(num, self.bigValueMinHeap, cmpMinHeap)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.maxHeapCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> self.littleValueMaxHeap == []:</span><br><span class="line">                self.createHeap(num, self.littleValueMaxHeap, cmpMaxHeap)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> self.bigValueMinHeap[<span class="number">0</span>] &lt; num:</span><br><span class="line">                    tmpNum = self.bigValueMinHeap[<span class="number">0</span>]</span><br><span class="line">                    self.adjustHeap(num, self.bigValueMinHeap, cmpMinHeap)</span><br><span class="line">                    self.createHeap(tmpNum, self.littleValueMaxHeap, cmpMaxHeap)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.createHeap(num, self.littleValueMaxHeap, cmpMaxHeap)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetMedian</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.minHeapCount &lt; self.maxHeapCount:</span><br><span class="line">            <span class="keyword">return</span> self.littleValueMaxHeap[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> (self.bigValueMinHeap[<span class="number">0</span>] + self.littleValueMaxHeap[<span class="number">0</span>]) / <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    s = Solution()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">8</span>]:</span><br><span class="line">        s.Insert(i)</span><br><span class="line">        print(s.GetMedian())</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="34-二叉树的下一个结点-本题考点-树"><a href="#34-二叉树的下一个结点-本题考点-树" class="headerlink" title="34.二叉树的下一个结点 [^本题考点 树]"></a>34.二叉树的下一个结点 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：给定一个二叉树和其中的一个结点，请找出中序遍历顺序的下一个结点并且返回。注意，树中的结点不仅包含左右子结点，同时包含指向父结点的指针。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeLinkNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetNext</span>(<span class="params">self, pNode</span>):</span></span><br><span class="line">        <span class="comment"># 1.寻找右子树，如果存在就一直找到右子树的最左边，就是下一个节点</span></span><br><span class="line">        <span class="comment"># 2.没有右子树，就寻找他的父节点，一直找到它是父节点的左子树，打印父节点</span></span><br><span class="line">        <span class="keyword">if</span> pNode.right:</span><br><span class="line">            tmpNode = pNode.right</span><br><span class="line">            <span class="keyword">while</span> tmpNode.left:</span><br><span class="line">                tmpNode = tmpNode.left</span><br><span class="line">            <span class="keyword">return</span> tmpNode</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tmpNode = pNode</span><br><span class="line">            <span class="keyword">while</span> tmpNode.next:</span><br><span class="line">                <span class="keyword">if</span> tmpNode.next.left == tmpNode:</span><br><span class="line">                    <span class="keyword">return</span> tmpNode.next</span><br><span class="line">                tmpNode = tmpNode.next</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="35-对称的二叉树-本题考点-树"><a href="#35-对称的二叉树-本题考点-树" class="headerlink" title="35.对称的二叉树 [^本题考点 树]"></a>35.对称的二叉树 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：请实现一个函数，用来判断一颗二叉树是不是对称的。注意，如果一个二叉树同此二叉树的镜像是同样的，定义其为对称的。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSymmetrical</span>(<span class="params">self, pRoot</span>):</span></span><br><span class="line">        <span class="comment"># 定义判断是否镜像的函数</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">isMirror</span>(<span class="params">left, right</span>):</span></span><br><span class="line">            <span class="comment"># 如果两侧都为空，则是镜像的了</span></span><br><span class="line">            <span class="keyword">if</span> left == <span class="literal">None</span> <span class="keyword">and</span> right == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="comment"># 若有一侧不为空，则不是镜像的</span></span><br><span class="line">            <span class="keyword">elif</span> left == <span class="literal">None</span> <span class="keyword">or</span> right == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="comment"># 如果左侧的值不等于右侧额值，就不是镜像的</span></span><br><span class="line">            <span class="keyword">if</span> left.val != right.val:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="comment"># 递归判断左侧的左侧和右侧的右侧</span></span><br><span class="line">            ret1 = isMirror(left.left, right.right)</span><br><span class="line">            <span class="comment"># 递归判断左侧的右侧和右侧的左侧</span></span><br><span class="line">            ret2 = isMirror(left.right, right.left)</span><br><span class="line">            <span class="comment"># 返回这两个返回值的与</span></span><br><span class="line">            <span class="keyword">return</span> ret1 <span class="keyword">and</span> ret2</span><br><span class="line">        <span class="comment"># 如果此二叉树为空，则其也是对称的</span></span><br><span class="line">        <span class="keyword">if</span> pRoot == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="comment"># 返回判断此二叉树的左侧和右侧</span></span><br><span class="line">        <span class="keyword">return</span> isMirror(pRoot.left, pRoot.right)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="36-按之字形顺序打印二叉树-本题考点-树"><a href="#36-按之字形顺序打印二叉树-本题考点-树" class="headerlink" title="36.按之字形顺序打印二叉树 [^本题考点 树]"></a>36.按之字形顺序打印二叉树 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：请实现一个函数按照之字形打印二叉树，即第一行按照从左到右的顺序打印，第二层按照从右至左的顺序打印，第三行按照从左到右的顺序打印，其他行以此类推。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 未封装版</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Print</span>(<span class="params">self, pRoot</span>):</span></span><br><span class="line">        <span class="comment"># 如果二叉树为空，就返回空</span></span><br><span class="line">        <span class="keyword">if</span> pRoot == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="comment"># 定义奇数行，从左到右</span></span><br><span class="line">        stack1 = [pRoot]</span><br><span class="line">        <span class="comment"># 定义偶数行，从右到左</span></span><br><span class="line">        stack2 = []</span><br><span class="line">        <span class="comment"># 定义返回的顺序列表</span></span><br><span class="line">        ret = []</span><br><span class="line">        <span class="comment"># 当奇数行或者偶数行都不为空时循环</span></span><br><span class="line">        <span class="keyword">while</span> stack1 <span class="keyword">or</span> stack2:</span><br><span class="line">            <span class="comment"># 如果奇数行有值</span></span><br><span class="line">            <span class="keyword">if</span> stack1:</span><br><span class="line">                <span class="comment"># 临时列表</span></span><br><span class="line">                tmpRet = []</span><br><span class="line">                <span class="comment"># 如果奇数行有值，就一直循环</span></span><br><span class="line">                <span class="keyword">while</span> stack1:</span><br><span class="line">                    <span class="comment"># 临时弹出数据</span></span><br><span class="line">                    tmpNode = stack1.pop()</span><br><span class="line">                    <span class="comment"># 临时列表里面添加临时数据的值</span></span><br><span class="line">                    tmpRet.append(tmpNode.val)</span><br><span class="line">                    <span class="comment"># 如果有临时数据的左节点</span></span><br><span class="line">                    <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                        <span class="comment"># 就在偶数行添加临时数据的左节点</span></span><br><span class="line">                        stack2.append(tmpNode.left)</span><br><span class="line">                    <span class="comment"># 如果有临时数据的右节点</span></span><br><span class="line">                    <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                        <span class="comment"># 就在偶数行添加临时数据的右节点</span></span><br><span class="line">                        stack2.append(tmpNode.right)</span><br><span class="line">                <span class="comment"># 在返回的顺利列表里面添加临时列表</span></span><br><span class="line">                ret.append(tmpRet)</span><br><span class="line">            <span class="comment"># 如果偶数行有值</span></span><br><span class="line">            <span class="keyword">if</span> stack2:</span><br><span class="line">                <span class="comment"># 临时列表</span></span><br><span class="line">                tmpRet = []</span><br><span class="line">                <span class="comment"># 如果奇数行有值，就一直循环</span></span><br><span class="line">                <span class="keyword">while</span> stack2:</span><br><span class="line">                    <span class="comment"># 临时弹出数据</span></span><br><span class="line">                    tmpNode = stack2.pop()</span><br><span class="line">                    <span class="comment"># 临时列表里面添加临时数据的值</span></span><br><span class="line">                    tmpRet.append(tmpNode.val)</span><br><span class="line">                    <span class="comment"># 如果有临时数据的右节点</span></span><br><span class="line">                    <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                        <span class="comment"># 就在偶数行添加临时数据的右节点</span></span><br><span class="line">                        stack1.append(tmpNode.right)</span><br><span class="line">                    <span class="comment"># 如果有临时数据的左节点</span></span><br><span class="line">                    <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                        <span class="comment"># 就在偶数行添加临时数据的左节点</span></span><br><span class="line">                        stack1.append(tmpNode.left)</span><br><span class="line">                <span class="comment"># 在返回的顺利列表里面添加临时列表</span></span><br><span class="line">                ret.append(tmpRet)</span><br><span class="line">        <span class="comment"># 返回顺序列表</span></span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 封装版</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Print</span>(<span class="params">self, pRoot</span>):</span></span><br><span class="line">        <span class="comment"># 定义偶数行的添加</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">oddAppend</span>(<span class="params">tmpNode, stack2</span>):</span></span><br><span class="line">            <span class="comment"># 如果有临时数据的左节点</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                <span class="comment"># 就在偶数行添加临时数据的左节点</span></span><br><span class="line">                stack2.append(tmpNode.left)</span><br><span class="line">            <span class="comment"># 如果有临时数据的右节点</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                <span class="comment"># 就在偶数行添加临时数据的右节点</span></span><br><span class="line">                stack2.append(tmpNode.right)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 定义奇数行的添加</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">evenAppend</span>(<span class="params">tmpNode, stack2</span>):</span></span><br><span class="line">            <span class="comment"># 如果有临时数据的右节点</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                <span class="comment"># 就在偶数行添加临时数据的右节点</span></span><br><span class="line">                stack2.append(tmpNode.right)</span><br><span class="line">            <span class="comment"># 如果有临时数据的左节点</span></span><br><span class="line">            <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                <span class="comment"># 就在偶数行添加临时数据的左节点</span></span><br><span class="line">                stack2.append(tmpNode.left)</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dataAppend</span>(<span class="params">stack, stack2, appendFunc</span>):</span></span><br><span class="line">            <span class="comment"># 临时列表</span></span><br><span class="line">            tmpRet = []</span><br><span class="line">            <span class="comment"># 如果奇数行有值，就一直循环</span></span><br><span class="line">            <span class="keyword">while</span> stack:</span><br><span class="line">                <span class="comment"># 临时弹出数据</span></span><br><span class="line">                tmpNode = stack.pop()</span><br><span class="line">                <span class="comment"># 临时列表里面添加临时数据的值</span></span><br><span class="line">                tmpRet.append(tmpNode.val)</span><br><span class="line">                appendFunc(tmpNode, stack2)</span><br><span class="line">            <span class="comment"># 在返回的顺利列表里面添加临时列表</span></span><br><span class="line">            ret.append(tmpRet)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果二叉树为空，就返回空</span></span><br><span class="line">        <span class="keyword">if</span> pRoot == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="comment"># 定义奇数行，从左到右</span></span><br><span class="line">        stack1 = [pRoot]</span><br><span class="line">        <span class="comment"># 定义偶数行，从右到左</span></span><br><span class="line">        stack2 = []</span><br><span class="line">        <span class="comment"># 定义返回的顺序列表</span></span><br><span class="line">        ret = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> stack1 <span class="keyword">or</span> stack2:</span><br><span class="line">            <span class="comment"># 如果奇数行有值</span></span><br><span class="line">            <span class="keyword">if</span> stack1:</span><br><span class="line">                dataAppend(stack1, stack2, oddAppend)</span><br><span class="line">            <span class="comment"># 如果偶数行有值</span></span><br><span class="line">            <span class="keyword">if</span> stack2:</span><br><span class="line">                dataAppend(stack2, stack1, evenAppend)</span><br><span class="line">        <span class="comment"># 返回顺序列表</span></span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="37-把二叉树打印成多行-本题考点-树"><a href="#37-把二叉树打印成多行-本题考点-树" class="headerlink" title="37.把二叉树打印成多行 [^本题考点 树]"></a>37.把二叉树打印成多行 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：从上到下按层打印二叉树，同一层结点从左至右输出。每一层输出一行。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回二维列表[[1,2],[4,5]]</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Print</span>(<span class="params">self, pRoot</span>):</span></span><br><span class="line">        <span class="keyword">if</span> pRoot == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        queue1 = [pRoot]</span><br><span class="line">        queue2 = []</span><br><span class="line">        ret = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> queue1 <span class="keyword">or</span> queue2:</span><br><span class="line">            <span class="keyword">if</span> queue1:</span><br><span class="line">                tmpRet = []</span><br><span class="line">                <span class="keyword">while</span> queue1:</span><br><span class="line">                    tmpNode = queue1[<span class="number">0</span>]</span><br><span class="line">                    tmpRet.append(tmpNode.val)</span><br><span class="line">                    queue1.pop(<span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                        queue2.append(tmpNode.left)</span><br><span class="line">                    <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                        queue2.append(tmpNode.right)</span><br><span class="line">                ret.append(tmpRet)</span><br><span class="line">            <span class="keyword">if</span> queue2:</span><br><span class="line">                tmpRet = []</span><br><span class="line">                <span class="keyword">while</span> queue2:</span><br><span class="line">                    tmpNode = queue2[<span class="number">0</span>]</span><br><span class="line">                    tmpRet.append(tmpNode.val)</span><br><span class="line">                    queue2.pop(<span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">if</span> tmpNode.left:</span><br><span class="line">                        queue1.append(tmpNode.left)</span><br><span class="line">                    <span class="keyword">if</span> tmpNode.right:</span><br><span class="line">                        queue1.append(tmpNode.right)</span><br><span class="line">                ret.append(tmpRet)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="38-二叉搜索树的第k个结点-本题考点-树"><a href="#38-二叉搜索树的第k个结点-本题考点-树" class="headerlink" title="38.二叉搜索树的第k个结点 [^本题考点 树]"></a>38.二叉搜索树的第k个结点 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：给定一棵二叉搜索树，请找出其中的第k小的结点。<br>例如， （5，3，7，2，4，6，8） 中，按结点数值大小顺序第三小结点的值为4。</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 返回对应节点TreeNode</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">KthNode</span>(<span class="params">self, pRoot, k</span>):</span></span><br><span class="line">        retList = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 先定义中序遍历的函数</span></span><br><span class="line">        <span class="comment"># 递归中序法</span></span><br><span class="line">        <span class="comment"># def midOrder(pRoot):</span></span><br><span class="line">        <span class="comment">#     if pRoot == None:</span></span><br><span class="line">        <span class="comment">#         return None</span></span><br><span class="line">        <span class="comment">#     midOrder(pRoot.left)</span></span><br><span class="line">        <span class="comment">#     retList.append(pRoot)</span></span><br><span class="line">        <span class="comment">#     midOrder(pRoot.right)</span></span><br><span class="line">        <span class="comment"># 非递归中序法</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">midOrder</span>(<span class="params">pRoot</span>):</span></span><br><span class="line">            <span class="keyword">if</span> pRoot == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            stack = []</span><br><span class="line">            tmpNode = pRoot</span><br><span class="line">            <span class="keyword">while</span> tmpNode <span class="keyword">or</span> stack:</span><br><span class="line">                <span class="keyword">while</span> tmpNode:</span><br><span class="line">                    stack.append(tmpNode)</span><br><span class="line">                    tmpNode = tmpNode.left</span><br><span class="line">                node = stack.pop()</span><br><span class="line">                retList.append(node)</span><br><span class="line">                tmpNode = node.right</span><br><span class="line">        midOrder(pRoot)</span><br><span class="line">        <span class="keyword">if</span> len(retList) &lt; k <span class="keyword">or</span> k &lt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> retList[k<span class="number">-1</span>]</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="39-序列化二叉树-本题考点-树"><a href="#39-序列化二叉树-本题考点-树" class="headerlink" title="39.序列化二叉树 [^本题考点 树]"></a>39.序列化二叉树 [^本题考点 <em>树</em>]</h4><p>​    <strong>题目：请实现两个函数，分别用来序列化和反序列化二叉树</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># 序列化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Serialize</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        retList = []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">preOrder</span>(<span class="params">root</span>):</span></span><br><span class="line">            <span class="keyword">if</span> root == <span class="literal">None</span>:</span><br><span class="line">                retList.append(<span class="string">'#'</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            retList.append(str(root.val))</span><br><span class="line">            preOrder(root.left)</span><br><span class="line">            preOrder(root.right)</span><br><span class="line"></span><br><span class="line">        preOrder(root)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">' '</span>.join(retList)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 反序列化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Deserialize</span>(<span class="params">self, s</span>):</span></span><br><span class="line">        retList = s.split()</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dePreOrder</span>():</span></span><br><span class="line">            <span class="keyword">if</span> retList == []:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            rootVal = retList.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> rootVal == <span class="string">'#'</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            node = TreeNode(int(rootVal))</span><br><span class="line">            leftNode = dePreOrder()</span><br><span class="line">            rightNode = dePreOrder()</span><br><span class="line">            node.left = leftNode</span><br><span class="line">            node.right = rightNode</span><br><span class="line">            <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">        pRoot = dePreOrder()</span><br><span class="line">        <span class="keyword">return</span> pRoot</span><br></pre></td></tr></tbody></table></figure>

<hr>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/33/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><span class="page-number current">34</span><a class="page-number" href="/page/35/">35</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/35/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
