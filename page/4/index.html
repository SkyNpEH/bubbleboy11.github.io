<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/4/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">347</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/04/go-de-map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/04/go-de-map/" class="post-title-link" itemprop="url">go的map</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-03 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-03T16:21:41Z">2021-07-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-06 07:14:41" itemprop="dateModified" datetime="2021-08-06T07:14:41Z">2021-08-06</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="map创建"><a href="#map创建" class="headerlink" title="map创建"></a>map创建</h3><p>Map 是一种无序的key-value键值对组成的集合。<br>通过 key 可以快速检索到我们需要的数据value，这里的key 类似于索引，指向对应的数据值。</p>
<p>可以像迭代数组和切片那样迭代它。不过，Map 是无序的，我们无法决定它的返回顺序，每次循环出来的数据的顺序是不一致的，这是因为 Map 是使用 hash 表来实现的，是通过散列函数对key计算一个唯一值与值进行映射</p>
<p>通过散列函数对我们的map<br>0xc0001<br>0xc0002<br>0xc0003</p>
<p>2.函数传参，遵循引用类型规则<br>3.类似perl当中的hash,python当中dict的字典，go当中被称为map</p>
<h3 id="map的定义"><a href="#map的定义" class="headerlink" title="map的定义"></a>map的定义</h3><p>要求所有的key的数据类型相同，所有value数据类型相同(注：key与value可以有不同的数据类型)<br>map的key和value类型申明的就要指明</p>
<p>map中的键是唯一的，不可以重复，值可以重复</p>
<h4 id="在申明同时赋值"><a href="#在申明同时赋值" class="headerlink" title="在申明同时赋值"></a>在申明同时赋值</h4><p>map的初始长度会根据初始化时指定的键值对的数量来确定。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 字面值</span></span><br><span class="line">m1 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{ <span class="comment">// 定义map类型变量m1，key的类型为string支持 == 比较操作，value的类型string</span></span><br><span class="line">    <span class="string">"m1"</span>: <span class="string">"v1"</span>, <span class="comment">// 定义时指定的初始key/value, 后面可以继续添加</span></span><br><span class="line">}</span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m1) <span class="comment">// map[m1:v1]</span></span><br><span class="line"></span><br><span class="line">m3 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{} <span class="comment">//创建定义一个空的map</span></span><br><span class="line">fmt.Println(m3)           <span class="comment">// map[]</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m3)    <span class="comment">// map[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mapVariables2 = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>{</span><br><span class="line">    <span class="string">"Monday"</span>: <span class="number">1</span>, <span class="string">"Tuesday"</span>: <span class="number">2</span>, <span class="string">"Wednesday"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">"Thursday"</span>: <span class="number">4</span>,</span><br><span class="line">}</span><br><span class="line">fmt.Println(mapVariables2) <span class="comment">// map[Monday:1 Thursday:4 Tuesday:2 Wednesday:3]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="var-map-key的类型-value的类型"><a href="#var-map-key的类型-value的类型" class="headerlink" title="var map[key的类型]value的类型"></a><code>var map[key的类型]value的类型</code></h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.申明</span></span><br><span class="line"><span class="keyword">var</span> mapVariables1 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">fmt.Println(mapVariables1) <span class="comment">// map[]</span></span><br><span class="line"><span class="comment">// 2.在使用map前，需要先make , make的作用就是给map分配数据空间，之后才可以进行引用</span></span><br><span class="line">mapVariables1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">mapVariables1[<span class="string">"Monday"</span>] = <span class="string">"周一"</span></span><br><span class="line">mapVariables1[<span class="string">"Tuesday"</span>] = <span class="string">"周二"</span></span><br><span class="line">fmt.Println(mapVariables1) <span class="comment">// map[Monday:周一 Tuesday:周二]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//map这里的key是唯一的，会覆盖以前的</span></span><br><span class="line">mapVariables1[<span class="string">"Monday"</span>] = <span class="string">"大周一"</span></span><br><span class="line">fmt.Println(mapVariables1) <span class="comment">// map[Monday:大周一 Tuesday:周二]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(mapVariables1)) <span class="comment">// 2</span></span><br></pre></td></tr></tbody></table></figure>

<p>只申明没有make，没有分配内存空间，值为nil，不能对它赋值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mapVariables6 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">mapVariables6[<span class="string">"hello"</span>] = <span class="string">"波哥"</span> <span class="comment">// panic: assignment to entry in nil map</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="通过短冒号（简短声明）直接使用-make-的形式，当只需要声明一个-map-的时候"><a href="#通过短冒号（简短声明）直接使用-make-的形式，当只需要声明一个-map-的时候" class="headerlink" title="通过短冒号（简短声明）直接使用 := + make 的形式，当只需要声明一个 map 的时候"></a>通过短冒号（简短声明）直接使用 := + make 的形式，当只需要声明一个 map 的时候</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mapVariables3 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">mapVariables3[<span class="string">"Monday"</span>] = <span class="number">1</span></span><br><span class="line">mapVariables3[<span class="string">"Tuesday"</span>] = <span class="number">2</span></span><br><span class="line">mapVariables3[<span class="string">"Wednesday"</span>] = <span class="number">3</span></span><br><span class="line">fmt.Println(mapVariables3) <span class="comment">// map[Monday:1 Tuesday:2 Wednesday:3]</span></span><br><span class="line"></span><br><span class="line">mapVariables2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">mapVariables2[<span class="string">"Monday"</span>] = <span class="string">"周一"</span></span><br><span class="line">mapVariables2[<span class="string">"Tuesday"</span>] = <span class="string">"周二"</span></span><br><span class="line">mapVariables2[<span class="string">"Wednesday"</span>] = <span class="string">"周三"</span></span><br><span class="line"></span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>) <span class="comment">// 创建空的map，里面不含元素，元素都需要后续添加</span></span><br><span class="line">fmt.Println(m2)               <span class="comment">// map[]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m2))          <span class="comment">// 0</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map中key的类型"><a href="#map中key的类型" class="headerlink" title="map中key的类型"></a>map中key的类型</h3><p>map中的每个key在keys的集合中是唯一的，而且需要支持 == or != 操作<br>key的常用类型：int, rune, string, 结构体(每个元素需要支持 == or != 操作 不包含slice切片，map,函数), 指针, 基于这些类型自定义的类型，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m0 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span> <span class="comment">// 定义map类型变量m0，key的类型为string，value的类型string</span></span><br><span class="line">fmt.Println(m0)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="comment">// 两个切片不能比较</span></span><br><span class="line"><span class="keyword">if</span> a == b { <span class="comment">// Invalid operation: a == b (the operator == is not defined on []int)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个切片slice类型只能与nil比较，其他的都不可以</span></span><br><span class="line"><span class="keyword">if</span> a == <span class="literal">nil</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>slice切片，map,函数，不支持 == != 操作，不可以作为map key的数据类型</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 <span class="keyword">map</span>[[]<span class="keyword">int</span>]<span class="keyword">string</span> <span class="comment">// Invalid map key type []int: comparison operators == and != must be fully defined for the key type</span></span><br><span class="line">m4 := <span class="keyword">map</span>[[]<span class="keyword">string</span>]<span class="keyword">int</span>{} <span class="comment">// invalid map key type []string</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>interface{}</code>把它当作万能类型</p>
<p><code>interface{}</code>类型可以作为value</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mapVariables6 []<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}</span><br><span class="line">mapVariables6 = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"波哥"</span></span><br><span class="line">mapVariables6[<span class="number">0</span>][<span class="string">"age"</span>] = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">mapVariables6[<span class="number">1</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}, <span class="number">2</span>)</span><br><span class="line">mapVariables6[<span class="number">1</span>][<span class="string">"name"</span>] = <span class="string">"胡哥"</span></span><br><span class="line">mapVariables6[<span class="number">1</span>][<span class="string">"age"</span>] = <span class="number">16</span></span><br><span class="line"></span><br><span class="line">fmt.Println(mapVariables6)</span><br><span class="line"><span class="comment">// [map[age:18 name:波哥] map[age:16 name:胡哥]]</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>interface{}</code>类型可以作为key，但是需要加入的key的类型是可以比较的</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m2 <span class="keyword">map</span>[<span class="keyword">interface</span>{}]<span class="keyword">string</span></span><br><span class="line">m2 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">interface</span>{}]<span class="keyword">string</span>)</span><br><span class="line"><span class="comment">//m2[[]byte("k2")]="v2" // panic: runtime error: hash of unhashable type []uint8</span></span><br><span class="line">m2[<span class="number">123</span>] = <span class="string">"123"</span></span><br><span class="line">m2[<span class="number">12.3</span>] = <span class="string">"123"</span></span><br><span class="line">fmt.Println(m2) <span class="comment">// map[12.3:123 123:123]</span></span><br><span class="line"></span><br><span class="line">c := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">d := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">//两个数组可以比较</span></span><br><span class="line"><span class="keyword">if</span> c == d {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">a3 := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="keyword">var</span> m3 <span class="keyword">map</span>[[<span class="number">3</span>]<span class="keyword">int</span>]<span class="keyword">string</span></span><br><span class="line">m3 = <span class="built_in">make</span>(<span class="keyword">map</span>[[<span class="number">3</span>]<span class="keyword">int</span>]<span class="keyword">string</span>)</span><br><span class="line">m3[a3] = <span class="string">"m3"</span></span><br><span class="line">fmt.Println(m3) <span class="comment">// map[[1 2 3]:m3]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="结构体做为map的值"><a href="#结构体做为map的值" class="headerlink" title="结构体做为map的值"></a>结构体做为map的值</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// m4 可以，book1里面的元素都是支持== !=</span></span><br><span class="line"><span class="keyword">type</span> book1 <span class="keyword">struct</span> {</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> m4 <span class="keyword">map</span>[book1]<span class="keyword">string</span></span><br><span class="line">fmt.Println(m4) <span class="comment">// map[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> book2 <span class="keyword">struct</span> {</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">    text []<span class="keyword">byte</span> <span class="comment">// text元素类型为[]byte, 不满足key的要求</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> m5 <span class="keyword">map</span>[book2]<span class="keyword">string</span> <span class="comment">// invalid map key type book2: comparison operators == and != must be fully defined for the key type</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> course <span class="keyword">struct</span> {      <span class="comment">// 定义一个结构体变量</span></span><br><span class="line">    courseName    <span class="keyword">string</span>  <span class="comment">// 课程名称</span></span><br><span class="line">    courseTime    <span class="keyword">float32</span> <span class="comment">// 课程时长 单位分钟</span></span><br><span class="line">    courseTeacher <span class="keyword">string</span>  <span class="comment">// 课程讲师</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">couser1 := course{</span><br><span class="line">    <span class="comment">// 不指定结构体字段名的方式，严格按照定义结构体时的顺序</span></span><br><span class="line">    <span class="string">"go语言体系课"</span>, <span class="number">300.3</span>, <span class="string">"波哥"</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">courser2 := course{ <span class="comment">// 指明字段名</span></span><br><span class="line">    courseTeacher: <span class="string">"胡哥"</span>,</span><br><span class="line">    courseTime:    <span class="number">100.2</span>,</span><br><span class="line">    courseName:    <span class="string">"如何变帅"</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义map，key为string，value为结构体</span></span><br><span class="line">courser := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]course)</span><br><span class="line">courser[<span class="string">"go"</span>] = couser1</span><br><span class="line">courser[<span class="string">"美容"</span>] = courser2</span><br><span class="line">fmt.Println(courser)</span><br><span class="line"><span class="comment">//map[go:{go语言体系课 300.3 波哥} 美容:{如何变帅 100.2 胡哥}]</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map的增删改"><a href="#map的增删改" class="headerlink" title="map的增删改"></a>map的增删改</h3><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">    <span class="string">"a"</span>: <span class="string">"va"</span>,</span><br><span class="line">    <span class="string">"b"</span>: <span class="string">"vb"</span>,</span><br><span class="line">    <span class="string">"d"</span>: <span class="string">""</span>,</span><br><span class="line">}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m)) <span class="comment">// 3 获得m中key/value对的个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1. k不存在为增加，k存在为修改</span></span><br><span class="line">m[<span class="string">"c"</span>] = <span class="string">""</span></span><br><span class="line">m[<span class="string">"c"</span>] = <span class="string">"vc"</span> <span class="comment">// 重复增加(key相同)，使用新的值覆盖</span></span><br><span class="line">m[<span class="string">"b"</span>] = <span class="string">"vb1"</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m)              <span class="comment">// map[a:va b:vb1 c:vc d:]</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %d\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">// map[string]string{"a":"va", "b":"vb1", "c":"vc", "d":""} 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询，你返回空的字符串到底是没有获取到还是值本身就是这样空字符串呢</span></span><br><span class="line"><span class="comment">// 从m中取键k对应的值给v，如果k在m中不存在，则将value类型的零值赋值给v</span></span><br><span class="line">v := m[<span class="string">"d"</span>]</span><br><span class="line">fmt.Println(v) <span class="comment">//</span></span><br><span class="line"><span class="comment">// 从m中取键k对应的值给v，如果k存在，ok=true,如果k不存在，将value类型的初始零值赋值给v同时ok=false</span></span><br><span class="line">v1, ok := m[<span class="string">"d"</span>]</span><br><span class="line">fmt.Println(v1, ok) <span class="comment">//  true</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v %#v\n"</span>, v, v1, ok) <span class="comment">// "" "" true 空字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ok {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, v1) <span class="comment">// 找到了</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"没找到"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> value, ok := m[<span class="string">"b"</span>]; ok {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, value) <span class="comment">// 找到了 vb1</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"key 'b' does not exist"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> value, ok := m[<span class="string">"go"</span>]; ok {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, value)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"key 'go' does not exist"</span>) <span class="comment">// key 'go' does not exist</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">u1 := m[<span class="string">"e"</span>]</span><br><span class="line">u2, ok2 := m[<span class="string">"e"</span>]</span><br><span class="line"><span class="keyword">if</span> ok2 {</span><br><span class="line">    fmt.Println(<span class="string">"找到了"</span>, u2)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"没找到"</span>) <span class="comment">// 没找到</span></span><br><span class="line">}</span><br><span class="line">fmt.Println(u2, ok2)                     <span class="comment">//  false</span></span><br><span class="line">fmt.Printf(<span class="string">"%v %v %v\n"</span>, u1, u2, ok2)    <span class="comment">//   false</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %#v %#v\n"</span>, u1, u2, ok2) <span class="comment">// "" "" false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="comment">// 使用内置函数delete(m, k) 将k以及k对应的v从m中删掉；如果k不在m中，不执行任何操作</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"a"</span>)        <span class="comment">// 删除存在的key</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"e"</span>)        <span class="comment">// 删除不存在的key，原m不影响，不会抛出异常</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m) <span class="comment">// map[b:vb1 c:vc d:]</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %d\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">//map[string]string{"b":"vb1", "c":"vc", "d":""} 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"a"</span>)                     <span class="comment">// 重复删除已经删除后不存在的不会抛出异常，m无影响</span></span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, m)              <span class="comment">// map[b:vb1 c:vc d:]</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v %d\n"</span>, m, <span class="built_in">len</span>(m)) <span class="comment">// map[string]string{"b":"vb1", "c":"vc", "d":""} 3</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeMap</span><span class="params">(mapVariables <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    mapVariables[<span class="string">"Monday"</span>] = <span class="number">888</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    <span class="comment">//map是一个引用</span></span><br><span class="line">    fmt.Printf(<span class="string">"mapVariables3['Monday']在调用函数之前的值:%v\n"</span>, mapVariables3[<span class="string">"Monday"</span>])</span><br><span class="line">    <span class="comment">// mapVariables3['Monday']在调用函数之前的值:1</span></span><br><span class="line">    changeMap(mapVariables3)</span><br><span class="line">    fmt.Printf(<span class="string">"mapVariables3['Monday']在调用函数之后的值:%v\n"</span>, mapVariables3[<span class="string">"Monday"</span>])</span><br><span class="line">    <span class="comment">// mapVariables3['Monday']在调用函数之后的值:888</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map的遍历"><a href="#map的遍历" class="headerlink" title="map的遍历"></a>map的遍历</h3><ul>
<li>遍历的顺序是随机无序的</li>
<li>使用for range遍历的时候，k,v使用的同一块内存，这也是容易出现错误的地方</li>
</ul>
<p>如何来对map的key进行有顺序输出, for range<br>如何排序<br>1.定义切片存储所有的key<br>2.通过排序算法（排序算法使用内置或者冒泡，选择等排序算法均可）对key进行排序<br>3.按照排序后的key打印map</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Strings sorts a slice of strings in increasing order.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Strings</span><span class="params">(x []<span class="keyword">string</span>)</span></span> { Sort(StringSlice(x)) }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sortKeys []<span class="keyword">string</span></span><br><span class="line">    <span class="keyword">for</span> key := <span class="keyword">range</span> mapVariables3 { <span class="comment">// 每此运行都是随机，key无序的</span></span><br><span class="line">        sortKeys = <span class="built_in">append</span>(sortKeys, key) <span class="comment">// 每此运行都是随机，加入到切片的key无序的</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">"排序前sortkeys的值=%v\n"</span>, sortKeys)</span><br><span class="line">    <span class="comment">// 排序前sortkeys的值=[Monday Tuesday Wednesday] 无序的，每此运行都是随机</span></span><br><span class="line"></span><br><span class="line">    sort.Strings(sortKeys) <span class="comment">// 自带的排序</span></span><br><span class="line">    fmt.Printf(<span class="string">"排序后sortkeys的值=%v\n"</span>, sortKeys)</span><br><span class="line">    <span class="comment">// 排序后sortkeys的值=[Monday Tuesday Wednesday]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sortKeys); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"mapVariables3[%s]=%d\n"</span>, sortKeys[i], mapVariables3[sortKeys[i]])</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// mapVariables3[Monday]=888</span></span><br><span class="line">    <span class="comment">// mapVariables3[Tuesday]=2</span></span><br><span class="line">    <span class="comment">// mapVariables3[Wednesday]=3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> mapVariables3 {</span><br><span class="line">        fmt.Println(key, value)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Monday 888</span></span><br><span class="line">    <span class="comment">// Tuesday 2</span></span><br><span class="line">    <span class="comment">// Wednesday 3</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="map遍历易错点举例"><a href="#map遍历易错点举例" class="headerlink" title="map遍历易错点举例"></a>map遍历易错点举例</h3><p>由于遍历的时候，遍历v使用的同一块地址，同时这块地址是临时分配的。虽然v的地址没有变化，但v的内容在一直变化，当遍历完成后，v的内容是map遍历时最后遍历的元素的值(map遍历无序，每次不确定哪个元素是最后一个元素)。当程序将v的地址放入到slice中的时候，slice在不断地v的地址插入，由于v一直是那块地址，因此slice中的每个元素记录的都是v的地址。因此当打印slice中的内容的时候，都是同一个值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>{</span><br><span class="line">    <span class="string">"a"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">"b"</span>: <span class="number">2</span>,</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> bs []*<span class="keyword">int</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">    fmt.Printf(<span class="string">"k:[%p].v:[%p]\n"</span>, &amp;k, &amp;v) <span class="comment">// 这里的输出可以看到，k一直使用同一块内存，v也是这个状况</span></span><br><span class="line">    bs = <span class="built_in">append</span>(bs, &amp;v) <span class="comment">// 对v取地址</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, b := <span class="keyword">range</span> bs {</span><br><span class="line">    fmt.Println(*b) <span class="comment">// 输出都是1或者都是2</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>go语言中也有一个list 就是数据结构中提到的链表，不需要连续的内存<br>为什么指针在java python等很多语言中不存在</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/03/go-wen-jian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/03/go-wen-jian/" class="post-title-link" itemprop="url">go文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-02 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-02T16:21:41Z">2021-07-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-09 12:15:32" itemprop="dateModified" datetime="2021-08-09T12:15:32Z">2021-08-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Open opens the named file for reading. If successful, methods on</span></span><br><span class="line"><span class="comment">// the returned file can be used for reading; the associated file</span></span><br><span class="line"><span class="comment">// descriptor has mode O_RDONLY.</span></span><br><span class="line"><span class="comment">// If there is an error, it will be of type *PathError.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Open</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="params">(*File, error)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> OpenFile(name, O_RDONLY, <span class="number">0</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// File represents an open file descriptor.</span></span><br><span class="line"><span class="keyword">type</span> File <span class="keyword">struct</span> {</span><br><span class="line">    *file <span class="comment">// os specific</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Read reads up to len(b) bytes from the File.</span></span><br><span class="line"><span class="comment">// It returns the number of bytes read and any error encountered.</span></span><br><span class="line"><span class="comment">// At end of file, Read returns 0, io.EOF.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span> <span class="title">Read</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> err := f.checkValid(<span class="string">"read"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">    }</span><br><span class="line">    n, e := f.read(b)</span><br><span class="line">    <span class="keyword">return</span> n, f.wrapErr(<span class="string">"read"</span>, e)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Write writes len(b) bytes to the File.</span></span><br><span class="line"><span class="comment">// It returns the number of bytes written and an error, if any.</span></span><br><span class="line"><span class="comment">// Write returns a non-nil error when n != len(b).</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span> <span class="title">Write</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span> {</span><br><span class="line">    <span class="keyword">if</span> err := f.checkValid(<span class="string">"write"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">    }</span><br><span class="line">    n, e := f.write(b)</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">0</span> {</span><br><span class="line">        n = <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> n != <span class="built_in">len</span>(b) {</span><br><span class="line">        err = io.ErrShortWrite</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    epipecheck(f, e)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> e != <span class="literal">nil</span> {</span><br><span class="line">        err = f.wrapErr(<span class="string">"write"</span>, e)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> n, err</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/02/go-qie-pian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/02/go-qie-pian/" class="post-title-link" itemprop="url">go切片</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-01 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-01T16:21:41Z">2021-07-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-06 03:01:32" itemprop="dateModified" datetime="2021-08-06T03:01:32Z">2021-08-06</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，</p>
<p>数组的传递是值传递<br>Go中提供了一种灵活，功能强悍的内置类型切片</p>
<ol>
<li>一种数据结构，便于处理同类型数据集合序列提供一个方便而高效的方式。</li>
<li>与数组相比，切片动态数组，</li>
<li>长度是不固定的，按需自动增长，通过append来可以追加元素</li>
<li>本身不存值、没有数据，指向底层数组的指针，是对底层array的一个view，如果是基于数组产生的 进行的操作会影响原来的数组。</li>
<li>内存当中是连续的存储空间，可以有效的提升cpu的执行效率。</li>
<li>引用类型，引用传递，同一块内存，做为函数参数，形参的值会改变实参数的值</li>
<li>go的slice更像是python的list，python的list底层也是基于数组实现的</li>
<li>当数据类型数据较大时，使用切片可以有效减少内存占用，提高程序执行效率</li>
</ol>
<ul>
<li>ptr 指向数组中切片第一个元素的指针</li>
<li>切片元素的长度，通过<code>len()</code>获取</li>
<li>容量，底层数组的长度减去初始位置，通过<code>cap()</code>获取</li>
</ul>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The len built-in function returns the length of v, according to its type:</span></span><br><span class="line"><span class="comment">//    Array: the number of elements in v.</span></span><br><span class="line"><span class="comment">//    Pointer to array: the number of elements in *v (even if v is nil).</span></span><br><span class="line"><span class="comment">//    Slice, or map: the number of elements in v; if v is nil, len(v) is zero.</span></span><br><span class="line"><span class="comment">//    String: the number of bytes in v.</span></span><br><span class="line"><span class="comment">//    Channel: the number of elements queued (unread) in the channel buffer;</span></span><br><span class="line"><span class="comment">//             if v is nil, len(v) is zero.</span></span><br><span class="line"><span class="comment">// For some arguments, such as a string literal or a simple array expression, the</span></span><br><span class="line"><span class="comment">// result can be a constant. See the Go language specification's "Length and</span></span><br><span class="line"><span class="comment">// capacity" section for details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">len</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The cap built-in function returns the capacity of v, according to its type:</span></span><br><span class="line"><span class="comment">//    Array: the number of elements in v (same as len(v)).</span></span><br><span class="line"><span class="comment">//    Pointer to array: the number of elements in *v (same as len(v)).</span></span><br><span class="line"><span class="comment">//    Slice: the maximum length the slice can reach when resliced;</span></span><br><span class="line"><span class="comment">//    if v is nil, cap(v) is zero.</span></span><br><span class="line"><span class="comment">//    Channel: the channel buffer capacity, in units of elements;</span></span><br><span class="line"><span class="comment">//    if v is nil, cap(v) is zero.</span></span><br><span class="line"><span class="comment">// For some arguments, such as a simple array expression, the result can be a</span></span><br><span class="line"><span class="comment">// constant. See the Go language specification's "Length and capacity" section for</span></span><br><span class="line"><span class="comment">// details.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cap</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>从数据库表中读取商品信息时，用到map切片，每一个map看成一个整体</p>
<h3 id="定义切片初始化"><a href="#定义切片初始化" class="headerlink" title="定义切片初始化"></a>定义切片初始化</h3><p>直接初始化创建切片 slice 的方式有以下几种：<br>  方式                            代码示例<br>直接声明                           <code>var slice []int</code><br>new                              <code>slice := *new([]int)</code><br>字面量 []Type{}                   <code>slice := []int{1, 2, 3, 4, 5}</code><br>make([]Type, length, capacity)   <code>slice := make([]int, 5, 10)</code><br>从切片或数组“截取”引用               <code>slice := array[:]</code>或 <code>slice := sourceSlice[1:5]</code></p>
<p>第一种方法： var identifier []type</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c []<span class="keyword">string</span>      <span class="comment">// 定义了一个切片</span></span><br><span class="line">fmt.Printf(<span class="string">"%v %T %d %d\n"</span>, c, c, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c)) <span class="comment">// [] []string 0 0</span></span><br><span class="line"></span><br><span class="line">c1 := []<span class="keyword">string</span>{}      <span class="comment">// 定义了一个切片</span></span><br><span class="line">fmt.Printf(<span class="string">"%v %T %d %d\n"</span>, c1, c1, <span class="built_in">len</span>(c1), <span class="built_in">cap</span>(c1)) <span class="comment">// [] []string 0 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c2 = []<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">fmt.Printf(<span class="string">"%v %T %d %d\n"</span>, c2, c2, <span class="built_in">len</span>(c2), <span class="built_in">cap</span>(c2)) <span class="comment">// [django scrapy tornado] []string 3 3</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="第二种-使用make"><a href="#第二种-使用make" class="headerlink" title="第二种 使用make"></a>第二种 使用make</h4><p>切片不是没有长度限制，为什么使用make初始化的需要我们传递一个长度，<br>那我传递了长度之后是不是意味着就像数组一样长度不能变了呢？</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The make built-in function allocates and initializes an object of type</span></span><br><span class="line"><span class="comment">// slice, map, or chan (only). Like new, the first argument is a type, not a</span></span><br><span class="line"><span class="comment">// value. Unlike new, make's return type is the same as the type of its</span></span><br><span class="line"><span class="comment">// argument, not a pointer to it. The specification of the result depends on</span></span><br><span class="line"><span class="comment">// the type:</span></span><br><span class="line"><span class="comment">//    Slice: The size specifies the length. The capacity of the slice is</span></span><br><span class="line"><span class="comment">//    equal to its length. A second integer argument may be provided to</span></span><br><span class="line"><span class="comment">//    specify a different capacity; it must be no smaller than the</span></span><br><span class="line"><span class="comment">//    length. For example, make([]int, 0, 10) allocates an underlying array</span></span><br><span class="line"><span class="comment">//    of size 10 and returns a slice of length 0 and capacity 10 that is</span></span><br><span class="line"><span class="comment">//    backed by this underlying array.</span></span><br><span class="line"><span class="comment">//    Map: An empty map is allocated with enough space to hold the</span></span><br><span class="line"><span class="comment">//    specified number of elements. The size may be omitted, in which case</span></span><br><span class="line"><span class="comment">//    a small starting size is allocated.</span></span><br><span class="line"><span class="comment">//    Channel: The channel's buffer is initialized with the specified</span></span><br><span class="line"><span class="comment">//    buffer capacity. If zero, or the size is omitted, the channel is</span></span><br><span class="line"><span class="comment">//    unbuffered.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size ...IntegerType)</span> <span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>make方法初始化创建切片，这种方式可以指定切片的长度和容量。如果没有指定容量不会有多余的预留空间</p>
<p>这种方式切片对应的数组不可见，由make来维护<br>make 用来分配内存主要用来分配引用类型，比如channel, map, slice，返回一个有初始值 (非零) 的 T 类型，不是T类型</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">d := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(d), <span class="built_in">cap</span>(d)) <span class="comment">// len=0, cap=0</span></span><br><span class="line"></span><br><span class="line">a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">fmt.Println(<span class="string">"%T %v"</span>, a, a) <span class="comment">// []int [0 0 0 0 0]</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(a), <span class="built_in">cap</span>(a)) <span class="comment">// len=5, cap=5</span></span><br><span class="line"></span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">3</span>) <span class="comment">// len larger than cap in make([]int)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个初始元素个数为 5 的数组切片，元素初始值为 0，并预留 6 个元素的存储空间</span></span><br><span class="line">c := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Println(c) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">fmt.Printf(<span class="string">"c的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c)) <span class="comment">// c的长度=5，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, c, &amp;c)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc00000c3f0，切片自己的地址=0xc000004078</span></span><br><span class="line"></span><br><span class="line">courses := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%T %v"</span>, courses, courses)            <span class="comment">// []string [    ]</span></span><br><span class="line">fmt.Println(courses, <span class="built_in">len</span>(courses), <span class="built_in">cap</span>(courses)) <span class="comment">// [    ] 5 5</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="第三种，通过对数组操作返回一个切片"><a href="#第三种，通过对数组操作返回一个切片" class="headerlink" title="第三种，通过对数组操作返回一个切片"></a>第三种，通过对数组操作返回一个切片</h4><p>python中的用法叫切片，非常的多灵活，<code>[:-1]</code> <code>[::-1]</code> go都不能用<br>go语言中切片是一种数据结构</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// course := [5]string{"django", "tornado", "scrapy", "python", "asyncio"}</span></span><br><span class="line"><span class="keyword">var</span> courses = [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>, <span class="string">"python"</span>, <span class="string">"asyncio"</span>}</span><br><span class="line">fullCourses := courses[:]</span><br><span class="line">fmt.Println(fullCourses)        <span class="comment">// [django scrapy tornado python asyncio]</span></span><br><span class="line">subCourse := courses[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line">fmt.Println(subCourse)        <span class="comment">// [scrapy tornado python]</span></span><br><span class="line">subCourse[<span class="number">0</span>] = <span class="string">"bobby"</span>      <span class="comment">// 修改切片，引用传递，原数组会变,python 浅拷贝不可变元素不变</span></span><br><span class="line">fmt.Println(courses)        <span class="comment">// [django bobby tornado python asyncio]</span></span><br><span class="line">fmt.Println(subCourse)      <span class="comment">// [bobby tornado python]</span></span><br><span class="line">fmt.Printf(<span class="string">"%T"</span>, subCourse) <span class="comment">// []string</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    s[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"arr[2:6] ="</span>, arr[<span class="number">2</span>:<span class="number">6</span>]) <span class="comment">// arr[2:6] = [2 3 4 5]</span></span><br><span class="line">    s2 := arr[:]</span><br><span class="line">    fmt.Println(<span class="string">"arr[:6] ="</span>, arr[:<span class="number">6</span>]) <span class="comment">// arr[:6] = [0 1 2 3 4 5]</span></span><br><span class="line">    s1 := arr[<span class="number">2</span>:]</span><br><span class="line">    fmt.Println(<span class="string">"s1 ="</span>, s1) <span class="comment">// s1 = [2 3 4 5 6 7]</span></span><br><span class="line">    s2 := arr[:]</span><br><span class="line">    fmt.Println(<span class="string">"s2 ="</span>, s2) <span class="comment">// s2 = [0 1 2 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"After updateSlice(s1)"</span>)</span><br><span class="line">    updateSlice(s1)</span><br><span class="line">    fmt.Println(s1) <span class="comment">// [100 3 4 5 6 7]</span></span><br><span class="line">    fmt.Println(arr) <span class="comment">// [0 1 100 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"After updateSlice(s2)"</span>)</span><br><span class="line">    updateSlice(s2)</span><br><span class="line">    fmt.Println(s2) <span class="comment">// [100 1 100 3 4 5 6 7]</span></span><br><span class="line">    fmt.Println(arr) <span class="comment">// [100 1 100 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Reslice"</span>)</span><br><span class="line">    s2 = s2[:<span class="number">5</span>]</span><br><span class="line">    fmt.Println(s2) <span class="comment">// [100 1 100 3 4]</span></span><br><span class="line">    s2 = s2[<span class="number">2</span>:]</span><br><span class="line">    fmt.Println(s2) <span class="comment">// [100 3 4]</span></span><br></pre></td></tr></tbody></table></figure>

<p>slice 可以向后扩展，不可以向前扩展，s1本身没有s1[4]和s2[5]，但是底层的数组有<br>reslice 向后扩展不可以超越底层数组 cap(s) 长度<br>s[i] 不能超过len(s)的长度<br>一个切片s可以扩展到他的大小上限：s = s[:cap(s)], 如果再扩大的话就会报运行时错误</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line">    fmt.Println(<span class="string">"arr ="</span>, arr) <span class="comment">// arr = [0 1 2 3 4 5 6 7]</span></span><br><span class="line">    s1 = arr[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">    fmt.Printf(<span class="string">"s1=%v, len(s1)=%d, cap(s1)=%d\n"</span>, s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line">    <span class="comment">//s1=[2 3 4 5], len(s1)=4, cap(s1)=6=8-2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//fmt.Println(s1[4]) // panic: runtime error: index out of range [4] with length 4</span></span><br><span class="line"></span><br><span class="line">    s2 = s1[<span class="number">3</span>:<span class="number">5</span>] <span class="comment">// [s1[3], s1[4]]</span></span><br><span class="line">    fmt.Printf(<span class="string">"s2=%v, len(s2)=%d, cap(s2)=%d\n"</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">    <span class="comment">//s2=[5 6], len(s2)=2, cap(s2)=3=8-5 s1本身没有s1[4]，但是底层的数组有</span></span><br><span class="line"></span><br><span class="line">    s6 := s1[<span class="number">3</span>:<span class="number">6</span>]</span><br><span class="line">    fmt.Printf(<span class="string">"s6=%v, len(s6)=%d, cap(s6)=%d\n"</span>, s6, <span class="built_in">len</span>(s6), <span class="built_in">cap</span>(s6))</span><br><span class="line">    <span class="comment">// s6=[5 6 7], len(s6)=3, cap(s6)=3=8-5 s1本身没有s1[4]和s2[5]，但是底层的数组有</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// s7 := s1[3:7]</span></span><br><span class="line">    <span class="comment">//fmt.Println(s7)</span></span><br><span class="line">    <span class="comment">// panic: runtime error: slice bounds out of range [:7] with capacity 6</span></span><br><span class="line">    <span class="comment">// fmt.Printf("s7=%v, len(s7)=%d, cap(s7)=%d\n", s7, len(s7), cap(s7))</span></span><br><span class="line">    <span class="comment">// panic: runtime error: slice bounds out of range [:7] with capacity 6</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    arrayVariables := [...]<span class="keyword">int</span>{<span class="number">12</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">55</span>, <span class="number">98</span>, <span class="number">2</span>} <span class="comment">// 数组</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arrayVariables); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables[%d]=%d,地址=%p\n"</span>, i, arrayVariables[i], &amp;arrayVariables[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">arrayVariables[<span class="number">0</span>]=<span class="number">12</span>,地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">arrayVariables[<span class="number">1</span>]=<span class="number">21</span>,地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">arrayVariables[<span class="number">2</span>]=<span class="number">23</span>,地址=<span class="number">0xc00000c400</span></span><br><span class="line">arrayVariables[<span class="number">3</span>]=<span class="number">55</span>,地址=<span class="number">0xc00000c408</span></span><br><span class="line">arrayVariables[<span class="number">4</span>]=<span class="number">98</span>,地址=<span class="number">0xc00000c410</span></span><br><span class="line">arrayVariables[<span class="number">5</span>]=<span class="number">2</span>,地址=<span class="number">0xc00000c418</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> sliceVariables []<span class="keyword">int</span> <span class="comment">// 切片</span></span><br><span class="line">    arrayVariables := [...]<span class="keyword">int</span>{<span class="number">12</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">55</span>, <span class="number">98</span>, <span class="number">2</span>} <span class="comment">// 数组</span></span><br><span class="line"></span><br><span class="line">    sliceVariables = arrayVariables[:] <span class="comment">// 切片去引用数组</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sliceVariables); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"sliceVariables[%d]=%d,地址=%p\n"</span>, i, sliceVariables[i], &amp;sliceVariables[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">sliceVariables[<span class="number">0</span>]=<span class="number">12</span>,地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">sliceVariables[<span class="number">1</span>]=<span class="number">21</span>,地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">sliceVariables[<span class="number">2</span>]=<span class="number">23</span>,地址=<span class="number">0xc00000c400</span></span><br><span class="line">sliceVariables[<span class="number">3</span>]=<span class="number">55</span>,地址=<span class="number">0xc00000c408</span></span><br><span class="line">sliceVariables[<span class="number">4</span>]=<span class="number">98</span>,地址=<span class="number">0xc00000c410</span></span><br><span class="line">sliceVariables[<span class="number">5</span>]=<span class="number">2</span>,地址=<span class="number">0xc00000c418</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sliceVariables2 []<span class="keyword">int</span></span><br><span class="line">sliceVariables2 = arrayVariables[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">// 从slice中获取slice</span></span><br><span class="line">fmt.Println(sliceVariables2) <span class="comment">// [21 23]</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(sliceVariables2), <span class="built_in">cap</span>(sliceVariables2)) <span class="comment">// len=2, cap=5=6-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 切片指向的是底层的数组</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(sliceVariables2); i++ {</span><br><span class="line">    fmt.Printf(<span class="string">"sliceVariables2[%d]=%d,地址=%p\n"</span>, i, sliceVariables2[i], &amp;sliceVariables2[i])</span><br><span class="line">    <span class="comment">//sliceVariables2[0]=21,地址=0xc00000c3f8</span></span><br><span class="line">    <span class="comment">//sliceVariables2[1]=23,地址=0xc00000c400</span></span><br><span class="line">}</span><br><span class="line">sliceVariables2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">fmt.Println(arrayVariables)  <span class="comment">// [12 100 23 55 98 2] 原数组会变</span></span><br><span class="line">fmt.Println(sliceVariables2) <span class="comment">// [100 23]</span></span><br></pre></td></tr></tbody></table></figure>

<p>通过数组取切片</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data := [<span class="number">10</span>]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>}</span><br><span class="line">slice := data[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">newSlice := data[<span class="number">3</span>:<span class="number">6</span>]</span><br><span class="line"><span class="keyword">for</span> index, value := <span class="keyword">range</span> slice {</span><br><span class="line">    fmt.Println(index, value)</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0 2</span></span><br><span class="line"><span class="comment">//1 3</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice))       <span class="comment">// len=2, cap=8=10-2</span></span><br><span class="line">fmt.Printf(<span class="string">"len=%d, cap=%d\n"</span>, <span class="built_in">len</span>(newSlice), <span class="built_in">cap</span>(newSlice)) <span class="comment">// len=3, cap=7=10-3</span></span><br></pre></td></tr></tbody></table></figure>

<p>第四种方式： new</p>
<p>new 用于各种类型的内存分配 返回的是指针,var variables = new(T)<br>返回的是T，指针类型，即返回的是一个地址，默认是当前类型的零值，指向新分配的类型 T 的零值。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The new built-in function allocates memory. The first argument is a type,</span></span><br><span class="line"><span class="comment">// not a value, and the value returned is a pointer to a newly</span></span><br><span class="line"><span class="comment">// allocated zero value of that type.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span> *<span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">subCourse2 := <span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">fmt.Println(subCourse2) <span class="comment">// &amp;[]</span></span><br><span class="line">subCourse3 := *<span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">fmt.Println(subCourse3) <span class="comment">// []</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The append built-in function appends elements to the end of a slice. If</span></span><br><span class="line"><span class="comment">// it has sufficient capacity, the destination is resliced to accommodate the</span></span><br><span class="line"><span class="comment">// new elements. If it does not, a new underlying array will be allocated.</span></span><br><span class="line"><span class="comment">// Append returns the updated slice. It is therefore necessary to store the</span></span><br><span class="line"><span class="comment">// result of append, often in the variable holding the slice itself:</span></span><br><span class="line"><span class="comment">//    slice = append(slice, elem1, elem2)</span></span><br><span class="line"><span class="comment">//    slice = append(slice, anotherSlice...)</span></span><br><span class="line"><span class="comment">// As a special case, it is legal to append a string to a byte slice, like this:</span></span><br><span class="line"><span class="comment">//    slice = append([]byte("hello "), "world"...)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(slice []Type, elems ...Type)</span> []<span class="title">Type</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>append 函数的参数长度可变，因此可以追加多个值到 slice 中，还可以用 <code>...</code> 传入 slice，直接追加一个切片。</p>
<p>append函数返回值是一个新的slice，Go编译器不允许调用了 append 函数后不使用返回值。<br>由于值传递的关系，必须接收 append 的返回值</p>
<p>为什么append函数之后再调用<code>c[0] = 8</code>不会影响到原来的数组<br>使用 append 可以向 slice 追加元素，实际上是往底层数组添加元素。<br>但是底层数组的长度是固定的，如果索引 len-1 所指向的元素已经是底层数组的最后一个元素，<br>追加切片的容量如果超出了cap，产生了扩容机制，<br>go语言会新申请一块内存分配更大的底层数组将原始数据拷贝到新的内存当中，<br>切片指向新的内存空间地址，修改新切片不影响原来地址的数组<br>新底层数组的长度也会增加，这样就可以放置新增的元素。同时，为了应对未来可能再次发生的 append 操作，新的底层数组的长度，也就是新 slice 的容量是留了一定的 buffer 的。否则，每次添加元素的时候，都会发生迁移，成本太高。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sliceVariables3 []<span class="keyword">int</span> = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Printf(<span class="string">"sliceVariables3的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//sliceVariables3的长度=5，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc00000c450，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, <span class="number">7</span>)</span><br><span class="line">fmt.Println(sliceVariables3) <span class="comment">// [0 0 0 0 0 7]  对于很多初学者来说我们期望的是只有一个数字就是7</span></span><br><span class="line">fmt.Printf(<span class="string">"第一次追加sliceVariables3的长度=%d，容量=%d\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第一次追加sliceVariables3的长度=6，容量=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc00000c450，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, <span class="number">8</span>)</span><br><span class="line">fmt.Println(sliceVariables3) <span class="comment">// [0 0 0 0 0 7 8]</span></span><br><span class="line">fmt.Printf(<span class="string">"第二次追加sliceVariables3的长度=%d，容量=%d,\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第二次追加sliceVariables3的长度=7，容量=12</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc000050060，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">fmt.Println(sliceVariables3) <span class="comment">// [0 0 0 0 0 7 8]</span></span><br><span class="line">fmt.Printf(<span class="string">"第三次追加sliceVariables3的长度=%d，容量=%d,\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第三次追加sliceVariables3的长度=9，容量=12</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc000050060，切片自己的地址=0xc0000040a8</span></span><br><span class="line"></span><br><span class="line">appendedNum := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">sliceVariables3 = <span class="built_in">append</span>(sliceVariables3, appendedNum...) <span class="comment">// 函数的参数传递，第二个参数的值传递到第一个参数</span></span><br><span class="line">fmt.Println(sliceVariables3)</span><br><span class="line">fmt.Printf(<span class="string">"第四次追加sliceVariables3的长度=%d，容量=%d,\n"</span>, <span class="built_in">len</span>(sliceVariables3), <span class="built_in">cap</span>(sliceVariables3))</span><br><span class="line"><span class="comment">//第四次追加sliceVariables3的长度=12，容量=12                            // [0 0 0 0 0 7 8 9 10 1 2 3]</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, sliceVariables3, &amp;sliceVariables3)</span><br><span class="line"><span class="comment">//切片指向的底层数组的地址=0xc000050060，切片自己的地址=0xc0000040a8</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, b, &amp;b)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000ae078，切片自己的地址=0xc000096060</span></span><br><span class="line"></span><br><span class="line">c := b[:]</span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, c, &amp;c)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000ae078，切片自己的地址=0xc000096090</span></span><br><span class="line"></span><br><span class="line">c = <span class="built_in">append</span>(c, <span class="number">9</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, c, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c)) <span class="comment">// [1 2 3 9] len=4 cap=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, c, &amp;c)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000c0090，切片自己的地址=0xc000096090</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// append函数没有影响到原来的数组</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, b, <span class="built_in">len</span>(b), <span class="built_in">cap</span>(b)) <span class="comment">// [1 2 3] len=3 cap=3</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, b, &amp;b)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000ae078，切片自己的地址=0xc000096060</span></span><br><span class="line"></span><br><span class="line">c[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, c, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c)) <span class="comment">// [8 2 3 9] len=4 cap=6</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, c, &amp;c)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000c0090，切片自己的地址=0xc000096090</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, b, <span class="built_in">len</span>(b), <span class="built_in">cap</span>(b)) <span class="comment">// [1 2 3] len=3 cap=3</span></span><br><span class="line">fmt.Printf(<span class="string">"切片指向的底层数组的地址=%p，切片自己的地址=%p\n"</span>, b, &amp;b)</span><br><span class="line"><span class="comment">// 切片指向的底层数组的地址=0xc0000ae078，切片自己的地址=0xc000096060</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"b ="</span>, b) <span class="comment">// b = [1 2 3] 底层数组没变，底层数组长度没变</span></span><br><span class="line"></span><br><span class="line">s2 := b[:<span class="number">1</span>] <span class="comment">// [b[0]]</span></span><br><span class="line">s3 := <span class="built_in">append</span>(s2, <span class="number">10</span>)</span><br><span class="line">fmt.Println(<span class="string">"s3 ="</span>, s3) <span class="comment">// s3 = [1 10]</span></span><br><span class="line"><span class="comment">// s4 and s5 no longer view b. 系统分配了新的 b</span></span><br><span class="line">fmt.Println(<span class="string">"b ="</span>, b) <span class="comment">// b = [1 10 3] 底层数组变了</span></span><br><span class="line"></span><br><span class="line">s4 := <span class="built_in">append</span>(s3, <span class="number">11</span>)</span><br><span class="line">fmt.Println(<span class="string">"s4 ="</span>, s4) <span class="comment">// s4 = [1 10 11]</span></span><br><span class="line">fmt.Println(<span class="string">"b ="</span>, b) <span class="comment">// b = [1 10 11] 底层数组变</span></span><br><span class="line"></span><br><span class="line">d := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">s5 := d[:<span class="number">1</span>] <span class="comment">// [d[0]]</span></span><br><span class="line"></span><br><span class="line">s6 := <span class="built_in">append</span>(s5, <span class="number">12</span>)</span><br><span class="line">fmt.Println(<span class="string">"s6 ="</span>, s6) <span class="comment">// s6 = [1 12]</span></span><br><span class="line">fmt.Println(<span class="string">"d ="</span>, d) <span class="comment">// d = [1 12 3] 底层数组变</span></span><br><span class="line"></span><br><span class="line">s7 := <span class="built_in">append</span>(s6, <span class="number">13</span>, <span class="number">14</span>)</span><br><span class="line">fmt.Println(<span class="string">"s7 ="</span>, s7) <span class="comment">// s7 = [1 12 13 14]</span></span><br><span class="line">fmt.Println(<span class="string">"d ="</span>, d) <span class="comment">// d = [1 12 3] 底层数组没变，底层数组长度没变</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The copy built-in function copies elements from a source slice into a</span></span><br><span class="line"><span class="comment">// destination slice. (As a special case, it also will copy bytes from a</span></span><br><span class="line"><span class="comment">// string to a slice of bytes.) The source and destination may overlap. Copy</span></span><br><span class="line"><span class="comment">// returns the number of elements copied, which will be the minimum of</span></span><br><span class="line"><span class="comment">// len(src) and len(dst).拷贝元素的数量以两个切片中最小切片的长度</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(dst, src []Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>复制不会去扩展a的空间</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">sliceVariables4 := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line"></span><br><span class="line">sliceVariables5 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment">// copy(sliceVariables4, sliceVariables5)</span></span><br><span class="line">fmt.Println(<span class="built_in">copy</span>(sliceVariables4, sliceVariables5)) <span class="comment">// 5</span></span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">fmt.Println(sliceVariables5) <span class="comment">// [0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line">sliceVariables4 := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">sliceVariables5 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">fmt.Println(sliceVariables5) <span class="comment">// [0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="comment">// copy(sliceVariables5, sliceVariables4)</span></span><br><span class="line">fmt.Println(<span class="built_in">copy</span>(sliceVariables5, sliceVariables4)) <span class="comment">// 5</span></span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(sliceVariables5, <span class="built_in">len</span>(sliceVariables5), <span class="built_in">cap</span>(sliceVariables5)) <span class="comment">// [1 2 3 4 5 0 0 0 0 0] 10 10</span></span><br><span class="line"></span><br><span class="line">sliceVariables7 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d\n"</span>, sliceVariables7, <span class="built_in">len</span>(sliceVariables7), <span class="built_in">cap</span>(sliceVariables7)) <span class="comment">// [0 0 0 0 0] len=5 cap=5</span></span><br><span class="line"><span class="built_in">copy</span>(sliceVariables7, sliceVariables4)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, sliceVariables7, <span class="built_in">len</span>(sliceVariables7), <span class="built_in">cap</span>(sliceVariables7)) <span class="comment">// [1 2 3 4 5] len=5 cap=5</span></span><br><span class="line"></span><br><span class="line">sliceVariables8 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d\n"</span>, sliceVariables8, <span class="built_in">len</span>(sliceVariables8)) <span class="comment">// [0 0 0 0 0 0] len=6</span></span><br><span class="line"><span class="built_in">copy</span>(sliceVariables8, sliceVariables4)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, sliceVariables8, <span class="built_in">len</span>(sliceVariables8), <span class="built_in">cap</span>(sliceVariables8)) <span class="comment">// [1 2 3 4 5 0] len=6 cap=6</span></span><br><span class="line"></span><br><span class="line">sliceVariables9 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, sliceVariables9, <span class="built_in">len</span>(sliceVariables9), <span class="built_in">cap</span>(sliceVariables9)) <span class="comment">// [0] len=1 cap=1</span></span><br><span class="line"><span class="built_in">copy</span>(sliceVariables9, sliceVariables4)</span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line"><span class="comment">// fmt.Println(copy(sliceVariables9, sliceVariables4)) // 1</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d cap=%d\n"</span>, sliceVariables9, <span class="built_in">len</span>(sliceVariables9), <span class="built_in">cap</span>(sliceVariables9)) <span class="comment">// [1] len=1 cap=1</span></span><br><span class="line"></span><br><span class="line">sliceVariables10 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d\n"</span>, sliceVariables10, <span class="built_in">len</span>(sliceVariables10), <span class="built_in">cap</span>(sliceVariables8)) <span class="comment">// [] len=0 cap=0</span></span><br><span class="line"><span class="built_in">copy</span>(sliceVariables10, sliceVariables4)</span><br><span class="line"><span class="comment">// fmt.Println(copy(sliceVariables10, sliceVariables4)) // 0</span></span><br><span class="line">fmt.Println(sliceVariables4) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Printf(<span class="string">"%v len=%d\n"</span>, sliceVariables10, <span class="built_in">len</span>(sliceVariables10), <span class="built_in">cap</span>(sliceVariables8)) <span class="comment">// [] len=0 cap=0</span></span><br></pre></td></tr></tbody></table></figure>

<p>append函数追加多个元素，既然是切片，那为什么这个时候有来提出长度的要求</p>
<p>想从切片中删除元素怎么办？</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    fmt.Printf(<span class="string">"%v, len=%d, cap=%d\n"</span>,</span><br><span class="line">        s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    s2 := []<span class="keyword">int</span>{<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>}</span><br><span class="line"></span><br><span class="line">    s2 = <span class="built_in">append</span>(s2[:<span class="number">3</span>], s2[<span class="number">4</span>:]...) <span class="comment">// 把位置为3的删掉 取巧的做法，第一段+第二段</span></span><br><span class="line">    <span class="comment">// 中间位置删除一个元素容量不变</span></span><br><span class="line">    printSlice(s2) <span class="comment">// [2 4 6 0 0 0 0 0 0 0 0 0 0 0 0], len=15, cap=16</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Popping from front"</span>)</span><br><span class="line">    front := s2[<span class="number">0</span>]</span><br><span class="line">    s2 = s2[<span class="number">1</span>:] <span class="comment">// 删除头</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(front) <span class="comment">// 2</span></span><br><span class="line">    <span class="comment">// 左端位置删除一个元素容量变</span></span><br><span class="line">    printSlice(s2) <span class="comment">// [4 6 0 0 0 0 0 0 0 0 0 0 0 0], len=14, cap=15</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Popping from back"</span>)</span><br><span class="line">    tail := s2[<span class="built_in">len</span>(s2)<span class="number">-1</span>]</span><br><span class="line">    s2 = s2[:<span class="built_in">len</span>(s2)<span class="number">-1</span>] <span class="comment">// 删除尾</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(tail) <span class="comment">// 0</span></span><br><span class="line">    <span class="comment">// 右端位置删除一个元素容量变</span></span><br><span class="line">    printSlice(s2) <span class="comment">// [4 6 0 0 0 0 0 0 0 0 0 0 0], len=13, cap=15</span></span><br></pre></td></tr></tbody></table></figure>

<p>两个切片不能比较<br>一个切片slice类型只能与nil比较，其他的都不可以</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">b := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line"><span class="comment">// 两个切片不能比较</span></span><br><span class="line"><span class="keyword">if</span> a == b { <span class="comment">// Invalid operation: a == b (the operator == is not defined on []int)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个切片slice类型只能与nil比较，其他的都不可以</span></span><br><span class="line"><span class="keyword">var</span> c []<span class="keyword">int</span></span><br><span class="line"><span class="keyword">if</span> c == <span class="literal">nil</span> { <span class="comment">//  Zero value for slice is nil</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>切片底层是使用数组实现的，既要使用数组 又要满足动态的功能 怎么实现？<br>假设有一个值 实际上申请数组的时候可能是两个，如果后续要增加数据那么就直接添加到数据的结尾，这个时候我不要额外重新申请<br>切片有不同的初始化方式</p>
<p>底层存储<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/kikajack/article/details/79833674">https://blog.csdn.net/kikajack/article/details/79833674</a><br>go和python的切片区别<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_15437667/article/details/70191873">https://blog.csdn.net/qq_15437667/article/details/70191873</a></p>
<p>Go 中切片 slice扩容机制</p>
<p>首先判断，如果新申请容量（cap）大于2倍的旧容量（old.cap），最终容量（newcap）就是新申请的容量（cap）<br>否则判断，如果旧切片的长度小于1024，则最终容量(newcap)就是旧容量(old.cap)的两倍，即（newcap=doublecap）<br>否则判断，如果旧切片长度大于等于1024，则最终容量（newcap）从旧容量（old.cap）开始循环增加原来的 1/4，<br>即（newcap=old.cap,for {newcap += newcap/4}）<br>直到最终容量（newcap）大于等于新申请的容量(cap)，即（newcap &gt;= cap）<br>如果最终容量（cap）计算值溢出，则最终容量（cap）就是新申请容量（cap）</p>
<p>大家可以通过源码了解，<br>文章推荐：<a target="_blank" rel="noopener" href="https://juejin.im/post/5ca2b75f51882543ea4b81c8#heading-7">https://juejin.im/post/5ca2b75f51882543ea4b81c8#heading-7</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/02/go-shu-zu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/02/go-shu-zu/" class="post-title-link" itemprop="url">go数组</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-01 16:21:41" itemprop="dateCreated datePublished" datetime="2021-07-01T16:21:41Z">2021-07-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-04 00:39:40" itemprop="dateModified" datetime="2021-08-04T00:39:40Z">2021-08-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>机器学习的同学对python的numpy array应该很了解，但是做web开发的同学对python的array使用的不多<br>Go 语言提供了数组类型的数据结构。</p>
<p>数组是具有相同唯一类型的一组已编号且长度固定的数据项序列，这种类型可以是任意的原始类型例如整形、字符串或者自定义类型。<br>数组长度必须是一个常量表达式，并且必须是一个非负整数。数组长度也是数组类型的一部分，所以[5]int和[10]int是属于不同类型的。</p>
<p>如果我们想让数组元素类型为任意类型的话可以使用空接口作为类型，当使用值时我们必须先做一个类型判断 。</p>
<p>数组元素可以通过 索引（位置）来读取（或者修改），数组下标索引从 0 开始，第一个元素索引为 0，第二个索引为 1，以此类推。（数组以 0 开始在所有类 C 语言中是相似的）。<br>元素的数目，也称为长度或者数组大小必须是固定的并且在声明该数组时就给出（编译时需要知道数组长度以便分配内存）。</p>
<p>静态语言中的数组</p>
<ol>
<li>数组是长度固定的数据类型 数组一旦定义后，大小不能更改。</li>
<li>数据元素的类型相同</li>
</ol>
<p>相对于去声明 number0, number1, …, number99 的变量，使用数组形式 numbers[0], numbers[1] …, numbers[99] 更加方便且易于扩展。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>数组在内存当中是连续的存储空间，cpu计算数组相应的索引和元素能确定具体位置，可以有效的提升cpu的执行效率。</p>
<h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><p>存储多个相同类型的数据时，可以使用数组</p>
<h4 id="声明和初始化数组"><a href="#声明和初始化数组" class="headerlink" title="声明和初始化数组"></a>声明和初始化数组</h4><p>需要指明数组的长度大小和存储的数据类型。</p>
<p>go语言中的数组和python的list可以对应起来理解，slice和python的list更像<br>变量或者说数组在定义时，如果没有赋值，会有默认值，零值</p>
<p>初始化数组中 <code>{}</code> 中的元素个数不能大于 <code>[]</code> 中的数字。</p>
<p>数组的长度大小是数组类型的组成部分。长度不一样的数组类型是不一样，因此[10]int和[5]int是不同的类型。<br>因此，数组不能被调整大小。<br>不要担心这个限制，因为切片的存在是为了解决这个问题。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">arrayVariables[<span class="number">10</span>] = <span class="number">100</span> <span class="comment">// invalid array index 10 (out of bounds for 10-element array)</span></span><br><span class="line">arrayVariables := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line"><span class="comment">//cannot use [...]int{...} (type [5]int) as type [10]int in assignment</span></span><br><span class="line"></span><br><span class="line">a := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">5</span>, <span class="number">78</span>, <span class="number">8</span>}</span><br><span class="line"><span class="keyword">var</span> b [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">b = a <span class="comment">//not possible since [3]int and [5]int are distinct types</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> al []<span class="keyword">int</span>     <span class="comment">// 创建slice</span></span><br><span class="line"><span class="comment">//sl := make([]int,10)  // 创建有10个元素的slice</span></span><br><span class="line">sl := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>} <span class="comment">// 创建有初始化元素的slice</span></span><br><span class="line">s2 := [<span class="number">4</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>} <span class="comment">// 创建有初始化元素的slice</span></span><br><span class="line">fmt.Printf(<span class="string">"%T, %T, %T"</span>, al, sl, s2)</span><br></pre></td></tr></tbody></table></figure>

<p>一维数组的定义方式1<br>先声明，后赋值</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">arrayVariables[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">arrayVariables[<span class="number">3</span>] = <span class="number">200</span></span><br><span class="line">fmt.Println(arrayVariables) <span class="comment">// [100 0 0 200 0 0 0 0 0 0]</span></span><br></pre></td></tr></tbody></table></figure>

<p>一维数组的定义方式2定义并初始化</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var arrayVariables2 [5]int = [5]int{1, 2, 3, 4, 5} // 在这种情况左边类型可简写</span></span><br><span class="line"><span class="keyword">var</span> arrayVariables2 = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br></pre></td></tr></tbody></table></figure>

<p>一维数组定义方式3</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arrayVariables3 := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">fmt.Println(arrayVariables3, <span class="built_in">len</span>(arrayVariables3)) <span class="comment">// [1 2 3 4 5] 5</span></span><br></pre></td></tr></tbody></table></figure>

<p>一维数组定义方式4，指定索引下标</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arrayVariables4 := [...]<span class="keyword">int</span>{<span class="number">1</span>: <span class="number">200</span>, <span class="number">4</span>: <span class="number">500</span>}</span><br><span class="line">fmt.Println(arrayVariables4, <span class="built_in">len</span>(arrayVariables4)) <span class="comment">// [0 200 0 0 500] 5</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//var course [10]string // n 是一个长度为 10 的数组 *</span></span><br><span class="line"><span class="comment">//var course = [5]string{"django", "scrapy", "tornado"}</span></span><br><span class="line">course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 修改值， 取值： 删除值， 添加某一个值， 数组一开始就要指定大小</span></span><br><span class="line"><span class="comment">//取值， 修改值</span></span><br><span class="line">fmt.Println(course[<span class="number">0</span>]) <span class="comment">// django</span></span><br><span class="line"><span class="comment">//修改值</span></span><br><span class="line">course[<span class="number">0</span>] = <span class="string">"django3"</span></span><br><span class="line">fmt.Println(course) <span class="comment">// [django3 scrapy tornado  ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的另一种创建方式</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">4</span>]<span class="keyword">float32</span> <span class="comment">// 等价于：var a = [4]float32{}</span></span><br><span class="line">fmt.Println(a) <span class="comment">// [0 0 0 0]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">4</span>]<span class="keyword">float32</span>{<span class="number">1.0</span>}</span><br><span class="line">fmt.Println(b) <span class="comment">// [1 0 0 0]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="string">'A'</span>, <span class="string">'B'</span>} <span class="comment">// byte</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [65 66 0 0 0]</span></span><br></pre></td></tr></tbody></table></figure>

<p>如果忽略 [] 中的数字不设置数组大小，Go 语言会根据元素的个数来设置数组的大小：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> balance = []<span class="keyword">float32</span>{<span class="number">1000.0</span>, <span class="number">2.0</span>, <span class="number">3.4</span>, <span class="number">7.0</span>, <span class="number">50.0</span>}</span><br><span class="line"></span><br><span class="line">balance[<span class="number">4</span>] = <span class="number">50.0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="访问数组元素"><a href="#访问数组元素" class="headerlink" title="访问数组元素"></a>访问数组元素</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> n [<span class="number">10</span>]<span class="keyword">int</span> <span class="comment">/* n 是一个长度为 10 的数组 */</span></span><br><span class="line">    <span class="keyword">var</span> i, j <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 为数组 n 初始化元素 */</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ {</span><br><span class="line">        n[i] = i + <span class="number">100</span> <span class="comment">/* 设置元素为 i + 100 */</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 输出每个数组元素的值 */</span></span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ {</span><br><span class="line">        fmt.Printf(<span class="string">"Element[%d] = %d\n"</span>, j, n[j])</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">Element[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">Element[<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">Element[<span class="number">2</span>] = <span class="number">102</span></span><br><span class="line">Element[<span class="number">3</span>] = <span class="number">103</span></span><br><span class="line">Element[<span class="number">4</span>] = <span class="number">104</span></span><br><span class="line">Element[<span class="number">5</span>] = <span class="number">105</span></span><br><span class="line">Element[<span class="number">6</span>] = <span class="number">106</span></span><br><span class="line">Element[<span class="number">7</span>] = <span class="number">107</span></span><br><span class="line">Element[<span class="number">8</span>] = <span class="number">108</span></span><br><span class="line">Element[<span class="number">9</span>] = <span class="number">109</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组的长度"><a href="#数组的长度" class="headerlink" title="数组的长度"></a>数组的长度</h4><p>通过将数组作为参数传递给<code>len</code>函数，可以获得数组的长度。</p>
<p>忽略初始化声明中数组的长度并将其替换为<code>…</code> […] 语法糖 ，数组的长度大小根据初始化的元素的个数确定，表示让编译器自动推导数组的长度。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">e := [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">4</span>: <span class="number">100</span>} <span class="comment">// 下标第四个的值设为100，其他为默认值</span></span><br><span class="line">fmt.Println(e)      <span class="comment">// [0 0 0 0 100]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(e))          <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... makes the compiler determine the length</span></span><br><span class="line">d := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>} <span class="comment">// 不写省略号是切片</span></span><br><span class="line">fmt.Println(d)               <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(d))          <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">fmt.Println(f) <span class="comment">// [1 0 0 0 1 0 0 0 0 100]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(f)) <span class="comment">// 10</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="使用range遍历数组"><a href="#使用range遍历数组" class="headerlink" title="使用range遍历数组"></a>使用range遍历数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">    <span class="keyword">for</span> i, value := <span class="keyword">range</span> course {</span><br><span class="line">        fmt.Println(i, value)</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> django</span><br><span class="line"><span class="number">1</span> scrapy</span><br><span class="line"><span class="number">2</span> tornado</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="comment">// 使用for range求和 只需要值并希望忽略索引</span></span><br><span class="line"><span class="keyword">for</span> _, value := <span class="keyword">range</span> f { <span class="comment">//ignores index</span></span><br><span class="line">    sum += value</span><br><span class="line">}</span><br><span class="line">fmt.Println(sum) <span class="comment">// 102</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    a := [...]<span class="keyword">float64</span>{<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>}</span><br><span class="line">    sum := <span class="keyword">float64</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> a { <span class="comment">//range returns both the index and value</span></span><br><span class="line">        fmt.Printf(<span class="string">"%d the element of a is %.2f\n"</span>, i, v)</span><br><span class="line">        sum += v</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(<span class="string">"\nsum of all elements of a"</span>, sum)</span><br><span class="line">---</span><br><span class="line">    <span class="number">0</span> the element of a is <span class="number">67.70</span></span><br><span class="line">    <span class="number">1</span> the element of a is <span class="number">89.80</span></span><br><span class="line">    <span class="number">2</span> the element of a is <span class="number">21.00</span></span><br><span class="line">    <span class="number">3</span> the element of a is <span class="number">78.00</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="将一个数组赋值给另一个数组"><a href="#将一个数组赋值给另一个数组" class="headerlink" title="将一个数组赋值给另一个数组"></a>将一个数组赋值给另一个数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    arrayVariables6 := [<span class="number">3</span>]<span class="keyword">string</span>{<span class="string">"波哥"</span>, <span class="string">"哥波"</span>, <span class="string">"golang"</span>}</span><br><span class="line">    arrayVariables7 := arrayVariables6</span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> arrayVariables6 {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables6[%d]=%v,地址=%p\n"</span>, index, value, &amp;arrayVariables6[index])</span><br><span class="line">    }</span><br><span class="line">arrayVariables6[<span class="number">0</span>]=波哥, 地址=<span class="number">0xc00007a3c0</span></span><br><span class="line">arrayVariables6[<span class="number">1</span>]=哥波, 地址=<span class="number">0xc00007a3d0</span></span><br><span class="line">arrayVariables6[<span class="number">2</span>]=golang, 地址=<span class="number">0xc00007a3e0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> arrayVariables7 {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables7[%d]=%v,地址=%p\n"</span>, index, value, &amp;arrayVariables6[index])</span><br><span class="line">    }</span><br><span class="line">arrayVariables7[<span class="number">0</span>]=波哥, 地址=<span class="number">0xc00007a3c0</span></span><br><span class="line">arrayVariables7[<span class="number">1</span>]=哥波, 地址=<span class="number">0xc00007a3d0</span></span><br><span class="line">arrayVariables7[<span class="number">2</span>]=golang, 地址=<span class="number">0xc00007a3e0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="使用for语句也可以遍历数组"><a href="#使用for语句也可以遍历数组" class="headerlink" title="使用for语句也可以遍历数组"></a>使用for语句也可以遍历数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    a := [...]<span class="keyword">float64</span>{<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>}</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ { <span class="comment">//looping from 0 to the length of the array</span></span><br><span class="line">        fmt.Printf(<span class="string">"%d th element of a is %.2f\n"</span>, i, a[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">    <span class="number">0</span> th element of a is <span class="number">67.70</span></span><br><span class="line">    <span class="number">1</span> th element of a is <span class="number">89.80</span></span><br><span class="line">    <span class="number">2</span> th element of a is <span class="number">21.00</span></span><br><span class="line">    <span class="number">3</span> th element of a is <span class="number">78.00</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">course := [<span class="number">5</span>]<span class="keyword">string</span>{<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>}</span><br><span class="line">f := [...]<span class="keyword">int</span>{<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">100</span>}</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(course)) <span class="comment">// 5</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(course); i++ {</span><br><span class="line">    sum += f[i]</span><br><span class="line">}</span><br><span class="line">fmt.Println(sum) <span class="comment">// 2</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="数组内存分析"><a href="#数组内存分析" class="headerlink" title="数组内存分析"></a>数组内存分析</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> arrayVariables2 = [<span class="number">5</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">    <span class="keyword">var</span> length = <span class="built_in">len</span>(arrayVariables2)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"arrayVariables2[%d]=%d, 地址=%p\n"</span>, i, arrayVariables2[i], &amp;arrayVariables2[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">arrayVariables2[<span class="number">0</span>]=<span class="number">1</span>, 地址=<span class="number">0xc00000c3f0</span></span><br><span class="line">arrayVariables2[<span class="number">1</span>]=<span class="number">2</span>, 地址=<span class="number">0xc00000c3f8</span></span><br><span class="line">arrayVariables2[<span class="number">2</span>]=<span class="number">3</span>, 地址=<span class="number">0xc00000c400</span></span><br><span class="line">arrayVariables2[<span class="number">3</span>]=<span class="number">4</span>, 地址=<span class="number">0xc00000c408</span></span><br><span class="line">arrayVariables2[<span class="number">4</span>]=<span class="number">5</span>, 地址=<span class="number">0xc00000c410</span></span><br><span class="line">内存间隔地址是<span class="number">8</span></span><br></pre></td></tr></tbody></table></figure>

<p>数组在内存当中是连续的存储空间<br>数组的元素(下标)      元素值        元素的地址<br>0                    1            0xc00006a060<br>1                    2            0xc00006a068<br>2                    3            0xc00006a070<br>3                    4            0xc00006a078<br>4                    5            0xc00006a080</p>
<h3 id="数组是值类型"><a href="#数组是值类型" class="headerlink" title="数组是值类型"></a>数组是值类型</h3><p>go语言中函数传递参数的时候，数组作为参数调用的时候是值传递、值拷贝、深拷贝，如果较大的数组传递对cpu的效能消耗是极其大的，而不是 python java 的引用类型。<br>这意味着当它们被分配给一个新变量时，将把<strong>原始数组的副本</strong>分配给新变量。<strong>如果对新变量进行了更改，则不会在原始数组中反映</strong>。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="keyword">string</span>{<span class="string">"USA"</span>, <span class="string">"China"</span>, <span class="string">"India"</span>, <span class="string">"Germany"</span>, <span class="string">"France"</span>}</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)      <span class="comment">// a is  [USA Singapore China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"a[0] = "</span>, a[<span class="number">0</span>]) <span class="comment">// a[0] =  USA</span></span><br><span class="line">b := a                       <span class="comment">// a deep copy of a is assigned to b</span></span><br><span class="line">b[<span class="number">0</span>] = <span class="string">"Singapore"</span></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)</span><br><span class="line"><span class="comment">// a is  [USA China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"b is "</span>, b)</span><br><span class="line"><span class="comment">// b is  [Singapore China India Germany France]</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>] = <span class="string">"UK"</span></span><br><span class="line">fmt.Println(<span class="string">"a is "</span>, a)      <span class="comment">// a is  [UK China India Germany France]</span></span><br><span class="line">fmt.Println(<span class="string">"a[0] = "</span>, a[<span class="number">0</span>]) <span class="comment">// a[0] =  UK</span></span><br><span class="line">fmt.Println(<span class="string">"b is "</span>, b)      <span class="comment">// b is  [Singapore China India Germany France]</span></span><br></pre></td></tr></tbody></table></figure>

<p>在函数内修改数组的值并不会影响到实参<br>数组指针做为参数以引用形式传递函数，当传递较大的数组时可以有效的提升cpu执行效率</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    arrayVariables5 := [<span class="number">10</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">    changeArr(arrayVariables5) <span class="comment">// [100 2 3 0 0 0 0 0 0 0]</span></span><br><span class="line">    fmt.Println(arrayVariables5) <span class="comment">// [1 2 3 0 0 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过传递指针的方式来改变数组的元素</span></span><br><span class="line">    changeArrByPointer(&amp;arrayVariables5) <span class="comment">// &amp;[100 100 3 0 0 0 0 0 0 0]</span></span><br><span class="line">    fmt.Println(arrayVariables5) <span class="comment">// [100 100 3 0 0 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line">    arrayVariables6 := [...]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">    <span class="comment">// arrayVariables5和arrayVariables6应该是同一种类型，都是数组类型</span></span><br><span class="line">    <span class="comment">// go语言中，arrayVariables5和arrayVariables6都是数组，但是不是同一种类型、长度不一样</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T\n"</span>, arrayVariables5) <span class="comment">// [10]int</span></span><br><span class="line">    fmt.Printf(<span class="string">"%T\n"</span>, arrayVariables6) <span class="comment">// [5]int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// changeArr(arrayVariables6)</span></span><br><span class="line">    <span class="comment">// cannot use arrayVariables6 (type [5]int) as type [10]int in argument to changeArr</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeArrByPointer</span><span class="params">(arr *[10]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    (*arr)[<span class="number">0</span>] = <span class="number">100</span> <span class="comment">// 这样就可以改变值，很灵活</span></span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">100</span> <span class="comment">// 这样也可以改变值，不用在arr前面加上*</span></span><br><span class="line">    fmt.Println(arr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeArr</span><span class="params">(arr [10]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span> <span class="comment">// 不会影响到实参</span></span><br><span class="line">    fmt.Println(arr)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="二维数组，两个维度"><a href="#二维数组，两个维度" class="headerlink" title="二维数组，两个维度"></a>二维数组，两个维度</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables8 [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span></span><br><span class="line">fmt.Println(arrayVariables8) <span class="comment">// [[0 0] [0 0] [0 0] [0 0]]</span></span><br><span class="line"></span><br><span class="line">arrayVariables9 := [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span>{{<span class="number">10</span>, <span class="number">11</span>}, {<span class="number">3</span>, <span class="number">5</span>}, {<span class="number">2</span>, <span class="number">3</span>}, {<span class="number">100</span>, <span class="number">88</span>}}</span><br><span class="line">fmt.Println(arrayVariables9) <span class="comment">// [[10 11] [3 5] [2 3] [100 88]]</span></span><br><span class="line"></span><br><span class="line">arrayVariables10 := [<span class="number">4</span>][<span class="number">2</span>]<span class="keyword">int</span>{<span class="number">1</span>: {<span class="number">100</span>, <span class="number">90</span>}, <span class="number">2</span>: {<span class="number">8</span>, <span class="number">9</span>}}</span><br><span class="line">fmt.Println(arrayVariables10) <span class="comment">// [[0 0] [100 90] [8 9] [0 0]]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayVariables11 [<span class="number">4</span>][<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">int</span> = [<span class="number">4</span>][<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">int</span>{}</span><br><span class="line">fmt.Println(arrayVariables11)</span><br><span class="line"><span class="comment">//[[[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]] [[0 0] [0 0] [0 0]]]</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-tiao-chu-xun-huan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-tiao-chu-xun-huan/" class="post-title-link" itemprop="url">go跳出循环</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-14 03:25:24" itemprop="dateModified" datetime="2021-07-14T03:25:24Z">2021-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>循环控制语句可以控制循环体内语句的执行过程</p>
<p>GO 语言支持 goto、break、continue 三种循环控制语句，三个语句都可以配合标签( label )使用，标签名区分大小写，定义后不使用会造成编译错误。</p>
<h3 id="break-退出当前循环"><a href="#break-退出当前循环" class="headerlink" title="break 退出当前循环"></a>break 退出当前循环</h3><h4 id="如果我们不想一直死循环下去，当某个条件成立时中断当前-for-循环，并开始执行循环之后的语句"><a href="#如果我们不想一直死循环下去，当某个条件成立时中断当前-for-循环，并开始执行循环之后的语句" class="headerlink" title="如果我们不想一直死循环下去，当某个条件成立时中断当前 for 循环，并开始执行循环之后的语句"></a>如果我们不想一直死循环下去，当某个条件成立时中断当前 for 循环，并开始执行循环之后的语句</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">i:=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>{</span><br><span class="line">    fmt.Println(<span class="string">"你怎么这么好看?"</span>)</span><br><span class="line">    i+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i==<span class="number">3</span>{</span><br><span class="line">        fmt.Println(<span class="string">"天生的"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">你怎么这么好看?</span><br><span class="line">你怎么这么好看?</span><br><span class="line">你怎么这么好看?</span><br><span class="line">天生的</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">            <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"a的值为 : %d\n"</span>, a)</span><br><span class="line">        a++</span><br><span class="line">---</span><br><span class="line">a的值为 : <span class="number">10</span></span><br><span class="line">a的值为 : <span class="number">11</span></span><br><span class="line">a的值为 : <span class="number">12</span></span><br><span class="line">a的值为 : <span class="number">13</span></span><br><span class="line">a的值为 : <span class="number">14</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">10</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">6</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">2</span> <span class="number">0</span></span><br><span class="line"><span class="number">3</span> <span class="number">0</span></span><br><span class="line"><span class="number">4</span> <span class="number">0</span></span><br><span class="line"><span class="number">5</span> <span class="number">0</span></span><br><span class="line"><span class="number">6</span> <span class="number">0</span></span><br><span class="line"><span class="number">7</span> <span class="number">0</span></span><br><span class="line"><span class="number">8</span> <span class="number">0</span></span><br><span class="line"><span class="number">9</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="中断当前-for-range-循环，并开始执行循环之后的语句"><a href="#中断当前-for-range-循环，并开始执行循环之后的语句" class="headerlink" title="中断当前 for range 循环，并开始执行循环之后的语句"></a>中断当前 for range 循环，并开始执行循环之后的语句</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="number">1</span>: <span class="string">"oldboy"</span>,</span><br><span class="line">        <span class="number">2</span>: <span class="string">"Linux"</span>,</span><br><span class="line">        <span class="number">3</span>: <span class="string">"Python"</span>,</span><br><span class="line">        <span class="number">4</span>: <span class="string">"Java"</span>,</span><br><span class="line">        <span class="number">5</span>: <span class="string">"Golang"</span>,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">        fmt.Printf(<span class="string">"%d =&gt; %s \n"</span>, k, v)</span><br><span class="line">        <span class="keyword">if</span> v == <span class="string">"Golang"</span> {</span><br><span class="line">            <span class="comment">// break 语句跳出循环</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<p>break 语句在执行一条 case 后跳出 select 循环</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> ch <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// ch &lt;- 1</span></span><br><span class="line">    <span class="keyword">select</span> {</span><br><span class="line">    <span class="keyword">case</span> i := &lt;-ch:</span><br><span class="line">        fmt.Printf(<span class="string">"received %d %s"</span>, i, <span class="string">" from ch\n"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Println(<span class="string">"break"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Break label 语句 跳出多层嵌套循环<br>label要写在循环的开始而不是结束的地方，和goto语句不一样。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FORBREAK:</span><br><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">10</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">6</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">break</span> FORBREAK</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 0 0</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">"start"</span>)</span><br><span class="line"></span><br><span class="line">Exit:</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">9</span>; i++ {</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">9</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> i+j &gt; <span class="number">15</span> {</span><br><span class="line">                fmt.Println(<span class="string">"exit"</span>) <span class="comment">// exit</span></span><br><span class="line">                <span class="keyword">break</span> Exit</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"end"</span>) <span class="comment">// end</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">"start"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">9</span>; i++ {</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">9</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> i+j &gt; <span class="number">15</span> {</span><br><span class="line">                fmt.Println(<span class="string">"exit"</span>)</span><br><span class="line">                <span class="keyword">break</span> Exit</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">Exit:</span><br><span class="line">    fmt.Println(<span class="string">"end"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight dos"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./main.go:<span class="number">14</span>:<span class="number">11</span>: <span class="built_in">break</span> <span class="built_in">label</span> <span class="keyword">not</span> <span class="keyword">defined</span>: <span class="keyword">Exit</span></span><br><span class="line">./main.go:<span class="number">18</span>:<span class="number">1</span>: <span class="built_in">label</span> <span class="keyword">Exit</span> <span class="keyword">defined</span> and <span class="keyword">not</span> used</span><br></pre></td></tr></tbody></table></figure>

<h3 id="continue跳过当前循环"><a href="#continue跳过当前循环" class="headerlink" title="continue跳过当前循环"></a>continue跳过当前循环</h3><p>与break退出整个循环不同，continue是跳过当前循环，也就是说在for代码块中遇到continue，在 for 循环和for range 循环中用于跳过当前循环其后的的剩余语句，然后继续进行下一轮循环。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++ {</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">2</span> {</span><br><span class="line">            <span class="comment">// 不妨将continue换成break试试，看看它们的区别</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">            <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"a的值为 : %d\n"</span>, a)</span><br><span class="line">        a++</span><br><span class="line">---</span><br><span class="line">a的值为 : <span class="number">10</span></span><br><span class="line">a的值为 : <span class="number">11</span></span><br><span class="line">a的值为 : <span class="number">12</span></span><br><span class="line">a的值为 : <span class="number">13</span></span><br><span class="line">a的值为 : <span class="number">14</span></span><br><span class="line">a的值为 : <span class="number">16</span></span><br><span class="line">a的值为 : <span class="number">17</span></span><br><span class="line">a的值为 : <span class="number">18</span></span><br><span class="line">a的值为 : <span class="number">19</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// for 循环</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ {</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">2</span> {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"i 的值为 : %d\n"</span>, i)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// for range 循环</span></span><br><span class="line">    sli := []<span class="keyword">string</span>{<span class="string">"Linux"</span>, <span class="string">"Python"</span>, <span class="string">"Golang"</span>, <span class="string">"Java"</span>}</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> sli {</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">        <span class="keyword">if</span> v != <span class="string">"Golang"</span> {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Println(<span class="string">"The old boy welcomes you."</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">3</span>; outerIndex++ {</span><br><span class="line">    <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">2</span>; innerIndex++ {</span><br><span class="line">        fmt.Println(outerIndex, innerIndex)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">        fmt.Println(<span class="string">"这里是内层循环剩余的代码"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0 0</span></span><br><span class="line"><span class="comment">//0 1</span></span><br><span class="line"><span class="comment">//1 0</span></span><br><span class="line"><span class="comment">//1 1</span></span><br><span class="line"><span class="comment">//2 0</span></span><br><span class="line"><span class="comment">//2 1</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="continue-标签执行的结果"><a href="#continue-标签执行的结果" class="headerlink" title="continue+标签执行的结果"></a>continue+标签执行的结果</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">BreakLabel:</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ {</span><br><span class="line">    ContinueLabel:</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">5</span>; j++ {</span><br><span class="line">            <span class="keyword">if</span> j &gt; <span class="number">2</span> {</span><br><span class="line">                <span class="keyword">continue</span> ContinueLabel</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">1</span> {</span><br><span class="line">                <span class="keyword">break</span> BreakLabel</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            fmt.Print(i, <span class="string">":"</span>, j, <span class="string">" "</span>)</span><br><span class="line">        }</span><br><span class="line">        fmt.Println()</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span>:<span class="number">0</span> <span class="number">0</span>:<span class="number">1</span> <span class="number">0</span>:<span class="number">2</span> </span><br><span class="line"><span class="number">1</span>:<span class="number">0</span> <span class="number">1</span>:<span class="number">1</span> <span class="number">1</span>:<span class="number">2</span> </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FORCONTINUE:</span><br><span class="line">    <span class="keyword">for</span> outerIndex := <span class="number">0</span>; outerIndex &lt; <span class="number">3</span>; outerIndex++ {</span><br><span class="line">        <span class="keyword">for</span> innerIndex := <span class="number">0</span>; innerIndex &lt; <span class="number">2</span>; innerIndex++ {</span><br><span class="line">            fmt.Println(outerIndex, innerIndex)</span><br><span class="line">            <span class="keyword">continue</span> FORCONTINUE</span><br><span class="line">            fmt.Println(<span class="string">"这里是内层循环剩余的代码"</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line"><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">2</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/python-zhong-wei-shi-me-mei-you-switch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/python-zhong-wei-shi-me-mei-you-switch/" class="post-title-link" itemprop="url">python中为什么没有switch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-15 02:42:00" itemprop="dateModified" datetime="2021-07-15T02:42:00Z">2021-07-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>查看Python官方:PEP 3103-A Switch/Case Statement</p>
<p>发现其实实现Switch Case需要被判断的变量是可哈希的和可比较的，<br>这与Python倡导的灵活性有冲突。在实现上，优化不好做，可能到最后最差的情况汇编出来跟If Else组是一样的。所以Python没有支持。</p>
<p> 采用dict映射</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="number">80</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_A</span>():</span></span><br><span class="line">    print(<span class="string">'A'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_B</span>():</span></span><br><span class="line">    print(<span class="string">'B'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_C</span>():</span></span><br><span class="line">    print(<span class="string">'C'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_D</span>():</span></span><br><span class="line">    print(<span class="string">'D'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">switch = {</span><br><span class="line">    <span class="number">90</span>: print_A,</span><br><span class="line">    <span class="number">80</span>: print_B,</span><br><span class="line">    <span class="number">70</span>: print_C,</span><br><span class="line">    <span class="number">60</span>: print_D,</span><br><span class="line">}</span><br><span class="line">switch[score]()  <span class="comment"># B</span></span><br><span class="line"></span><br><span class="line">score = <span class="number">80</span></span><br><span class="line"></span><br><span class="line">switch = {</span><br><span class="line">    <span class="number">90</span>: <span class="keyword">lambda</span>: print(<span class="string">"A"</span>),</span><br><span class="line">    <span class="number">80</span>: <span class="keyword">lambda</span>: print(<span class="string">"B"</span>),</span><br><span class="line">    <span class="number">70</span>: <span class="keyword">lambda</span>: print(<span class="string">"C"</span>),</span><br><span class="line">    <span class="number">60</span>: <span class="keyword">lambda</span>: print(<span class="string">"D"</span>),</span><br><span class="line">}</span><br><span class="line">switch[score]()  <span class="comment"># B</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-tiao-jian-kong-zhi-if-yu-ju/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-tiao-jian-kong-zhi-if-yu-ju/" class="post-title-link" itemprop="url">go条件控制if语句</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-04 00:41:13" itemprop="dateModified" datetime="2021-08-04T00:41:13Z">2021-08-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>go语言的常用控制流程有if和for，没有while， 而switch和goto是为了简化代码，降低重复代码，属于扩展的流程控制。<br>if 的条件里不需要括号</p>
<p>if语句的结构：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 布尔表达式 {</span><br><span class="line">   <span class="comment">/* 在布尔表达式为 true 时执行 */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 布尔表达式 {</span><br><span class="line">   <span class="comment">/* 在布尔表达式为 true 时执行 */</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  <span class="comment">/* 在布尔表达式为 false 时执行 */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 布尔表达式<span class="number">1</span> {</span><br><span class="line">   <span class="comment">/* 在布尔表达式1为 true 时执行 */</span></span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> 布尔表达式<span class="number">2</span>{</span><br><span class="line">   <span class="comment">/* 在布尔表达式1为 false ,布尔表达式2为true时执行 */</span></span><br><span class="line">} <span class="keyword">else</span>{</span><br><span class="line">   <span class="comment">/* 在上面两个布尔表达式都为false时，执行*/</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">   <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">    num := <span class="number">11</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num%<span class="number">2</span> == <span class="number">0</span> {</span><br><span class="line">        fmt.Println(<span class="string">"偶数"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(<span class="string">"奇数"</span>)</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">score := <span class="number">55</span></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span> {</span><br><span class="line">    fmt.Println(<span class="string">"优"</span>)</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">80</span> {</span><br><span class="line">    fmt.Println(<span class="string">"良"</span>)</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">60</span> {</span><br><span class="line">    fmt.Println(<span class="string">"一般"</span>)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"不及格"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>if的条件里赋值的变量作用域就在这个if语句里面</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filename = <span class="string">"hello.txt"</span></span><br><span class="line"></span><br><span class="line">contents, err := ioutil.ReadFile(filename)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line">    fmt.Printf(<span class="string">"%s\n"</span>,contents)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> fileHandle, err := os.Open(filename)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(fileHandle)  <span class="comment">// &lt;nil&gt;</span></span><br><span class="line">    fmt.Println(err.Error()) <span class="comment">// open hello.txt: The system cannot find the file specified.</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"获取文件成功"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、-else-语句组合中"><a href="#将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、-else-语句组合中" class="headerlink" title="将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、 else 语句组合中"></a>将返回值与判断放在一行进行处理，而且返回值的作用范围被限制在if、 else 语句组合中</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value,ok := courser[<span class="string">"go"</span>];ok {</span><br><span class="line">    fmt.Println(value)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if statement; condition</span></span><br><span class="line"><span class="keyword">if</span> num := <span class="number">11</span>; num%<span class="number">2</span> == <span class="number">0</span> { <span class="comment">// checks if number is even</span></span><br><span class="line">    fmt.Println(<span class="string">"偶数even"</span>)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"奇数odd"</span>) <span class="comment">// 奇数odd</span></span><br><span class="line">}</span><br><span class="line">fmt.Println(num) <span class="comment">// undefined: num</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := Connect(); err != <span class="literal">nil</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>打开某一个文件不存在或者由于权限的问题无法操作</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> contents, err := ioutil.ReadFile(filename); err!=<span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">    fmt.Printf(<span class="string">"%s\n"</span>, contents)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> fileHandle, err := os.Open(<span class="string">"hello.txt"</span>); err != <span class="literal">nil</span> {</span><br><span class="line">    fmt.Println(fileHandle)  <span class="comment">// &lt;nil&gt;</span></span><br><span class="line">    fmt.Println(err.Error()) <span class="comment">// open hello.txt: The system cannot find the file specified.</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    fmt.Println(<span class="string">"获取文件成功"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"errors"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span> <span class="title">error</span></span> {</span><br><span class="line">    <span class="keyword">return</span> errors.New(<span class="string">"error"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">if</span> err := test(); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(<span class="string">"error happen"</span>)</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(err) <span class="comment">// undefined: err</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-de-xun-huan-kong-zhi-for-yu-ju/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-de-xun-huan-kong-zhi-for-yu-ju/" class="post-title-link" itemprop="url">go的循环控制for语句</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-06 07:41:10" itemprop="dateModified" datetime="2021-08-06T07:41:10Z">2021-08-06</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Go 语言的 For 循环有 3 种形式，只有其中的一种使用分号。</p>
<p>与if语句相同，Go语言的for循环与C语言也有如下区别:</p>
<p>for的条件不需要用括号<code>()</code>括住<br>for的代码块必须加上大括号<code>{}</code>括住，就算只有一行语句</p>
<p>和 C 语言的 <code>for</code> 一样：</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> init; condition; post { }</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><code>init</code>：初始化条件，一般为赋值表达式，给控制变量赋初值；前置语句中声明的变量作用域也仅限于for内</li>
<li><code>condition</code>：关系表达式或逻辑表达式，循环控制条件；</li>
<li><code>post</code>：变化的条件 一般为赋值表达式，给控制变量增量或减量。</li>
</ul>
<p>和 C 的 <code>while</code> 一样，令for循环的前置或后置语句为空，只添加条件：<br>Go语言中只有for ， 没有while</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> condition { }</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>for</code>循环遍历值的类型为<code>uint8</code></strong><br><strong><code>for...range</code>遍历值的类型为<code>int32</code></strong> <code>rune</code></p>
<h4 id="for语句执行过程"><a href="#for语句执行过程" class="headerlink" title="for语句执行过程"></a>for语句执行过程</h4><p>1、先对表达式 1 赋初值；<br>2、判别赋值表达式 init 是否满足给定条件，若其值为真，满足循环条件，则执行循环体内语句，然后执行 post，进入第二次循环，再判别 condition；否则判断 condition 的值为假，不满足条件，就终止for循环，执行循环体外语句。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="comment">//for init; condition; post { } 计算1-10的和</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i&lt;=<span class="number">10</span>; i++ {</span><br><span class="line">   sum += i</span><br><span class="line">}</span><br><span class="line">fmt.Println(sum) <span class="comment">// 55</span></span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>i := 1</li>
<li>是否 i&lt;=10</li>
<li>sum = 1</li>
<li>i ++  -&gt; i = 2</li>
<li>是否 i &lt;= 10</li>
<li>sum = 3</li>
<li>i++ … i=11</li>
</ol>
<p>和 C 的 <code>for(;;)</code> 一样，以让前置、条件和后置语句皆为空，这样相当于<code>for true</code>无限死循环：<br>如 i:=0; ; i++ 或 <code>for ; ; { }</code> 或者 <code>for true { }</code><br>（<code>; ;</code> 会在使用 gofmt 时被移除）但一般情况下都会直接写 <code>for { }</code></p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> { <span class="comment">// 等同于    for ; ; {</span></span><br><span class="line">    fmt.Println(<span class="string">"sum"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">i := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i &lt; <span class="number">5</span> { <span class="comment">// 等同于 for ; i &lt; 5; {</span></span><br><span class="line">    fmt.Println(i)</span><br><span class="line">    i++</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> ; i &lt; <span class="number">5</span>; i++ {</span><br><span class="line">    fmt.Println(i)</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ {</span><br><span class="line">    fmt.Println(i)</span><br><span class="line">}</span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//4</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 十进制转换成二进制</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertToBin</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">string</span></span> {</span><br><span class="line">    result := <span class="string">""</span></span><br><span class="line">    <span class="comment">// 对2取模，取出来最低位</span></span><br><span class="line">    <span class="keyword">for</span> ; n &gt; <span class="number">0</span>; n /= <span class="number">2</span> {</span><br><span class="line">        lsb := n % <span class="number">2</span>                        <span class="comment">// 余数，int类型</span></span><br><span class="line">        result = strconv.Itoa(lsb) + result <span class="comment">// 余数往前加等同于倒序，lsb转换为字符串</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    fmt.Println(</span><br><span class="line">        convertToBin(<span class="number">5</span>),  <span class="comment">// 101</span></span><br><span class="line">        convertToBin(<span class="number">13</span>), <span class="comment">// 1101</span></span><br><span class="line">        convertToBin(<span class="number">72387885</span>), <span class="comment">// 100010100001000110100101101</span></span><br><span class="line">        convertToBin(<span class="number">0</span>), <span class="comment">//</span></span><br><span class="line">    )</span><br></pre></td></tr></tbody></table></figure>

<p>lang/basic/branch/abc.txt</p>
<figure class="highlight txt"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">abcde</span><br><span class="line">12345</span><br><span class="line">hello</span><br><span class="line">again</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printFile</span><span class="params">(filename <span class="keyword">string</span>)</span></span> {</span><br><span class="line">    file, err := os.Open(filename); err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="built_in">panic</span>(err)</span><br><span class="line">    }</span><br><span class="line">    printFileContents(file)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printFileContents</span><span class="params">(reader io.Reader)</span></span> {</span><br><span class="line">    scanner := bufio.NewScanner(reader)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> scanner.Scan() {</span><br><span class="line">        fmt.Println(scanner.Text())</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">    printFile(<span class="string">"lang/basic/branch/abc.txt"</span>)</span><br><span class="line">    <span class="comment">// abcde</span></span><br><span class="line">    <span class="comment">// 12345</span></span><br><span class="line">    <span class="comment">// hello</span></span><br><span class="line">    <span class="comment">// again</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"printing a string:"</span>)</span><br><span class="line">    s := <span class="string">`abc"d"</span></span><br><span class="line"><span class="string">    kkkk</span></span><br><span class="line"><span class="string">    123</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    p`</span></span><br><span class="line">    printFileContents(strings.NewReader(s))</span><br><span class="line">    <span class="comment">// abc"d"</span></span><br><span class="line">    <span class="comment">// kkkk</span></span><br><span class="line">    <span class="comment">// 123</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// p</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> ; i &lt;= <span class="number">10</span>; i++ {</span><br><span class="line">    fmt.Println(<span class="string">"bobby"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">st := <span class="string">"bobby:慕课网"</span></span><br><span class="line">fmt.Printf(st)     <span class="comment">// bobby:慕课网</span></span><br><span class="line">fmt.Println(st[<span class="number">0</span>]) <span class="comment">// 98</span></span><br><span class="line"><span class="comment">//fmt.Printf(st[0])         // cannot use st[0] (type byte) as type string in argument to fmt.Printf</span></span><br><span class="line">fmt.Printf(<span class="string">"%d\n"</span>, st[<span class="number">0</span>]) <span class="comment">// 98</span></span><br><span class="line">fmt.Printf(<span class="string">"%c\n"</span>, st[<span class="number">0</span>]) <span class="comment">// b</span></span><br><span class="line"></span><br><span class="line">fmt.Println(st[<span class="number">6</span>])        <span class="comment">// 230</span></span><br><span class="line">fmt.Printf(<span class="string">"%d\n"</span>, st[<span class="number">6</span>]) <span class="comment">// 230</span></span><br><span class="line">fmt.Printf(<span class="string">"%c\n"</span>, st[<span class="number">6</span>]) <span class="comment">// æ 乱码</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(st))      <span class="comment">// 15</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="rune-int32-数组解决中文编码utf"><a href="#rune-int32-数组解决中文编码utf" class="headerlink" title="rune int32 数组解决中文编码utf"></a>rune int32 数组解决中文编码utf</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    name_arr := []<span class="keyword">rune</span>(st)</span><br><span class="line">    fmt.Println(<span class="built_in">len</span>(name_arr)) <span class="comment">// 9</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(name_arr); i++ {</span><br><span class="line">        fmt.Printf(<span class="string">"%c\n"</span>, name_arr[i])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">b</span><br><span class="line">o</span><br><span class="line">b</span><br><span class="line">b</span><br><span class="line">y</span><br><span class="line">:</span><br><span class="line">慕</span><br><span class="line">课</span><br><span class="line">网</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    stLen := <span class="built_in">len</span>(st)</span><br><span class="line">    <span class="keyword">for</span> index := <span class="number">0</span>; index &lt; stLen; index++ { <span class="comment">// 不是range</span></span><br><span class="line">        fmt.Printf(<span class="string">"%s-编码值=%d,值=%c,类型=%T\n"</span>, st, st[index], st[index], st[index])</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">111</span>,值=o,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">121</span>,值=y,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">58</span>,值=:,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">230</span>,值=æ,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">133</span>,值=,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">149</span>,值=,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">232</span>,值=è,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">175</span>,值=¯,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">190</span>,值=¾,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">231</span>,值=ç,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">189</span>,值=½,类型=<span class="keyword">uint8</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">145</span>,值=,类型=<span class="keyword">uint8</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="for-循环的-range-格式"><a href="#for-循环的-range-格式" class="headerlink" title="for 循环的 range 格式"></a>for 循环的 <code>range</code> 格式</h3><p>可以对 slice、map、数组、字符串等进行迭代循环。</p>
<p>value遍历数据中对应索引的值拷贝，所以对它所做的任何修改都不会影响到数据中原有的值（但如果value 为指针，则会产生指针的拷贝，就会修改数据的原值）。</p>
<p>一个字符串是 Unicode 编码的字符（或称之为 <code>rune</code>）集合，<br>for…range可以用来遍历字符串：遍历值 val 的类型为 rune，即int32，每个 rune 字符和索引在 for-range 循环中是一一对应的。它能够自动根据 UTF-8 规则识别 Unicode 编码的字符。中文就不会有乱码问题，</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value := <span class="keyword">range</span> oldMap {</span><br><span class="line">    newMap[key] = value</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    st := <span class="string">"bobby:慕课网"</span>    <span class="comment">//1. st是一个字符串， 2. 字符串是字符的数组</span></span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> st {</span><br><span class="line">        fmt.Printf(<span class="string">"%s-编码值=%d,值=%c,类型=%T,index=%v,value=%v\n"</span>, st, value, value, value, index, value)</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">int32</span>,index=<span class="number">0</span>,value=<span class="number">98</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">111</span>,值=o,类型=<span class="keyword">int32</span>,index=<span class="number">1</span>,value=<span class="number">111</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">int32</span>,index=<span class="number">2</span>,value=<span class="number">98</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">98</span>,值=b,类型=<span class="keyword">int32</span>,index=<span class="number">3</span>,value=<span class="number">98</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">121</span>,值=y,类型=<span class="keyword">int32</span>,index=<span class="number">4</span>,value=<span class="number">121</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">58</span>,值=:,类型=<span class="keyword">int32</span>,index=<span class="number">5</span>,value=<span class="number">58</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">24917</span>,值=慕,类型=<span class="keyword">int32</span>,index=<span class="number">6</span>,value=<span class="number">24917</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">35838</span>,值=课,类型=<span class="keyword">int32</span>,index=<span class="number">9</span>,value=<span class="number">35838</span>  index间隔变为<span class="number">3</span></span><br><span class="line">bobby:慕课网-编码值=<span class="number">32593</span>,值=网,类型=<span class="keyword">int32</span>,index=<span class="number">12</span>,value=<span class="number">32593</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    strings := []<span class="keyword">string</span>{<span class="string">"bobby"</span>, <span class="string">"imooc"</span>}</span><br><span class="line">    <span class="keyword">for</span> i, s := <span class="keyword">range</span> strings {</span><br><span class="line">        fmt.Println(i, s)</span><br><span class="line">        <span class="comment">//0 bobby</span></span><br><span class="line">        <span class="comment">//1 imooc</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    numbers := [<span class="number">6</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>}</span><br><span class="line">    <span class="keyword">for</span> i, x := <span class="keyword">range</span> numbers {</span><br><span class="line">        fmt.Printf(<span class="string">"第 %d 位 x 的值 = %d\n"</span>, i, x)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">第 <span class="number">0</span> 位 x 的值 = <span class="number">1</span></span><br><span class="line">第 <span class="number">1</span> 位 x 的值 = <span class="number">2</span></span><br><span class="line">第 <span class="number">2</span> 位 x 的值 = <span class="number">3</span></span><br><span class="line">第 <span class="number">3</span> 位 x 的值 = <span class="number">5</span></span><br><span class="line">第 <span class="number">4</span> 位 x 的值 = <span class="number">0</span></span><br><span class="line">第 <span class="number">5</span> 位 x 的值 = <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-de-tiao-zhuan-kong-zhi-goto/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-de-tiao-zhuan-kong-zhi-goto/" class="post-title-link" itemprop="url">go的跳转控制goto</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-14 03:04:49" itemprop="dateModified" datetime="2021-07-14T03:04:49Z">2021-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Go 语言的 goto 语句通过标签进行代码间的无条件地转移到过程中指定的行</p>
<p>goto 语句通常与条件语句配合使用。可用来实现条件转移， 构成循环，跳出循环体、避免重复退出等功能</p>
<p>但是，在结构化程序设计中一般不主张使用 goto 语句， 以免造成程序流程的混乱，使理解和调试程序都产生困难。<br>goto能不能则不用，goto过多， label过多，整个程序到后期维护就会麻烦<br>最容易理解的代码逐行的执行，哪怕多一个函数的调用对于我们都是理解上的负担</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">goto</span> label</span><br><span class="line">..</span><br><span class="line">.</span><br><span class="line">label: statement</span><br></pre></td></tr></tbody></table></figure>

<p>在变量 a 等于 15 的时候跳过本次循环并回到循环的开始语句 LOOP 处</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 循环 */</span></span><br><span class="line">    LOOP:</span><br><span class="line">        <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">            <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">                <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">                a = a + <span class="number">1</span></span><br><span class="line">                <span class="keyword">goto</span> LOOP <span class="comment">// 跳过15行的打印</span></span><br><span class="line">            }</span><br><span class="line">            fmt.Printf(<span class="string">"a的值为 : %d\n"</span>, a)</span><br><span class="line">            a++</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">---</span><br><span class="line">a的值为 : <span class="number">10</span></span><br><span class="line">a的值为 : <span class="number">11</span></span><br><span class="line">a的值为 : <span class="number">12</span></span><br><span class="line">a的值为 : <span class="number">13</span></span><br><span class="line">a的值为 : <span class="number">14</span></span><br><span class="line">a的值为 : <span class="number">16</span></span><br><span class="line">a的值为 : <span class="number">17</span></span><br><span class="line">a的值为 : <span class="number">18</span></span><br><span class="line">a的值为 : <span class="number">19</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gotoFunc</span><span class="params">()</span></span> {</span><br><span class="line">    variables := <span class="number">0</span></span><br><span class="line">GOTO:</span><br><span class="line">    fmt.Println(variables)</span><br><span class="line">    variables++</span><br><span class="line">    <span class="keyword">goto</span> GOTO</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    gotoFunc() <span class="comment">// 实现了没有for语句的死循环</span></span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<h3 id="退出多层循环"><a href="#退出多层循环" class="headerlink" title="退出多层循环"></a>退出多层循环</h3><p>下面这段代码在满足条件时，需要连续退出两层循环，使用传统的编码方式如下：</p>
<p>默认情况下循环只能一层一层退出，为此就需要设置一个状态变量 breakAgain，需要退出时，设置这个变量为 true。<br>使用 break 退出当前循环，执行后，代码调转到<code>if breakAgain {</code>。<br>退出一层循环后，根据 breakAgain 变量判断是否需要再次退出外层循环。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> breakAgain <span class="keyword">bool</span></span><br><span class="line"><span class="comment">// 外循环</span></span><br><span class="line"><span class="keyword">for</span> x := <span class="number">0</span>; x &lt; <span class="number">10</span>; x++ {</span><br><span class="line">    <span class="comment">// 内循环</span></span><br><span class="line">    <span class="keyword">for</span> y := <span class="number">0</span>; y &lt; <span class="number">10</span>; y++ {</span><br><span class="line">        <span class="comment">// 满足某个条件时，退出循环</span></span><br><span class="line">        <span class="keyword">if</span> y == <span class="number">2</span> { <span class="comment">// 当 y==2 时需要退出所有的 for 循环。</span></span><br><span class="line">            <span class="comment">// 设置退出标记</span></span><br><span class="line">            breakAgain = <span class="literal">true</span></span><br><span class="line">            <span class="comment">// 退出本次循环</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 根据标记，还需要退出一次循环</span></span><br><span class="line">    <span class="keyword">if</span> breakAgain {</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">fmt.Println(<span class="string">"done"</span>) <span class="comment">// 退出所有循环后，打印 done</span></span><br></pre></td></tr></tbody></table></figure>

<p>goto 语句跳转到指明的标签处 退出多层循环<br>无须额外的变量就可以快速退出所有的循环。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> x := <span class="number">0</span>; x &lt; <span class="number">10</span>; x++ {</span><br><span class="line">        <span class="keyword">for</span> y := <span class="number">0</span>; y &lt; <span class="number">10</span>; y++ {</span><br><span class="line">            <span class="keyword">if</span> y == <span class="number">2</span> {</span><br><span class="line">                <span class="comment">// 跳转到标签</span></span><br><span class="line">                <span class="keyword">goto</span> breakHere</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 手动返回，避免执行进入标签</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// 此处如果不手动返回，在不满足条件时，也会执行标签下面的代码</span></span><br><span class="line"><span class="comment">// 定义 breakHere 标签，标签只能被 goto 使用，但不影响代码执行流程，</span></span><br><span class="line">breakHere:</span><br><span class="line">    fmt.Println(<span class="string">"done"</span>) <span class="comment">// done</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="集中处理错误"><a href="#集中处理错误" class="headerlink" title="集中处理错误"></a>集中处理错误</h3><p>多处错误处理存在代码重复是非常棘手<br>重复的错误处理代码。后期陆续在这些代码中如果添加更多的判断，就需要在每一块雷同代码中依次修改，极易造成疏忽和错误。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">err := firstCheckError() <span class="comment">// 执行某逻辑，返回错误。</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> { <span class="comment">// 如果发生错误，打印错误退出进程</span></span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    exitProcess()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">err = secondCheckError() <span class="comment">// 执行某逻辑，返回错误</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> { <span class="comment">// 发生错误后退出流程</span></span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    exitProcess()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"done"</span>) <span class="comment">// 没有任何错误，打印完成</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="goto-语句-集中处理错误"><a href="#goto-语句-集中处理错误" class="headerlink" title="goto 语句 集中处理错误"></a>goto 语句 集中处理错误</h4><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">err := firstCheckError()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">goto</span> onExit <span class="comment">// 发生错误时，跳转错误标签 onExit。</span></span><br><span class="line">    }</span><br><span class="line">    err = secondCheckError()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">goto</span> onExit <span class="comment">// 发生错误时，跳转错误标签 onExit。</span></span><br><span class="line">    }</span><br><span class="line">    fmt.Println(<span class="string">"done"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// // 手动返回, 避免执行进入标签</span></span><br><span class="line">onExit:</span><br><span class="line">    <span class="comment">// 汇总所有流程进行错误打印并退出进程。</span></span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    exitProcess()</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">go</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">LOOP:</span><br><span class="line">    fmt.Println(<span class="string">"执行了goto"</span>)</span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> {</span><br><span class="line">            a += <span class="number">1</span>    <span class="comment">//a满足条件  15+1</span></span><br><span class="line">            <span class="keyword">goto</span> LOOP <span class="comment">// 因为上面条件满足了  到这条goto语句就会跳转到LOOP:执行</span></span><br><span class="line">        }</span><br><span class="line">        fmt.Printf(<span class="string">"a的值为:%d\n"</span>, a)</span><br><span class="line">        a++</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">执行了<span class="keyword">goto</span></span><br><span class="line">a的值为:<span class="number">10</span></span><br><span class="line">a的值为:<span class="number">11</span></span><br><span class="line">a的值为:<span class="number">12</span></span><br><span class="line">a的值为:<span class="number">13</span></span><br><span class="line">a的值为:<span class="number">14</span></span><br><span class="line">执行了<span class="keyword">goto</span></span><br><span class="line">a的值为:<span class="number">16</span></span><br><span class="line">a的值为:<span class="number">17</span></span><br><span class="line">a的值为:<span class="number">18</span></span><br><span class="line">a的值为:<span class="number">19</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    i:=<span class="number">0</span></span><br><span class="line">    test: fmt.Println(<span class="string">"当前i的值为"</span>, i)</span><br><span class="line">    <span class="keyword">for</span> i&lt;<span class="number">3</span>{</span><br><span class="line">        i++</span><br><span class="line">        <span class="keyword">if</span> i==<span class="number">2</span>{<span class="keyword">goto</span> test}</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(<span class="string">"结束"</span>)</span><br><span class="line">}</span><br><span class="line">---</span><br><span class="line">当前i的值为 <span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">当前i的值为 <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">结束</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">var</span> n <span class="keyword">int</span> = <span class="number">30</span></span><br><span class="line">    fmt.Println(<span class="string">"ok1"</span>)</span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">20</span> {</span><br><span class="line">        <span class="keyword">goto</span> label1</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(<span class="string">"ok2"</span>)</span><br><span class="line">    fmt.Println(<span class="string">"ok3"</span>)</span><br><span class="line">    fmt.Println(<span class="string">"ok4"</span>)</span><br><span class="line">    label1:</span><br><span class="line">    fmt.Println(<span class="string">"ok5"</span>)</span><br><span class="line">    fmt.Println(<span class="string">"ok6"</span>)</span><br><span class="line">    fmt.Println(<span class="string">"ok7"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2021/07/01/go-de-xuan-ze-kong-zhi-switch-yu-ju/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/01/go-de-xuan-ze-kong-zhi-switch-yu-ju/" class="post-title-link" itemprop="url">go选择控制switch语句</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-30 16:21:41" itemprop="dateCreated datePublished" datetime="2021-06-30T16:21:41Z">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-03 01:02:44" itemprop="dateModified" datetime="2021-08-03T01:02:44Z">2021-08-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>switch 语句用于基于不同条件执行不同动作，每一个 case 分支都是唯一的，从上至下逐一测试，直到匹配为止。</p>
<p>switch会自动break，除非使用fallthrough<br>switch 后面可以没有表达式，case后面如果true就执行</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> var1 {</span><br><span class="line">    <span class="keyword">case</span> val1:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">case</span> val2:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> grade = <span class="string">"B"</span></span><br><span class="line">    <span class="keyword">var</span> score = <span class="number">90</span></span><br><span class="line">    fmt.Printf(<span class="string">"你的等级是 %s\n"</span>, grade) <span class="comment">// 你的等级是 B</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> score {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">90</span>:</span><br><span class="line">        grade = <span class="string">"A"</span></span><br><span class="line">        fmt.Printf(<span class="string">"A\n"</span>) <span class="comment">// A</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">80</span>:</span><br><span class="line">        grade = <span class="string">"B"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>:</span><br><span class="line">        grade = <span class="string">"C"</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        grade = <span class="string">"D"</span></span><br><span class="line">    }</span><br><span class="line">    fmt.Printf(<span class="string">"你的等级是 %s\n"</span>, grade) <span class="comment">// 你的等级是 A</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> {</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">"A"</span>:</span><br><span class="line">        fmt.Printf(<span class="string">"优秀!\n"</span>) <span class="comment">// 优秀!</span></span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">"B"</span>, grade == <span class="string">"C"</span>:</span><br><span class="line">        fmt.Printf(<span class="string">"良好\n"</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">"D"</span>:</span><br><span class="line">        fmt.Printf(<span class="string">"及格\n"</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">"F"</span>:</span><br><span class="line">        fmt.Printf(<span class="string">"不及格\n"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Printf(<span class="string">"差\n"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>区间</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">score := <span class="number">95</span></span><br><span class="line">grade := <span class="string">"A"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> score &gt; <span class="number">90</span> {</span><br><span class="line">    grade = <span class="string">"A"</span></span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">80</span> &amp;&amp; score &lt;= <span class="number">89</span> {</span><br><span class="line">    grade = <span class="string">"B"</span></span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">70</span> &amp;&amp; score &lt;= <span class="number">79</span> {</span><br><span class="line">    grade = <span class="string">"C"</span></span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">60</span> &amp;&amp; score &lt;= <span class="number">69</span> {</span><br><span class="line">    grade = <span class="string">"D"</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    grade = <span class="string">"E"</span></span><br><span class="line">}</span><br><span class="line">fmt.Println(grade) <span class="comment">// A</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> {</span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">    grade = <span class="string">"A"</span></span><br><span class="line">    fmt.Println(<span class="string">"优"</span>)</span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">80</span> &amp;&amp; score &lt;= <span class="number">89</span>:</span><br><span class="line">    grade = <span class="string">"B"</span></span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">70</span> &amp;&amp; score &lt;= <span class="number">79</span>:</span><br><span class="line">    grade = <span class="string">"C"</span></span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">60</span> &amp;&amp; score &lt;= <span class="number">69</span>:</span><br><span class="line">    grade = <span class="string">"D"</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    grade = <span class="string">"E"</span></span><br><span class="line">}</span><br><span class="line">fmt.Println(grade) <span class="comment">// A</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> {</span><br><span class="line"><span class="keyword">case</span> score &gt; <span class="number">90</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩优秀"</span>) <span class="comment">// 成绩优秀</span></span><br><span class="line"><span class="keyword">case</span> score &gt; <span class="number">80</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩良好"</span>)</span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">60</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩合格"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩不及格"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>一分支多值<br>不同的 case 表达式使用逗号分隔。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"mum"</span></span><br><span class="line"><span class="keyword">switch</span> a {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"mum"</span>, <span class="string">"daddy"</span>:</span><br><span class="line">    fmt.Println(<span class="string">"family"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Type-Switch"><a href="#Type-Switch" class="headerlink" title="Type Switch"></a>Type Switch</h3><p>来判断某个 interface 变量中实际存储的变量类型。</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> x.(<span class="keyword">type</span>){</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s)</span><br><span class="line">    <span class="comment">/* 你可以定义任意个数的case */</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="comment">/* 可选 */</span></span><br><span class="line">       statement(s)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x <span class="keyword">interface</span>{}</span><br><span class="line"><span class="keyword">var</span> floatVariables = <span class="number">3.1415926</span></span><br><span class="line">x = floatVariables</span><br><span class="line"><span class="keyword">switch</span> typeVariables := x.(<span class="keyword">type</span>) {</span><br><span class="line"><span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">    fmt.Printf(<span class="string">" x 的类型 :%T"</span>, typeVariables)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">    fmt.Printf(<span class="string">"x 是 int 型"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">    fmt.Printf(<span class="string">"x 是 float64 型，typeVariables的值为 %v\n"</span>, typeVariables)</span><br><span class="line">    <span class="comment">// x 是 float64 型，typeVariables的值为 3.1415926</span></span><br><span class="line"><span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">float64</span>:</span></span><br><span class="line">    fmt.Printf(<span class="string">"x 是 func(int) 型"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">bool</span>, <span class="keyword">string</span>: <span class="comment">// 一个case中判断多个满足条件</span></span><br><span class="line">    fmt.Printf(<span class="string">"x 是 bool 或 string 型"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    fmt.Printf(<span class="string">"未知型"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> category = <span class="string">"笔记本"</span></span><br><span class="line"><span class="keyword">switch</span> category { <span class="comment">// 一个case中判断多个满足条件</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"电脑"</span>, <span class="string">"笔记本"</span>, <span class="string">"手机"</span>:</span><br><span class="line">    fmt.Println(<span class="string">"数码产品"</span>) <span class="comment">// 数码产品</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"T恤"</span>, <span class="string">"背心"</span>:</span><br><span class="line">    fmt.Println(<span class="string">"服饰产品"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="string">"饼干"</span>, <span class="string">"巧克力"</span>, <span class="string">"苏打"</span>:</span><br><span class="line">    fmt.Println(<span class="string">"零食产品"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">"其他产品"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>分支表达式</li>
</ol>
<p>break 语句在执行一条 case 后跳出 switch 循环</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    name := <span class="string">"Golang"</span></span><br><span class="line">    <span class="keyword">switch</span> name {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"oldboy"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"Linux"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"Golang"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"Python"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"Java"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DBA"</span>:</span><br><span class="line">        fmt.Println(name)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">go</span></span><br></pre></td></tr></tbody></table></figure>


<p>fallthrough 执行本case后还能执行switch语句的下一个case，如果满足条件<br>穿透一级向下级执行</p>
<figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> score := <span class="number">100</span>; { <span class="comment">// 局部变量</span></span><br><span class="line"><span class="keyword">case</span> score &gt; <span class="number">90</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩优秀"</span>) <span class="comment">// 成绩优秀</span></span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> score &gt; <span class="number">80</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩良好"</span>) <span class="comment">// 成绩良好</span></span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> score &gt;= <span class="number">60</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩合格"</span>) <span class="comment">// 成绩合格</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">"成绩不及格"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
