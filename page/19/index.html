<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"bubbleboy11.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/19/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/19/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/19/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">357</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-dan-yuan-ce-shi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-dan-yuan-ce-shi/" class="post-title-link" itemprop="url">Python单元测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="单元测试-Unit-Testing"><a href="#单元测试-Unit-Testing" class="headerlink" title="单元测试 Unit Testing"></a>单元测试 Unit Testing</h3><ul>
<li>针对程序模块进行正确的验证</li>
<li>一个函数，一个类进行验证</li>
<li>自底向上保证程序正确性</li>
</ul>
<p>是针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在过程化编程中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。单元测试粒度最小，一般由开发人员采用白盒方式来测试，主要测试单元是否符合设计。单元测试的主要过程仍是通过给定的输入，判断得到的结果是否符合预期的代码结果测试的过程。</p>
<h3 id="为什么要写单元测试"><a href="#为什么要写单元测试" class="headerlink" title="为什么要写单元测试"></a>为什么要写单元测试</h3><p>   三无代码不可取（无文档、无注释、无单侧）</p>
<ul>
<li>保证代码逻辑的正确性（甚至有些采用测试驱动开发TTD[Test-Driven Development]最大的好处就是确保一个程序模块的行为符合我们设计的测试用例。）</li>
<li>单测影响设计，易测的代码往往是高内聚低耦合的（各模块的内聚程度越高，模块间的耦合程度就越低）</li>
<li>回归测试，防止改一处整个服务不可用</li>
</ul>
<ul>
<li>确保代码质量</li>
<li>改善代码设计，难以测试的代码一般是设计不够简洁的代码。</li>
<li>保证重构不会引入新问题，以函数为单位进行重构的时候，只需要重新跑测试就基本可以保证重构没引入新问题</li>
<li>通过单元测试，可以增强代码的执行与预期一致，增强对于代码的自信。</li>
<li>在测试驱动编程的理念中，首先程序员要编写测试程序，然后编写可以通过测试的程序。测试程序就是程序的需求说明，它能够帮助程序员在开发程序时，不偏离需求。<br>单元测试最大作用 例如 ：当你逻辑修改了，只需要重新跑一下测试就知道有没有把之前的逻辑给改坏。</li>
</ul>
<h3 id="单元测试相关的库"><a href="#单元测试相关的库" class="headerlink" title="单元测试相关的库"></a>单元测试相关的库</h3><ul>
<li>nose / pytest 较为常见 终端输入<code>pytest xxx.py</code></li>
<li>mock 模块用来模拟替换网络请求等，一般在测试的时候是不需要真的发送请求，<br>比如request() 直接使用 mock() 替换,直接写死,测试代码最后是”纯净的”,要像什么网络请求都考虑进来</li>
<li>coverage 统计测试覆盖率</li>
</ul>
<h3 id="如何设计测试用例：（等价类划分）"><a href="#如何设计测试用例：（等价类划分）" class="headerlink" title="如何设计测试用例：（等价类划分）"></a>如何设计测试用例：（等价类划分）</h3><ul>
<li>正常值功能测试</li>
<li>边界值（比如最大最小，最左最右值）boundary/edge case</li>
<li>异常值（比如 None，空值，非法值）<br>当然我们也不用做的非常细致，要不然写测试是一件非常繁琐累人的事情，<br>甚至有时候为了测试而测试，只是为了让单测覆盖率好看点。<br>当然如果是web应用用户输入，我们要假设所有的参数都是不可信的。<br>但是很多内部调用的函数我们基于约定来编程，如果你瞎传参数，那就是调用者的责任了。<br>①首先需要你安装pytest测试库<br>pytest 是 python的第三方测试框架,是基于 unittest 的扩展框架,比unittest更简洁,更高效。<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> pip install pytest</span></span><br></pre></td></tr></tbody></table></figure>
②用 pytest 命令运行文件名，它会自动发现所有test开头的函数并去执行里面的测试用例<br><code>pytest file_address</code>而不是<code>python file_address</code></li>
</ul>
<p><code>assert </code></p>
<p>以下是单元测试示例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span>(<span class="params">array, target</span>):</span>  <span class="comment"># 二分查找</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    beg, end = <span class="number">0</span>, len(array)</span><br><span class="line">    <span class="keyword">while</span> beg &lt; end:</span><br><span class="line">        mid = beg + (end - beg) // <span class="number">2</span>  <span class="comment"># py3取整操作</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> array[mid] &gt; target:</span><br><span class="line">            end = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            beg = mid + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    <span class="string">'''binary_search()函数的单元测试用例代码'''</span></span><br><span class="line">    <span class="comment"># 正常值， 包含有和无两种结果</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">1</span>) == <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>) == <span class="number">-1</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">-1</span>) == <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 边界值测试</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">0</span>) == <span class="number">0</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">5</span>) == <span class="number">5</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([<span class="number">0</span>], <span class="number">0</span>) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 异常值测试</span></span><br><span class="line">    <span class="keyword">assert</span> binary_search([], <span class="number">1</span>) == <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python3-he-python2-chai-yi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python3-he-python2-chai-yi/" class="post-title-link" itemprop="url">Python3和python2差异</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-29 08:53:17" itemprop="dateModified" datetime="2021-06-29T08:53:17Z">2021-06-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Python关键字</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'async'</span>, <span class="keyword">finally</span><span class="string">', '</span>fo<span class="string">r', '</span><span class="keyword">from</span></span><br><span class="line"><span class="string">'await'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elifal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pas'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>python2中是关键字。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2的打印 print</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">'b'</span></span><br><span class="line">b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>) <span class="comment"># 打印的是a和b合并成tuple对象</span></span><br><span class="line">(<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>python3成为函数就支持传入不同参数，比如不同换行符end或者分隔符sep</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3的打印 print()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'b'</span>)</span><br><span class="line">b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>,sep=<span class="string">'|'</span> ) <span class="comment"># sep:分隔符，end:换行符</span></span><br><span class="line">a|b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line">a b</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print</span>(<span class="params">self, *args, sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=None</span>):</span> <span class="comment"># known special case of print</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Prints the values to a stream, or to sys.stdout by default.</span></span><br><span class="line"><span class="string">    Optional keyword arguments:</span></span><br><span class="line"><span class="string">    file:  a file-like object (stream); defaults to the current sys.stdout.</span></span><br><span class="line"><span class="string">    sep:   string inserted between values, default a space.</span></span><br><span class="line"><span class="string">    end:   string appended after the last value, default a newline.</span></span><br><span class="line"><span class="string">    flush: whether to forcibly flush the stream.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>

<p>参数<code>end</code>是默认换行</p>
<h3 id="除法变化"><a href="#除法变化" class="headerlink" title="除法变化"></a>除法变化</h3><p>Python3除号返回浮点数，<br>Python2中直接截断并且返回整数，像是C语言的除法</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中除法</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span>/<span class="number">2</span></span><br><span class="line"><span class="number">2</span>  <span class="comment"># 会做整数截断，只保留整数值 </span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3中除法</span></span><br><span class="line">print(<span class="number">5</span>/<span class="number">2</span>)  <span class="comment"># 2.5  float的值</span></span><br><span class="line">print(<span class="number">5</span>//<span class="number">2</span>)  <span class="comment"># 2 实现python2一样除法</span></span><br><span class="line">print(<span class="number">-5</span>//<span class="number">2</span>)  <span class="comment"># -3 实现python2一样除法</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="类型注解-type-hint"><a href="#类型注解-type-hint" class="headerlink" title="类型注解 type hint"></a>类型注解 type hint</h3><ul>
<li>给变量添加类型提示</li>
<li>IDE可以根据它检查类型是否一致，pycharm是支持这种提示的</li>
<li>解释器运行时，并不会做检查，不会实际影响使用</li>
<li>损失了python本身的灵活性。</li>
</ul>
<p>Once compiled, a function’s annotations are available via the function’s <strong>annotations</strong> attribute.<br>This attribute is a mutable dictionary,s<br>There is a special key in the <strong>annotations</strong> mapping, “return”.<br>This key is present only if an annotation was supplied for the function’s return value.<br>如果该函数上没有注释，或者该函数是从lambda表达式创建的，则__annotations__是一个空的可变字典。<br>第一行输出中的__annotations__是函数的保留属性，保存的是函数声明中的注释内容，</p>
<p>使用dir(fucntionName)的时候，多了一个__annotations__的属性annotations：注解; 评注; 注文; 释文</p>
<p>Python 3 extends the feature by allowing you to attach metadata<br>to functions describing their parameters and return values<br>为了标注 输入参数参数和返回值的类型。<br>“-&gt;” 函数返回值的类型建议符，<br>类型建议符并非强制规定和检查，也就是说即使传入的实际参数与建议参数不符，也不会报错。<br>-&gt; str 意思即是提醒函数使用者返回值会是一个str型。<br>:后面是建议传入的参数类型，</p>
<p>动态语言不需要声明变量类型，这种做法在很多人眼里是不好 不好维护的代名词</p>
<h3 id="变量类型的声明"><a href="#变量类型的声明" class="headerlink" title="变量类型的声明"></a>变量类型的声明</h3><p>一般情况下我们会通过变量名来隐含的说明该变量的类型</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">age: int = <span class="number">18</span>  <span class="comment">#说明该类型是int类型</span></span><br><span class="line">print(age)</span><br><span class="line"></span><br><span class="line">name: str = <span class="string">"bobby"</span></span><br><span class="line">sex: bool = <span class="literal">True</span></span><br><span class="line">weight: float = <span class="number">75</span></span><br><span class="line">x: bytes = <span class="string">b"test"</span></span><br><span class="line"></span><br><span class="line">age = <span class="string">"18"</span></span><br><span class="line">print(age)</span><br></pre></td></tr></tbody></table></figure>

<p>复杂数据类型的申明</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">courses: list = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>]  <span class="comment">#有问题，不能指定里面的类型</span></span><br></pre></td></tr></tbody></table></figure>

<p>指定里面的类型</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List, Set, Dict, Tuple</span><br><span class="line"></span><br><span class="line">courses: List[str] = [<span class="string">"django"</span>, <span class="string">"scrapy"</span>, <span class="string">"tornado"</span>]</span><br><span class="line">courses.append(<span class="string">"asyncio"</span>)</span><br><span class="line">courses.append(<span class="number">1</span>)</span><br><span class="line">print(courses)</span><br><span class="line"></span><br><span class="line">user_info: Dict[str, float] = {<span class="string">"bobby"</span>: <span class="number">75.2</span>}</span><br><span class="line">names: Tuple[int] = (<span class="number">1</span>, )  <span class="comment"># 里面一个int</span></span><br><span class="line">names: Tuple[int, ...] = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment"># 里面多个int</span></span><br><span class="line">name: str</span><br><span class="line">name = <span class="string">"bobby"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="函数类型的声明"><a href="#函数类型的声明" class="headerlink" title="函数类型的声明"></a>函数类型的声明</h3><p>使用第三方工具mypy实现类型检查，消除一些代码错误</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greeting</span>(<span class="params">name: str</span>) -&gt; str:</span></span><br><span class="line">    <span class="comment"># name:str 表示输入的name的值是str类型, -&gt; st 表示返回值是str类型</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello '</span> + name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(greeting.__annotations__)</span><br><span class="line"><span class="comment"># {'name': &lt;class 'str'&gt;, 'return': &lt;class 'str'&gt;}</span></span><br><span class="line">print(get_type_hints(greeting))</span><br><span class="line"><span class="comment"># {'name': &lt;class 'str'&gt;, 'return': &lt;class 'str'&gt;}</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">a: <span class="string">'x'</span>, b: <span class="number">5</span> + <span class="number">6</span>, c: list</span>) -&gt; max(2, 9):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(foo.__annotations__)</span><br><span class="line"><span class="comment"># {'a': 'x', 'b': 11, 'c': &lt;class 'list'&gt;, 'return': 9}</span></span><br><span class="line">print(get_type_hints(foo))  <span class="comment"># NameError: name 'x' is not defined</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="手动实现强制检查函数的参数类型"><a href="#手动实现强制检查函数的参数类型" class="headerlink" title="手动实现强制检查函数的参数类型"></a>手动实现强制检查函数的参数类型</h3><p>不和type hint 抛出错误</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a: int, b: int</span>) -&gt; int:</span></span><br><span class="line">    validate_input(add, a=a, b=b)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_input</span>(<span class="params">obj, **kwargs</span>):</span></span><br><span class="line">    hints = get_type_hints(obj)</span><br><span class="line">    <span class="keyword">for</span> para_name, para_type <span class="keyword">in</span> hints.items():</span><br><span class="line">        <span class="keyword">if</span> para_name == <span class="string">"return"</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(kwargs[para_name], para_type):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"参数：{} 类型错误，应该是：{}"</span>.format(para_name, para_type))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># 调用的时候才能发现类型问题</span></span><br><span class="line">    print(add(<span class="string">"bobby: "</span>, <span class="string">"18"</span>))</span><br><span class="line"><span class="comment"># raise TypeError("参数：{} 类型错误，应该是：{}".format(para_name, para_type))</span></span><br><span class="line"><span class="comment"># TypeError: 参数：a 类型错误，应该是：&lt;class 'int'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> get_type_hints</span><br><span class="line"><span class="keyword">from</span> inspect <span class="keyword">import</span> getfullargspec</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_input</span>(<span class="params">obj, **kwargs</span>):</span></span><br><span class="line">    hints = get_type_hints(obj)</span><br><span class="line">    <span class="keyword">for</span> para_name, para_type <span class="keyword">in</span> hints.items():</span><br><span class="line">        <span class="keyword">if</span> para_name == <span class="string">"return"</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(kwargs[para_name], para_type):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"参数：{} 类型错误，应该是：{}"</span>.format(para_name, para_type))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">type_check</span>(<span class="params">decorator</span>):</span></span><br><span class="line"><span class="meta">    @wraps(decorator)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapped_decorator</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        func_args = getfullargspec(decorator)[<span class="number">0</span>]</span><br><span class="line">        kwargs.update(dict(zip(func_args, args)))</span><br><span class="line"></span><br><span class="line">        validate_input(decorator, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> decorator(**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapped_decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@type_check</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a: int, b: int</span>) -&gt; int:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># 调用的时候才能发现类型问题</span></span><br><span class="line">    print(add(<span class="string">"bobby: "</span>, <span class="string">"18"</span>))</span><br><span class="line"><span class="comment"># raise TypeError("参数：{} 类型错误，应该是：{}".format(para_name, para_type))</span></span><br><span class="line"><span class="comment"># TypeError: 参数：a 类型错误，应该是：&lt;class 'int'&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">num1: int, num2: int = <span class="number">100</span></span>) -&gt; int:</span></span><br><span class="line">    sum = num1 + num2</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'-----'</span>)</span><br><span class="line">print(dir(twoSum))</span><br><span class="line"><span class="comment"># output: ['__annotations__', '__call__', '__class__', '__closure__', ... ]</span></span><br><span class="line">print(twoSum.__annotations__)</span><br><span class="line"><span class="comment"># {'num1': &lt;class 'int'&gt;, 'num2': &lt;class 'int'&gt;, 'return': &lt;class 'int'&gt;}</span></span><br><span class="line">print(twoSum(<span class="number">1</span>, <span class="number">2</span>))  <span class="comment"># 3</span></span><br><span class="line">print(twoSum(<span class="number">1</span>))  <span class="comment"># 101</span></span><br><span class="line">print(twoSum(<span class="string">'I love '</span>, <span class="string">'python'</span>))  <span class="comment"># I love python</span></span><br><span class="line"><span class="comment"># print(twoSum('python'))  # TypeError: can only concatenate str (not "int") to str</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">第二行输出是正常用法。</span></span><br><span class="line"><span class="string">第三行输出验证了：注释内容后可以跟等号"=",意思为未传入实参时，该参数获得的默认值</span></span><br><span class="line"><span class="string">第四行输出则验证了该解释说明符并非强制检查，我们传入了两个str实参，</span></span><br><span class="line"><span class="string">并不会报错，而是继续进行函数中的加法运算。</span></span><br><span class="line"><span class="string">如果传入的两个实参无法进行函数中规定的运算，则会正常报错。</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kinetic_energy</span>(<span class="params">m: <span class="string">'in KG'</span>, v: <span class="string">'in M/S'</span></span>) -&gt; 'Joules':</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> / <span class="number">2</span> * m * v ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(kinetic_energy.__annotations__)</span><br><span class="line"><span class="comment"># {'m': 'in KG', 'v': 'in M/S', 'return': 'Joules'}</span></span><br><span class="line">print(<span class="string">'{:,} {}'</span>.format(kinetic_energy(<span class="number">20</span>, <span class="number">3000</span>),</span><br><span class="line">                       kinetic_energy.__annotations__[<span class="string">'return'</span>]))</span><br><span class="line"><span class="comment"># 90,000,000.0 Joules</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Annotations are dictionaries</span></span><br><span class="line"><span class="comment"># There is a special key in the __annotations__ mapping, "return".</span></span><br><span class="line"><span class="comment"># This key is present only if an annotation was supplied for the function's return value.</span></span><br><span class="line">rd = {<span class="string">'type'</span>: float, <span class="string">'units'</span>: <span class="string">'Joules'</span>, <span class="string">'docstring'</span>: <span class="string">'Given mass and velocity returns kinetic energy in Joules'</span>}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>() -&gt; rd:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'type'</span>])</span><br><span class="line"><span class="comment"># &lt;class 'float'&gt;</span></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'units'</span>])</span><br><span class="line"><span class="comment"># 'Joules'</span></span><br><span class="line">print(f.__annotations__[<span class="string">'return'</span>][<span class="string">'docstring'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 'Given mass and velocity returns kinetic energy in Joules'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># you can use function attributes to validate called values:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate</span>(<span class="params">func, locals</span>):</span></span><br><span class="line">    <span class="keyword">for</span> var, test <span class="keyword">in</span> func.__annotations__.items():</span><br><span class="line">        value = locals[var]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pr = test.__name__ + <span class="string">': '</span> + test.__docstring__</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            pr = test.__name__</span><br><span class="line">        msg = <span class="string">'{}=={}; Test: {}'</span>.format(var, value, pr)</span><br><span class="line">        <span class="keyword">assert</span> test(value), msg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">between</span>(<span class="params">lo, hi</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_between</span>(<span class="params">x</span>):</span></span><br><span class="line">        <span class="keyword">return</span> lo &lt;= x &lt;= hi</span><br><span class="line"></span><br><span class="line">    _between.__docstring__ = <span class="string">'must be between {} and {}'</span>.format(lo, hi)</span><br><span class="line">    <span class="keyword">return</span> _between</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x: between(<span class="params"><span class="number">3</span>, <span class="number">10</span></span>), y: lambda _y: isinstance(<span class="params">_y, int</span>)</span>):</span></span><br><span class="line">    validate(f, locals())</span><br><span class="line">    print(x, y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># AssertionError: x==2; Test: _between: must be between 3 and 10</span></span><br><span class="line">f(<span class="number">3</span>, <span class="number">2.1</span>)</span><br><span class="line"><span class="comment"># AssertionError: y==2.1; Test: &lt;lambda&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="高级解包操作"><a href="#高级解包操作" class="headerlink" title="高级解包操作"></a>高级解包操作</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中无解包操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *c = range(<span class="number">10</span>)</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    a, b, *c = range(<span class="number">10</span>)</span><br><span class="line">          ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3中解包操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *c = range(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]  <span class="comment"># 剩下的元素全部赋值给c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, *_ = range(<span class="number">5</span>)  <span class="comment"># 丢弃2,3,4元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="限定关键字参数"><a href="#限定关键字参数" class="headerlink" title="限定关键字参数"></a>限定关键字参数</h3><p>当参数特别多的时候，想把后面参数指定名字进行传入，<br>限定关键字参数需要指定参数名传参，<br>关键字参数实际就是传入值得时候指定值的参数名字，</p>
<p>Keyword only arguments 关键字参数<br>根据参数名来传入参数值，则无须遵守定义形参的顺序，<br>以param = value的方式传递数据</p>
<p>使用关键字参数好处 :<br>①关键字参数顺序也可以不按函数声明参数的顺序。可以防止参数的位置顺序搞混<br>②清晰地指出了参数值，有助于提高程序的可读性</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b, *, c</span>):</span></span><br><span class="line">    <span class="comment"># python3中支持语法，要显示转入c的值，前面加一个参数*号就行。</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># c = 3 就是限定关键字参数方式</span></span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>, c=<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>


<h3 id="Chained-exception-连接异常-。"><a href="#Chained-exception-连接异常-。" class="headerlink" title="Chained exception(连接异常)。"></a>Chained exception(连接异常)。</h3><p>Python3重新抛出异常不会丢失栈信息，有 raise from 保留异常栈信息<br>python2重新抛出异常会丢失栈信息、原来的 traceback 信息</p>
<p><code>shutil.copyfile()</code>文件拷贝</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mycopy</span>(<span class="params">source, dest</span>):</span></span><br><span class="line">    <span class="comment"># Python3中支持 raise from保留异常栈信息</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        shutil.copy2(source, dest)</span><br><span class="line">    <span class="keyword">except</span> OSError: <span class="comment"># python2中raise会丢失原来的 traceback信息</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">"automatic sudo injection"</span>) <span class="keyword">from</span> OSError</span><br><span class="line">        <span class="comment"># 这样会把所有栈信息抛出，有利于去排错</span></span><br><span class="line">  </span><br><span class="line">mycopy(<span class="string">'old'</span>, <span class="string">'new'</span>)</span><br><span class="line">输出结果：</span><br><span class="line"><span class="comment"># OSError</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># The above exception was the direct cause of the following exception:</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File "chain_exception.py", line 12, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     mycopy('old', 'new')</span></span><br><span class="line"><span class="comment">#   File "chain_exception.py", line 9, in mycopy</span></span><br><span class="line"><span class="comment">#     raise NotImplementedError("automatic sudo injection") from OSError</span></span><br><span class="line"><span class="comment"># NotImplementedError: automatic sudo injection</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="一切都是返回迭代对象-range-zip-map-dict-values-etc-are-all-iterators。"><a href="#一切都是返回迭代对象-range-zip-map-dict-values-etc-are-all-iterators。" class="headerlink" title="一切都是返回迭代对象 range, zip, map, dict.values, etc, are.all iterators。"></a>一切都是返回迭代对象 range, zip, map, dict.values, etc, are.all iterators。</h3><p>python2中range和map返回的都是列表，当这个列表非常大时候会非常消耗内存，<br>python3中很多内置函数之前返回列表的现在返回是迭代器，迭代器是”惰性加载”的，这样会省很多内存<br>如果我们需要显示得到一个列表时候，我么就需要list进行强转一下)，返回列表会消耗大的内存</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python2中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">10</span>)</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]  <span class="comment"># 返回列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(range(<span class="number">10</span>)))</span><br><span class="line">&lt;type <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(xrange(<span class="number">10</span>))</span><br><span class="line">xrange(<span class="number">10</span>)</span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">100</span>):print(i) </span><br><span class="line"><span class="comment"># python2中xrange返回可迭代对象，python3中没有xrange函数</span></span><br><span class="line"> </span><br><span class="line">---------------------------------------------------------------</span><br><span class="line"><span class="comment"># python3中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">10</span>)</span><br><span class="line">range(<span class="number">0</span>, <span class="number">10</span>)  <span class="comment"># 返回软加载可迭代对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(range(<span class="number">10</span>)))</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">range</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span>(<span class="params">list(<span class="params">range(<span class="params"><span class="number">10</span></span>)</span>)</span>)</span></span><br><span class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  </span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):print(i， end=<span class="string">' '</span>)   <span class="comment"># end默认值是'\n'换行，置空表示水平输出</span></span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>
<p>python3中不再使用<code>dict.iteritems()</code> ，直接使用<code>dict.items()</code>方法就可以返回可迭代对象。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-yu-yan-te-xing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-yu-yan-te-xing/" class="post-title-link" itemprop="url">Python语言特性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-10 02:35:55" itemprop="dateModified" datetime="2021-08-10T02:35:55Z">2021-08-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Python-动态强类型-脚本语言"><a href="#Python-动态强类型-脚本语言" class="headerlink" title="Python 动态强类型 脚本语言"></a>Python 动态强类型 脚本语言</h3><ul>
<li><p>动态是运行期确定数据类型，不用显式声明数据类型，一个变量可以是字符串，也可赋值成一个数字，灵活，执行前不需要编译，执行时才编译，因此效率低。<br>Python、Ruby 和 JavaScript</p>
</li>
<li><p>静态是编译期确定数据类型，要申明变量数据类型 java c c++ c#</p>
</li>
<li><p>弱类型语言是指变量的类型可以被隐式转换。</p>
</li>
<li><p>强类型：</p>
</li>
<li><p>PHP和Javascript就是弱类型语言 =&gt; <code>1 + "1"</code>  在JS不会报错，在Python会报错</p>
</li>
<li><p>非独立：JavaScript语言依赖执行环境，对于客户端来说是浏览器，对于服务端来说是node。</p>
</li>
</ul>
<p>python整数类型为Unifying Long Integers，无限长整数类型，<br>没有 32 / 64 位 int long 等不同长度等概念，但肯定是大于 32 位</p>
<p><code>import this</code>Python之禅</p>
<h3 id="为什么要用Python？"><a href="#为什么要用Python？" class="headerlink" title="为什么要用Python？"></a>为什么要用Python？</h3><ul>
<li>胶水语言，轮子多，应用广泛（优点）</li>
<li>语言灵活，生产力高（优点）</li>
<li>性能问题、代码维护问题、python2/python3兼容问题（缺点）</li>
</ul>
<h3 id="鸭子类型（基于协议编程）-python用法简单的根本"><a href="#鸭子类型（基于协议编程）-python用法简单的根本" class="headerlink" title="鸭子类型（基于协议编程）- python用法简单的根本"></a>鸭子类型（基于协议编程）- python用法简单的根本</h3><p>“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以称为鸭子”<br>go语言的接口（protol 协议）设计是参考了鸭子类型（python）和java的接口<br>协议：采用的是面向对象的类继承<br>从使用者的角度看，描述事物的外部行为而非内部结构</p>
<ul>
<li><p>关注点在对象的行为、接口的方法，是由它实现指定的名称函数方法<br>而不是类型（duck typing）它并不要求严格的继承体系，你的类继承了什么不重要，你的类名称不重要</p>
</li>
<li><p>比如file，String，scoket对象都支持read/write方法（file like object）<br>对真正的文件对象，它有一个read()方法，返回其内容。但是，许多对象，只要有read()方法，都被视为“file-like object“。<br>许多函数接收的参数就是“file-like object“，你不一定要传入真正的文件对象，完全可以传入任何实现了read()方法的对象。</p>
</li>
<li><p>运行时才知道传入的类型 file 有没有实现对应的方法 read，</p>
</li>
<li><p>需要注释来说明接口</p>
</li>
<li><p>再比如定义了__iter__魔术方法的对象都可以for迭代<br>忽略了鸭子类型， 对于用惯面向对象的人来说呢 这个做法有点奇怪</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quack</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"gua gua"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quack</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">"我是人类， 但我也会 gua gua gua"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">in_the_forest</span>(<span class="params">duck</span>):</span></span><br><span class="line">    duck.quack()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">game</span>():</span></span><br><span class="line">    donald = Duck()</span><br><span class="line">    john = Person()</span><br><span class="line">    in_the_forest(donald)</span><br><span class="line">    in_the_forest(john)</span><br><span class="line">    <span class="comment"># 输出类型</span></span><br><span class="line">    print(type(donald))</span><br><span class="line">    print(type(john))</span><br><span class="line">    <span class="comment"># 判断类型</span></span><br><span class="line">    print(isinstance(donald, Duck))</span><br><span class="line">    print(isinstance(john, Person))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">game()</span><br><span class="line"><span class="comment"># 输出结果：</span></span><br><span class="line"><span class="comment"># gua gua</span></span><br><span class="line"><span class="comment"># 我是人类， 但我也会 gua gua gua</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Duck'&gt;</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>

<p>C:\Users\rose\AppData\Local\Programs\Python\Python39\Lib_collections_abc.py 源码</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterable</span>(<span class="params">metaclass=ABCMeta</span>):</span></span><br><span class="line"></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__subclasshook__</span>(<span class="params">cls, C</span>):</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">is</span> Iterable:</span><br><span class="line">            <span class="keyword">return</span> _check_methods(C, <span class="string">"__iter__"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    __class_getitem__ = classmethod(GenericAlias)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Iterable  <span class="comment"># 实际上list没有继承Iterable 好比是一份协议</span></span><br><span class="line"></span><br><span class="line">a = []</span><br><span class="line">print(type(a))</span><br><span class="line">print(isinstance(a, Iterable))  <span class="comment"># True list实现了__iter__ 魔法方法属于Iterable，不需要声明什么类型和继承Iterable</span></span><br><span class="line">b = tuple()</span><br><span class="line">print(isinstance(b, Iterable))  <span class="comment"># True tuple实现了__iter__ 魔法方法属于Iterable，类型和继承Iterable</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">born</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">born</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dog = Dog()</span><br><span class="line">print(type(dog))  <span class="comment"># &lt;class '__main__.Dog'&gt;</span></span><br><span class="line">print(isinstance(dog, Animal)) <span class="comment"># False 通常用在魔法方法</span></span><br><span class="line"><span class="comment"># dog是不是动物类 实际上dog就是动物类</span></span><br><span class="line"><span class="comment"># Animal实际上只是定义了一些方法的名称而已 其他的任何类只要实现了这个Animal里面的方法那你类就是Animal类型</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Company</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, employee_list</span>):</span></span><br><span class="line">        self.employee = employee_list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">"""实现了__iter__方法就是Iterable，没有重写这个方法就不是Iterable"""</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.employee)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">company = Company([<span class="number">100</span>, <span class="number">110</span>, <span class="number">120</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> isinstance(company, Iterable):</span><br><span class="line">    print(<span class="string">"company是iterable类型"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"company不是iterable类型"</span>)</span><br><span class="line"><span class="comment"># company是iterable类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for语句 可以对dict， list tuple set等等类型进行for循环，通常这么强行记忆，</span></span><br><span class="line"><span class="comment"># for语句可以对iterable类型进行操作 只要你实现了__iter__那你就可以进行for循环</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> em <span class="keyword">in</span> company:</span><br><span class="line">    print(em)</span><br><span class="line"><span class="comment"># 100</span></span><br><span class="line"><span class="comment"># 110</span></span><br><span class="line"><span class="comment"># 120</span></span><br><span class="line"></span><br><span class="line">price = (<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>)</span><br><span class="line">print(sum(company))</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Company</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, employee_list</span>):</span></span><br><span class="line">        self.employee = employee_list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.employee)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.employee[item]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    company = Company([<span class="string">"tom"</span>, <span class="string">"bob"</span>, <span class="string">"jane"</span>])</span><br><span class="line">    <span class="keyword">if</span> isinstance(company, Iterable):</span><br><span class="line">        print(<span class="string">"company是iterable类型"</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> company:</span><br><span class="line">        <span class="keyword">print</span> (item)</span><br><span class="line"></span><br><span class="line">a = []</span><br><span class="line"><span class="keyword">if</span> isinstance(a, Iterable):</span><br><span class="line">    print(<span class="string">"yes"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>1、pass语句 空语句 什么也不做，一般作为占位符或者创建占位程序，pass语句不会执行任何操作2、保证格式完整 3、保证语义完整</p>
<h4 id="C-中的-duck-typing"><a href="#C-中的-duck-typing" class="headerlink" title="C++中的 duck typing"></a>C++中的 duck typing</h4><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">R</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">string</span> <span class="title">download</span>(<span class="title">const</span> <span class="title">R</span>&amp; <span class="title">retriever</span>) {</span></span><br><span class="line">    <span class="keyword">return</span> retriever.get(<span class="string">"www.baidu.com"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>编译时才知道传入的 retriever 有没有 get<br>需要注释来说明接口</p>
<h4 id="Java-中的类似代码"><a href="#Java-中的类似代码" class="headerlink" title="Java 中的类似代码"></a>Java 中的类似代码</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;R extends Retriever&gt;</span><br><span class="line"><span class="function">String <span class="title">download</span><span class="params">(R r)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> r.get(<span class="string">"www.baidu.com"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>传入的参数必须实现 Retriever 接口</li>
<li>不是 duck typing, 实现接口的话就一定要实现接口的方法。</li>
<li>同时需要 Readable, Appendable 怎么办？（apache polygene）</li>
</ul>
<h4 id="Python-表示复数的语法是-real-image-j"><a href="#Python-表示复数的语法是-real-image-j" class="headerlink" title="Python 表示复数的语法是 real + image j"></a>Python 表示复数的语法是 <code>real + image j</code></h4><p>方法conjugate返回复数的共轭复数<br>复数的实部与虚部均为浮点数；<br>虚部的后缀可以是 “j” 或者 “J”；<br>复数的 conjugate 方法可以返回该复数的共轭复数。<br>复数不能比大小</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span> + <span class="number">2j</span></span><br><span class="line">print(a)  <span class="comment"># (1+2j)</span></span><br><span class="line">b = <span class="number">1</span> + <span class="number">2J</span></span><br><span class="line">print(b)  <span class="comment"># (1+2j)</span></span><br><span class="line">print(a == b)  <span class="comment"># True</span></span><br><span class="line">print(a.imag)  <span class="comment"># 2.0</span></span><br><span class="line">print(a.real)  <span class="comment"># 1.0</span></span><br></pre></td></tr></tbody></table></figure>

<p>欧拉公式</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cmath</span><br><span class="line"></span><br><span class="line">print(cmath.exp(<span class="number">1j</span> * cmath.pi) + <span class="number">1</span>)  <span class="comment"># 1.2246467991473532e-16j</span></span><br><span class="line">print(<span class="string">"%3f"</span>,cmath.exp(<span class="number">1j</span> * cmath.pi) + <span class="number">1</span>)  <span class="comment"># 1.2246467991473532e-16j</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/smtp-fa-song-you-jian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/smtp-fa-song-you-jian/" class="post-title-link" itemprop="url">SMTP发送邮件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>SMTP发送邮件<br>SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。</p>
<p>python的smtplib提供了一种很方便的途径发送电子邮件。它对smtp协议进行了简单的封装。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line">smtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )</span><br></pre></td></tr></tbody></table></figure>

<p>host: SMTP 服务器主机。 你可以指定主机的ip地址或者域名如: runoob.com，这个是可选参数。<br>port: 如果你提供了 host 参数, 你需要指定 SMTP 服务使用的端口号，一般情况下 SMTP 端口号为25。<br>local_hostname: 如果 SMTP 在你的本机上，你只需要指定服务器地址为 localhost 即可。<br>Python SMTP 对象使用 sendmail 方法发送邮件，语法如下：</p>
<p>SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options])<br>参数说明：</p>
<p>from_addr: 邮件发送者地址。<br>to_addrs: 字符串列表，邮件发送地址。<br>msg: 发送消息<br>这里要注意一下第三个参数，msg 是字符串，表示邮件。我们知道邮件一般由标题，发信人，收件人，邮件内容，附件等构成，发送邮件的时候，要注意 msg 的格式。这个格式就是 smtp 协议中定义的格式。</p>
<p>实例<br>以下执行实例需要你本机已安装了支持 SMTP 的服务，如：sendmail。</p>
<p>以下是一个使用 Python 发送邮件简单的实例：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"> </span><br><span class="line">sender = <span class="string">'from@runoob.com'</span></span><br><span class="line">receivers = [<span class="string">'429240967@qq.com'</span>]  <span class="comment"># 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 三个参数：第一个为文本内容，第二个 plain 设置文本格式，第三个 utf-8 设置编码</span></span><br><span class="line">message = MIMEText(<span class="string">'Python 邮件发送测试...'</span>, <span class="string">'plain'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">message[<span class="string">'From'</span>] = Header(<span class="string">"菜鸟教程"</span>, <span class="string">'utf-8'</span>)   <span class="comment"># 发送者</span></span><br><span class="line">message[<span class="string">'To'</span>] =  Header(<span class="string">"测试"</span>, <span class="string">'utf-8'</span>)        <span class="comment"># 接收者</span></span><br><span class="line"> </span><br><span class="line">subject = <span class="string">'Python SMTP 邮件测试'</span></span><br><span class="line">message[<span class="string">'Subject'</span>] = Header(subject, <span class="string">'utf-8'</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    smtpObj = smtplib.SMTP(<span class="string">'localhost'</span>)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    print(<span class="string">"邮件发送成功"</span>)</span><br><span class="line">    server.quit()</span><br><span class="line"><span class="keyword">except</span> smtplib.SMTPException:</span><br><span class="line">    print(<span class="string">"Error: 无法发送邮件"</span>)</span><br><span class="line">    <span class="comment"># 邮件发送成功</span></span><br></pre></td></tr></tbody></table></figure>

<p>我们使用三个引号来设置邮件信息，标准邮件需要三个头部信息： From, To, 和 Subject ，每个信息直接使用空行分割。</p>
<p>我们通过实例化 smtplib 模块的 SMTP 对象 smtpObj 来连接到 SMTP 访问，并使用 sendmail 方法来发送信息。</p>
<p>执行以上程序，如果你本机安装 sendmail（邮件传输代理程序），就会输出：</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/tcp-socket-bian-cheng/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/tcp-socket-bian-cheng/" class="post-title-link" itemprop="url">TCP socket 编程原理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="了解TCP-socket-编程原理"><a href="#了解TCP-socket-编程原理" class="headerlink" title="了解TCP socket 编程原理"></a>了解TCP socket 编程原理</h3><p>如何使用 socket 模块<br>如何建立TCP socket 客户端和服务端<br>客户端和服务端之间的通信</p>
<p>本质传输字节。所有网络通信都基于socket</p>
<p>socket建立连接的过程？<br>服务器建立监听，socket，bind，listen<br>客户端发送请求，connect，send<br>连接确认，accept，response</p>
<p>首先在服务器端建立监听；然后客户端发起连接，同时发送数据( request )；<br>服务器端收到连接请求之后accept接受建立连接，同时对发送过来的请求做出响应( response)。</p>
<p>服务端要先启动，然后再启动客户端。<br>不要在ide里同时执行服务端和客户端，<br>如果你在同一个IDEL里开服务和客户端就会出那个问题，<br>因为开一个就要把另一个停了。<br>最好打开两个cmd窗口，以此执行服务端和客户端。<br>两个程序都执行才有结果，通信两个人都接受发送信息</p>
<p>编写代码与网络交互的时候都需要把参数变成字节，处理的时候都需要转换成Unicode(py3为str)</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 客户端 tcp_server.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建socket对象，第一个参数协议族，第二个参数是类型，TCP还是UDP</span></span><br><span class="line"><span class="comment"># AF_INET是IPV4，SOCK_STREAM是TCP</span></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"><span class="comment"># 连接服务端</span></span><br><span class="line">s.connect((<span class="string">"127.0.0.1"</span>, <span class="number">6666</span>))  <span class="comment"># 参数是一个tuple对象,ip和端口</span></span><br><span class="line"><span class="comment"># 发送数据</span></span><br><span class="line">s.sendall(<span class="string">b'Hello World'</span>)</span><br><span class="line"><span class="comment"># 接收数据</span></span><br><span class="line">data = s.recv(<span class="number">1024</span>)  <span class="comment"># 1024字节数</span></span><br><span class="line">print(data.decode())</span><br><span class="line"><span class="comment"># 关闭客户端</span></span><br><span class="line">s.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 客户端输出结果：</span></span><br><span class="line"><span class="comment"># Tue Dec 15 11:54:43 2020</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端 tcp_client.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建socket对象</span></span><br><span class="line">s = socket.socket()</span><br><span class="line"><span class="comment"># 绑定端口</span></span><br><span class="line">s.bind((<span class="string">"127.0.0.1"</span>, <span class="number">6666</span>))  <span class="comment"># 参数是一个tuple对象，hostname和port</span></span><br><span class="line"><span class="comment"># s.bind(("DESKTOP-3VCRA3T", 6666))  # 参数是一个tuple对象，hostname和port</span></span><br><span class="line"><span class="comment"># 监听</span></span><br><span class="line">s.listen()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 如果请求到来就接受</span></span><br><span class="line">    client, addr = s.accept()  <span class="comment"># return conn, addr</span></span><br><span class="line">    print(client)</span><br><span class="line">    timestr = time.ctime(time.time()) + <span class="string">'\r\n'</span>  <span class="comment"># 返回当前的时间戳</span></span><br><span class="line">    <span class="comment"># 发送数据</span></span><br><span class="line">    client.send(timestr.encode())  <span class="comment"># 把send 里面参数encode('utf8')成字节</span></span><br><span class="line">    <span class="comment"># 关闭socket</span></span><br><span class="line">    client.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务端输出结果：</span></span><br><span class="line"><span class="comment"># &lt;socket.socket fd=344, family=AddressFamily.AF_INET, </span></span><br><span class="line"><span class="comment"># type=SocketKind.SOCK_STREAM, proto=0, </span></span><br><span class="line"><span class="comment"># laddr=('127.0.0.1', 6666), raddr=('127.0.0.1', 51620)&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket  <span class="comment"># 导入 socket 模块</span></span><br><span class="line"></span><br><span class="line">s = socket.socket()  <span class="comment"># 创建 socket 对象</span></span><br><span class="line">host = socket.gethostname()  <span class="comment"># 获取本地主机名</span></span><br><span class="line">print(<span class="string">'当前主机名称为: '</span> + host)</span><br><span class="line">port = <span class="number">42683</span>  <span class="comment"># 设置端口</span></span><br><span class="line">s.bind((host, port))  <span class="comment"># 绑定端口</span></span><br><span class="line"></span><br><span class="line">s.listen(<span class="number">5</span>)  <span class="comment"># 监听连接,传入连接请求的最大数5</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    c, addr = s.accept()  <span class="comment"># 建立客户端连接。</span></span><br><span class="line">    print(<span class="string">'连接地址：'</span>, addr)</span><br><span class="line">    data = <span class="string">'hello word,你好，世界！'</span></span><br><span class="line">    c.send(data.encode())</span><br><span class="line">    c.close()  <span class="comment"># 关闭连接</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前主机名称为: DESKTOP-3VCRA3T</span></span><br><span class="line"><span class="comment"># 连接地址： ('192.168.110.248', 50733)</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket  <span class="comment"># 导入 socket 模块</span></span><br><span class="line"></span><br><span class="line">s = socket.socket()  <span class="comment"># 创建 socket 对象</span></span><br><span class="line">host = socket.gethostname()  <span class="comment"># 获取本地主机名</span></span><br><span class="line">port = <span class="number">42683</span>  <span class="comment"># 设置端口号</span></span><br><span class="line"></span><br><span class="line">s.connect((host, port))</span><br><span class="line">print(s.recv(<span class="number">1024</span>).decode())</span><br><span class="line">s.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># hello word,你好，世界！</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="如何使用-socket-发送HTTP请求"><a href="#如何使用-socket-发送HTTP请求" class="headerlink" title="如何使用 socket 发送HTTP请求"></a>如何使用 socket 发送HTTP请求</h3><p>使用 socket 接口发送 HTTP请求</p>
<p>HTTP建立在TCP基础之上的一个应用层协议</p>
<p>HTTP是基于文本的协议<br>发送GET请求的数据格式：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.sendall(<span class="string">b'GET /index/?name=aa&amp;sex=bb http1.1\r\nAccept:text/html\r\nAccept-Encoding:gzip, deflate\r\n\r\n'</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>浏览器发送POST请求的数据格式：POST请求也可以在url上传参</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">​socket.sendall(<span class="string">b'GET /index/?name=aa&amp;sex=bb http1.1\r\nAccept:text/html\r\nAccept-Encoding:gzip, deflate\r\n\r\na1=1&amp;a2=2&amp;a3=3'</span>)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># socket_send_http.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"> </span><br><span class="line">s = socket.socket()</span><br><span class="line"><span class="comment"># 连接到百度的主机</span></span><br><span class="line">s.connect((<span class="string">'www.baidu.com'</span>, <span class="number">80</span>))</span><br><span class="line"><span class="comment"># 发送HTTP请求体</span></span><br><span class="line">http = <span class="string">b"GET / HTTP/1.1\r\nHost: www.baidu.com\r\n\r\n"</span></span><br><span class="line">s.sendall(http)</span><br><span class="line"><span class="comment"># 接收响应内容</span></span><br><span class="line">buf = s.recv(<span class="number">1024</span>)</span><br><span class="line">print(buf)</span><br><span class="line"><span class="comment"># 关闭socket</span></span><br><span class="line">s.close()</span><br></pre></td></tr></tbody></table></figure>
<p>输出内容：</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">b</span>'HTTP/<span class="number">1</span>.<span class="number">1</span> <span class="number">200</span> OK\r\nAccept-Ranges: bytes\r\nCache-Control: no-cache\r\nConnection: keep-alive\r\nContent-Length: <span class="number">14615</span>\r\nContent-Type: text/html\r\nDate: </span><br><span class="line"><span class="attribute">Tue</span>, <span class="number">15</span> Dec <span class="number">2020</span> <span class="number">14</span>:<span class="number">44</span>:<span class="number">38</span> GMT\r\nP<span class="number">3</span>p: CP=<span class="string">" OTI DSP COR IVA OUR IND COM "</span>\r\nP<span class="number">3</span>p: CP=<span class="string">" OTI DSP COR IVA OUR IND COM "</span>\r\nPragma: no-cache\r\nServer: BWS/<span class="number">1</span>.<span class="number">1</span>\r\nSet-Cookie: BAIDUID=DF<span class="number">34</span>EFEBEB<span class="number">41</span>F<span class="number">49</span>B<span class="number">4169</span>B<span class="number">86013</span>EDC<span class="number">8</span>FA:FG=<span class="number">1</span>; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com\r\nSet-Cookie: BIDUPSID=DF<span class="number">34</span>EFEBEB<span class="number">41</span>F<span class="number">49</span>B<span class="number">4169</span>B<span class="number">86013</span>EDC<span class="number">8</span>FA; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com\r\nSet-Cookie: PSTM=<span class="number">1608043478</span>; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com\r\nSet-Cookie: BAIDUID=DF<span class="number">34</span>EFEBEB<span class="number">41</span>F<span class="number">49</span>B<span class="number">93</span>C<span class="number">5</span>DFE<span class="number">6</span>A<span class="number">700898</span>F:FG=<span class="number">1</span>; max-age=<span class="number">31536000</span>; expires=Wed, <span class="number">15</span>-Dec-<span class="number">21</span> <span class="number">14</span>:<span class="number">44</span>:<span class="number">38</span> GMT; domain=.baidu.com; path=/; version=<span class="number">1</span>; comment=bd\r\nTraceid: <span class="number">1608043478045537332210543503774960632313</span>\r\nVary: Accept-Encoding\r\nX-Ua-Compatible: IE=Edge,chrome=<span class="number">1</span>\r\n\r\n&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n\t&lt;meta http-equ'</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/url/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/url/" class="post-title-link" itemprop="url">URL Uniform Resource Locator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-20 11:49:02" itemprop="dateModified" datetime="2021-07-20T11:49:02Z">2021-07-20</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>URL Uniform Resource Locator 统一资源定位符）是对可以从互联网上得到对资源位置和访问方法对一种简洁的表示，是互联网上标准资源的地址。<br>⼀般统⼀资源定位符的开始标志着⼀个计算机⽹络所使⽤的⽹络协议<br>互联网上的每个文件都有一个唯一的URL，且⼀个URL指向⼀个数据资源⽂件的路径</p>
<p>URL是通过HTTP协议存取资源的Internet路径，</p>
<p>URL是URI的子集，URI还包括URN，在互联网中，我们一般的网页链接、网址可以被称为URL或者URI，大多数人称为URL。</p>
<p>用于描述一个网络上的资源, 基本格式如下<br>基本URL包含模式（或称协议）、服务器名称（或IP地址）、文件所在路径和文件名<br>scheme://host[:port#]/path/…/[;url-params][?query-string][#anchor]</p>
<p>URL格式 <code>http://host[:port][path]</code></p>
<p>scheme         指定底层使用的协议(例如：http, https, ftp)</p>
<p>host           HTTP服务器的合法的Internet主机域名或IP地址</p>
<p>port#          HTTP服务器的默认端口是80，这种情况下端口号可以省略。如果使用了别的端口，必须指明，例如 <a target="_blank" rel="noopener" href="http://www.luboke.com/">http://www.luboke.com:80</a></p>
<p>path：请求访问资源的路径</p>
<p>query-string   发送给http服务器的数据</p>
<p>anchor         锚</p>
<p>代理服务器位于客户端和真正的服务器之间，充当一个中间人的角色。当跟客户端交互的时候，是服务器。跟服务器交互的时候，又充当客户端，</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/vuex-zhuang-tai-guan-li-jie-shao/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/vuex-zhuang-tai-guan-li-jie-shao/" class="post-title-link" itemprop="url">Vuex状态管理介绍</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-01 04:03:19" itemprop="dateModified" datetime="2021-08-01T04:03:19Z">2021-08-01</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Vuex状态管理介绍"><a href="#Vuex状态管理介绍" class="headerlink" title="Vuex状态管理介绍"></a>Vuex状态管理介绍</h3><ul>
<li><p>专为 Vue.js 应用程序开发的状态管理模式</p>
</li>
<li><p>state: 驱动应用的数据源，<code>data</code>中的数据</p>
</li>
<li><p>view: 以声明方式将 state 映射到视图，在模板中使用<code>{{}}</code></p>
</li>
<li><p>actions: 响应在 view 上的用户输入导致的状态变化</p>
</li>
<li><p>跨组件和页面直接来全局共享数据<br>单例模式：vue项目生命周期当中只有一个vuex的实例<br>提交订单会读取当前登录用户的昵称和手机号信息</p>
</li>
</ul>
<h3 id="Vuex的工作流程"><a href="#Vuex的工作流程" class="headerlink" title="Vuex的工作流程"></a>Vuex的工作流程</h3><ul>
<li>state：存放数据</li>
<li>mutation：同步提交数据</li>
<li>action：异步提交数据</li>
</ul>
<p>安装及配置</p>
<ul>
<li>第一步，安装</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install vuex -S</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>第二步，配置<br><code>src\main.js</code></li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  store,  <span class="comment">// store: store,</span></span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">}).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>新建<code>src\store\index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  state: {</span><br><span class="line">    user: {</span><br><span class="line">      username: <span class="string">'zhangsan'</span>,</span><br><span class="line">      nickname: <span class="string">'张三'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<h4 id="state"><a href="#state" class="headerlink" title="state"></a>state</h4><ul>
<li>含义<br>单一状态树，全局唯一数据源<br>查询state中的数据</li>
<li>示例代码</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- view --&gt;</span><br><span class="line">    &lt;h1&gt;首页&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;当前计数: {{ count }} &lt;/p&gt;</span><br><span class="line">    &lt;input type="button" value="+1" @click="increment"&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      当前登录的用户是：{{ user.username }}</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },  </span><br><span class="line">  computed: {</span><br><span class="line">    user () {</span><br><span class="line">      return this.$store.state.user</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>使用Vuex保存用户信息</p>
<h4 id="mutation"><a href="#mutation" class="headerlink" title="mutation"></a>mutation</h4><ul>
<li>示例代码</li>
<li>更改store中状态的唯一方法，注意不要通过赋值语法去修改store中的状态<br>定义的函数参数是<code>state</code></li>
</ul>
<p>场景1<br><code>src\store\index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  mutations: {</span><br><span class="line">    updateUsername (state) {</span><br><span class="line">      <span class="built_in">console</span>.log(state)</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      <span class="built_in">this</span>.state.user.username = <span class="string">'lisi'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.commit('updateUsername')</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>场景2<br><code>src\store\index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  mutations: {</span><br><span class="line">    updateUsername (state) {</span><br><span class="line">      <span class="built_in">console</span>.log(state)</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      <span class="built_in">this</span>.state.user.username = <span class="string">'lisi'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>
<p>不用<code>commit</code><br><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.state.user.username = 'wangwu'</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>场景3<br><code>src\store\index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  mutations: {</span><br><span class="line">    updateUsername (state, payload) {</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      <span class="built_in">console</span>.log(state, payload)</span><br><span class="line">      <span class="built_in">this</span>.state.user.username = payload.uname</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.commit('updateUsername', {</span><br><span class="line">        uname: this.uname</span><br><span class="line">      })</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>场景4<br><code>src\store\index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  mutations: {</span><br><span class="line">    updateUsername2 (state, uname) {</span><br><span class="line">      <span class="built_in">console</span>.log(state, uname)</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      <span class="built_in">this</span>.state.user.username = uname</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.commit('updateUsername2', this.uname)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><ul>
<li>示例代码</li>
<li>提交的是mutation，可异步<br>定义的函数参数是<code>context</code><br><code>store.dispatch('mutation函数名')</code>触发action<br><code>src\store\index.js</code></li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  state: {</span><br><span class="line">    user: {</span><br><span class="line">      username: <span class="string">'zhangsan'</span>,</span><br><span class="line">      nickname: <span class="string">'张三'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mutations: {</span><br><span class="line">    <span class="comment">// updateUsername (state) {</span></span><br><span class="line">    <span class="comment">//   console.log(state)</span></span><br><span class="line">    <span class="comment">//   this.state.user.username = 'lisi'</span></span><br><span class="line">    <span class="comment">// }</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// updateUsername (state, payload) {</span></span><br><span class="line">    <span class="comment">//   console.log(state, payload)</span></span><br><span class="line">    <span class="comment">//   this.state.user.username = payload.uname</span></span><br><span class="line">    <span class="comment">// }</span></span><br><span class="line"></span><br><span class="line">    updateUsername2 (state, uname) {</span><br><span class="line">      <span class="built_in">console</span>.log(state, uname)</span><br><span class="line">      <span class="built_in">this</span>.state.user.username = uname</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  actions: {</span><br><span class="line">    updateUser (context, payload) {</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">        context.commit(<span class="string">'updateUsername2'</span>, payload.uname)</span><br><span class="line">      }, <span class="number">5000</span>)</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.dispatch('updateUser', {</span><br><span class="line">        uname: this.uname</span><br><span class="line">      })</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>


<p>辅助函数使我们的代码更加精简<br>箭头函数可使代码更简练</p>
<h4 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h4><p>方便在vue组件中获取vuex的状态，即state的内容</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  state: {</span><br><span class="line">    user: {</span><br><span class="line">      username: <span class="string">'zhangsan'</span>,</span><br><span class="line">      nickname: <span class="string">'张三'</span></span><br><span class="line">    },</span><br><span class="line">    profile: {</span><br><span class="line">      name: <span class="string">'我的详细信息'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- view --&gt;</span><br><span class="line">      &lt;!-- 当前登录的用户是：{{ user.username }} --&gt;</span><br><span class="line">      &lt;!-- 当前登录的用户是：{{ username }} - {{ nname }} --&gt;</span><br><span class="line">      当前登录的用户是：{{ user.username }} - {{ profile.name }}</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;input type="text" v-model="uname"&gt;</span><br><span class="line">      &lt;input type="button" value="提交" @click="submit"&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { mapState } from 'vuex'</span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      this.$store.dispatch('updateUser', {  // 触发action</span><br><span class="line">        uname: this.uname</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  // 传递对象</span><br><span class="line">  // computed: mapState({</span><br><span class="line">  //   username: state =&gt; state.user.username,</span><br><span class="line">  //   nname: state =&gt; state.user.nickname</span><br><span class="line">  // })</span><br><span class="line"></span><br><span class="line">  // 传递数组法一</span><br><span class="line">  // computed: mapState(['user', 'profile']),</span><br><span class="line">  // 传递数组法二</span><br><span class="line">  computed: {</span><br><span class="line">    conent () {</span><br><span class="line">      return ''</span><br><span class="line">    },</span><br><span class="line">    ...mapState(['user', 'profile'])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h4><p><code>index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  state: {</span><br><span class="line">    user: {</span><br><span class="line">      username: <span class="string">'zhangsan'</span>,</span><br><span class="line">      nickname: <span class="string">'张三'</span></span><br><span class="line">    },</span><br><span class="line">    profile: {</span><br><span class="line">      name: <span class="string">'我的详细信息'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mutations: {</span><br><span class="line">    updateUsername (state, payload) {</span><br><span class="line">      <span class="built_in">console</span>.log(state, payload)</span><br><span class="line">      <span class="built_in">this</span>.state.user.username = payload.uname</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">    updateUsername2 (state, uname) {</span><br><span class="line">      <span class="built_in">console</span>.log(state, uname)</span><br><span class="line">      <span class="built_in">this</span>.state.user.username = uname</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  actions: {</span><br><span class="line">    updateUser (context, payload) {</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">        context.commit(<span class="string">'updateUsername2'</span>, payload.uname)</span><br><span class="line">      }, <span class="number">5000</span>)</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  modules: {</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>


<p><code>src\views\Home.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- view --&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      当前登录的用户是：{{ user.username }} - {{ profile.name }}</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;input type="text" v-model="uname"&gt;</span><br><span class="line">      &lt;input type="button" value="提交" @click="submit"&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { mapState, mapMutations } from 'vuex'</span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    // 场景1  数组</span><br><span class="line">    // ...mapMutations(['updateUsername']),</span><br><span class="line"></span><br><span class="line">    // 场景2  对象</span><br><span class="line">    ...mapMutations({</span><br><span class="line">      update: 'updateUsername'</span><br><span class="line">    }),</span><br><span class="line"></span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      // 使用mapMutations之后</span><br><span class="line">      // 场景1 数组方式</span><br><span class="line">      // this.updateUsername({uname: this.uname})</span><br><span class="line"></span><br><span class="line">      // 场景2 对象      </span><br><span class="line">      this.update({uname: this.uname})</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    conent () {</span><br><span class="line">      return ''</span><br><span class="line">    },</span><br><span class="line">    ...mapState(['user', 'profile'])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="mapActions"><a href="#mapActions" class="headerlink" title="mapActions"></a>mapActions</h3><p>```````</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- view --&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      当前登录的用户是：{{ user.username }} - {{ profile.name }}</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;input type="text" v-model="uname"&gt;</span><br><span class="line">      &lt;input type="button" value="提交" @click="submit"&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { mapState, mapMutations, mapActions } from 'vuex'</span><br><span class="line">export default {</span><br><span class="line">  // state</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      count: 0,</span><br><span class="line">      uname: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // actions</span><br><span class="line">  methods: {</span><br><span class="line">    // ...mapMutations(['updateUsername']),</span><br><span class="line">    ...mapMutations({</span><br><span class="line">      update: 'updateUsername'</span><br><span class="line">    }),</span><br><span class="line">    // 场景1  数组    </span><br><span class="line">    // ...mapActions(['updateUser']),</span><br><span class="line"></span><br><span class="line">    // 场景2  对象</span><br><span class="line">    ...mapActions({</span><br><span class="line">      updateUserInfo: 'updateUser'</span><br><span class="line">    }),</span><br><span class="line">    increment () {</span><br><span class="line">      this.count++</span><br><span class="line">    },</span><br><span class="line">    submit () {  // 改变state里面的username</span><br><span class="line">      // 使用mapActions之后</span><br><span class="line">      // 场景1  数组       </span><br><span class="line">      // this.updateUser({uname: this.uname})</span><br><span class="line">      // 场景2  对象 </span><br><span class="line">      this.updateUserInfo({uname: this.uname})</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    conent () {</span><br><span class="line">      return ''</span><br><span class="line">    },</span><br><span class="line">    ...mapState(['user', 'profile'])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/wsgi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/wsgi/" class="post-title-link" itemprop="url">WSGI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-27 05:13:34" itemprop="dateModified" datetime="2021-05-27T05:13:34Z">2021-05-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>WSGI(Web Server Gateway Interface (pep3333) web服务器网关接口<br>为什么Flask/Django都可以运行部署在 uwsgi / gunicorn 之上？<br>存在意义：是 Python的 web server 跟 web application 或者 web 框架 之间定义的一种交互规范。，因为有了规范之后，如果遵守这个规范就，能让任意的Python Web框架运行在 web server上，这就是所说的WSGI。所有的web 应用都可以跑在实现相同的WSGI服务器上。</p>
<p>PEP 3333 - Python Web服务器网关接口：web服务器和Python web应用程序或框架之间拟议的标准接口，以促进跨各种web服务器的web应用程序可移植性。</p>
<p>出现的意义：解决 Python Web Server 乱象 mod_python，CGI，FastCGI等</p>
<p>Web框架致力于如何生成HTML代码，而Web服务器用于处理和响应HTTP请求。<br>Web框架和Web服务器之间的通信，需要一套双方都遵守的接口协议。WSGI协议就是用来统一这两者的接口的。<br>解决的问题：描述了Web Server (Gunicorn / uWSGI)如何与 web框架(Flask/Django)交互，Web框架如何处理请求</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uwsgi</span><br></pre></td></tr></tbody></table></figure>

<p>2.WSGI规范定义</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">application</span>(<span class="params">environ, start_response</span>)</span></span><br></pre></td></tr></tbody></table></figure>
<p>① application 就是 WSGI app，一个可调用对象</p>
<p>② 参数：<br>     environ：一个包含 WSGI 环境信息的字典，由 WSGI 服务器提供，常见的 key 有 PATH_INFO，QUERY_STRING等</p>
<pre><code> start_response：生成 WSGI 响应的回调函数，接收两个参数，status 和 headers
</code></pre>
<p>③ 函数返回响应体的可迭代对象 </p>
<p>编写一个简单兼容 WSGI 的 web应用并运行</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myapp</span>(<span class="params">environ, start_response</span>):</span></span><br><span class="line">    print(environ[<span class="string">'QUERY_STRING'</span>])  <span class="comment"># 打印环境变量参数, 建议打印出来这个字典看看有哪些参数</span></span><br><span class="line">    status = <span class="string">'200 OK'</span>  <span class="comment"># 定义状态码</span></span><br><span class="line">    headers = [(<span class="string">'Content-Type'</span>, <span class="string">'text/html; charset=utf8'</span>)]  <span class="comment"># 返回的响应头</span></span><br><span class="line"></span><br><span class="line">    start_response(status, headers)  <span class="comment"># 调用回调函数</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="string">b'&lt;h1&gt;Hello World&lt;/h1&gt;'</span>]  <span class="comment"># 返回可迭代对象，同时返回字节</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server  <span class="comment"># 引入 web server</span></span><br><span class="line">    httpd = make_server(<span class="string">'127.0.0.1'</span>, <span class="number">8888</span>, myapp)  <span class="comment"># 设置server IP/端口号等</span></span><br><span class="line">    httpd.serve_forever()  <span class="comment"># 启动server</span></span><br></pre></td></tr></tbody></table></figure>

<p>运行WSGI Server (Web Server)代码后，在浏览器访问 127.0.0.1:8888 ,网页返回Hello World。</p>
<p>到这里没有使用任何框架就实现了一个简单的 web 应用。</p>
<p>3). web server(WSGI 服务器) 把 HTTP参数信息通过 environ 传递给框架<br>在浏览器输入 <a target="_blank" rel="noopener" href="http://127.0.0.1:6666/?name=ipython">http://127.0.0.1:6666/?name=ipython</a></p>
<p>命令端窗口返回内容</p>
<figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name=ipython</span><br><span class="line"><span class="number">127.0.0.1</span> - - <span class="string">[19/Dec/2020 18:06:31]</span> <span class="string">"<span class="keyword">GET</span> /?name=ipython HTTP/1.1"</span> <span class="number">200</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0.0.1</span> - - <span class="string">[19/Dec/2020 18:06:32]</span> <span class="string">"<span class="keyword">GET</span> /favicon.ico HTTP/1.1"</span> <span class="number">200</span> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>
<p>平常在使用web框架的时候，可以通过web框架提供的一些函数获取到用户信息，如查询字符串。其实这个就是框架去把这个一些请求的信息，从environment ( environ )里面拿出来之后给你。</p>
<p>3). 使用Tornado的时候，可以去初始化一个application，然后启动这个application</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Application</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> routers<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>routers <span class="token operator">=</span> routers
        
    <span class="token comment" spellcheck="true"># 把定义的可调用对象放入类的call方法，实现WSGI的规定</span>
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            request <span class="token operator">=</span> Request<span class="token punctuation">(</span>environ<span class="token punctuation">)</span>
            callback<span class="token punctuation">,</span> args <span class="token operator">=</span> routers<span class="token punctuation">.</span>match<span class="token punctuation">(</span>request<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
            response <span class="token operator">=</span> callback<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span>
        <span class="token keyword">except</span> NotFoundError<span class="token punctuation">:</span>
            response <span class="token operator">=</span> Response<span class="token punctuation">(</span><span class="token string">"&lt;h1>Not found&lt;/h1>"</span><span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">)</span>
        start_response<span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">,</span> response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> iter<span class="token punctuation">(</span>response<span class="token punctuation">)</span>
</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/xss/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/xss/" class="post-title-link" itemprop="url">XSS(Cross Site Scripting)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="XSS-Cross-Site-Scripting-跨站脚本。因为CSS名字被层叠样式表给占用，所以就改成XSS。"><a href="#XSS-Cross-Site-Scripting-跨站脚本。因为CSS名字被层叠样式表给占用，所以就改成XSS。" class="headerlink" title="XSS Cross Site Scripting, 跨站脚本。因为CSS名字被层叠样式表给占用，所以就改成XSS。"></a>XSS Cross Site Scripting, 跨站脚本。因为CSS名字被层叠样式表给占用，所以就改成XSS。</h3><p>实施XSS攻击需要具备两个条件：<br>　　一、需要向web页面注入恶意代码；<br>　　二、这些恶意代码能够被浏览器成功的执行。<br>当我们的用户访问一个站点的时候，在渲染页面的时候，恶意用户将代码植入到提供给其他用户使用的页面中，出现了一些我们没有预期到的脚本的指令，这些指令是恶意的，未经转义的恶意代码输出到其他用户的浏览器被执行，这样就是产生了xss攻击。用户浏览页面的时候嵌入页面中的脚本( js )会被执行，攻击用户。</p>
<p>为什么能盗取获取用户的信息，比如cookie，删除用户本地的一些东西<br>通过document.cookie把这个Cookie发送到攻击者的服务器上，这样他就能拿到用户的cookie可以想干嘛就干嘛。</p>
<pre><code>   XSS攻击主要分为两类：反射型(非持久型)，存储型(持久型)。反射型攻击方式就是把可以执行的 js脚本放到URL参数里面。存储型的攻击方式通过评论的这种方式，加载评论的时候把它写入到评论里面，它被后台存储之后，用户再打开的时候就会执行评论里面的脚本。

    (1) .评论框中输入script 代码&lt;script&gt;alert('hello')&lt;/script&gt;, 一段未经转义过的 JS 代码被插入到页面之后，其他用户浏览的时候也会去执行它。
    如果是黑客它插一段JS代码，把用户cookie的值发送到指定的服务器上，这样他就能拿到用户的cookie值想干嘛就可以干嘛。
     我们知道HTTP协议它是没有状态，所以很多网站是通过Cookie去识别用户的，一旦黑客获取到你这个cookie就相当于拥有了你的账户就可以随便使用你这个账号了。这是个什么类型的 xss? 这个是把提交的脚本插入到数据库里面，所以这个是存储型的攻击方式。

    (2).有一些后端它是通过URL参数来去获取的，有时候会把脚本放入URL参数里面。如：http://test.com/xss/example.php?name=&lt;script&gt;alert(" hey! ")&lt;/script&gt;，然后通过邮件方式发送给用户，诱导用户去点击，这就是非存储形式的 XSS。
</code></pre>
<p>2.XSS利用 js的危害<br>盗用用户 cookie，获取敏感信息<br>利用用户私人账号执行一些违法操作，比如盗取个人或者商业资料，执行一些隐私操作<br>甚至可以在一些访问量很大的网站上实现DDoS攻击</p>
<p>3.如何防范 XSS？<br>  不要相信用户的任何输入，因为只要是用户的输入都有可能被黑客精心的构造来去做一些不好的事。</p>
<p>过滤(针对用户的输入和URL中参数)。针对敏感标签<script>、<img>、<a>等把它过滤掉，假如都没有script标签了也就没有办法执行 JS 代码了。</p>
<p>转义。对常见符号( “&amp;”, “&lt;” and “&gt;”)转义，现在很多模板引擎已经实现自动转义，不需要手动实现这个功能。 (python3 html.escape)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> html</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.escape(<span class="string">&#x27;&lt;script&gt;&#x27;</span>) <span class="comment"># 转义操作</span></span><br><span class="line"><span class="string">&#x27;&amp;lt;script&amp;gt;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.unescape(html.escape(<span class="string">&#x27;&lt;script&gt;&#x27;</span>)) <span class="comment"># 反转义操作</span></span><br><span class="line"><span class="string">&#x27;&lt;script&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>设置HttpOnly 禁止浏览器JS脚本访问和操作 Document.cookie。这个时候也就没办法使用JS脚本搞破坏了。浏览器禁止js 脚本访问和修改 cookie。但是发送给当前域名的请求里依然是有这个 cookie 的，后端可以通过 cookie 里的信息识别用户。</p>
</script></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/ajax/" class="post-title-link" itemprop="url">Ajax</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-20 02:52:20" itemprop="dateModified" datetime="2021-05-20T02:52:20Z">2021-05-20</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。<br>一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。</p>
<ul>
<li>原生的Ajax</li>
<li>基于jQuery的Ajax<ul>
<li>加载内容</li>
<li>提交表单</li>
</ul>
</li>
</ul>
<p>Ajax 不是一种新的编程语言，而是一种用于创建更好更快以及交互性更强的Web应用程序的技术。</p>
<p>在 2005 年，Google 通过其 Google Suggest 使 AJAX 变得流行起来。Google Suggest能够自动帮你完成搜索单词。</p>
<p>Google Suggest 使用 AJAX 创造出动态性极强的 web 界面：当您在谷歌的搜索框输入关键字时，JavaScript 会把这些字符发送到服务器，然后服务器会返回一个搜索建议的列表。</p>
<p>就和国内百度的搜索框一样!</p>
<p>传统的网页(即不用ajax技术的网页)，想要更新内容或者提交一个表单，都需要重新加载整个网页。</p>
<p>使用ajax技术的网页，通过在后台服务器进行少量的数据交换，就可以实现异步局部更新。</p>
<p>使用Ajax，用户可以创建接近本地桌面应用的直接、高可用、更丰富、更动态的Web用户界面。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/">36</a><a class="extend next" rel="next" href="/page/20/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
