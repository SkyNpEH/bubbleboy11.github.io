<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<meta name="hexo-config" content="{&quot;hostname&quot;:&quot;bubbleboy11.github.io&quot;,&quot;root&quot;:&quot;/&quot;,&quot;images&quot;:&quot;/images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}">
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/2/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/2/">



<meta name="hexo-config-page" content="{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;}">
<meta name="hexo-config-calendar" content="">
<script data-pjax src="/js/load-config.js"></script>
  <title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">165</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/csrf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/csrf/" class="post-title-link" itemprop="url">CSRF</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>CSRF：Cross-site request forgery 跨站请求伪造<br>利用网站对已认证的权限去执行未授权的命令的一种恶意攻击<br>攻击者它们会利用登录过的用户在浏览器中的认证信息，欺骗用户的浏览器去访问以你的身份在一个自己曾经认证过的网站上模拟发送请求，，然后做了一些没有经过你授权的一些行为，比发邮件，发消息，甚至财产操作如转账和购买商品。<br>由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去运行。</p>
<p>这利用了web中用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的或者批准发送的</p>
<ol>
<li>用户C打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A；</li>
<li>在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器，此时用户登录网站A成功，可以正常发送请求到网站A；</li>
<li>用户未退出网站A之前，在同一浏览器中，打开一个TAB页访问网站B；</li>
<li>网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A；</li>
<li>浏览器在接收到这些攻击性代码后，根据网站B的请求，在用户不知情的情况下携带Cookie信息，向网站A发出请求。网站A并不知道该请求其实是由B发起的，所以会根据用户C的Cookie信息以C的权限处理该请求，导致来自网站B的恶意代码被执行。</li>
</ol>
<p>Csrf 是利用网站本身的漏洞，比如一个网站a用cookie就可以登录，不需要用户重新输入用户名和密码。那么我们就可以利用csrf攻击，携带cookie去登录网站a，进行钱的转账<br>Xss是在网站a里面注入恶意的脚本，我们一访问这个网站a，那么就执行恶意的代码</p>
<p>Csrf是需要登录的，xss是不需要进行登录的。</p>
<p>2.CSRF产生的条件<br>要完成一个 CSRF攻击，需要具备两个条件<br>受害者已经登录到目标网站并且没有退出( 保持登录状态 ）<br>受害者访问了攻击者发布的链接或者表单按钮<br>二者必须缺一不可</p>
<p>3.如何防范 CSRF？使用CSRF保护（针对同步提交，比如注册页面）<br>    在使用Get请求的时候非常容易伪造链接，所以尽量不要在GET请求里有任务数据修改操作。目前所有Python主流的web 框架所采用的的方式令牌同步。</p>
<p>令牌同步(Synchronizer token pattern , 简称STP)：在用户请求的表单中嵌入一个隐藏的<code>csrf_token</code>，服务端验证其是否与cookie中的一致(基于同源策略其他网站是无法获取cookie中的<code>csrf_token</code>)。黑客是拿不到你cookie中的 <code>csrftoken</code>值的，前提是网站本身没有 xss漏洞。</p>
<p>如果是 js 提交需要先从cookie获取csrf_token作为 X-CSRFToken请求头提交<br>    1. 在MIDDLEWARE设置中激活CSRF中间件<br>django.middleware.csrf.CsrfViewMiddleware<br>    2. </p><form>元素中使用<code>csrf_token</code>标签（POST请求)<br>Html<br>    1    <code>&lt;form class="xxx" method="post" action="."&gt;</code><br>    2    <code>{% csrf_token %}</code><br>    3. 选择合适的渲染方式<br>视图函数中，确保使用RequestContext来渲染（或者render()函数）</form><p></p>
<p>其他：检测来源HTTP Referer(容易被伪造)；验证码方式(安全但是繁琐)</p>
<p>开启使用CSRF保护之后，浏览器源码会生成一个隐藏的表单域。这个表单中自动生成了唯一的value值（每一次request都会有不同的value值），提交表单时候会将其一并提交，因为value值唯一，就不会有重复提交的情况。</p>
<p>图解：左边是用户，右边是需要登陆的网站。一个用户A通过自己的身份验证，去登陆网站SNS，网站会返回一个cookie值Cookie: sid=1234567890用来标识这个用户。然后中间一个攻击者给你发一个链接或者给你一个图片你可能会对它进行一个点击，比如发给你一个图<code>&lt;img src="http://example.com/msg?q=你好"&gt;</code>误导你来去点击，这个链接是发送评论的请求地址，如果你点击这个地址它就会以你的名义来发送这个你好。这个时候假如你误点这个图片就会触发这个链接的操作，然后你就会携带你的Cookie去请求SNS网站。这个时候你就会发现你实际上并没有想去发送你好这个评论。但是你通过攻击者留下的链接陷阱点进去之后然后你就误发这个评论。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/django-zhong-kuo-zhan-yong-hu-mo-xing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/django-zhong-kuo-zhan-yong-hu-mo-xing/" class="post-title-link" itemprop="url">扩展Django中的用户模型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="扩展Django中的用户模型"><a href="#扩展Django中的用户模型" class="headerlink" title="扩展Django中的用户模型"></a>扩展Django中的用户模型</h3><p>是对ORM抽象模型的应用</p>
<h4 id="对用户进行扩展"><a href="#对用户进行扩展" class="headerlink" title="对用户进行扩展"></a>对用户进行扩展</h4><ul>
<li><p>思考如下场景如何实现</p>
<ul>
<li>Django内置的用户模型满足不了需求怎么办？</li>
<li>要用户模型添加头像字段怎么办？</li>
</ul>
</li>
<li><p>两种方式解决用户问题</p>
<ul>
<li><p>方式1：使用OneToOneField对用户进行扩展</p>
</li>
<li><p>方式2：替换现有的用户模型</p>
<ul>
<li>步骤一：配置用户模型，告诉django框架<br><code>setting.py</code>    <figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUTH_USER_MODEL = <span class="string">'accounts.User'</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>步骤二：继承自<code>AbstractUser</code>抽象模型，不会生成对应的数据表</li>
</ul>
<p><code>accounts\models.py</code></p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">AbstractUser</span>):</span></span><br><span class="line">```    </span><br><span class="line">    - 步骤三：添加字段，同步模型到数据库</span><br><span class="line">```bash</span><br><span class="line">python manage.py check</span><br><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py makemigrate</span><br></pre></td></tr></tbody></table></figure>
<p>数据库生成表格<br><code>account_user</code>和<code>account_user_group</code>和<code>account_user_user_permissions</code></p>
</li>
</ul>
</li>
<li><p>创建普通用户 命令行输入命令</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py shell  // django控制台</span><br></pre></td></tr></tbody></table></figure>
<p>或者pycharm的<code>Python Console</code><br>引入用户</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> accounts.models <span class="keyword">import</span> User</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>使用命令行创建超级管理员</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;python manage.py createsuperuser</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>获取用户对象</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user = User.objects.create_user(<span class="string">'john'</span>,<span class="string">'john@example.com'</span>,<span class="string">'johnpassword'</span>)</span><br><span class="line">user = User.objects.create_user(<span class="string">'admin'</span>,<span class="string">'admin@example.com'</span>,<span class="string">'123456'</span>)</span><br><span class="line">u = User.objects.get(username=<span class="string">'admin'</span>)</span><br><span class="line">u = User.objects.get(username=<span class="string">'13500000000'</span>)</span><br><span class="line">u.check_password(<span class="string">'123456'</span>)</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/gunicorn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/gunicorn/" class="post-title-link" itemprop="url">Gunicorn</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Gunicorn：Python WSGI HTTP Server.<br>纯 Python 编写的高性能的 WSGI Server</p>
<p>pre-fork 预先分配多个 worker 进程处理请求(master-slave)。master-slave方式：一个master负责去管理多个worker进程，比如那个worker超时了把它重启，worker负责处理客服端的用户请求。</p>
<p>多钟 worker 支持：Sync 同步worker / Async(Gevent) 基于gevent的异步worker/ Tornado / AsyncIO。一般需要支持比较高的并发的时候，可以采用基于gevent的异步worker。</p>
<p>图解：使用Gunicorn来去部署 web的一种方式，首先客户端的请求先到Nginx这一层，Nginx负责反向代理，它就又把请求直接转发给Gunicorn。Gunicorn通过Pre-fork预先fork一堆worker进程，然后把请求转给worker进程处理请求。master进程它不会负责去处理请求，它只是负责监控和重启worker进程。</p>
<p>2.Gunicorn的代码示例</p>
<figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip <span class="keyword">install</span> gunicorn     <span class="comment"># 安装gunicorn</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件 myapp.py, 添加内容如下</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">app</span>(<span class="params">environ, start_response</span>):</span>  <span class="comment"># 一个web应用</span></span><br><span class="line">    data = <span class="string">b'Hello, World!\n'</span></span><br><span class="line">    start_response( <span class="string">"200 OK"</span>, [</span><br><span class="line">        (<span class="string">"Content-Type"</span>, <span class="string">"text/plain"</span>),</span><br><span class="line">        (<span class="string">"Content-Length"</span>, str(len(data))</span><br><span class="line">    ])</span><br><span class="line">    <span class="keyword">return</span> iter([data])</span><br><span class="line">``` </span><br><span class="line">```shell </span><br><span class="line">$ gunicorn -w <span class="number">4</span> myapp:app  <span class="comment"># 使用gunicorn指定4个worker启动 web应用</span></span><br></pre></td></tr></tbody></table></figure>
<p>由于gunicorn部署个启动都非常容易，所以很多公司都使用 Gunicorn来作为 WSGI server。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/git-bash-cmd-pei-zhi-dai-li/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/git-bash-cmd-pei-zhi-dai-li/" class="post-title-link" itemprop="url">Git Bash, CMD配置代理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="方法一-pip-linux配置文件换成清华源"><a href="#方法一-pip-linux配置文件换成清华源" class="headerlink" title="方法一 pip linux配置文件换成清华源"></a>方法一 pip linux配置文件换成清华源</h3><p>linux:<br>修改 ~/.pip/pip.conf (没有就创建一个)，文件夹要加“.”，表示是隐藏文件夹)，内容如下：</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">timeout = <span class="number">6000</span></span><br><span class="line"><span class="keyword">index</span>-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></tbody></table></figure>

<p>windows:<br>直接在user目录中创建一个pip目录，如：<code>C:\Users\xx\pip</code>，在pip 目录下新建文件<code>pip.ini</code>，内容如下</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">timeout = <span class="number">6000</span></span><br><span class="line"><span class="keyword">index</span>-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></tbody></table></figure>

<p>在安装python库，在网络不好的情况会遇到<br>raise ReadTimeoutError(self._pool, None, ‘Read timed out.’)<br>ReadTimeoutError: HTTPSConnectionPool(host=’files.pythonhosted.org’, port=443): Read timed out.</p>
<ul>
<li>pycharm-setting-proxy-manual-127.0.0.1 prot 7890</li>
</ul>
<h3 id="ping的协议不是https，是ICMP协议，不是TCP-UDP协议"><a href="#ping的协议不是https，是ICMP协议，不是TCP-UDP协议" class="headerlink" title="ping的协议不是https，是ICMP协议，不是TCP/UDP协议"></a>ping的协议不是https，是ICMP协议，不是TCP/UDP协议</h3><p>不要输入<code>ping www.google.comping</code>,<br>Ping无法走代理。<br>如果你坚持要能Ping通才行，请考虑常规VPN（PPTP/L2PT/IPSec等）。</p>
<p>设置代理基本思路 : 配置梯子的 ip : port ,梯子会为通过此端口的流量加密混淆 , 将配置端口的命令以某种格式写入到配置文件中实现长久代理</p>
<figure class="highlight plain"><figcaption><span>-vv</span><a target="_blank" rel="noopener" href="http://www.google.com```，用这条命令来验证，查看响应数据即可,有则说明成功">link</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">```curl -I www.google.com``` , 测试连接是否成功的 看状态码是否为 200</span><br><span class="line">失败时```curl: (7) Failed to connect to www.google.com port 80: Timed out```</span><br><span class="line"></span><br><span class="line">直接打开CFW-setting—port点击terminal图标，点击端口是设置端口</span><br><span class="line">速度</span><br><span class="line"></span><br><span class="line">### Windows 下给cmd配置代理</span><br><span class="line">```sh</span><br><span class="line"># 设置本地代理的端口号 7890 为你实际的端口号</span><br><span class="line">set http_proxy=http://127.0.0.1:7890</span><br><span class="line">set https_proxy=http://127.0.0.1:7890</span><br><span class="line"></span><br><span class="line"># 设置代理的用户名和密码（Clash For Windows不需要）</span><br><span class="line"># HTTP</span><br><span class="line">set http_proxy_user=username</span><br><span class="line">set http_proxy_pass=password</span><br><span class="line"></span><br><span class="line"># HTTPS</span><br><span class="line">set https_proxy_user=username</span><br><span class="line">set https_proxy_pass=password</span><br><span class="line"></span><br><span class="line"># 如果需要恢复本地代理（清除代理）</span><br><span class="line">set http_proxy=</span><br><span class="line">set https_proxy=</span><br></pre></td></tr></tbody></table></figure>
<h3 id="Windows-下给终端Git-Bash，配置代理"><a href="#Windows-下给终端Git-Bash，配置代理" class="headerlink" title="Windows 下给终端Git Bash，配置代理"></a>Windows 下给终端Git Bash，配置代理</h3><ul>
<li><p>命令行配置</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置本地代理的端口号 7890 为你实际的端口号</span></span><br><span class="line"><span class="built_in">export</span> http_proxy=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://127.0.0.1:7890</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>配置文件</p>
<blockquote>
<p>每次新建一个终端会话时,默认让终端去走代理,这样就不需要每次都复制拷贝一下了, 代理程序去智能分流(国内 IP 直连,国外走代理)，避免了连接国内 IP 地址时“绕远”.</p>
</blockquote>
<ul>
<li>假设 Git 默认路径为 <code>C:\Program Files\Git</code><br>那么配置文件路径为<br><code>C:\Program Files\Git\etc\bash.bashrc</code></li>
</ul>
</li>
</ul>
<ul>
<li>或者 ~/.gitconfig中添加<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[http]</span><br><span class="line">    proxy = http://127.0.0.1:7890</span><br><span class="line">[https]</span><br><span class="line">    proxy = https://127.0.0.1:7890</span><br></pre></td></tr></tbody></table></figure>


</li>
</ul>
<p>git配置ssh协议代理<br>linux目录 : <code>~/.ssh/config</code> (没有就自己新建一个,注意没有后缀)<br>进入 ssh 配置目录<br><code>cd ~/.ssh</code><br>编辑 config 文件,如果没有那就新建一个 config 文件<br><code>touch config</code><br><code>vi config</code></p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  ProxyCommand <span class="string">"C:\Program Files\Git\mingw64\bin\connect.exe"</span> -H 127.0.0.1:7890 %h %p</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">    ProxyCommand nc -X 5 -x localhost:7890 %h %p</span><br><span class="line"><span class="comment"># 第一行代表所有的 ssh 的主机</span></span><br><span class="line"><span class="comment"># 第二行代表让所有的 ssh 的主机在连接的时候,通过你本地的端口为 7890 的 socks5 代理去连接,一般来讲,本地的 socks5 都是由翻墙工具提供,</span></span><br><span class="line"><span class="comment">#诸如 Surge  ClashX 或者 Ssr,所以,7891这个端口需要换成对应的服务端口即可</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><figcaption><span>```-S```为socks5代理</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">以后不管是在用 git 进行 push 和 pull 操作还是 ssh 连接服务器的时候,均可获得畅快体验,</span><br><span class="line"></span><br><span class="line">### npm配置代理</span><br><span class="line">- 命令行配置</span><br><span class="line">- 文件配置</span><br><span class="line">```~/.npmrc```随便哪一行添加下面的命令</span><br><span class="line">```sh</span><br><span class="line">proxy=http://127.0.0.1:7890</span><br><span class="line">https-proxy=http://127.0.0.1:7890</span><br></pre></td></tr></tbody></table></figure>

<h3 id="在-vscode-中添加-git-bash"><a href="#在-vscode-中添加-git-bash" class="headerlink" title="在 vscode 中添加 git bash"></a>在 vscode 中添加 git bash</h3><p>在 vscode <code>setting.json</code>末尾添加</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//使用Git Bash的配置</span><br><span class="line"><span class="string">"terminal.integrated.shell.windows"</span>: <span class="string">"C:\\Program Files\\Git\\bin\\bash.exe"</span>,</span><br><span class="line"><span class="string">"terminal.integrated.shellArgs.windows"</span>: [<span class="string">"--login"</span>,<span class="string">"-i"</span>]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Windows-下给终端PowerShell配置代理-env-https-proxy-“127-0-0-1-8080”"><a href="#Windows-下给终端PowerShell配置代理-env-https-proxy-“127-0-0-1-8080”" class="headerlink" title="Windows 下给终端PowerShell配置代理 env:https_proxy = “127.0.0.1:8080”"></a>Windows 下给终端PowerShell配置代理 env:https_proxy = “127.0.0.1:8080”</h3><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> registry keys for IE 8, may vary for other versions</span></span><br><span class="line"><span class="variable">$regPath</span> = <span class="string">'HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> Clear-Proxy</span><br><span class="line">{</span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyEnable -Value 0</span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyServer -Value <span class="string">''</span></span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyOverride -Value <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    [Environment]::SetEnvironmentVariable(<span class="string">'http_proxy'</span>, <span class="variable">$null</span>, <span class="string">'User'</span>)</span><br><span class="line">    [Environment]::SetEnvironmentVariable(<span class="string">'https_proxy'</span>, <span class="variable">$null</span>, <span class="string">'User'</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> Set-Proxy</span><br><span class="line">{</span><br><span class="line">    <span class="variable">$proxy</span> = <span class="string">'http://example.com'</span></span><br><span class="line"></span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyEnable -Value 1</span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyServer -Value <span class="variable">$proxy</span></span><br><span class="line">    Set-ItemProperty -Path <span class="variable">$regPath</span> -Name ProxyOverride -Value <span class="string">'&lt;local&gt;'</span></span><br><span class="line"></span><br><span class="line">    [Environment]::SetEnvironmentVariable(<span class="string">'http_proxy'</span>, <span class="variable">$proxy</span>, <span class="string">'User'</span>)</span><br><span class="line">    [Environment]::SetEnvironmentVariable(<span class="string">'https_proxy'</span>, <span class="variable">$proxy</span>, <span class="string">'User'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="在-idea-中添加-git-bash"><a href="#在-idea-中添加-git-bash" class="headerlink" title="在 idea 中添加 git bash"></a>在 idea 中添加 git bash</h3><p>setting-tools-terminal-application settiing-shell path<br><code>"C:\\Program Files\\Git\\bin\\bash.exe" --login -i</code></p>
<p>就是两条命令，前两条。<br>要点<br>一定要加 <code>http://</code>，直接写域名或者 IP 不行。<br>http 和 https 都要设置。</p>
<h3 id="linux-配置终端代理"><a href="#linux-配置终端代理" class="headerlink" title="linux 配置终端代理"></a>linux 配置终端代理</h3><p>推荐使用qv2r*y<br>archlinux 下载 :</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S v2r*y</span><br><span class="line">sudo pacman -S qv2r*y</span><br></pre></td></tr></tbody></table></figure>

<p>配置代理 :</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=http://127.0.0.1:7890;<span class="built_in">export</span> https_proxy=http://127.0.0.1:7890</span><br></pre></td></tr></tbody></table></figure>
<p>添加到当前 shell 的配置文件中,<br>比如 zsh 的配置文件为家目录下的<code>~/.zshrc</code></p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置本地代理的端口号 7890 为你实际的端口号</span></span><br><span class="line"><span class="built_in">export</span> http_proxy=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> all_proxy=socks5://127.0.0.1:7891</span><br></pre></td></tr></tbody></table></figure>

<p>VM虚拟机配置共享主机，访问外网<br>查看是否启动VM服务(win+R)输入:<code>services.msc</code><br>代理工具设置允许来自局域网的访问：<br>5、VMware可以设置为NAT模式，或者桥接（桥接需要编辑虚拟网络编辑器–更改设置–添加网络-选择桥接模式–选择实体网卡即可），建议使用NAT简单</p>
<p>6、设置网络浏览器中的代理设置，设置的IP为主机的IP，端口号默认为7890<br>则浏览器即可使用主机的网络访问外网</p>
<p>、设置虚拟机中的终端设置临时代理：</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=http://主机IP:7890</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://主机IP:7890</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/http-fang-fa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/http-fang-fa/" class="post-title-link" itemprop="url">HTTP 方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>常见的 HTTP 方法、接口的分类： </p>
<p>GET 请求</p>
<ul>
<li>可以用浏览器直接访问</li>
<li>请求参数直接放在URL后面，明文传递</li>
</ul>
<p>POST请求</p>
<ul>
<li>不能使用浏览器直接访问</li>
<li>可以用来上传文件、登录注册等需求</li>
<li>通过 request body传递参数，加密传递数据</li>
</ul>
<p>幂等性(Idempotent): 是一个数学上的概念，在这里表示发送一次和多次请求引起的边界效应是一致的，<br>幂等方法是无论调用多少次都得到相同请求结果的 HTTP 方法<br>幂等的方法客户端可以安全地重新请求，因为不会对服务器上的数据造成什么影响。<br>例如：a = 4 是幂等的，但是 a += 4 就是非幂等的</p>
<p>GET 是幂等的，就是对服务器没有副作用；POST 非幂等，就是每一次创建一个新的东西会影响数据库的数据。<br>    • GET请求参数放到url(明文显示)，长度限制，没有请求体；POST放在Http报文实体的主体请求体，更安全。<br>    post请求携带的数据量比get请求大，多，常用于传输大文本的时候<br>    • get请求所包含的参数会被缓存(浏览器cache)，而post不会<br>    • get的url能被存为标签，post不会<br>    • get只能被url编码，而post可以被多种编码<br>    • get只接受ASCII字符，而post没有限制<br>    • get后退无害，而post后退会再次发送请求</p>
<p>高级区别：<br>HTTP的底层是TCP/IP。所以GET和POST的底层也是TCP/IP，也就是说，GET/POST都是TCP链接。<br>GET和POST能做的事情是一样一样的。你要给GET加上request body，给POST带上url参数，技术上是完全行的通的。<br>    • get产生一个tcp数据包，post产生两个数据包。<br>对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；<br>而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。</p>
<p>也就是说，GET只需要汽车跑一趟就把货送到了，而POST得跑两趟，第一趟，先去和服务器打个招呼“嗨，我等下要送一批货来，你们打开门迎接我”，然后再回头把货送过去。</p>
<p>因为POST需要两步，时间上消耗的要多一点，看起来GET比POST更有效。因此Yahoo团队有推荐用GET替换POST来优化网站性能。但这是一个坑！跳入需谨慎。为什么？</p>
<ol>
<li>GET与POST都有自己的语义，不能随便混用。</li>
<li>据研究，在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。</li>
<li>并不是所有浏览器都会在POST中发送两次包，Firefox就只发送一次。</li>
</ol>
<p>（1）web开发中 Post 和 Get 有哪些区别，各适合用于什么情况 ？<br>    一般向服务器请求数据资源用Get；<br>    向服务器发送处理数据用Post。</p>
<p>（2）http协议中get、post的区别详解？<br> ① 功能差异：<br>    get ：获取数据，客户端去服务器端取数据。</p>
<pre><code>post：提交数据，从客户端向服务器上传数据。
</code></pre>
<p>② 数据传输：<br>   get：通过URL里面加上参数去把数据传输给服务器端，然后服务器端根据发送过来参数返回对应内容。<br>   get把请求的数据拼接在URL后面，在地址栏里提交(长度受地址栏限制<br>   浏览器的地址栏会显示出来当前URL，get会把所有的数据放到url部分，数据会以明文显示对于用户来说是可见的，并且浏览器会有历史记录的功能。</p>
<p>  post：URL唯一标识，通过唯一标识向唯一标识路径下提交一些数据，数据在Body部分放着不在URL里面，<br>  Post把所有请求的数据放到WebForm里Body里面提交给服务器，以表单的形式提交,服务器会把Body(消息主题)里面的数据存储到服务器端数据库。<br>  post会把所有的数据放到Body部分，这一部分是浏览器无法记录，地址栏也是无法直接发送一个post请求，post请求一般在页面里面通过form表单或者Ajax等方式发送一个请求给服务器端。post把所有数据放到Body部分对于用户来说是不可见的</p>
<p>③ 安全性：post相对于get更安全。安全指的是是否会修改数据。<br>安全性：GET,HEAD 和 OPTIONS 均被认为是安全的方法，因为它们旨在实现对数据的获取，并不具有’边界效应(side effect)’<br>无论是get还是post如果传输的数据未经过加密，通过第三方抓包工具依然是可以把数据抓取到的，一旦抓取到数据还是可以看到传输的数据内容都包含哪些。<br>为了保证传输的内容安全，一般对关键信息或者敏感信息都会采用这种加密的形式。<br>GET 方法是从指定的资源请求数据<br>GET 请求可被缓存<br>GET 请求保留在浏览器历史记录中<br>GET 请求可被收藏为书签<br>GET 请求不应在处理敏感数据时使用<br>GET 请求有长度限制GET 请求只应当用于取回数据</p>
<p>POST 方法向指定资源提交要被处理的数据<br>POST 请求不会被缓存<br>POST 请求不会保留在浏览器历史记录中<br>POST 不能被收藏为书签</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/io-duo-lu-fu-yong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/io-duo-lu-fu-yong/" class="post-title-link" itemprop="url">HTML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Unix网络编程中提到了5种网络模型</p>
<ul>
<li>Blocking IO 阻塞式IO，一次只能处理一个请求。</li>
<li>Noblocking IO 非阻塞式IO</li>
<li>IO multiplexing IO多路复用（高并发框架使用）</li>
<li>Signal Driven IO 信号驱动的IO</li>
<li>Asynchronous IO 异步IO</li>
</ul>
<p>如何提升服务器的并发能力呢？就是如何处理多个客户端连接<br>一些常见的提升并发能力的方式</p>
<ul>
<li>多线程模型，创建新的线程处理请求</li>
<li>多进程模型，创建新的进程处理请求</li>
</ul>
<p>线程 / 进程创建开销比较大，可以用线程池方式解决<br>线程 / 进程比较占用资源，难以同时创建太多</p>
<p>现在服务器基本使用 IO多路复用，实现单进程同时处理多个 socket 请求。</p>
<p>3.什么是IO多路复用？<br>IO多路复用就是操作系统提供的同时监听多个 socket 的机制</p>
<ul>
<li>为了实现高并发需要一种机制并发处理多个 socket</li>
<li>Linux 常见的是 select / poll / epoll 系统调用</li>
<li>可以使用单线程单进程处理多个 socket<br>为什么 select 就能实现高并发呢？<br>select 可以同时处理多个 socket，有一个就绪应用程序代码就可以处理它<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用IO复用代码格式</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    events = sel.select()    <span class="comment"># 系统阻塞在select，直到有一个socket就绪</span></span><br><span class="line">    <span class="keyword">for</span> key,mask <span class="keyword">in</span> events:   <span class="comment"># 当socket就绪之后就遍历事件</span></span><br><span class="line">        callback = key.data</span><br><span class="line">        callback(key.fileobj, mask)</span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>重点是索引就绪文件的时间复杂度，一般优先使用epoll,O(1)</p>
<p>Python 封装了操作系统的IO多路复用<br>Python 的IO多路复用基于操作系统实现( select / poll / epoll )<br>Python2 select 模块<br>Python3 selectors 模块<br>selectors模块<br>事件类型: </p>
<ul>
<li>EVENT_READ 表示socket可读，</li>
<li>EVENT_WRITE 表示socket可写</li>
</ul>
<p>Default selector:自动根据平台选取合适的o模型</p>
<ul>
<li>register(fileobj, events, data=None)</li>
<li>unregister(fileobj)</li>
<li>modify(fileobj, events, data=None)</li>
<li>select(timeout=None): returns[(key, events)]</li>
<li>close()</li>
</ul>
<p>下面是一个简单的echo服务器实现 ：异步的TCP回显,它能够并发的处理客户端请求，把客户端发的再发回去，这就是TCP回显服务器。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> selectors</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"> </span><br><span class="line">sel = selectors.DefaultSelector()</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">accept</span>(<span class="params">sock, mask</span>):</span></span><br><span class="line">    conn, addr = sock.accept()  <span class="comment"># Should be ready</span></span><br><span class="line">    print(<span class="string">'accepted'</span>, conn, <span class="string">'from'</span>, addr)</span><br><span class="line">    conn.setblocking(<span class="literal">False</span>)</span><br><span class="line">    sel.register(conn, selectors.EVENT_READ, read)  <span class="comment"># 注册read回调</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">conn, mask</span>):</span></span><br><span class="line">    data = conn.recv(<span class="number">1000</span>)  <span class="comment"># Should be ready</span></span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        print(<span class="string">'echoing'</span>, repr(data), <span class="string">'to'</span>, conn)</span><br><span class="line">        conn.send(data)  <span class="comment"># Hope it won't block</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'closing'</span>, conn)</span><br><span class="line">        sel.unregister(conn)</span><br><span class="line">        conn.close()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 服务端</span></span><br><span class="line">sock = socket.socket()</span><br><span class="line">sock.bind((<span class="string">'localhost'</span>, <span class="number">1234</span>))</span><br><span class="line">sock.listen(<span class="number">100</span>)</span><br><span class="line">sock.setblocking(<span class="literal">False</span>)</span><br><span class="line">sel.register(sock, selectors.EVENT_READ, accept) <span class="comment"># 注册accept回调</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:       <span class="comment"># 事件循环</span></span><br><span class="line">    events = sel.select()</span><br><span class="line">    <span class="keyword">for</span> key, mask <span class="keyword">in</span> events:</span><br><span class="line">        callback = key.data</span><br><span class="line">        callback(key.fileobj, mask)</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/lrucache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/lrucache/" class="post-title-link" itemprop="url">HTML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Markdown/" itemprop="url" rel="index"><span itemprop="name">Markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>假如空间有限怎么办，我们不可能一直向缓存塞东西，当缓存达到一定个数之后，当缓存空间不够用的时候需要一种方法剔除key，我们需要一种策略踢出一些元素，用来给新的元素腾出空间。</p>
<ul>
<li>缓存剔除（失效）策略</li>
<li>LFU(Least-Frequently-Used): 缓存污染问题(一个先前流行的缓存对象会在缓存中驻留很长时间)、(从使用次数下手把次数最少剔除掉)，</li>
<li>First in First out(FIFO)</li>
<li>Random Cache: 随机选一个删除</li>
</ul>
<h3 id="LRUCache-Least-Recently-Used-替换掉最近最少使用的对象"><a href="#LRUCache-Least-Recently-Used-替换掉最近最少使用的对象" class="headerlink" title="LRUCache Least-Recently-Used 替换掉最近最少使用的对象"></a>LRUCache Least-Recently-Used 替换掉最近最少使用的对象</h3><ul>
<li>(从使用的时间下手把时间长剔除掉), 实际中使用最广。cpu缓存淘汰和虚拟内存效果好，web应用欠佳，比如 redis 就实现了这个策略，</li>
<li>LRU通过使用一个循环双端队列不断把最新访问的 Key 放到表头，就是把最新访问的放到最前(右边)，把最远的访问保持在尾部(左边)，把最远访问的key剔除就可以了。</li>
</ul>
<h3 id="146-LRUCache-缓存机制的实现"><a href="#146-LRUCache-缓存机制的实现" class="headerlink" title="146. LRUCache 缓存机制的实现"></a>146. LRUCache 缓存机制的实现</h3><p>   字典用来缓存，循环双端链表用来记录访问顺序</p>
<ul>
<li>利用Python 内置的 dict +collections.OderedDict(它可以记录key访问顺序) 实现</li>
<li>dict 用来当做 k/v 键值对的缓存</li>
<li>OderedDict 用来实现更新最近访问的 key</li>
</ul>
<p>要想实现一个 LRU，我们需要一种方式能够记录访问的顺序，并且每次访问之后我们要把最新使用到的元素放到最后（表示最新访问）。<br>当容量满了以后，我们踢出最早访问的元素。假如用一个链表来表示的话：</p>
<p>[1] -&gt; [2] -&gt; [3]</p>
<p>假设最后边是最后访问的，当访问到一个元素以后，我们把它放到最后。当容量满了，我们踢出第一个元素就行了。<br>一开始的想法可能是用一个链表来记录访问顺序，但是单链表有个问题就是如果访问了中间一个元素，我们需要拿掉它并且放到链表尾部。<br>而单链表无法在O(1)的时间内删除一个节点（必须要先搜索到它），但是双端链表可以，因为一个节点记录了它的前后节点，<br>只需要把要删除的节点的前后节点链接起来就行了。<br>还有个问题是如何把删除后的节点放到链表尾部，如果是循环双端链表就可以啦，我们有个 root 节点链接了首位节点，<br>只需要让 root 的前一个指向这个被删除节点，然后让之前的最后一个节点也指向它就行了。</p>
<p>使用了循环双端链表之后，我们的操作就都是 O(1) 的了。这也就是使用一个 dict 和一个 循环双端链表 实现LRU 的思路。<br>不过一般我们使用内置的 OrderedDict(原理和这个类似)就好了，要实现一个循环双端链表是一个不简单的事情，因为链表操作很容易出错。</p>
<p>补充：其实 lru 有个缺点就是额外的链表比较占用空间，如果你感兴趣的话可以看看 redis 如何实现的 lru 算法</p>
<p>运用你所掌握的数据结构，设计和实现一个 LRU (最近最少使用) 缓存机制。<br>它应该支持以下操作： 获取数据 get 和 写入数据 put 。<br>实现 LRUCache 类：</p>
<ul>
<li>LRUCache(int capacity) 以正整数作为容量&nbsp;capacity 初始化 LRU 缓存</li>
<li>获取数据 get(key) - 如果关键字 (key) 存在于缓存中，则获取关键字的值（总是正数），否则返回 -1。</li>
<li>写入数据 put(key, value) - 如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字/值」。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值，从而为新的数据值留出空间。<br>进阶:<br>你是否可以在 O(1) 时间复杂度内完成这两种操作？</li>
</ul>
<p>示例：</p>
<figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">输入</span><br><span class="line">[<span class="string">"LRUCache"</span>, <span class="string">"put"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"put"</span>, <span class="string">"get"</span>, <span class="string">"get"</span>, <span class="string">"get"</span>]</span><br><span class="line">[[<span class="number">2</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">1</span>], [<span class="number">3</span>, <span class="number">3</span>], [<span class="number">2</span>], [<span class="number">4</span>, <span class="number">4</span>], [<span class="number">1</span>], [<span class="number">3</span>], [<span class="number">4</span>]]</span><br><span class="line">输出</span><br><span class="line">[<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="literal">null</span>, <span class="number">-1</span>, <span class="literal">null</span>, <span class="number">-1</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">解释</span><br><span class="line">LRUCache lRUCache = new LRUCache(<span class="number">2</span>);</span><br><span class="line">lRUCache.put(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 缓存是 {1=1}</span></span><br><span class="line">lRUCache.put(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// 缓存是 {1=1, 2=2}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">1</span>);    <span class="comment">// 返回 1</span></span><br><span class="line">lRUCache.put(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">2</span>);    <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">lRUCache.put(<span class="number">4</span>, <span class="number">4</span>); <span class="comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">1</span>);    <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">3</span>);    <span class="comment">// 返回 3</span></span><br><span class="line">lRUCache.<span class="keyword">get</span>(<span class="number">4</span>);    <span class="comment">// 返回 4</span></span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/lru-cache</span></span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br><span class="line"></span><br><span class="line">LRUCache cache = new LRUCache( <span class="number">2</span> <span class="comment">/* 缓存容量 */</span> );</span><br><span class="line"></span><br><span class="line">cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">cache.put(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">1</span>); <span class="comment">// 返回 1</span></span><br><span class="line">cache.put(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// 该操作会使得关键字 2 作废</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">2</span>); <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.put(<span class="number">4</span>, <span class="number">4</span>); <span class="comment">// 该操作会使得关键字 1 作废</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">1</span>); <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.<span class="keyword">get</span>(<span class="number">3</span>); <span class="comment">// 返回 3</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>():</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, capacity=<span class="number">128</span></span>):</span> </span><br><span class="line">        <span class="comment"># 参数capacity表示容量,允许128个key/value存在</span></span><br><span class="line">        self.od = OrderedDict() </span><br><span class="line">        self.capacity = capacity  </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key</span>):</span> <span class="comment"># 每次访问更新最新使用的 key</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.od: </span><br><span class="line">            val = self.od[key]  <span class="comment"># 取出key对应value值</span></span><br><span class="line">            <span class="comment"># 把key放到最尾部，就是最近访问的放到最右边</span></span><br><span class="line">            self.od.move_to_end(key) </span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, key, value</span>):</span> <span class="comment"># 更新key/value的值</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.od:</span><br><span class="line">            <span class="keyword">del</span> self.od[key] <span class="comment"># 删除</span></span><br><span class="line">            self.od[key] = value  <span class="comment"># 重新赋值，跟新key到表头</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># insert</span></span><br><span class="line">            self.od[key] = value</span><br><span class="line">            <span class="comment"># 判断当前容量是否已经满了</span></span><br><span class="line">            <span class="keyword">if</span> len(self.od) &gt; self.capacity:</span><br><span class="line">                self.od.popitem(last=<span class="literal">False</span>) <span class="comment"># 把最早的key删除</span></span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, key=None, value=None</span>):</span></span><br><span class="line">        self.key = key</span><br><span class="line">        self.value = value</span><br><span class="line">        self.prev = <span class="literal">None</span></span><br><span class="line">        self.next = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, capacity: int</span>):</span></span><br><span class="line">        self.capacity = capacity</span><br><span class="line">        self.hashmap = {}  <span class="comment"># 集合</span></span><br><span class="line">        <span class="comment"># 新建两个节点 head 和 tail</span></span><br><span class="line">        self.head = ListNode()</span><br><span class="line">        self.tail = ListNode()</span><br><span class="line">        <span class="comment"># 初始化链表为 head &lt;-&gt; tail</span></span><br><span class="line">        self.head.next = self.tail</span><br><span class="line">        self.tail.prev = self.head</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 因为get与put操作都可能需要将双向链表中的某个节点移到末尾，所以定义一个方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_node_to_tail</span>(<span class="params">self, key</span>):</span></span><br><span class="line">        <span class="comment"># 先将哈希表key指向的节点拎出来，为了简洁起名node</span></span><br><span class="line">        <span class="comment">#      hashmap[key]                               hashmap[key]</span></span><br><span class="line">        <span class="comment">#           |                                          |</span></span><br><span class="line">        <span class="comment">#           V              --&gt;                         V</span></span><br><span class="line">        <span class="comment"># prev &lt;-&gt; node &lt;-&gt; next         pre &lt;-&gt; next   ...   node</span></span><br><span class="line">        node = self.hashmap[key]</span><br><span class="line">        node.prev.next = node.next</span><br><span class="line">        node.next.prev = node.prev</span><br><span class="line">        <span class="comment"># 之后将node插入到尾节点前</span></span><br><span class="line">        <span class="comment">#                 hashmap[key]                 hashmap[key]</span></span><br><span class="line">        <span class="comment">#                      |                            |</span></span><br><span class="line">        <span class="comment">#                      V        --&gt;                 V</span></span><br><span class="line">        <span class="comment"># prev &lt;-&gt; tail  ...  node                prev &lt;-&gt; node &lt;-&gt; tail</span></span><br><span class="line">        node.prev = self.tail.prev</span><br><span class="line">        node.next = self.tail</span><br><span class="line">        self.tail.prev.next = node</span><br><span class="line">        self.tail.prev = node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key: int</span>) -&gt; int:</span></span><br><span class="line">        res = self.hashmap.get(key, <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">if</span> res == <span class="number">-1</span>:</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果已经在链表中了久把它移到末尾（变成最新访问的）</span></span><br><span class="line">            self.move_node_to_tail(key)</span><br><span class="line">            <span class="keyword">return</span> res.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, key: int, value: int</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.hashmap:</span><br><span class="line">            <span class="comment"># 如果key本身已经在哈希表中了就不需要在链表中加入新的节点</span></span><br><span class="line">            <span class="comment"># 但是需要更新字典该值对应节点的value</span></span><br><span class="line">            self.hashmap[key].value = value</span><br><span class="line">            <span class="comment"># 之后将该节点移到末尾</span></span><br><span class="line">            self.move_node_to_tail(key)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> len(self.hashmap) == self.capacity:</span><br><span class="line">                <span class="comment"># 去掉哈希表对应项</span></span><br><span class="line">                self.hashmap.pop(self.head.next.key)</span><br><span class="line">                <span class="comment"># 去掉最久没有被访问过的节点，即头节点之后的节点</span></span><br><span class="line">                self.head.next = self.head.next.next</span><br><span class="line">                self.head.next.prev = self.head</span><br><span class="line">            <span class="comment"># 如果不在的话就插入到尾节点前</span></span><br><span class="line">            new = ListNode(key, value)</span><br><span class="line">            self.hashmap[key] = new</span><br><span class="line">            new.prev = self.tail.prev</span><br><span class="line">            new.next = self.tail</span><br><span class="line">            self.tail.prev.next = new</span><br><span class="line">            self.tail.prev = new</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    cache = LRUCache(<span class="number">2</span>)</span><br><span class="line">    cache.put(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    cache.put(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    print(cache.get(<span class="number">1</span>))</span><br><span class="line">    cache.put(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">    print(cache.get(<span class="number">2</span>))</span><br><span class="line">    cache.put(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">    print(cache.get(<span class="number">1</span>))</span><br><span class="line">    print(cache.get(<span class="number">3</span>))</span><br><span class="line">    print(cache.get(<span class="number">4</span>))</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/mvc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/mvc/" class="post-title-link" itemprop="url">MVC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>什么是 MVC模式？<br>mvc出现的意义就是解耦，比如：模型代表数据，视图代表展示层，控制器代表操作，<br>解耦数据、展示和操作。</p>
<p>M=Mode 模型：负责业务对象和数据库的交互(ORM)。数据模型层，通常对数据加工和一些其它处理 ( 数据相关操作 )。<br>V=View 视图：负责与用户的交互展示，前端输出的内容,比如:颜色、文字、表单等等。视图层，跟用户交互的页面上东西。<br>一个视图的工作就是：从参数获取数据，装载一个模板，然后将根据获取的数据对模板进行渲染。<br>C= Controller控制器：起到粘合剂的作用，接收请求参数调用模型和视图完成请求，实现的功能,比如:加减乘除、增删改写。业务处理层，处理业务逻辑。</p>
<p>&nbsp; &nbsp; &nbsp;图解：典型的一个web框架使用MVC模式怎么处理请求。首先用户在浏览器输入url之后，后端web框架通过url的routes，寻找url匹配之后调用那个controller，在controller通过model跟数据库一个交互，然后通过调用view层去展示逻辑这里一般指模板渲染。但随着现在这种前后分离比较流行之后，视图层只是做序列化的工作。</p>
<h3 id="ORM-Object-Relational-Mapping，对象关系映射"><a href="#ORM-Object-Relational-Mapping，对象关系映射" class="headerlink" title="ORM Object Relational Mapping，对象关系映射"></a>ORM Object Relational Mapping，对象关系映射</h3><p>&nbsp; &nbsp;用于实现业务对象与数据表中的字段映射 ，比较流行 Sqlalchemy / Django自带的 Django ORM / 轻量级Peewee 。<br>优势：代码更加面向对象面向对象的编程思想，代码量更少，灵活性高，方便扩充，提升开发效率。<br>◆少写(几乎不写)SQL,提升开发效率<br>◆支持多种类型的数据库,方便切换<br>◆ORM技术成熟,能解决绝大部分问题</p>
<p>缺点：拼接对象比较耗时，有一定性能影响<br>一般都是优先使用 ORM 框架提升开发效率和可维护性</p>
<p>Django框架提供了ORM来解决数据持久化问题，<br>因为Python是面向对象的编程语言，在Python程序中使用对象模型来保存数据，<br>而关系型数据库使用关系模型，用二维表来保存数据，这两种模型并不匹配。<br>使用ORM是为了实现对象模型到关系模型的<strong>双向转换</strong>，这样就不用在Python代码中书写SQL语句和游标操作，因为这些都会由ORM自动完成。</p>
<p>模型类都直接或间接继承自<code>Model</code>类，<br>模型类跟关系型数据库的二维表对应，<br>模型对象跟表中的记录对应，<br>模型对象的属性跟表中的字段对应。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/os/" class="post-title-link" itemprop="url">OS模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>OS模块 operating system 提供了不少与操作系统相关联的函数<br>sys: 通常用于命令行参数</p>
<p>要使用这个模块，你必须先导入它，然后才可以调用相关的各种功能。<br>模块导入：<code>import os</code></p>
<p>函数/变量描述<br>environ包含环境变量的映射</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">```sep```路径中使用的分隔符</span><br><span class="line">```pathsep```分隔不同路径的分隔符</span><br><span class="line">```linesep```行分隔符(\n'、\r'或\r\n')</span><br><span class="line">```urandom(n)```返回n个字节的强加密随机数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">print(dir(os))</span><br><span class="line"># &lt;returns a list of all module functions&gt;</span><br><span class="line"></span><br><span class="line">print(help(os))</span><br><span class="line"># &lt;returns an extensive manual page created from the module's docstrings&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><code>os.path</code> </p>
<h3 id="文件目录相关操作"><a href="#文件目录相关操作" class="headerlink" title="文件目录相关操作"></a>文件目录相关操作</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.path)</span><br><span class="line"><span class="comment"># &lt;module 'ntpath' from 'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38\\lib\\ntpath.py'&gt;</span></span><br><span class="line">print(sys.path)  <span class="comment"># 模块的路径集</span></span><br><span class="line">[<span class="string">'c:\\python代码\\牛客网剑指offer66题思路分析\\代码'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38\\python38.zip'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38\\DLLs'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38\\lib'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Roaming\\Python\\Python38\\site-packages'</span>, <span class="string">'C:\\Users\\rose\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages'</span>]</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><figcaption><span>返回文件名</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">```os.path.dirname(path)```    返回文件目录路径</span><br><span class="line">```os.path.split(path)``` 用元祖返回目录路径和文件名，且两者用","分割</span><br><span class="line">```os.path.join(path1[, path2[, ...]])```表示当前所处的文件夹上一级文件夹的绝对路径，把目录和文件名合成一个路径 </span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">print(os.path.basename('/root/runoob.txt'))  # runoob.txt</span><br><span class="line">print(os.path.dirname('/root/runoob.txt'))  # /root</span><br><span class="line">print(os.path.split('/root/runoob.txt'))  # ('/root', 'runoob.txt')</span><br><span class="line">print(os.path.join('root', 'test', 'runoob.txt'))  # root\test\runoob.txt</span><br></pre></td></tr></tbody></table></figure>

<p><code>os.path.splitext(path)</code><br>Split the pathname path into a pair (root, ext) such that root + ext == path, and ext is empty or begins with a period and contains at most one period. Leading periods on the basename are ignored; splitext(‘.cshrc’) returns (‘.cshrc’, ‘’).</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">```os.path.isdir("dir1")```判断是否是文件夹，</span><br><span class="line">```os.path.isfile("file")```判断是否是文件</span><br><span class="line"></span><br><span class="line">```os.path.abspath('.')```表示当前所处的文件夹的绝对路径  </span><br><span class="line">```os.path.abspath('..')```表示当前所处的文件夹上一级文件夹的绝对路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```os.listdir(path)```返回指定的文件夹所包含的文件或文件夹名字的列表。</span><br><span class="line"></span><br><span class="line">### 执行文件处理操作的方法</span><br><span class="line">```os.rename(current_file_name, new_file_name)```重命名文件</span><br><span class="line">两个参数，当前的文件名和新文件名。</span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 重命名一个已经存在的文件test1.txt到test2.txt。</span><br><span class="line">os.rename( "test1.txt", "test2.txt" )</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">unlink的功能和remove一样是删除一个文件，但是删除一个删除一个正在使用的文件会报错。</span><br><span class="line"></span><br><span class="line">```os.remove(file_name)```删除文件，path是文件的路径，</span><br><span class="line">如果这个路径是一个文件夹，则会抛出OSError的错误，这时需用用```rmdir()```来删除</span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 删除一个已经存在的文件test2.txt</span><br><span class="line">os.remove("test2.txt")</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在删除这个目录之前，它的所有内容应该先被清除，即文件夹需要时空的才能被删除</span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 删除”/tmp/test”目录</span><br><span class="line">os.rmdir( "/tmp/test"  )</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><figcaption><span>递归地删除目录。如果子目录成功被删除，则将会成功删除父目录，子目录没成功删除，将抛异常。</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">```py</span><br><span class="line">import os</span><br><span class="line">for root, dirs, files in os.walk(top, topdown=False):</span><br><span class="line">    for name in files:</span><br><span class="line">        os.remove(os.path.join(root, name))</span><br><span class="line">    for name in dirs:</span><br><span class="line">        os.rmdir(os.path.join(root, name))</span><br></pre></td></tr></tbody></table></figure>

<p><code>shutil.rmtree()</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 在当前目录下创建一个目录test</span><br><span class="line">os.mkdir("test")</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">参数是你想设成当前目录的目录名称</span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 将当前目录改为"/home/newdir"</span><br><span class="line">os.chdir("/home/newdir")</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">参数是你想设成当前目录的目录名称</span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 打印当前的目录路径</span><br><span class="line">print(os.getcwd())</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/python-web-kuang-jia-django-vs-flask-vs-tornado-dui-bi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/python-web-kuang-jia-django-vs-flask-vs-tornado-dui-bi/" class="post-title-link" itemprop="url">Python web框架 Django vs Flask vs Tornado 对比</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Django vs Flask vs Tornado</p>
<p>Django：非常完善大而全框架，内置ORM、Admin等组件，第三方插件较多。</p>
<p>Flask：微框架，插件机制，比较灵活。很多中小公司和个人开发者都非常喜欢使用Flask。Flask优点很多人喜欢它比较灵活，可以使用各种方式组织代码，但是它也有缺点就是过于灵活的话没有统一代码结构很有可能对维护造成一定的困难。所以一些公司它会使用 cookiecutter-flask 模板生成工具来生成统一的项目模板，这样在维护的时候也会比较方便一些，代码格式都比较一致，组织也比较一致。(cookiecutter-flask生成统一的项目模板)</p>
<p>Tornado：异步支持的微框架和异步网络库，它既是是一个web微框架同时也是一个异步网络库，所以也可以用来编写web应用。但是它有一个比较大缺点就是轮子比较少，相关的一些支持和第三方插件非常少。所以有时候写起来需要造很多轮子就会有很多额外的工作，它的生产力可能就不会像Django和Flask那么高。</p>
<p>很多公司其实并不会使用太多的框架混用，因为这样维护成本就比较高，不同的项目都使用的不同框架，所以一般都会有统一的框架或者模板生成。</p>
<p>Web 框架的组成<br>中间件(middleware)，用于请求之前和请求之后做一些处理 ( 比如记录日志等 )。比如在很多web框架里面看到关于日志记录的中间件，请求完成之后需要记录一些日志，这样方便后面分析问题。还有很多在请求之前去做的，比如校验一个用户的合法性跟一个用户的身份，假如这个用户不合法就没有比较往下去执行了。很多框架提供这个功能，比如before_request 和 after_request分别去做什么工作。</p>
<p>web框架常用组件：路由，表单验证、权限认证、ORM、视图函数、模板渲染、序列化。其实看一个请求的生命周期大概就知道用到哪些组件。路由：把url跟所用到的哪个handle来去做映射就是这个url用哪一块 逻辑来去处理。一般拿到参数之后做一个表单的验证，客户端的输入一般都不可信，需要对外界的输入参数来去做一个验证，还有关于用户权限的验证。接下来就是调用ORM框架跟数据库做一个交互，还有视图函数的实现。最后就是使用一些模板渲染框架或者序列化的库来去把数据返回。一个官方实现的web 框架实际上还有很多地方无法满足真正业务需求的，所以还需要大量的第三方插件。</p>
<p>第三方插件：Redis链接，RESTful支持等。如：redispy跟Redis做一个链接；前后端分离之后很多后端服务只用来提供数据，所以很多框架提供Restful的一个实现。</p>
<p>这三块基本上就是一个web 框架的基本组成，现有的大部分框架都实现了部分或者这里面的所用的功能。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
