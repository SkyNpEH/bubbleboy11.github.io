<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<meta name="hexo-config" content="{&quot;hostname&quot;:&quot;bubbleboy11.github.io&quot;,&quot;root&quot;:&quot;/&quot;,&quot;images&quot;:&quot;/images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}">
<meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:type" content="website">
<meta property="og:title" content="外心人D的博客">
<meta property="og:url" content="https://bubbleboy11.github.io/page/12/index.html">
<meta property="og:site_name" content="外心人D的博客">
<meta property="og:description" content="本博客大多内容为慕课和网上博客，并非原创">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="外心人D">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://bubbleboy11.github.io/page/12/">



<meta name="hexo-config-page" content="{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;}">
<meta name="hexo-config-calendar" content="">
<script data-pjax src="/js/load-config.js"></script>
  <title>外心人D的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外心人D的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">外心人D</p>
  <div class="site-description" itemprop="description">本博客大多内容为慕课和网上博客，并非原创</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">254</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/http/" class="post-title-link" itemprop="url">http</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-04 15:18:05" itemprop="dateModified" datetime="2021-05-04T15:18:05Z">2021-05-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>HTTP HyperText Transfer Protocol 超文本传输协议<br>HTTP是基于TCP/IP的关于数据如何在万维网（WWW:World Wide Web ）中如何通信的协议，<br>用来传递来传递数据（HTML 文件, 图片文件, 查询结果等）。<br>是用于从万维网服务器传输超文本到本地浏览器。<br>默认80端口<br>它可以使浏览器更加高效，使网络传输减少。<br>保证计算机正确快速地传输超文本文档，还确定传输文档中的哪一部分，<br>以及哪部分内容首先显示(如文本先于图形)等。<br>HTTP协议采用URL作为定位网络资源的标识<br>以明文的形式传输 效率更高，但是不安全</p>
<p>HTTP协议特点</p>
<ol>
<li>支持客户/服务器模式 基于“请求与响应”模式的的应用层协议</li>
</ol>
<ul>
<li>客户/服务器模式工作的方式是由客户端向服务器发出请求，服务器端响应请求，并进行相应服务</li>
</ul>
<ol start="2">
<li>简单快速</li>
</ol>
<ul>
<li>客户向服务器请求服务时，只需传送请求方法和路径</li>
<li>请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快</li>
</ul>
<ol start="3">
<li>灵活</li>
</ol>
<ul>
<li>HTTP允许传输任意类型的数据对象</li>
<li>正在传输的类型由Content-Type（Content-Type是HTTP包中用来表示内容类型的标识）加以标记。</li>
</ul>
<ol start="4">
<li>无连接</li>
</ol>
<ul>
<li>无连接的含义是限制每次连接只处理一个请求</li>
<li>服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。不建立持久的连接</li>
</ul>
<ol start="5">
<li>无状态</li>
</ol>
<ul>
<li>HTTP协议是无状态协议</li>
<li>无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快<br>HTTP是无状态的，每次发送HTTP实际和之前的HTTP请求都没有什么关系，如何识别用户呢？</li>
</ul>
<p>-HTTPS:HTTP + SSL用安全套接字层传送的超文本传输协议，<br>传输之前采用证书密钥加密数据 ，之后解密获取内容<br>默认端口：443<br>-安全 效率较低，</p>
<p>Http与Https的区别：</p>
<ol>
<li>   HTTP 的URL 以http:// 开头，而HTTPS 的URL 以https:// 开头</li>
<li>   HTTP 是不安全的，而 HTTPS 是安全的</li>
<li>   HTTP 标准端口是80 ，而 HTTPS 的标准端口是443</li>
<li>   在OSI 网络模型中，HTTP工作于应用层，而HTTPS 的安全传输机制工作在传输层</li>
<li>   HTTP 无法加密，而HTTPS 对传输的数据进行加密</li>
<li>   HTTP无需证书，而HTTPS 需要CA机构wosign的颁发的SSL证书</li>
</ol>
<p>HTTP协议由哪些部分组成？可以使用抓包工具去查看和理解<br>请求是发送给接口的数据对象<br>一个HTTP请求由四部分组成：<br>1、状态行 HTTP请求方法或动作，如：GET或POST；正在请求的接口地址URL<br>3、请求头，包含一些客户端环境信息、身份验证信息、Cookies<br>HTTP Header 请求头信息</p>
<ul>
<li>Accept：指定客户端能够接收的内容类型</li>
<li>Accept-Charset：浏览器可以接受的字符编码集。</li>
<li>Authorization: HTTP 授权的授权证书</li>
<li>Content-type：请求的与实体对应的 MIME 信息，发送端实际发送的数据类型</li>
<li>Referer：先前网页的地址，当前请求网页紧随其后，即来路 防盗链</li>
<li>User-Agent:用户代理：知道当前请求对方资源的是什么浏览器，请求载体的身份标识</li>
<li>Connection：请求完毕后，是断开连接还是保持连接</li>
</ul>
<p>4、请求体，即请求正文，可包含提交的查询字符串信息、表单信息等。</p>
<p>一个HTTP响应一般由三个部分组成：</p>
<ol>
<li>一个数字和文字组成的状态码，用来显示请求成功还是失败；</li>
<li>响应头，包含许多有用的信息，</li>
</ol>
<ul>
<li>Server: 服务器类型</li>
<li>Date 日期时间</li>
<li>Content-Type: 服务器响应回客户端的数据类型</li>
<li>Content-Lenth: 服务器响应回客户端的数据长度</li>
<li>application/x-www-form-urlencoded: 请求默认方式，数据是简单、平面的key-value键值对</li>
<li>application/json: 数据是复杂的嵌套关系，有多层数据</li>
<li>multipart/form-data 既可发送文本数据，也支持二进制数据上载</li>
</ul>
<ol start="3">
<li>响应体，即响应正文。<br>​- 请求头之间：\r\n<br>​- 请求头与请求体：\r\n\r\n</li>
</ol>
<p>① 在命令行下查看HTTP协议，可以使用 curl 或 http 命令发起HTTP请求</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># curl www.baidu.com    # 使用curl发起HTTP请求</span></span><br></pre></td></tr></tbody></table></figure>
<p>② 使用http 命令需要首先安装httpie，然后在通过http命令发起HTTP请求</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pip install httpie      # 安装httpie</span></span><br><span class="line">[root@localhost ~]<span class="comment"># http baidu.com          # 使用http发起HTTP请求</span></span><br></pre></td></tr></tbody></table></figure>
<p>查看HTTP协议详细输出过程， http -v 详细输出过程</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># http -v baidu.com</span></span><br><span class="line">GET / HTTP/1.1               <span class="comment"># 状态行包括请求方法、路径url、http协议及版本</span></span><br><span class="line">Accept: */*                  <span class="comment"># 3~7行是http的请求头</span></span><br><span class="line">Accept-Encoding: gzip, deflate    <span class="comment"># 接收的编码</span></span><br><span class="line">Connection: keep-alive            <span class="comment"># 连接，</span></span><br><span class="line">Host: baidu.com                   <span class="comment"># 域名</span></span><br><span class="line">User-Agent: HTTPie/1.0.2          <span class="comment"># 请求的代理</span></span><br><span class="line"><span class="comment"># 请求头和请求体空一行 </span></span><br><span class="line"><span class="comment"># 消息主体（不一定有），这里为空没有显示，一般是由GET请求的时候它就没有消息主体</span></span><br><span class="line">-------------------------------------------------------------------------------------</span><br><span class="line">HTTP/1.1 200 OK                  <span class="comment"># 响应行 下面是HTTP响应</span></span><br><span class="line">Accept-Ranges: bytes             <span class="comment"># 3~7行是http的响应头</span></span><br><span class="line">Cache-Control: max-age=86400</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Content-Length: 81</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Date: Fri, 02 Aug 2019 10:07:15 GMT</span><br><span class="line">ETag: <span class="string">"51-47cf7e6ee8400"</span></span><br><span class="line">Expires: Sat, 03 Aug 2019 10:07:15 GMT</span><br><span class="line">Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">Server: Apache</span><br><span class="line"><span class="comment"># 请求头和请求体空一行 </span></span><br><span class="line">&lt;html&gt;         <span class="comment"># 响应正文。返回的是一个HTML</span></span><br><span class="line">&lt;meta http-equiv=<span class="string">"refresh"</span> content=<span class="string">"0;url=http://www.baidu.com/"</span>&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>fiddler保存HTTP请求文本<br>打开测试页面→到Fiddler中选中该请求→Shift+Del清空其他请求→右键→Save→Selected Sessions→as Text…  </p>
<p>提交一些表单的时候HTTP请求里面就会包含消息主体。</p>
<p>发送一个POST请求，带上hello=World参数 ，也可以加在url</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># http -f POST baidu.com hello=World -v </span></span><br><span class="line">POST / HTTP/1.1                  <span class="comment"># 请求状态行</span></span><br><span class="line">Accept: */*                      <span class="comment"># 3~9是请求头</span></span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 11</span><br><span class="line">Content-Type: application/x-www-form-urlencoded; charset=utf-8</span><br><span class="line">Host: baidu.com</span><br><span class="line">User-Agent: HTTPie/1.0.2</span><br><span class="line"><span class="comment"># 空一行  </span></span><br><span class="line">hello=World                    <span class="comment"># 报文消息主体，当然有时候可以为空</span></span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">HTTP/1.1 200 OK           <span class="comment"># 响应状态行，包括HTTP版本、状态码200、OK表示成功</span></span><br><span class="line">Accept-Ranges: bytes      <span class="comment"># 14~23是响应头</span></span><br><span class="line">Cache-Control: max-age=86400</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Content-Length: 81</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Date: Fri, 02 Aug 2019 10:13:42 GMT</span><br><span class="line">ETag: <span class="string">"51-47cf7e6ee8400"</span></span><br><span class="line">Expires: Sat, 03 Aug 2019 10:13:42 GMT</span><br><span class="line">Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">Server: Apache</span><br><span class="line"> </span><br><span class="line">&lt;html&gt;         <span class="comment"># 响应正文。返回的是一个HTML</span></span><br><span class="line">&lt;meta http-equiv=<span class="string">"refresh"</span> content=<span class="string">"0;url=http://www.baidu.com/"</span>&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>HTTP persistent connection， HTTP1.1实现长连接<br>短连接：建立连接…数据传输…关闭连接(连接的建立和关闭开销大)</p>
<p>长连接：Connection：Keep-alive。保持 TCP 连接不断开<br>如何区分不同的 HTTP 请求呢？Content-Length | Transfer-Encoding:chunked。</p>
<p>Content-Length首部告诉浏览器报文中实体主体的大小<br>第一种情况 就是客户端告诉服务端发送的 HTTP 请求多长(Content-Length)，接收这么多字节之后就认为你这次HTTP请求就结束了。(静态发送)<br>非KeepAlive模式时，每个请求/应答客户和服务器都要新建一个连接，完成 之后立即断开连接（HTTP协议为无连接的协议）；无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</p>
<p>第二种情况 请求是动态发送的不知道有多长，HTTP提供了一种分段发送方式(| Transfer-Encoding:chunked),每次发送一个chunk size和chunk body告诉每一次发送多长和发送的内容是什么，直到chunksize为0的时候，服务端就认为结束了。(动态发送)</p>
<p>当使用Keep-Alive模式（又称持久连接、连接重用）时，Keep-Alive功能使客户端到服 务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive功能避免了建立或者重新建立连接。通用消息头，允许消息发送者暗示连接的状态，还可以用来设置超时时长和最大请求数。</p>
<p>cookie 和 session 区别<br>需要在服务端给用户生成一个标识，然后每次让客户端带过去给后端，识别用户会话。用户会话就是用户识别的一种方式。</p>
<p>Session“会话控制” 一般是服务器生成之后给客户端 （通过 url参数或cookie）<br>对象存储特定用户会话所需的属性及配置信息。<br>这样，当用户在应用程序的Web页之间跳转时，存储在Session对象中的变量将不会丢失，<br>而是在整个用户会话中一直存在下去。<br>当用户请求来自应用程序的 Web页时，如果该用户还没有会话，<br>则Web服务器将自动创建一个 Session对象。<br>当会话过期或被放弃后，服务器将终止该会话。<br>Session没有大小限制<br>session数据sessionid 识别用户 放在服务器<br>Session 存储安全性较高的数据。</p>
<p>Cookie 是实现 session 的一种机制，通过 HTTP cookie 字段实现<br>类型为“小型文本文件”，<br>是某些网站为了辨别用户身份，进行Session跟踪而储存在用户浏览器终端上的数据（通常经过加密），由用户客户端计算机暂时或永久保存的信息<br>用来存储用户信息的，每次请求会被携带上发送给对方的 浏览器<br>-要获取登录后才能访问的页面<br>-对方的服务器会通过cookie来判断是我们是一个爬虫<br>Cookie不能存储对象<br>Cookie可能会被浏览器禁用。怎么办<br>客户端禁用cookie采用url重写的方式 ，<br>也就是上面说的将sessionid写在url上，<br>用户登陆之后，需要将用户的信息存到Cookie中，<br>但因为Cookie中只能存储字符串，所以想到了先把用户实体序列化成Json串，存储在Cookie中，用到的时候再拿出来反序列化。<br>在客户端的Cookie 中存储session id，以此来标记服务器的哪个session 文件是当前用户的。（session 文件：session 存储介质视服务器而定）<br>Cookie 减轻服务器存储压力，一般存储安全性要求不高的数据。<br>单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。<br>前言<br>HTTP是一种无状态的协议，为了分辨链接是谁发起的，就需要我们自己去解决这个问题。不然有些情况下即使是同一个网站我们每打开一个页面也都要登录一下。而Session和Cookie就是为解决这个问题而提出来的两个机制。</p>
<p>应用场景<br>日常登录一个网站，今天输入用户名密码登录了，第二天再打开很多情况下就直接打开了。这个时候用到的一个机制就是cookie。</p>
<p>session的一个场景是购物车，添加了商品之后客户端处可以知道添加了哪些商品，而服务器端如何判别呢，所以也需要存储一些信息，这里就用到了session。</p>
<p>Cookie<br>通俗讲，Cookie是访问某些网站以后在本地存储的一些网站相关的信息，下次再访问的时候减少一些步骤。另外一个更准确的说法是：Cookies是服务器在本地机器上存储的小段文本并随每一个请求发送至同一个服务器，是一种在客户端保持状态的方案。</p>
<p>Cookie的主要内容包括：名字，值，过期时间，路径和域。使用Fiddler抓包就可以看见，比方说我们打开百度的某个网站可以看到Headers包括Cookie，如下：</p>
<p>BIDUPSID: 9D2194F1CB8D1E56272947F6B0E5D47E<br>PSTM: 1472480791<br>BAIDUID: 3C64D3C3F1753134D13C33AFD2B38367:FG<br>ispeed_lsm: 2<br>MCITY: -131:<br>pgv_pvi: 3797581824<br>pgv_si: s9468756992<br>BDUSS: JhNXVoQmhPYTVENEdIUnQ5S05xcHZMMVY5QzFRNVh5SzZoV0xMVDR6RzV-bEJZSVFBQUFBJCQAAAAAAAAAAAEAAACteXsbYnRfY2hpbGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALlxKVi5cSlYZj<br>BD_HOME: 1<br>H_PS_PSSID: 1423_21080_17001_21454_21408_21530_21377_21525_21193_21340<br>BD_UPN: 123253<br>sug: 3<br>sugstore: 0<br>ORIGIN: 0<br>bdime: 0<br>可以看见是key, value的形式，也就是我们说的对应着的名字，值。过期时间是可以设置的，如果不设置，则浏览器关掉就消失了，是存储在内存当中的，否则就是按照我们设置的时间来存储在硬盘上的，当过期后自动清除，比方说我们开机关机关闭再打开浏览器后他都会还存在，前者称之为Session cookie 又叫 transient cookie，后者称之为Persistent cookie 又叫 permenent cookie。路径和域就是对应的域名，a网站的cookie自然不能给b用。</p>
<p>Session<br>Session是存在服务器的一种用来存放用户数据的类HashTable结构。</p>
<p>　　(什么是hashTable,另一篇文章:–<a target="_blank" rel="noopener" href="https://www.cnblogs.com/goddog1024/p/11174417.html">https://www.cnblogs.com/goddog1024/p/11174417.html</a></p>
<p>当浏览器 第一次发送请求时，服务器自动生成了一个HashTable和一个Session ID用来唯一标识这个HashTable，并将其通过响应发送到浏览器。当浏览器第二次发送请求，会将前一次服务器响应中的Session ID放在请求中一并发送到服务器上，服务器从请求中提取出Session ID，并和保存的所有Session ID进行对比，找到这个用户对应的HashTable。</p>
<p>摘自<a target="_blank" rel="noopener" href="http://caibaojian.com/477.html">http://caibaojian.com/477.html</a></p>
<p>一般这个值会有一个时间限制，超时后毁掉这个值，默认是20分钟。</p>
<p>Session的实现方式和Cookie有一定关系。试想一下，建立一个连接就生成一个session id，那么打开几个页面就好几个了，这显然不是我们想要的，那么该怎么区分呢？这里就用到了Cookie，我们可以把session id存在Cookie中，然后每次访问的时候将Session id带过去就可以识别了，是不是很方便~</p>
<p>区别<br>通过上面的简单叙述，很容易看出来最明显的不同是一个在客户端一个在服务端。因为Cookie存在客户端所以用户可以看见，所以也可以编辑伪造，不是十分安全。</p>
<p>Session过多的时候会消耗服务器资源，所以大型网站会有专门的Session服务器，而Cookie存在客户端所以没什么问题。</p>
<p>域的支持范围不一样，比方说a.com的Cookie在a.com下都能用，而<a target="_blank" rel="noopener" href="http://www.a.com的session在api.a.com下都不能用,解决这个问题的办法是jsonp或者跨域资源共享./">www.a.com的Session在api.a.com下都不能用，解决这个问题的办法是JSONP或者跨域资源共享。</a></p>
<h3 id="浏览器的请求"><a href="#浏览器的请求" class="headerlink" title="浏览器的请求"></a>浏览器的请求</h3><ul>
<li><p>url</p>
</li>
<li><p>在chrome中点击检童，点到network,</p>
</li>
<li><p>url =谓求的协议+网站的域名+资源的路径+参数</p>
</li>
<li><p>浏览器谓求url地址</p>
</li>
<li><p>当前url对应的晌应+js+css+图片—&gt;elements中的内容</p>
</li>
<li><p>爬虫谓求url地址</p>
</li>
<li><p>当前url对应的晌应</p>
</li>
<li><p>elements的内容和爬虫获取到的url地址的晌应不同，爬虫中需要以当 前url地址对应的响应为准提取数据</p>
</li>
<li><p>当前url地址对应的晌应在哪里</p>
</li>
<li><p>从network中找到当前的url地址，点击response</p>
</li>
<li><p>在页面上右键显示网页源码</p>
</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/java-ji-chu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/java-ji-chu/" class="post-title-link" itemprop="url">java基础</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-18 12:30:06" itemprop="dateModified" datetime="2021-04-18T12:30:06Z">2021-04-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>JVM Java Virtual Machine java虚拟机<br>JVM是java平台无关性实现的关键</p>
<h3 id="Java程序执行过程"><a href="#Java程序执行过程" class="headerlink" title="Java程序执行过程"></a>Java程序执行过程</h3><p>源文件.java 编译器compiler 字节码文件.class 解释器interpreter 程序</p>
<p>JDK Java Development Kit 软件开发工具包<br>两个主要主键</p>
<ul>
<li>javac 编译器，将源程序转化为字节码</li>
<li>java 运气编译后的java程序 (.class后缀的)</li>
</ul>
<h3 id="JRE-Java-Runtime-Environment"><a href="#JRE-Java-Runtime-Environment" class="headerlink" title="JRE Java Runtime Environment"></a>JRE Java Runtime Environment</h3><p>包括Java虛拟机(JVM)、Java核心类库和支持文件<br>如果只需要运行Java程序,下载并安装JRE即可<br>如果要开发Java软件，需要下载JDK<br>在JDK中附带有JRE</p>
<p>JRE = JVM+ Javase标准类库<br>JDK = JRE+开发工具集(例如 Javac编译工具等)</p>
<p>Java se Java标准版 桌面程序<br>Java ee Java企业版 Web程序<br>Java me Java微型版 为移动设备提供了基于Java环境的开发与应用平台</p>
<h3 id="编码流程："><a href="#编码流程：" class="headerlink" title="编码流程："></a>编码流程：</h3><p>创建java项目：java project （src 是存放源文件）<br>创建程序包：src目录下右击建（package程序包）<br>编写java源程序：package目录下右击建（class源代码文件）<br>运行java程序：源文件空白处右击选择run as -&gt;java anclication 运行成功<br>（1）创建一个java Project<br>（2）src——创建包java package （Eclipse中的src是用来放置我们的源代码文件；关于Package<br>包名：域名的反向<br>例如：com.imooc<br>class命名：文件开头大写）<br>（3）在包下创建类Java class<br>（4）编写Java源程序： </p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWord</span></span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>{\</span><br><span class="line">System.out.println(<span class="string">"I Love Imooc"</span>);</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloImooc</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"Hello,imooc!"</span>);</span><br><span class="line">        System.out.println(<span class="string">"我爱学Java!"</span>);</span><br><span class="line">            String a =<span class="string">"hello"</span>;</span><br><span class="line">       String b =<span class="string">"www.imooc.com"</span>;</span><br><span class="line">    System.out.println(a+<span class="string">"\n"</span>+b);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="comment">// cd C:\python代码\步骤4 Flask基础及项目实战\Java初识-src\ImoocProj\src</span></span><br><span class="line"><span class="comment">// 编译:C:\code&gt;javac com/imooc/HelloImooc.java</span></span><br><span class="line"><span class="comment">// 运行:C:\code&gt;java com.imooc.HelloImooc</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>Java中的关键字是有对编译器有特殊意义的词，区分大小写</p>
</blockquote>
<ul>
<li><code>class</code>是用来定义类的关键字，编译器遇到class就知道这是创建定义了一个类。</li>
<li><code>public</code>可以删掉，公共的</li>
<li><code>static</code> 定义静态成员的关键字</li>
<li><code>main</code> 主方法定义，程序的入口</li>
<li><code>void</code> 方法返回值的关键字，但 Void 就不是了</li>
<li><code>System</code>首字母大写</li>
</ul>
<p>保留字是Java预留的关键字，虽然现在还没有作为关键字，但是以后的升级版本中会成为关键字<br>保留字包括：goto、const</p>
<p>程序的移植<br>导出：找到项目右击-&gt;properties-&gt;location处显示的就是文件位置-&gt;拷贝-&gt;删除源程序（可略）<br>导入：右侧空白处-&gt;import-&gt;General-&gt;exiting Projects into workspace-&gt;找到导入的项目-&gt;导入</p>
<h3 id="使用标识符identifier-时，需要遵守几条规则："><a href="#使用标识符identifier-时，需要遵守几条规则：" class="headerlink" title="使用标识符identifier 时，需要遵守几条规则："></a>使用标识符identifier 时，需要遵守几条规则：</h3><ol>
<li><p>&nbsp;标识符首字母可以是字母、下划线（_）、美元符（$），加上任意多的数字字母、下划线（_）、美元符（$）组成<br>但不能包含下划线（_）、美元符（$）以外的其它特殊字符开头， @、%、空格等<br>不能以数字开头。譬如：123name&nbsp;就是不合法滴</p>
</li>
<li><p>&nbsp;标识符不能是 Java 关键字和保留字，但可以包含关键字和保留字。<br>如：不可以使用&nbsp;void&nbsp;作为标识符，但是&nbsp;Myvoid&nbsp;可以</p>
</li>
<li><p>变量名由多单词组成时，第一个单词的首字母小写，其后单词的首字母大写，<br>称驼峰命名法），如 myAge</p>
</li>
<li><p>变量命名时，尽量简短且能清楚的表达变量的作用，做到见名知意。<br>如：定义变量名 stuName&nbsp;保存“学生姓名”信息</p>
</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">```print(x + '\n')```输出后不换行</span><br><span class="line">```println()```换行</span><br><span class="line">```println(x)```输出后换行</span><br><span class="line"></span><br><span class="line">### 常量：指程序里持续不变的值</span><br><span class="line">在整个程序运行过程中它是不可改变的。</span><br><span class="line">在声明数定量或变量时，必须制定数据类型。</span><br><span class="line">```final```关键字修饰的常量无法再次赋值</span><br><span class="line"></span><br><span class="line">### 常量名的命名规则 </span><br><span class="line">变量名用大写</span><br><span class="line">```java</span><br><span class="line">        final int N = 6;</span><br><span class="line">        final double PI = 3.14159;</span><br><span class="line">        final double MIN_VALUE = 0;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="变量：在程序运行过程中随时发生变化的来量，程序中数据的临时存放场所"><a href="#变量：在程序运行过程中随时发生变化的来量，程序中数据的临时存放场所" class="headerlink" title="变量：在程序运行过程中随时发生变化的来量，程序中数据的临时存放场所"></a>变量：在程序运行过程中随时发生变化的来量，程序中数据的临时存放场所</h3><p>申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。<br>内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。<br>java变量先定义后使用</p>
<p>变量的三个元素：变量类型、变量名和变量值。<br>通过定义不同类型的变量，可以在内存中储存整数、小数或者字符<br>变量 存的是数据值，直接放在抽屉里的东西 入住的客人<br>变量名，抽屉名字 房间名<br>变量类型 房价类型</p>
<h3 id="变量名的命名规则"><a href="#变量名的命名规则" class="headerlink" title="变量名的命名规则"></a>变量名的命名规则</h3><ul>
<li>满足标识符命名规则</li>
<li>符合驼峰法命名规范，一个单词所有字母小写，多个单词第一个单词全部小写，后面的单词首字母大写，age,stuName</li>
<li>尽量简单，做到见名知意</li>
<li>变量名的长度没有限制</li>
</ul>
<h3 id="类的命名规则"><a href="#类的命名规则" class="headerlink" title="类的命名规则"></a>类的命名规则</h3><ul>
<li>满足Pascal命名法规范<br>当类名是一个单词，首字母大写，多个单词组成，每一个首字母大写</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/jenkins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/jenkins/" class="post-title-link" itemprop="url">持续集成 jenkins</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-02 11:02:19" itemprop="dateModified" datetime="2021-05-02T11:02:19Z">2021-05-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>整个产品的研发到测试到发布的生命周期自动化</p>
<p>互联网软件的开发和发布，已经形成了一套标准流程，最重要的组成部分就是持续集成( Continuous<br>Integration,简称C|)。</p>
<p>持续集成指的是频繁的将代码集成到主干。它的好处主要有两个：</p>
<ul>
<li>快速发现错误。每完成一点更新，就集成到主干，可以快速发现错误，定位错误也比较容易。</li>
<li>防止分支大幅偏离主干。如果不是经常集成，主干又在不断更新，会导致以后集成的难度变大，甚至难以集成。</li>
</ul>
<p>持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。<br>它的核心措施是代码集成到主干之前，必须通过自动化测试，只要有一个测试用例失败，就不能集成。<br>编程大师Martin Fowler曾经说过：“持续集成并不能消除Bug，而是让它们非常容易发现和改正。”<br>它的前提是能够做到完善的自动化测试，自动的构建部署</p>
<p>持续集成思想</p>
<ul>
<li>持续集成是一种软件开发实践，即团队开发成员经常集成他们的工作，通过每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。</li>
<li>每次集成都通过自动化的构建（包括编译，发布，自动化测试）来验证，从而尽早地发现集成错误。</li>
</ul>
<p>接口测试的持续集成</p>
<p>为了快速的产出高质量的软件，在团队开发中持续集成（CI）是一个非常重要的环节。所谓CI，就是一种让计算机自动任意次重复编译、测试、汇报等工作的方法，通过CI可以帮助开发者提早发现问题，降低各种人为失误给项目带来的风险。按照经典的软件过程模型（瀑布模型），集成的工作一般要等到所有的开发工作都结束后才能开始，但这个时候如果发现了问题，修复问题的代价是非常具体的。基本上，集成实施得越晚，代码量越大，解决问题就越困难。持续集成将版本控制、自动化构建、代码测试融入到一起，让这些工作变得自动化和可协作。由于其频繁重复整个开发流程（在指定时间内多次pull源代码并运行测试代码），所以能帮助开发者提早发现问题。</p>
<p>自动化持续集成分为两种方向，一种是针对代码，开发人员每次提交代码，会自动开始进行部署自动化测试，自动化测试代码也是一样的，当每次进行提交，可以让它自动执行自动化测试，自动跑一遍，验证代码，目的是第二种，当有开发代码进行部署之后，用最新版本的自动化测试代码来验证有没有问题</p>
<p>持续集成核心要素</p>
<ol>
<li>统一的代码库</li>
<li>自动构建</li>
<li>自动测试</li>
<li>每个人每天都要向代码库主干提交代码</li>
<li>每次代码递交后都会在持续集成服务器上触发一次构建</li>
<li>保证快速构建</li>
<li>模拟生产环境的自动测试</li>
<li>每个人都可以很容易的获取最新可执行的应用程序</li>
<li>每个人都清楚正在发生的状况</li>
<li>自动化的部署</li>
</ol>
<p>持续集成对于编译型语言的意义更大，对于Python这样的解释型语言，更多的时候是用于对接版本控制系统触发自动化测试并产生相应的报告，类似的功能也可以通过配置<strong>Webhook</strong>来完成。如果要通过Docker这样的虚拟化容器进行项目打包部署或者通过K8S进行容器管理，可以在持续集成平台安装对应的插件来支持这些功能。码云甚至可以直接对接<a target="_blank" rel="noopener" href="https://ding-doc.dingtalk.com/">钉钉开放平台</a>使用钉钉机器人来向项目相关人员发送即时消息。GitLab也对CI和CD（持续交付）提供了支持，具体内容请大家参考<a target="_blank" rel="noopener" href="https://blog.stdioa.com/2018/06/gitlab-cicd-fundmental/">《GitLab CI/CD基础教程》</a>。</p>
<p>Jenkins介绍</p>
<ul>
<li> Jenkins 是一个可扩展的持续集成引擎</li>
<li> 是所有CI产品中在安装和配置上最简单的</li>
<li> 基于Web访问，用户界面非常友好、直观和灵活</li>
</ul>
<p>主要用于：</p>
<ol>
<li>持续、自动地构建/测试软件项目</li>
<li>监控一些定时执行的任务</li>
</ol>
<p>Jenkins特点</p>
<ul>
<li>Jenkins是基于Java开发的</li>
<li>但它不仅限于构建基于Java的软件</li>
<li>Jenkins拥有大量的插件，这些插件极大的扩展了Jenkins的功能，可以直接通过web界面来进行安装与管理</li>
<li>可以快捷的与代码库、ant、maven集成，执行自动化测试</li>
</ul>
<p>下载可以下 windows或者 war</p>
<p>启动</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\\Users\\rose\\Downloads\</span><br><span class="line">java -jar Jenkins.war</span><br><span class="line">1d6da203f2d64c2dba7eedb6a127e2f8  // 初始密码</span><br></pre></td></tr></tbody></table></figure>

<p>浏览器地址栏输入 <a href="localhost:8080">localhost:8080</a> 打开界面<br>浏览器地址栏输入 <a href="localhost:8080/restart">localhost:8080/restart</a> 等于在win10管理中找到jenkins右键重启</p>
<p>可以在Jenkins中安装“Seleniumhq Plugin”插件，这样就可以将Selenium IDE制作的测试用例保存为HTML格式并提供给Jenkins来使用，基本步骤是：</p>
<ul>
<li><p>在执行测试的机器上，从版本控制系统中下载测试套件和测试用例。</p>
</li>
<li><p>在执行测试的机器上下载Selenium Server。</p>
</li>
<li><p>从Jenkins的“系统管理”中选择“插件管理”来安装“Seleniumhq Plugin”。</p>
</li>
<li><p>在Jenkins的“系统管理”中选择“系统设置”并配置“Selenium Remote Control”下的“HTMLSuite Runner”。</p>
</li>
<li><p>新建测试用的Jenkins任务并进行配置，配置的内容包括：浏览器、起始URL、测试套件和测试结果输出文件。</p>
</li>
</ul>
<p>配置完成后，就可以执行Jenkins的“立即构建”了。  </p>
<p>Build periodically 定时执行任务</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/json-he-pickle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/json-he-pickle/" class="post-title-link" itemprop="url">json 和 pickle</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-25 07:43:40" itemprop="dateModified" datetime="2021-05-25T07:43:40Z">2021-05-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>序列化（serialization）在计算机科学的数据处理中，<br>是指将数据结构或对象状态转换为可以存储或传输的形式，<br>这样在需要的时候能够恢复到原先的状态，<br>而且通过序列化的数据重新获取字节时，<br>可以利用这些字节来产生原始对象的副本（拷贝）。<br>与这个过程相反的动作，即从一系列字节中提取数据结构的操作，就是反序列化（deserialization</p>
<p>实现内存中的不可持久化对象与方便持久化在磁盘中或在网络中进行交互的数据格式字节序列(bytes)或者字符序列(str)之间的相互转换：<br>序列化 - 将对象变成字节序列(bytes)或者字符序列(str) - 串行化/腌咸菜<br>反序列化 - 把字节序列或者字符序列还原成对象</p>
<p>　（1）序列化与反序列化是为了解决内存中对象的持久化与传输问题；<br>　　（2）Python中提供了pickle和json两个模块进行序列化与反序列化；<br>　　（3）dumps()和dump()用于序列化，loads()和load()用于反序列化；<br>　　（4）pickle模块能序列化任何对象，序列化结果为bites类型，只适合于Python机器之间交互；<br>　　json模块只能序列化Python基本类型，序列化结果为json格式字符串，适合不同开发语言之间交互</p>
<p>Python标准库对序列化的支持：<br>json - 字符形式的序列化，序列化结果为str类型，能够被多种语言识别，可用于与其他程序设计语言交互。</p>
<p>pickle - 字节形式的序列化，序列化结果为bytes类型，只适合于Python机器之间的交互。</p>
<p><code>dumps()</code>、<code>dump()</code>用于实现序列化，<br><code>loads()</code>、<code>load()</code>用于实现反序列化</p>
<p>JSON JavaScript Object Notation, JavaScript 对象标记/表示法<br>它基于 ECMAScript (欧洲计算机协会制定的js规范)的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。<br>JSON 语法是 JavaScript 对象表示法语法的子集。JSON 是存储和交换文本信息的语法，类似 XML。</p>
<ul>
<li>是轻量级的文本数据交换格式。</li>
</ul>
<p>JSON载体/表现形式：JSON字符串，是指符合JSON格式的字符串</p>
<p>JSON优势：</p>
<ul>
<li>比 XML 更小、更快</li>
<li>网络传输效率高</li>
<li>有自我描述性， 更易理解,简洁和清晰的层次结构</li>
<li>JSON 使用 JavaScript 语法来描述数据对象， 但是 JSON 仍然独立于语言和平台。JSON 解析器和 JSON 库支持不同的编程语言。适合跨语言交换数据</li>
<li>易于人阅读和编写</li>
<li>易于机器解析和生成</li>
<li>在web后台开发中通常用json模块来序列化而不是pickle模块。</li>
</ul>
<p>JSON 数据格式</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"employees"</span>: [</span><br><span class="line">        { <span class="attr">"firstName"</span>:<span class="string">"Bill"</span> , <span class="attr">"lastName"</span>:<span class="string">"Gates"</span> },</span><br><span class="line">        { <span class="attr">"firstName"</span>:<span class="string">"George"</span> , <span class="attr">"lastName"</span>:<span class="string">"Bush"</span> },</span><br><span class="line">        { <span class="attr">"firstName"</span>:<span class="string">"Thomas"</span> , <span class="attr">"lastName"</span>:<span class="string">"Carter"</span> }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>JSON中只能使用双引号<code>""</code>，不能用单引号<code>''</code><br>数据在名称/值对中。<br>数据由逗号分隔。<br>花括号保存对象。<br>方括号保存数组。</p>
<p>Python中内置了json这个库<br>JSON和Python内置的数据类型对应如下：</p>
<table>
<thead>
<tr>
<th>Json类型</th>
<th>Python类型</th>
</tr>
</thead>
<tbody><tr>
<td><code>{}</code></td>
<td><code>dict</code></td>
</tr>
<tr>
<td><code>[]</code></td>
<td><code>list</code></td>
</tr>
<tr>
<td><code>"string"</code></td>
<td><code>'str'</code> 或 <code>u'unicode'</code></td>
</tr>
<tr>
<td><code>1234.56</code></td>
<td>存储<code>int</code>或<code>float</code></td>
</tr>
<tr>
<td><code>true</code>/<code>false</code></td>
<td><code>True</code>/<code>False</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td><code>None</code></td>
</tr>
</tbody></table>
<p><code>json.dumps(obj, fp, *, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, default=None, sort_keys=False, **kw)</code>对象序列化<br>Python 数据结构对象解码转换为JSON字符，会自动添加上逗号空格和冒号空格<br><code>indent</code>参数表示转换后缩进单位</p>
<p><code>separators(item_separator, dict_separator)</code><br>元组的第一个字符参数表示dictionary内keys/每个json键值对直接直接用什么分割连接符号<br>元组的第二个字符参数表示每一个键值对中key键和value值直接用什么分割</p>
<p><code>json.dumps(obj, separators=(', ', ' : '))</code> 默认编码，字典无序，dumps默认无序<br><code>separators</code>元组的第一个<code>, </code>表示每个json键值对直接用<code>, </code>分割</p>
<p>而KEY和value之间用“：”隔开。<br><code>json.dumps(obj, separators=(',', ':'))</code>紧凑编码，去除空格<br><code>separators</code>元组的第一个<code>,</code>表示每个json键值对直接用<code>,</code>分割，<code>,</code>前后都没有空格<br><code>separators</code>元组的第二个<code>:</code>表示每个key和value直接用<code>:</code>分割，<code>,</code>前后都没有空格</p>
<p><code>json.dumps(obj, separators=(',', ':'), sort_keys=True)</code>紧凑编码，去除空格，<br> <code>sort_keys</code>是告诉编码器将序列化后的字符串按照字典key排序(a到z)输出。</p>
<p>有非ascii码字符，比如中文，默认就用该字符的unicode数字来表示。<br>想输出真正的中文需要用Unicode字符串，禁用ascii编码<code>ensure_ascii = False</code></p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(json.dumps(<span class="string">'中文'</span>))</span><br><span class="line"><span class="comment"># "\u4e2d\u6587"  对应的ascii 字符码</span></span><br><span class="line">print(json.dumps(<span class="string">'中文'</span>, ensure_ascii=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># "中文"</span></span><br><span class="line">print(<span class="string">'中文'</span>.encode(<span class="string">'unicode_escape'</span>))</span><br><span class="line"><span class="comment"># b'\\u4e2d\\u6587'</span></span><br><span class="line">print(<span class="string">'中文'</span>.encode(<span class="string">'unicode-escape'</span>))</span><br><span class="line"><span class="comment"># b'\\u4e2d\\u6587'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">historyTransactions = [</span><br><span class="line">    {</span><br><span class="line">        <span class="string">'time'</span>: <span class="string">'20170101070311'</span>,  <span class="comment"># 交易时间</span></span><br><span class="line">        <span class="string">'amount'</span>: <span class="string">'3088'</span>,  <span class="comment"># 交易金额</span></span><br><span class="line">        <span class="string">'productid'</span>: <span class="string">'45454455555'</span>,  <span class="comment"># 货号</span></span><br><span class="line">        <span class="string">'productname'</span>: <span class="string">'iphone7'</span>  <span class="comment"># 货名</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="string">'time'</span>: <span class="string">'20170101050311'</span>,  <span class="comment"># 交易时间</span></span><br><span class="line">        <span class="string">'amount'</span>: <span class="string">'18'</span>,  <span class="comment"># 交易金额</span></span><br><span class="line">        <span class="string">'productid'</span>: <span class="string">'453455772955'</span>,  <span class="comment"># 货号</span></span><br><span class="line">        <span class="string">'productname'</span>: <span class="string">'奥妙洗衣液'</span>  <span class="comment"># 货名</span></span><br><span class="line">    }</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">json_str = json.dumps(historyTransactions)</span><br><span class="line">print(type(json_str))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(json_str)</span><br><span class="line"><span class="comment"># [{"time": "20170101070311", "amount": "3088", "productid": "45454455555", "productname": "iphone7"}, {"time": "20170101050311", "amount": "18", "productid": "453455772955", "productname": "\u5965\u5999\u6d17\u8863\u6db2"}]</span></span><br><span class="line"></span><br><span class="line">json_str = json.dumps(historyTransactions, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line">print(type(json_str))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(json_str)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"time"</span>: <span class="string">"20170101070311"</span>,       </span><br><span class="line">        <span class="attr">"amount"</span>: <span class="string">"3088"</span>,</span><br><span class="line">        <span class="attr">"productid"</span>: <span class="string">"45454455555"</span>,     </span><br><span class="line">        <span class="attr">"productname"</span>: <span class="string">"iphone7"</span>        </span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">"time"</span>: <span class="string">"20170101050311"</span>,       </span><br><span class="line">        <span class="attr">"amount"</span>: <span class="string">"18"</span>,</span><br><span class="line">        <span class="attr">"productid"</span>: <span class="string">"453455772955"</span>,    </span><br><span class="line">        <span class="attr">"productname"</span>: <span class="string">"奥妙洗衣液"</span>     </span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p><code>json.loads(s[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, **kw]]]]]]]])</code><br>反序列化，JSON编码的字符串解码转换回一个Python数据结构对象</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">jsonstr = <span class="string">'[{"time": "20170101070311", "amount": "3088", "productid": "45454455555", "productname": "iphone7"}, {"time": "20170101050311", "amount": "18", "productid": "453455772955", "productname": "\u5965\u5999\u6d17\u8863\u6db2"}]'</span></span><br><span class="line"></span><br><span class="line">translist = json.loads(jsonstr)</span><br><span class="line">print(type(translist))  <span class="comment"># &lt;class 'list'&gt;</span></span><br><span class="line">print(translist)</span><br><span class="line"><span class="comment"># [{'time': '20170101070311', 'amount': '3088', 'productid': '45454455555', 'productname': 'iphone7'}, {'time': '20170101050311', 'amount': '18', 'productid': '453455772955', 'productname': '奥妙洗衣液'}]</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>repr(object)</code>将对象转化为供解释器读取的形式。<br>object – 对象。<br>返回一个对象的 string 格式。<br><code>__repr__</code>返回字符串的字面值，<br><code>'\'</code>变成<code>'\\'</code>的转义字符串。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">print(json.dumps([<span class="string">'foo'</span>, {<span class="string">'bar'</span>: (<span class="string">'baz'</span>, <span class="literal">None</span>, <span class="number">1.0</span>, <span class="number">2</span>)}]))</span><br><span class="line"><span class="comment"># ["foo", {"bar": ["baz", null, 1.0, 2]}]</span></span><br><span class="line"></span><br><span class="line">print(json.dumps(<span class="string">"\"foo\bar"</span>))</span><br><span class="line"><span class="comment"># "\"foo\bar"</span></span><br><span class="line"></span><br><span class="line">print(json.dumps(<span class="string">'\u1234'</span>))</span><br><span class="line"><span class="comment"># "\u1234"</span></span><br><span class="line">print(type(json.dumps(<span class="string">'\u1234'</span>)))</span><br><span class="line"><span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(repr(json.dumps(<span class="string">'\u1234'</span>)))</span><br><span class="line"><span class="comment"># '"\\u1234"'</span></span><br><span class="line">print(type(repr(json.dumps(<span class="string">'\u1234'</span>))))</span><br><span class="line"><span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line">print(json.dumps(<span class="string">'\\'</span>))</span><br><span class="line"><span class="comment"># "\\"</span></span><br><span class="line">print(repr(json.dumps(<span class="string">'\\'</span>)))</span><br><span class="line"><span class="comment"># '\\\\'</span></span><br><span class="line">print(type(repr(json.dumps(<span class="string">'\\'</span>))))</span><br><span class="line"><span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line">print(json.dumps({<span class="string">"c"</span>: <span class="number">0</span>, <span class="string">"b"</span>: <span class="number">0</span>, <span class="string">"a"</span>: <span class="number">0</span>}, sort_keys=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># {"a": 0, "b": 0, "c": 0}</span></span><br><span class="line"></span><br><span class="line">data1 = {<span class="string">'no'</span>: <span class="number">1</span>, <span class="string">'name'</span>: <span class="string">'Runoob'</span>, <span class="string">'url'</span>: <span class="string">'http://www.runoob.com'</span>}</span><br><span class="line">print(<span class="string">"Python 原始数据："</span>, repr(data1))</span><br><span class="line"><span class="comment"># Python 原始数据： {'no': 1, 'name': 'Runoob', 'url': 'http://www.runoob.com'}</span></span><br><span class="line">print(type(repr(data1)))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 字典类型转换为 JSON 对象</span></span><br><span class="line">json_str = json.dumps(data1)</span><br><span class="line">print(<span class="string">"JSON 对象："</span>, json_str)</span><br><span class="line"><span class="comment"># JSON 对象： {"no": 1, "name": "Runoob", "url": "http://www.runoob.com"}</span></span><br><span class="line">print(type(json_str))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 JSON 对象转换为 Python 字典</span></span><br><span class="line">data2 = json.loads(json_str)</span><br><span class="line">print(data2)</span><br><span class="line"><span class="comment"># {'no': 1, 'name': 'Runoob', 'url': 'http://www.runoob.com'}</span></span><br><span class="line">print(type(data2))  <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"data2['name']: "</span>, data2[<span class="string">'name'</span>])</span><br><span class="line"><span class="comment"># data2['name']:  Runoob</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"data2['url']: "</span>, data2[<span class="string">'url'</span>])</span><br><span class="line"><span class="comment"># data2['url']:  http://www.runoob.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 紧凑编码，去除json.dumps()生成的空格</span></span><br><span class="line">print(json.dumps([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, {<span class="string">'4'</span>: <span class="number">5</span>, <span class="string">'6'</span>: <span class="number">7</span>}], separators=(<span class="string">','</span>, <span class="string">':'</span>)))</span><br><span class="line"><span class="comment"># [1,2,3,{"4":5,"6":7}]</span></span><br><span class="line"></span><br><span class="line">data2 = json.dumps({<span class="string">'a'</span>: <span class="string">'Ashe'</span>, <span class="string">'b'</span>: <span class="number">7</span>}, sort_keys=<span class="literal">True</span>, indent=<span class="number">4</span>, separators=(<span class="string">','</span>, <span class="string">': '</span>))</span><br><span class="line">print(data2)</span><br><span class="line"><span class="comment"># {</span></span><br><span class="line"><span class="comment">#     "a": "Ashe",</span></span><br><span class="line"><span class="comment">#     "b": 7</span></span><br><span class="line"><span class="comment"># }</span></span><br></pre></td></tr></tbody></table></figure>

<p>加上ensure_ascii这一参数，并将其值设置为False，这样你打开mydump.txt文件里面的中文就能正常显示。（执行完代码之后，本地会有一个mydump.txt文件，诸位可以验证该内容）</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">p_dict = {<span class="string">'name'</span>: <span class="string">'张三'</span>, <span class="string">'age'</span>: <span class="number">30</span>, <span class="string">'isMarried'</span>: <span class="literal">False</span>}  <span class="comment"># 定义一个字典</span></span><br><span class="line">file = open(<span class="string">'d:/mydump.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">json.dump(p_dict, file, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">file.close()</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file = open(<span class="string">'d:/mydump.txt'</span> , <span class="string">'r'</span>)</span><br><span class="line">p = json.load(file)</span><br><span class="line">file.close()</span><br><span class="line">print(type(p))  <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line">print(p)</span><br><span class="line"><span class="comment"># {'name': '张三', 'age': 30, 'isMarried': False}</span></span><br></pre></td></tr></tbody></table></figure>


<p>json模块用于字符串和python数据类型间进行转换。<br>如下所示，我们自定义一个Person类，<br>分别用pickle和json进行序列化：</p>
<p>如果用<code>json</code>对Person实例对象进行序列化，就会报错：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age, isMarried</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.isMarried = isMarried</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">print(Person)  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(type(Person))  <span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">print(p)  <span class="comment"># &lt;__main__.Person object at 0x0000017116500BE0&gt;</span></span><br><span class="line">print(type(p))  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># json对Person实例对象进行序列化，就会报错</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'张三'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">json.dumps(p)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment"># File "&lt;pyshell#49&gt;", line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># json.dumps(p)</span></span><br><span class="line"><span class="comment"># ……</span></span><br><span class="line"><span class="comment"># TypeError: Object of type 'Person' is not JSON serializable</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>如果非要用<code>json</code>对Person实例对象进行序列化，必须先定义一个将Person实例对象转化为字典（dict)的方法：</strong></p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age, isMarried</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.isMarried = isMarried</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">print(Person)  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(type(Person))  <span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">print(p)  <span class="comment"># &lt;__main__.Person object at 0x0000017116500BE0&gt;</span></span><br><span class="line">print(type(p))  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person2dict</span>(<span class="params">per</span>):</span></span><br><span class="line">    <span class="keyword">return</span> {<span class="string">'name'</span>: per.name, <span class="string">'age'</span>: per.age, <span class="string">'isMarried'</span>: per.isMarried}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p3 = json.dumps(p, default=person2dict)</span><br><span class="line">print(type(p3))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(p3)</span><br><span class="line"><span class="comment"># '{"name": "\\u5f20\\u4e09", "age": 30, "isMarried": false}'</span></span><br><span class="line">p3 = json.dumps(p, default=person2dict, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">type(p3)  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(p3)</span><br><span class="line"><span class="comment"># '{"name": "Ashe", "age": 30, "isMarried": false}'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也直接进行反序列化得到一个字典而不是Person类实例</span></span><br><span class="line">p4 = json.loads(p3)</span><br><span class="line">print(type(p4))  <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line">print(p4)</span><br><span class="line"><span class="comment"># {'name': 'Ashe', 'age': 30, 'isMarried': False}</span></span><br></pre></td></tr></tbody></table></figure>

<p>此时，也要定义一个将字典转换为Person类实例的方法，再进行反序列化：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age, isMarried</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.isMarried = isMarried</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">print(Person)  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(type(Person))  <span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">print(p)  <span class="comment"># &lt;__main__.Person object at 0x0000017116500BE0&gt;</span></span><br><span class="line">print(type(p))  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person2dict</span>(<span class="params">per</span>):</span></span><br><span class="line">    <span class="keyword">return</span> {<span class="string">'name'</span>: per.name, <span class="string">'age'</span>: per.age, <span class="string">'isMarried'</span>: per.isMarried}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p3 = json.dumps(p, default=person2dict)</span><br><span class="line">print(type(p3))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(p3)</span><br><span class="line"><span class="comment"># '{"name": "\\u5f20\\u4e09", "age": 30, "isMarried": false}'</span></span><br><span class="line">p3 = json.dumps(p, default=person2dict, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">print(type(p3))  <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line">print(p3)</span><br><span class="line"><span class="comment"># '{"name": "Ashe", "age": 30, "isMarried": false}'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dict2person</span>(<span class="params">d</span>):</span></span><br><span class="line">    <span class="keyword">return</span> Person(d[<span class="string">'name'</span>], d[<span class="string">'age'</span>], d[<span class="string">'isMarried'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p5 = json.loads(p3, object_hook=dict2person)</span><br><span class="line">print(type(p5))</span><br><span class="line"><span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(p5)  <span class="comment"># &lt;__main__.Person object at 0x000001645D670C40&gt;</span></span><br><span class="line">print(p5.name)</span><br><span class="line"><span class="comment"># Ashe</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="pickle"><a href="#pickle" class="headerlink" title="pickle"></a>pickle</h2><p>序列化：dumps()、dump()<br>dumps()与dump()的区别是<code>dumps()</code>只是单纯得将对象序列化，而<code>dump()</code>会在序列化之后将结果写入到文件当中；<br>与之对应，loads()与load()区别至于<code>loads()</code>是对<code>dumps</code>的序列化结果进行反序列化，<br>而<code>load()</code>会从文件中读取内容进行反序列化。</p>
<p>反序列化：loads()、load()</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">p_dict = {<span class="string">'name'</span>:<span class="string">'张三'</span> , <span class="string">'age'</span>:<span class="number">30</span> , <span class="string">'isMarried'</span>:<span class="literal">False</span>} <span class="comment"># 定义一个字典</span></span><br><span class="line">print(type(p_dict))  <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line">p_str = pickle.dumps(p_dict) <span class="comment"># 序列化</span></span><br><span class="line">print(type(p_str))  <span class="comment"># &lt;class 'bytes'&gt;</span></span><br><span class="line">print(p_str)</span><br><span class="line"><span class="comment"># b'\x80\x04\x95*\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x04name\x94\x8c\x06\xe5\xbc\xa0\xe4\xb8\x89\x94\x8c\x03age\x94K\x1e\x8c\tisMarried\x94\x89u.'</span></span><br><span class="line">p = pickle.loads(p_str)</span><br><span class="line">print(type(p))</span><br><span class="line"><span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line">print(p)</span><br><span class="line"><span class="comment"># {'name': '张三', 'age': 30, 'isMarried': False}</span></span><br><span class="line">print(id(p)==id(p_dict))  <span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure>
<p>反序列化后得到的p和序列化之前的p_dict内容是一模一样的。不过，p与p_dict已经是两个不同的对象了</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">p_dict = {<span class="string">'name'</span>: <span class="string">'张三'</span>, <span class="string">'age'</span>: <span class="number">30</span>, <span class="string">'isMarried'</span>: <span class="literal">False</span>}  <span class="comment"># 定义一个字典</span></span><br><span class="line">file = open(<span class="string">"my_dump.txt"</span>, <span class="string">"wb"</span>)  <span class="comment"># 因为序列化只有的是bytes类型，所以必须以wb模式打开</span></span><br><span class="line">pickle.dump(p_dict, file)</span><br><span class="line">file.close()</span><br></pre></td></tr></tbody></table></figure>

<p>此时，通过上面代码我们已经将p_dict序列化成功，并写入到了一个名为my_dump.txt文件中。你可以找到这个文件，然后将它拷贝到任何电脑上进行反序列化：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file = open(<span class="string">"my_dump.txt"</span>, <span class="string">"rb"</span>)</span><br><span class="line">p = pickle.load(file)</span><br><span class="line">file.close()</span><br><span class="line">print(type(p))</span><br><span class="line"><span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line">print(p)</span><br><span class="line"><span class="comment"># {'name': '张三', 'age': 30, 'isMarried': False}</span></span><br></pre></td></tr></tbody></table></figure>
<p>反序列化后得到的内容与序列化之前的内容完全一样。体会到序列化与反序列化的作用了吗？序列化之后的内容可以方便得保存到磁盘中，电脑关机也不怕。</p>
<h3 id="pickle模块与json模块的区别"><a href="#pickle模块与json模块的区别" class="headerlink" title="pickle模块与json模块的区别"></a>pickle模块与json模块的区别</h3><p>（1）pickle模块用于Python语言特有的类型和用户自定义类型与Python基本数据类型之间的转换<br>如下所示，我们自定义一个Person类，用pickle序列化：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age, isMarried</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.isMarried = isMarried</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">p = Person(<span class="string">'Ashe'</span>, <span class="number">30</span>, <span class="literal">False</span>)</span><br><span class="line">print(Person)  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(type(Person))  <span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">print(p)  <span class="comment"># &lt;__main__.Person object at 0x0000017116500BE0&gt;</span></span><br><span class="line">print(type(p))  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment"># pickle模块能够对Person实例对象进行序列化</span></span><br><span class="line">pp = pickle.dumps(p)</span><br><span class="line">print(type(pp))  <span class="comment"># &lt;class 'bytes'&gt;</span></span><br><span class="line">print(pp)</span><br><span class="line"><span class="comment"># b'\x80\x03c__main__\nPerson\nq\x00)\x81q\x01}q\x02(X\x04\x00\x00\x00nameq\x03X\x06\x00\x00\x00\xe5\xbc\xa0\xe4\xb8\x89q\x04X\x03\x00\x00\x00ageq\x05K\x1eX\t\x00\x00\x00isMarriedq\x06\x89ub.'</span></span><br><span class="line">p2 = pickle.loads(pp)</span><br><span class="line">print(type(p2))  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br><span class="line">print(p2)  <span class="comment"># &lt;__main__.Person object at 0x000001DBED720B20&gt;</span></span><br><span class="line">print(p2.name)</span><br><span class="line"><span class="comment"># 'Ashe'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pickle模块能够对Peron本身进行序列化</span></span><br><span class="line">per = pickle.dumps(Person)</span><br><span class="line">print(per)  <span class="comment"># &lt;class 'bytes'&gt;</span></span><br><span class="line">print(type(per))</span><br><span class="line"><span class="comment"># b'\x80\x04\x95\x17\x00\x00\x00\x00\x00\x00\x00\x8c\x08__main__\x94\x8c\x06Person\x94\x93\x94.'</span></span><br><span class="line">per2 = pickle.loads(per)</span><br><span class="line">print(type(per2))  <span class="comment"># &lt;class 'type'&gt;</span></span><br><span class="line">print(per2)  <span class="comment"># &lt;class '__main__.Person'&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/lambda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/lambda/" class="post-title-link" itemprop="url">lambda</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:46" itemprop="dateModified" datetime="2021-04-02T12:24:46Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="匿名函数：lambda"><a href="#匿名函数：lambda" class="headerlink" title="匿名函数：lambda"></a>匿名函数：lambda</h1><p>参数:表达式<br>匿名函数有个限制，就是只能有一个表达式，不能是语句或代码块，<br>不用写return，返回值就是该表达式的结果。<br>用匿名函数有个好处，因为函数没有名字，不必担心函数名冲突。<br>匿名函数也是一个函数对象，<br>也可以把匿名函数赋值给一个变量，再利用变量来调用该函数：</p>
<p>无参匿名函数:</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="keyword">lambda</span>: <span class="literal">True</span>  <span class="comment">#冒号前无任何参数</span></span><br><span class="line">print(t())  <span class="comment"># True</span></span><br><span class="line">t = <span class="keyword">lambda</span>: <span class="number">1</span>  <span class="comment"># 冒号前无任何参数</span></span><br><span class="line">print(t())  <span class="comment"># 1</span></span><br></pre></td></tr></tbody></table></figure>
<p>等价于下面的def定义的函数</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(func())  <span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">"this is\na\ttest"</span></span><br><span class="line">print(s)</span><br><span class="line"><span class="comment"># this is</span></span><br><span class="line"><span class="comment"># a       test</span></span><br><span class="line">print(s.split())  <span class="comment"># split函数默认以空格分割成列表，换行符，TAB</span></span><br><span class="line"><span class="comment"># ['this', 'is', 'a', 'test']</span></span><br><span class="line">print(<span class="string">' '</span>.join(s.split()))  <span class="comment"># 用join函数转一个列表为字符串</span></span><br><span class="line"><span class="comment"># 'this is a test'</span></span><br></pre></td></tr></tbody></table></figure>
<p>等价于</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1 = (<span class="keyword">lambda</span> s: <span class="string">' '</span>.join(s.split()))(<span class="string">"this is\na\ttest"</span>)</span><br><span class="line">print(f1)</span><br><span class="line"><span class="comment"># 'this is a test'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 普通python函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">a, b, c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 6</span></span><br></pre></td></tr></tbody></table></figure>

<p>匿名函数调用：直接赋值给一个变量，然后再像一般函数调用</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f1 = <span class="keyword">lambda</span> x: x**<span class="number">3</span>  <span class="comment"># 一个参数</span></span><br><span class="line">print(f1(<span class="number">3</span>))  <span class="comment"># 27</span></span><br><span class="line"></span><br><span class="line">f2 = <span class="keyword">lambda</span> x, y, z: x + y + z  <span class="comment"># 多个参数</span></span><br><span class="line">print(f2(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 6</span></span><br><span class="line"></span><br><span class="line">f3 = <span class="keyword">lambda</span> x, y=<span class="number">3</span>: x * y  <span class="comment"># 允许参数存在默认值</span></span><br><span class="line">print(f3(<span class="number">1</span>))  <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">f4 = <span class="keyword">lambda</span> x, y=<span class="number">3</span>: x * y  <span class="comment"># 允许参数存在默认值</span></span><br><span class="line">print(f4(<span class="number">1</span>, <span class="number">5</span>))  <span class="comment"># 5</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="keyword">lambda</span> *z: z  <span class="comment"># *z返回的是一个元祖</span></span><br><span class="line">print(a(<span class="string">'Testing1'</span>, <span class="string">'Testing2'</span>))</span><br><span class="line"><span class="comment">#  ('Testing1', 'Testing2')</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">c = <span class="keyword">lambda</span> **Arg: Arg  <span class="comment"># arg返回的是一个字典</span></span><br><span class="line">print(c())</span><br><span class="line"><span class="comment"># {}</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#直接后面传递实参</span></span><br><span class="line">print((<span class="keyword">lambda</span> x:x**<span class="number">2</span>)(<span class="number">3</span>))  <span class="comment"># 9</span></span><br><span class="line">print((<span class="keyword">lambda</span> x,y: x <span class="keyword">if</span> x&gt; y <span class="keyword">else</span> y)(<span class="number">101</span>,<span class="number">102</span>))  <span class="comment">#  102</span></span><br><span class="line"></span><br><span class="line">print([x <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>] <span class="keyword">if</span> x % <span class="number">3</span> == <span class="number">0</span>])  <span class="comment"># [3, 6]</span></span><br><span class="line"><span class="comment"># lambda返回的值，结合map,filter,reduce使用 等价于下面的列表推导式</span></span><br><span class="line"><span class="comment"># filter 函数传入两个参数，第一个参入的是lambda函数，第二个参数是列表</span></span><br><span class="line">print(filter(<span class="keyword">lambda</span> x: x % <span class="number">3</span> == <span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]))  <span class="comment"># [3, 6]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f1 = filter(<span class="keyword">lambda</span> x: <span class="literal">True</span> <span class="keyword">if</span> x != <span class="number">0</span> <span class="keyword">else</span> <span class="literal">False</span>, [<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">print(f1)  <span class="comment"># &lt;filter object at 0x000001C27B35DAC0&gt;</span></span><br><span class="line">print(list(f1))  <span class="comment"># [1, 2, 5]</span></span><br></pre></td></tr></tbody></table></figure>

<p>嵌套使用</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lambda嵌套到普通函数中,lambda函数本身做为return的值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">increment</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: x + n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f = increment(<span class="number">4</span>)</span><br><span class="line">print(f(<span class="number">2</span>))  <span class="comment"># 6</span></span><br></pre></td></tr></tbody></table></figure>
<hr>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span>():</span></span><br><span class="line">    title = <span class="string">'Sir, '</span></span><br><span class="line">    action = <span class="keyword">lambda</span> x: title + x</span><br><span class="line">    <span class="keyword">return</span> action</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">act = say()</span><br><span class="line">print(act(<span class="string">'Smith!'</span>))  <span class="comment"># 'Sir,Smith!'</span></span><br></pre></td></tr></tbody></table></figure>

<p>大量例子:</p>
<p>例01: 字符串联合，有默认值，也可以x=(lambda…)这种格式</p>
<blockquote>
<blockquote>
<blockquote>
<p>x = (lambda x=”Boo”,y=”Too”,z=”Zoo”: x+y+z)<br>x(“Foo”)<br>‘FooTooZoo’</p>
</blockquote>
</blockquote>
</blockquote>
<p>例02: 和列表联合使用</p>
<blockquote>
<blockquote>
<blockquote>
<p>L = [lambda x:x<strong>2,<br>lambda x:x</strong>3,<br>lambda x:x**4]</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>for f in L:<br>… print f(2)<br>…<br>4<br>8<br>16</p>
</blockquote>
</blockquote>
</blockquote>
<p>也可以如下面这样调用</p>
<blockquote>
<blockquote>
<blockquote>
<p>print L<a href="3">0</a><br>9</p>
</blockquote>
</blockquote>
</blockquote>
<p>例03: 和字典结合使用</p>
<blockquote>
<blockquote>
<blockquote>
<p>key = ‘B’<br>dic = { ‘A’: lambda: 2<em>2,<br>… ‘B’: lambda: 2</em>4,<br>… ‘C’: lambda: 2*8}<br>dic<a href="">key</a><br>8</p>
</blockquote>
</blockquote>
</blockquote>
<p>例04: 求最小值</p>
<blockquote>
<blockquote>
<blockquote>
<p>lower = lambda x,y: x if x&lt;y else y<br>lower(‘aa’,’ab’)<br>‘aa’</p>
</blockquote>
</blockquote>
</blockquote>
<p>例05: 和map及list联合使用</p>
<blockquote>
<blockquote>
<blockquote>
<p>import sys<br>showall = lambda x:list(map(sys.stdout.write,x))<br>showall([‘Jerry\n’,’Sherry\n’,’Alice\n’])<br>Jerry<br>Sherry<br>Alice</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>showall([‘Jerry’,’Sherry’,’Alice’])<br>JerrySherryAlice</p>
</blockquote>
</blockquote>
</blockquote>
<p>等价于下面</p>
<blockquote>
<blockquote>
<blockquote>
<p>showall = lambda x: [sys.stdout.write(line) for line in x]<br>showall((‘I\t’,’Love\t’,’You!’))<br>I Love You![None, None, None]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例06: 在Tkinter中定义内联的callback函数</p>
<p>import sys<br>from Tkinter import Button,mainloop</p>
<p>x = Button(text=’Press me’,<br>command=(lambda:sys.stdout.write(‘Hello,World\n’)))<br>x.pack()<br>x.mainloop()</p>
<blockquote>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>Hello,World!</p>
<p>Hello,World!</p>
<p>例07: lambda和map联合使用,</p>
<blockquote>
<blockquote>
<blockquote>
<p> out = lambda *x: sys.stdout.write(‘ ‘.join(map(str,x)))<br>out(‘This’,’is’,’a’,’book!\n’)<br>This is a book!</p>
</blockquote>
</blockquote>
</blockquote>
<p>例08: 判断字符串是否以某个字母开头</p>
<blockquote>
<blockquote>
<blockquote>
<p>print (lambda x: x.startswith(‘B’))(‘Bob’)<br>True</p>
</blockquote>
</blockquote>
</blockquote>
<hr>
<blockquote>
<blockquote>
<blockquote>
<p>Names = [‘Anne’, ‘Amy’, ‘Bob’, ‘David’, ‘Carrie’, ‘Barbara’, ‘Zach’]<br>B_Name= filter(lambda x: x.startswith(‘B’),Names)<br>B_Name<br>[‘Bob’, ‘Barbara’]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例09: lambda和map联合使用:</p>
<blockquote>
<blockquote>
<blockquote>
<p> squares = map(lambda x:x**2,range(5))<br>squares<br>[0, 1, 4, 9, 16]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例10. lambda和map,filter联合使用:</p>
<blockquote>
<blockquote>
<blockquote>
<p> squares = map(lambda x:x**2,range(10))<br>filters = filter(lambda x:x&gt;5 and x&lt;50,squares)<br>filters<br>[9, 16, 25, 36, 49]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例11. lambda和sorted联合使用</p>
<p>#按death名单里面，按年龄来排序</p>
<p>#匿名函数的值返回给key，进来排序</p>
<blockquote>
<blockquote>
<blockquote>
<p>death = [ (‘James’,32),<br>(‘Alies’,20),<br>(‘Wendy’,25)]</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>sorted(death,key=lambda age:age[1]) #按照第二个元素，索引为1排序<br>[(‘Alies’, 20), (‘Wendy’, 25), (‘James’, 32)]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例12. lambda和reduce联合使用</p>
<blockquote>
<blockquote>
<blockquote>
<p>L = [1,2,3,4]<br>sum = reduce(lambda x,y:x+y,L)<br>sum<br>10</p>
</blockquote>
</blockquote>
</blockquote>
<p>例13. 求2-50之间的素数</p>
<p>#素数:只能被1或被自己整除的数</p>
<blockquote>
<blockquote>
<blockquote>
<p>nums = range(2,50)<br>for i in nums:<br>nums = filter(lambda x:x==i or x % i,nums)<br>nums<br>[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例14. 求两个列表元素的和</p>
<blockquote>
<blockquote>
<blockquote>
<p>a = [1,2,3,4]<br>b = [5,6,7,8]<br>map(lambda x,y:x+y, a,b)<br>[6, 8, 10, 12]</p>
</blockquote>
</blockquote>
</blockquote>
<p>例15. 求字符串每个单词的长度</p>
<blockquote>
<blockquote>
<blockquote>
<p>sentence = “Welcome To Beijing!”<br>words = sentence.split()</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>lengths = map(lambda x:len(x),words)<br>lengths<br>[7, 2, 8]</p>
</blockquote>
</blockquote>
</blockquote>
<p>写成一行:</p>
<blockquote>
<blockquote>
<blockquote>
<p> print map(lambda x:len(x),’Welcome To Beijing!’.split())</p>
</blockquote>
</blockquote>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/leetcode-json-shu-ju-ku/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/leetcode-json-shu-ju-ku/" class="post-title-link" itemprop="url">leetcode json 数据库</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-02 12:24:45" itemprop="dateModified" datetime="2021-04-02T12:24:45Z">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>将leetcode案例的json格式数据转成数据库插入语句，并插入到数据库。</p>
<p>json用例数据：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"headers"</span>: {</span><br><span class="line">        <span class="attr">"student"</span>: [</span><br><span class="line">            <span class="string">"name"</span>,</span><br><span class="line">            <span class="string">"continent"</span></span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"rows"</span>: {</span><br><span class="line">        <span class="attr">"student"</span>: [</span><br><span class="line">            [</span><br><span class="line">                <span class="string">"Jane"</span>,</span><br><span class="line">                <span class="string">"America"</span></span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                <span class="string">"Pascal"</span>,</span><br><span class="line">                <span class="string">"Europe"</span></span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                <span class="string">"Xi"</span>,</span><br><span class="line">                <span class="string">"Asia"</span></span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                <span class="string">"Jack"</span>,</span><br><span class="line">                <span class="string">"America"</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_mysql_sql_from_leetcodejson</span>(<span class="params">json_str</span>):</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    json_str -- leetcode 题目的案例输入。通常是json串</span></span><br><span class="line"><span class="string">    输出 -- SQL插入串 insert ... values </span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    jo = json.loads(json_str)</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> db_name <span class="keyword">in</span> jo[<span class="string">'headers'</span>].keys():</span><br><span class="line">        col_list = jo[<span class="string">'headers'</span>][db_name]</span><br><span class="line">        sql = <span class="string">'insert into %s (%s) values'</span> %(db_name,<span class="string">','</span>.join(col_list))</span><br><span class="line">        <span class="comment">#print(sql)</span></span><br><span class="line">        values = []</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> jo[<span class="string">'rows'</span>][db_name]:</span><br><span class="line">            tos = [<span class="string">'NULL'</span> <span class="keyword">if</span> y <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> <span class="string">'\'%s\''</span> % (y) <span class="keyword">for</span> y <span class="keyword">in</span> x]</span><br><span class="line">            values.append(<span class="string">'(%s)'</span> % (<span class="string">','</span>.join(tos)))</span><br><span class="line">        sql += <span class="string">','</span>.join(values)+<span class="string">';'</span></span><br><span class="line">        res.append(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">json_str = input(<span class="string">'input leetcode json string:'</span>)</span><br><span class="line"><span class="keyword">for</span> sql <span class="keyword">in</span> get_mysql_sql_from_leetcodejson(json_str):</span><br><span class="line">    print(sql)</span><br><span class="line"><span class="comment"># 输入上面的json用例数据，执行程序得出：</span></span><br><span class="line"><span class="comment"># insert into student (name,continent) values('Jane','America'),('Pascal','Europe'),('Xi','Asia'),('Jack','America');</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/markdown/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/markdown/" class="post-title-link" itemprop="url">markdown</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-12 12:04:50" itemprop="dateModified" datetime="2021-05-12T12:04:50Z">2021-05-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/markdown/" itemprop="url" rel="index"><span itemprop="name">markdown</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]<br>Table of Contents<br>使用HTML中下标下标的语法即可。<br>H<sub>2</sub>O  CO<sub>2</sub><br>Apple<sup>TM</sup></p>
<p>Enter就可以插入一个新的段落。<br>按Shift+Enter可以创建一个比段落间距更小的行间距。<br>换行<br>方法1: 连续两个以上空格+回车<br><br>方法2：使用html语言换行标签</p>
<p>分割线：你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，<br>行内不能有其他东西。你也可以在星号或是减号中间插入空格。</p>
<hr>
<hr>
<hr>
<hr style="background-color:red;">

<p>链接：链接文字都是用 [方括号] 来标记，在方块括号后面紧接着圆括号并插入网址链接<br>link to <a target="_blank" rel="noopener" href="http://youtube.com/">youtube</a>  </p>
<ul>
<li><a href="./xxx/xx1.md">1.1 连接markdown</a></li>
<li><a href="./xxx/xx2.md">1.2 连接markdown</a><br>自定义所通往链接的网站标题<br><a href="mailto:i@typora.io">i@typora.io</a></li>
</ul>
<p><img src="/2020/08/21/markdown/%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5" alt="Alt text" title="optional title"><br>Alt text：图片的Alt标签，用来描述图片的关键词，可以不写。最初的本意是当图片因为某种原因不能被显示时而出现的替代文字，后来又被用于SEO，可以方便搜索引擎根据Alt text里面的关键词搜索到图片。<br>图片链接：可以是图片的本地地址或者是网址。<br>“optional title”：鼠标悬置于图片上会出现的标题文字，可选标题，可以不写。</p>
<p>插入本地图片<br>只需要在基础语法的括号中填入图片的位置路径即可，支持绝对路径和相对路径。<br><img src="/2020/08/21/markdown/picture/1.png" alt="description"><br>不灵活不好分享，本地图片的路径更改或丢失都会造成markdown文件调不出图。</p>
<p>插入互联网图片：<br><img src="http://static.runoob.com/images/runoob-logo.png" alt="这里写图片描述"><br><img src="http://static.runoob.com/images/runoob-logo.png" alt="RUNOOB 图标" title="RUNOOB"></p>
<p>把图片存入markdown文件<br>用base64转码工具把图片转成一段字符串，然后把字符串填到基础格式中链接的那个位置。<br>基础用法：<br><img src="/2020/08/21/markdown/png;base64,iVBORw0......" alt="avatar"><br>这个时候会发现插入的这一长串字符串会把整个文章分割开，非常影响编写文章时的体验。如果能够把大段的base64字符串放在文章末尾，然后在文章中通过一个id来调用，文章就不会被分割的这么乱了。<br>高级用法<br>比如：<br>![avatar][base64str]<br>[base64str]:data:image/png;base64,iVBORw0……</p>
<p>幻灯片图片<br>&lt;pic,pic,pic&gt;<br>&lt;![image.png](<a href="https://pic1.png,!image.png>/">https://pic1.png,!image.png&gt;</a></p>
<p>首行缩进两个字符：(每个表示一个空格，连续使用两个即可<br>  半角的空格<br>   两个半角的空格<br>  全角的空格</p>
<p><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#0099ff" size="5" face="黑体">color=#0099ff size=7 face=”黑体”</font><br><font color="#00ffff" size="5">color=#00ffff</font><br><font color="gray" size="72">color=gray</font>  </p>
<h2 id="主要内容"><a href="#主要内容" class="headerlink" title="主要内容"></a>主要内容</h2><blockquote>
<h4 id="Markdown是什么？"><a href="#Markdown是什么？" class="headerlink" title="Markdown是什么？"></a>Markdown<em>是什么</em>？</h4><h4 id="谁创造了它？"><a href="#谁创造了它？" class="headerlink" title="谁创造了它？"></a><em>谁</em>创造了它？</h4><h4 id="为什么要使用它？"><a href="#为什么要使用它？" class="headerlink" title="为什么要使用它？"></a><em>为什么</em>要使用它？</h4><h4 id="怎么使用？"><a href="#怎么使用？" class="headerlink" title="怎么使用？"></a><em>怎么</em>使用？</h4><h4 id="谁在用？"><a href="#谁在用？" class="headerlink" title="谁在用？"></a><em>谁</em>在用？</h4><h4 id="尝试一下"><a href="#尝试一下" class="headerlink" title="尝试一下"></a>尝试一下</h4></blockquote>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="1-Markdown是什么？"><a href="#1-Markdown是什么？" class="headerlink" title="1. Markdown是什么？"></a>1. Markdown<em>是什么</em>？</h3><p><strong>Markdown</strong>是一种轻量级<strong>标记语言</strong>，它以纯文本形式(<em>易读、易写、易更改</em>)编写文档，并最终以HTML格式发布。<br><strong>Markdown</strong>也可以理解为将以MARKDOWN语法编写的语言转换成HTML内容的工具。    </p>
<h3 id="2-谁创造了它？"><a href="#2-谁创造了它？" class="headerlink" title="2. 谁创造了它？"></a>2. <em>谁</em>创造了它？</h3><p>它由<a target="_blank" rel="noopener" href="http://www.aaronsw.com/"><strong>Aaron Swartz</strong></a>和<strong>John Gruber</strong>共同设计，<strong>Aaron Swartz</strong>就是那位于去年（<em>2013年1月11日</em>）自杀,有着<strong>开挂</strong>一般人生经历的程序员。维基百科对他的<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/%E4%BA%9A%E4%BC%A6%C2%B7%E6%96%AF%E6%B2%83%E8%8C%A8">介绍</a>是：<strong>软件工程师、作家、政治组织者、互联网活动家、维基百科人</strong>。    </p>
<p>他有着足以让你跪拜的人生经历：    </p>
<ul>
<li><strong>14岁</strong>参与RSS 1.0规格标准的制订。     </li>
<li><strong>2004</strong>年入读<strong>斯坦福</strong>，之后退学。   </li>
<li><strong>2005</strong>年创建<a target="_blank" rel="noopener" href="http://infogami.org/">Infogami</a>，之后与<a target="_blank" rel="noopener" href="http://www.reddit.com/">Reddit</a>合并成为其合伙人。   </li>
<li><strong>2010</strong>年创立求进会（Demand Progress），积极参与禁止网络盗版法案（SOPA）活动，最终该提案被撤回。   </li>
<li><strong>2011</strong>年7月19日，因被控从MIT和JSTOR下载480万篇学术论文并以免费形式上传于网络被捕。     </li>
<li><strong>2013</strong>年1月自杀身亡。    </li>
</ul>
<p><img src="https://github.com/younghz/Markdown/raw/master/resource/Aaron_Swartz.jpg" alt="Aaron Swartz"></p>
<p>天才都有早逝的归途。</p>
<h3 id="3-为什么要使用它？"><a href="#3-为什么要使用它？" class="headerlink" title="3. 为什么要使用它？"></a>3. <em>为什么</em>要使用它？</h3><ul>
<li>它是易读（看起来舒服）、易写（语法简单）、易更改<strong>纯文本</strong>。处处体现着<strong>极简主义</strong>的影子。</li>
<li>兼容HTML，可以转换为HTML格式发布。</li>
<li>跨平台使用。</li>
<li>越来越多的网站支持Markdown。</li>
<li>更方便清晰地组织你的电子邮件。（Markdown-here, Airmail）</li>
<li>摆脱Word（我不是认真的）。</li>
</ul>
<h3 id="4-怎么使用？"><a href="#4-怎么使用？" class="headerlink" title="4. 怎么使用？"></a>4. <em>怎么</em>使用？</h3><p>如果不算<strong>扩展</strong>，Markdown的语法绝对<strong>简单</strong>到让你爱不释手。</p>
<p>Markdown语法主要分为如下几大部分：<br><strong>标题</strong>，<strong>段落</strong>，<strong>区块引用</strong>，<strong>代码区块</strong>，<strong>强调</strong>，<strong>列表</strong>，<strong>分割线</strong>，<strong>链接</strong>，<strong>图片</strong>，<strong>反斜杠 <code>\</code>**，</strong>符号’`’**。</p>
<h4 id="4-1-标题"><a href="#4-1-标题" class="headerlink" title="4.1 标题"></a>4.1 标题</h4><p>两种形式：<br>1）使用<code>=</code>和<code>-</code>标记一级和二级标题。</p>
<blockquote>
<p>一级标题<br><code>=========</code><br>二级标题<br><code>---------</code></p>
</blockquote>
<p>效果：</p>
<blockquote>
<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题   "></a>一级标题   </h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2></blockquote>
<p>2）使用<code>#</code>，可表示1-6级标题。</p>
<blockquote>
<p># 一级标题<br>## 二级标题<br>### 三级标题<br>#### 四级标题<br>##### 五级标题<br>###### 六级标题    </p>
</blockquote>
<p>效果：</p>
<blockquote>
<h1 id="一级标题-1"><a href="#一级标题-1" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题-1"><a href="#二级标题-1" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6></blockquote>
<h4 id="4-2-段落"><a href="#4-2-段落" class="headerlink" title="4.2 段落"></a>4.2 段落</h4><p>段落的前后要有空行，所谓的空行是指没有文字内容。若想在段内强制换行的方式是使用<strong>两个以上</strong>空格加上回车（引用中换行省略回车）。</p>
<h4 id="4-3-区块引用"><a href="#4-3-区块引用" class="headerlink" title="4.3 区块引用"></a>4.3 区块引用</h4><p>在段落的每行或者只在第一行使用符号<code>&gt;</code>,还可使用多个嵌套引用，如：</p>
<blockquote>
<p>&gt; 区块引用<br>&gt;&gt; 嵌套引用  </p>
</blockquote>
<p>效果：</p>
<blockquote>
<p>这是一个由两个段落组成的引用块，这是第一个段落。</p>
<p>这是第二个段落，爱饭打森，爱乖出台，请曾爱萨菲，撒㩐，经爱抚，百分赛法。</p>
</blockquote>
<blockquote>
<p>这是另一个只有一个段落的引用块。两个代码块间可以用一空行来分隔。</p>
<blockquote>
<p>嵌套引用</p>
</blockquote>
</blockquote>
<p>脚注示范[^这是一个脚注] 鼠标移动到这是一个脚注超链接可以看到脚注的文本内容。<br>本网站基于MkDocs[^1]系统，采用了Material for MkDocs[^2]主题样式，感谢开源社区的贡献！<br>[^1]: <a target="_blank" rel="noopener" href="https://www.mkdocs.org/">https://www.mkdocs.org/</a><br>[^2]: <a target="_blank" rel="noopener" href="https://squidfunk.github.io/mkdocs-material/">https://squidfunk.github.io/mkdocs-material/</a></p>
<blockquote>
<p>请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class="icon-file"></i> <strong>新文稿</strong> 或者使用快捷键 <code>Ctrl+Alt+N</code>。</p>
</blockquote>
<h4 id="4-4-代码区块"><a href="#4-4-代码区块" class="headerlink" title="4.4 代码区块"></a>4.4 代码区块</h4><p>代码区块的建立是在每行加上4个空格或者一个制表符（如同写代码一样）。标准代码块表示使用空格/tab来开头的块状代码块,而不是``` ~~~.</p>
<p>普通段落：</p>
<p>void main()<br>{<br>    printf(“Hello, Markdown.”);<br>}<br>struct {<br>  int year;<br>  int month;<br>  int day;<br> }bdate;</p>
<p>代码区块：</p>
<pre><code>void main()
{
    printf("Hello, Markdown.");
}
</code></pre>
<hr>
<pre><code>Here are some code with tab at start.  

Here are some code with 4 blank.
</code></pre>
<p><strong>注意</strong>:需要和普通段落之间存在空行。</p>
<p>这里是行内代码<code>print("hello world")</code>.<br>这也是行内代码块<code>print "<code>...</code>"</code><br>这也是行内代码块<code>print "<code>...</code>"</code>. </p>
<h4 id="4-5-强调"><a href="#4-5-强调" class="headerlink" title="4.5 强调"></a>4.5 强调</h4><p>在强调内容两侧分别加上<code>*</code>或者<code>_</code>，如：</p>
<blockquote>
<p>*斜体*，_斜体_<br>**粗体**，__粗体__</p>
</blockquote>
<p>效果：</p>
<blockquote>
<p><em>斜体</em>，<em>斜体</em><br><strong>粗体</strong>，<strong>粗体</strong></p>
</blockquote>
<p><s>删除线（开启识别HTML标签时）</s><br><u>下划线</u></p>
<h4 id="4-6-列表"><a href="#4-6-列表" class="headerlink" title="4.6 列表"></a>4.6 列表</h4><p>使用<code>·</code>、<code>+</code>、或<code>-</code>标记无序列表，如：</p>
<blockquote>
<p>-（+*） 第一项<br>-（+*） 第二项<br>- （+*）第三项</p>
</blockquote>
<p><strong>注意</strong>：标记后面最少有一个_空格_或_制表符_。若不在引用区块中，必须和前方段落之间存在空行。</p>
<p>效果：</p>
<blockquote>
<ul>
<li>第一项</li>
<li>第二项</li>
<li>第三项</li>
</ul>
</blockquote>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
<p>有序列表的标记方式是将上述的符号换成数字,并辅以<code>.</code>，如：</p>
<blockquote>
<p>1 . 第一项<br>2 . 第二项<br>3 . 第三项    </p>
</blockquote>
<p>效果：</p>
<blockquote>
<ol>
<li>第一项</li>
<li>第二项</li>
<li>第三项</li>
</ol>
</blockquote>
<p>. 可以使用：数字. 来取消显示为列表，在行前显示数字和 .  </p>
<p>嵌套的列表</p>
<ul>
<li>第一层<ul>
<li>1-1</li>
</ul>
<ul>
<li>1-2</li>
</ul>
<ul>
<li>1-3</li>
</ul>
</li>
</ul>
<ol>
<li>第一层</li>
</ol>
<ul>
<li>1-1</li>
<li>1-2</li>
</ul>
<ul>
<li>无序列表和有序列表可以随意相互嵌套<ol>
<li>2-1</li>
<li>2-2</li>
</ol>
</li>
</ul>
<p>html标签</p>
<table><tbody><tr><td bgcolor="orange">背景色是：orange</td></tr></tbody></table>
<table>
  <thead>
   <tr>
      <th>字段</th>
      <th>必选</th>
      <th>类型</th>
      <th>说明</th>
   </tr>
  </thead>
  <tbody>
   <tr class="warning">
      <td>types</td>
      <td>true</td>
      <td>int</td>
      <td>轮播图类型（10:首页轮播）</td>
   </tr>
  </tbody>
</table>

<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody><tr>
<td>Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Left-Aligned</th>
<th align="center">Center Aligned</th>
<th align="right">Right Aligned</th>
</tr>
</thead>
<tbody><tr>
<td align="left">左对齐</td>
<td align="center">剧中对齐</td>
<td align="right">居右$1600</td>
</tr>
<tr>
<td align="left">col 2 is</td>
<td align="center">centered</td>
<td align="right">$12</td>
</tr>
<tr>
<td align="left">zebra stripes</td>
<td align="center">are neat</td>
<td align="right">$1</td>
</tr>
</tbody></table>
<h4 id="4-7-分割线"><a href="#4-7-分割线" class="headerlink" title="4.7 分割线"></a>4.7 分割线</h4><p>分割线最常使用就是三个或以上<code>*</code>，还可以使用<code>-</code>和<code>_</code>。</p>
<h4 id="4-8-链接"><a href="#4-8-链接" class="headerlink" title="4.8 链接"></a>4.8 链接</h4><p>链接可以由两种形式生成：<strong>行内式</strong>和<strong>参考式</strong>。<br><strong>行内式</strong>：</p>
<blockquote>
<p>[younghz的Markdown库](https:://github.com/younghz/Markdown “Markdown”)。</p>
</blockquote>
<p>效果：</p>
<blockquote>
<p><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库</a>。</p>
</blockquote>
<p><strong>参考式</strong>：</p>
<blockquote>
<p>[younghz的Markdown库1][1]<br>[younghz的Markdown库2][2]<br>[1]:https:://github.com/younghz/Markdown “Markdown”<br>[2]:https:://github.com/younghz/Markdown “Markdown”    </p>
</blockquote>
<p>效果：</p>
<blockquote>
<p><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库1</a><br><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库2</a></p>
</blockquote>
<p><strong>注意</strong>：上述的<code>[1]:https:://github.com/younghz/Markdown "Markdown"</code>不出现在区块中。</p>
<h4 id="4-9-图片"><a href="#4-9-图片" class="headerlink" title="4.9 图片"></a>4.9 图片</h4><p>添加图片的形式和链接相似，只需在链接的基础上前方加一个<code>！</code>。</p>
<h4 id="4-10-反斜杠"><a href="#4-10-反斜杠" class="headerlink" title="4.10 反斜杠\"></a>4.10 反斜杠<code>\</code></h4><p>相当于<strong>反转义</strong>作用。使符号成为普通符号。</p>
<h4 id="4-11-符号’-’"><a href="#4-11-符号’-’" class="headerlink" title="4.11 符号’`’"></a>4.11 符号’`’</h4><p>起到标记作用。如：</p>
<blockquote>
<p>`ctrl+a`</p>
</blockquote>
<p>效果：</p>
<blockquote>
<p><code>ctrl+a</code>    </p>
</blockquote>
<h4 id="5-谁在用？"><a href="#5-谁在用？" class="headerlink" title="5. 谁在用？"></a>5. <em>谁</em>在用？</h4><p>Markdown的使用者：</p>
<ul>
<li>GitHub</li>
<li>简书</li>
<li>Stack Overflow</li>
<li>Apollo</li>
<li>Moodle</li>
<li>Reddit</li>
<li>等等</li>
</ul>
<h4 id="6-尝试一下"><a href="#6-尝试一下" class="headerlink" title="6. 尝试一下"></a>6. 尝试一下</h4><ul>
<li><strong>Chrome</strong>下的插件诸如<code>stackedit</code>与<code>markdown-here</code>等非常方便，也不用担心平台受限。</li>
<li><strong>在线</strong>的dillinger.io评价也不错   </li>
<li><strong>Windowns</strong>下的MarkdownPad也用过，不过免费版的体验不是很好。    </li>
<li><strong>Mac</strong>下的Mou是国人贡献的，口碑很好。</li>
<li><strong>Linux</strong>下的ReText不错。    </li>
</ul>
<p><strong>当然，最终境界永远都是笔下是语法，心中格式化 :)。</strong></p>
<hr>
<p><strong>注意</strong>：不同的Markdown解释器或工具对相应语法（扩展语法）的解释效果不尽相同，具体可参见工具的使用说明。<br>虽然有人想出面搞一个所谓的标准化的Markdown，[没想到还惹怒了健在的创始人John Gruber]<br>(<a target="_blank" rel="noopener" href="http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/">http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/</a> )。</p>
<hr>
<p>以上基本是所有traditonal markdown的语法。</p>
<h3 id="其它："><a href="#其它：" class="headerlink" title="其它："></a>其它：</h3><p>列表的使用(非traditonal markdown)：</p>
<p>用<code>|</code>表示表格纵向边界，表头和表内容用<code>-</code>隔开，并可用<code>:</code>进行对齐设置，两边都有<code>:</code>则表示居中，若不加<code>:</code>则默认左对齐。</p>
<table>
<thead>
<tr>
<th align="center">代码库</th>
<th>超链接</th>
</tr>
</thead>
<tbody><tr>
<td align="center">MarkDown</td>
<td><a target="_blank" rel="noopener" href="https://github.com/younghz/Markdown" title="Markdown">https://github.com/younghz/Markdown</a></td>
</tr>
<tr>
<td align="center">MarkDownCopy</td>
<td><a target="_blank" rel="noopener" href="https://github.com/younghz/Markdown" title="Markdown">https://github.com/younghz/Markdown</a></td>
</tr>
</tbody></table>
<p>关于其它扩展语法可参见具体工具的使用说明。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/monkey-patch-hou-zi-bu-ding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/monkey-patch-hou-zi-bu-ding/" class="post-title-link" itemprop="url">python monkey patch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-11 02:10:29" itemprop="dateModified" datetime="2021-05-11T02:10:29Z">2021-05-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="monkey-patch（动态语言中提到的猴子补丁）"><a href="#monkey-patch（动态语言中提到的猴子补丁）" class="headerlink" title="monkey patch（动态语言中提到的猴子补丁）"></a>monkey patch（动态语言中提到的猴子补丁）</h3><ul>
<li>所谓的monkey patch就是运行时类型替换</li>
<li>比如gevent库需要修改内置的socket，把内置阻塞的库替换成非阻塞的socket</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># code02_猴子补丁.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">print(socket.socket)  <span class="comment"># 输出结果:&lt;class 'socket.socket'&gt;</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"After monkey patch"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line">monkey.patch_socket()  <span class="comment"># 把内置的阻塞socket替换为非阻塞的socket</span></span><br><span class="line">print(socket.socket)  <span class="comment"># 输出结果:&lt;class 'gevent._socket3.socket'&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line">print(select.select)  <span class="comment"># 输出结果:&lt;built-in function select&gt;</span></span><br><span class="line">monkey.patch_select()</span><br><span class="line">print(<span class="string">"After monkey patch"</span>)</span><br><span class="line">print(select.select)  <span class="comment"># 输出结果：&lt;function select at 0x000002A19B401158&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自己实现猴子补丁.py</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(time.time())  <span class="comment"># 输出内置时间戳</span></span><br><span class="line"><span class="comment"># 1562568697.2385693</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_time</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1234</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">time.time = _time  <span class="comment"># 进行函数替换</span></span><br><span class="line">print(time.time())  <span class="comment"># 输出替换后的时间戳，就是运行时替换函数</span></span><br><span class="line"><span class="comment"># 1234</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="自省-introspection-ɪntrə-ʊ-’spekʃ-ə-n"><a href="#自省-introspection-ɪntrə-ʊ-’spekʃ-ə-n" class="headerlink" title="自省 introspection /ɪntrə(ʊ)’spekʃ(ə)n/"></a>自省 introspection /ɪntrə(ʊ)’spekʃ(ə)n/</h3><ul>
<li>运行时判断一个对象所属类型</li>
<li>Python一切皆对象，用type，id，isinstance获取对象的类型信息</li>
<li>Inspect模块提供了更多获取对象信息的函数</li>
</ul>
<p>代码一：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">ll = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">d = dict(q=<span class="number">1</span>) <span class="comment"># {a:1}</span></span><br><span class="line"> </span><br><span class="line">print(type(ll))  <span class="comment"># 输出结果:&lt;class 'list'&gt;</span></span><br><span class="line">print(type(d))  <span class="comment"># 输出结果:&lt;class 'dict'&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 判断一个对象所属的类型</span></span><br><span class="line">print(isinstance(ll,list))  <span class="comment"># 输出结果:True</span></span><br><span class="line">print(isinstance(d,dict))   <span class="comment"># 输出结果:True</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 根据不同的类型来执行不同的逻辑 </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(a, int):</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    <span class="keyword">elif</span> isinstance(a, str):</span><br><span class="line">        <span class="keyword">return</span> a.upper() + b</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>))   <span class="comment"># 输出结果:3</span></span><br><span class="line">print(add(<span class="string">'head'</span>, <span class="string">'tail'</span>))  <span class="comment"># 输出结果:HEADtail</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 变量所在内存中的地址</span></span><br><span class="line">print(id(ll))  <span class="comment"># 输出结果:2337544905544</span></span><br><span class="line">print(id(d))  <span class="comment"># 输出结果:2337544963344</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 is 可以判断是否为同一个对象</span></span><br><span class="line"><span class="comment"># 本质就是 id(ll) == id(d)</span></span><br><span class="line">print(ll <span class="keyword">is</span> d)  <span class="comment"># 输出结果:False</span></span><br><span class="line">print(ll <span class="keyword">is</span> ll)  <span class="comment"># 输出结果:True</span></span><br><span class="line"> </span><br><span class="line">l1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">l2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># 比较值是否相同</span></span><br><span class="line">print(l1 == l2)  <span class="comment"># 输出结果:True</span></span><br><span class="line"><span class="comment"># 比较ID是否相同</span></span><br><span class="line">print(l1 <span class="keyword">is</span> l2)     <span class="comment"># 输出结果:False</span></span><br><span class="line">print(id(l1), id(l2))   <span class="comment"># 输出结果:2337543699976 2337544905416</span></span><br></pre></td></tr></tbody></table></figure>
<p>经常用到：</p>
<p>判断一个对象是不是<code>none</code>，经常用<code>is none</code>而不是<code>= none</code>，就因为<code>none</code>本身是单例的，所以我们经常使用<code>is</code>来判断是不是同一个对象。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/mysql-suo-yin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/mysql-suo-yin/" class="post-title-link" itemprop="url">mysql索引</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-16 14:43:35" itemprop="dateModified" datetime="2021-05-16T14:43:35Z">2021-05-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>数据表中一列或多列的值进行排序的数据结构，可快速访问数据库表中的特定信息。</p>
<p>为什么加了索引就查询快了<br>没有加索引就是全表查询，加了索引，索引底层是保存在数据结构中，有二叉树，红黑树，hash表，B-Tree.<br>我们现在的数据库里使用的索引底层的数据结构是B-tree<br>比如我们想要将一个表里面的某一个字段作为索引，如果底层是二叉搜索树，那么字段是键，数据地址是值，以键值对的形式保存在二叉搜索树里面，以后拿键里面的值搜索的时候，直接从二叉搜索树里面找，找到以后就有地址了，拿地址从表里面找，那么就可以找到了。<br>二叉搜索树的右边是比左边大，所以很快的。</p>
<p>但是如果二叉树是极端的，不是平衡二叉树，是在一段排列的，所以即使是从索引里面获取，性能还是比较的低。</p>
<p>红黑树的话，有自旋，所以不会出现极端，但是数据多的话，红黑树的高度是比较的高，不是我们想要的。我们希望高度是固定的，但是我们要放的数据可以全部的放进去。</p>
<p>哈希表的话，在查找范围的时候是不可以执行的，所以还是不选择</p>
<p>B+Tree是比较的好的，存储的数据比较多，高度是可以限定的，可以查找范围。</p>
<h4 id="索引对性能的影响"><a href="#索引对性能的影响" class="headerlink" title="索引对性能的影响"></a>索引对性能的影响</h4><ul>
<li>大大减少服务器需要扫描的数据量，</li>
<li>帮助服务器避免排序和临时表</li>
<li>将随机I/O变顺序I/O</li>
<li>提高查询检索数据的速度，</li>
</ul>
<h4 id="不良影响，索引不是越多越好的理由"><a href="#不良影响，索引不是越多越好的理由" class="headerlink" title="不良影响，索引不是越多越好的理由"></a>不良影响，索引不是越多越好的理由</h4><ul>
<li>降低写的速度、写入的代价过高</li>
<li>占用磁盘</li>
</ul>
<p>索引的使用场景<br>对于非常小的表，大部分情况下全表扫描效率更高<br>中到大型表，索引非常有效<br>特大型的表，建立和使用索引的代价将随之增长，可以使用分区技术来解决</p>
<p>Mysql的索引 每一个表里面都有一个聚簇索引，<br>如果表里面有主键的话，根据主键生成索引，<br>如果你没有设置主键，那么会根据unique的字段生成索引，或者都没有的话，那么就会根据行id生成索引</p>
<p>索引的类型都是实现在存储引擎层的<br>普通索引:最基本的索引，没有任何约束限制（CREATE INDEX）<br>唯一索引:（CREATE UNIQUE INDEX）与普通索引类似，但是不同的是唯一索引有唯一性约束，要求索引列的值必须唯一、所有的类的值是唯一的,这一点和主键索引一样.但是他允许有空值,</p>
<p>多列索引，使用多个列去创建索引，多列索引反应在B+Tree里面其实就是相当于B+Tree的key是由多个列的值组成的。<br>主键索引（PRIMARY KEY），一个表只能有一个，特殊的唯一索引，不允许有空值，(在B+TREE中的InnoDB引擎中,主键索引起到了至关重要的地位)<br>外键索引：只有InnoDB类型的表才可以使用外键索引，保证数据的一致性、完整性、和实现级联操作（基本不用）。<br>全文索引（FULLTEXT INDEX）：MySQL自带的全文索引只能用于MyISAM，并且只能对英文进行全文检索 （基本不用），InnoDB 不支持</p>
<p>唯一索引与主键索引的区别<br>一个表只能有一个主键索引，可以有多个唯一索引<br>主键索引一定是唯一索引，唯一索引不是主键索引<br>主键可以与外键构成参照完整性约束，防止数据不一致</p>
<p>联合索引 组合索引也叫复合索引：将多个列组合在一起创建索引，可以覆盖多个列。<br>*遵循“最左前缀”原则，把最常用作为检索或排序的列放在最左，依次递减，组合索引相当于建立了col1,col1col2,col1col2col3三个索引，而col2或者col3是不能使用索引的。<br>同时作用于abc的组合，效果：缩短查询范围 where时的条件要按照建立索引的时候字段的排序方式</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">KEY</span>(a, b, c)</span><br><span class="line"><span class="attribute">WHERE</span> a = <span class="number">1</span> AND b = <span class="number">2</span> AND c = <span class="number">3</span></span><br><span class="line"><span class="attribute">WHERE</span> a = <span class="number">1</span> AND b = <span class="number">2</span></span><br><span class="line"><span class="attribute">WHERE</span> a = <span class="number">1</span></span><br><span class="line"><span class="comment">#以上SQL语句可以用到索引</span></span><br><span class="line"><span class="attribute">WHERE</span> b = <span class="number">2</span> AND c = <span class="number">3</span></span><br><span class="line"><span class="attribute">WHERE</span> a = <span class="number">1</span> AND c = <span class="number">3</span></span><br><span class="line"><span class="comment">#以上SQL语句用不到索引，不能跳过前面的，没有连续</span></span><br></pre></td></tr></tbody></table></figure>

<p>MySQL索引的创建原则</p>
<ol>
<li>最适合索引的列是出现在经常被用作检索条件的字段上面，在 WHERE或ON子句中的列，<br>连接子句中的列、经常用作表连接的字段<br>经常出现在 order by， group by 之后的字段<br>而不是出现在 SELECT关键字后的列，</li>
<li>索引列的数据量很大，而且经常被查询的数据表，数据区分度越高</li>
<li>对字符串进行索引，应该制定一个前缀长度，可以节省大量的索引空间</li>
<li>根据情况创建复合索引，复合索引可以提高查询效率</li>
<li>避免创建过多索引，索引会额外占用磁盘空间，降低写操作效率</li>
<li>主键尽可能选择较短的数据类型，可以有效减少索引的磁盘占用，提高查询效率</li>
</ol>
<p>NOT NULL 非空字段<br>注意事项</p>
<ol>
<li>column is null 列值为空可以使用索引，Mysql 很难对空值作查询优化。反应在B+树结构里面就是空值无法去作比较这个时候索引就利用不上了。（很多互联网公司的建表规范要求索引字段有默认值）</li>
<li>区分度高，离散度大，作为索引的字段值尽量不要有大量相同的值。反应在B+树里面就是当很多字段是一样的时候说明B+树里面很多key是相同的，所以需要大量的去比较这样效率就比较低。（一般不推荐枚举值就几个字段去建索引）</li>
<li>索引的长度不要太长(比较好费时间)，作为索引的时候在B+树里面作为一个key来存在的，主键索引一般使用自增的int值，因为int值很容易去比较，如果是字符串的时候去比较不同树之间结点key的时候，就需要做一个很长的比较。如果在字符串类型上面去做索引的话就一定要指定长度不能太长否则比较的时候就会耗费时间。<br>索引什么时候失效？<br>经常在编写代码时候出现慢查询问题，这说明很多时候索引没有使用对。<br>记忆口诀：模糊匹配、类型隐转、最左匹配，这三种情况可能导致索引会失效。</li>
</ol>
<p>以%开头的LIKE语句，模糊搜索。索引没有办法去利用，因为B+树的key没有办法再去直接比较，可以使用全文索引<br>出现隐式类型转换，需要注意参数类型跟SQL查询时候类型是不是一样的，因为两个类型不同没法比较（在 Python 这种动态语言查询中需要注意）<br>没有满足最左前缀原则（想想为什么是最左匹配？最左前缀原则，如果是多列索引的时候需要满足最左前缀才能利用上索引。</p>
<p>对于InnoDB引擎它的辅助索引，它的叶结点存储的是主键的值。然后再通过主键找到对应的数据。其实这是两个过程，这就是为什么在InnoDB引擎里面使用辅助索引要比直接使用主键索引慢一些的原因。<br>辅助索引先找到主键以后再根据主键找到数据</p>
<p>例如：多列索引有三个值a, b, c三个字段，如(a, b, c)。有两个key值(1, 2, 3) 和 (1, 2, 4)作比较，先比较第一个都是1相等，再比交第二个都是2相等，最后比较第三个3小于4 ，这时候就知道二叉树往哪个方向。假如不满足最左匹配就没有办法直接比较，如 (a,b,c), (a,b), (a)，这三种情况下都是可以使用索引的，但是(b,c)就不可以，因为连第一个比较的基准都没有，根本没有办法再往后比较了）<br>三种情况总结成一句话，当Mysql B+树的key没有办法去比较的时候，索引就会失效。</p>
<ol start="4">
<li><p>如果 MySQL估计使用索引比全表扫描更慢，会放弃使用索引<br>例如：表中只有100条数据左右。对于SQL语句WHERE id &gt; 1 AND id &lt; 100，MySQL会优先考虑全表扫描。</p>
</li>
<li><p>如果or前的条件中的列有索引，后面的没有，索引都不会被用到</p>
</li>
<li><p>列类型是字符串，查询时一定要给值加引号，否则索引失效<br>例如：列name varchar(16)，存储了字符串”100”<br>WHERE name = 100;<br>以上SQL语句能搜到，但无法用到索引。</p>
</li>
</ol>
<h3 id="创建索引的语法："><a href="#创建索引的语法：" class="headerlink" title="创建索引的语法："></a>创建索引的语法：</h3><p>首先创建一个表：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">    ….</span><br><span class="line">    <span class="keyword">index</span> [索引名] (字段名)</span><br><span class="line">    ….</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p>索引名一般是：表名_字段名<br>创建单个索引的语法：<br>法一：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名 (字段);</span><br></pre></td></tr></tbody></table></figure>
<p>法二：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">index</span> [索引名] (字段);</span><br></pre></td></tr></tbody></table></figure>

<p>给id创建索引：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> table_id <span class="keyword">on</span> <span class="keyword">table</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>创建联合索引的语法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">on</span> 表名（字段名<span class="number">1</span>，字段名<span class="number">2</span>）</span><br></pre></td></tr></tbody></table></figure>

<p>其中index还可以替换成unique，primary key，分别代表唯一索引和主键索引</p>
<p>show index from  表名;</p>
<p>删除索引：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名;</span><br></pre></td></tr></tbody></table></figure>


<blockquote>
<p>聚集还是非聚集指的是B+Tree 叶结点存的是指针还是数据记录</p>
</blockquote>
<p>MyISAM索引和数据分离，使用的是非聚集索引<br>在叶结点里面存储的是指向数据的指针，如叶结点5中存储的0x6A，指针指向的数据的表文件也就是数据文件，</p>
<p>为什么需要索引？是如何工作的<br>索引类似于书籍的目录，要想找到一本数的某个特定主题，<br>需要先查找书的目录，定位对应的页码可以找到内容<br>索引结构、存储引擎使用类似的方式进行数据查询，<br>先去索引文件当中找到对应的值，<br>然后根据匹配的索引找到对应的数据行</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> myisam_table (</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INTEGER</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">     title <span class="built_in">VARCHAR</span>(<span class="number">80</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span> = MYISAM;   </span><br></pre></td></tr></tbody></table></figure>

<p>InnoDB引擎 数据文件就是索引文件，数据和索引存储在同一个文件<code>innodb_table.idb</code>的b+tree上面，Innodb中的主键索引就是聚集索引<br>存储方式</p>
<ul>
<li>共享表空间：一个表中数据和索引可以横跨多个文件，数据存储的大小限制不再是文件大小的限制，而是空间本身大小的限制，linux操作系统本身对文件大小起到了一定的限制作用。如果索引越多跟的当数据变化时要更新的索引文件也越多</li>
<li>单独表空间：每个表中数据以单独的文件进行存放，单表数据的限制成为操作系统中文件系统对文件大小的限制<br>为什么需要索引？是如何工作的<br>索引类似于逛超市，要想找到一本数的某个特定商品，<br>需要先查找大的区域，比如蔬菜区，水果区，相当于寻找索引，一个区域一个区域的检索<br>索引结构、存储引擎使用类似的方式进行数据查询，</li>
</ul>
<p>叶结点即存储 主键 同时也存储 数据表里面的内容，如叶结点15, 存储主键34和数据Bob。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> innodb_table (</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INTEGER</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    <span class="string">`url_md5`</span> <span class="built_in">char</span>(<span class="number">32</span>),</span><br><span class="line">    <span class="keyword">KEY</span> <span class="string">`idx_url`</span> (<span class="string">`url_md5`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span> = <span class="keyword">InnoDB</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>Innodb和myisam的区别<br>InnoDB支持事务，MyISAM不支持</p>
<ul>
<li>InnoDB支持外键，而MyISAM不支持</li>
<li>InnoDB是聚集索引，数据文件是和索引绑在一起的，必须要有主键，通过主键索引效率很高。<br>而MyISAM是非聚集索引，数据文件是分离的，索引保存的是数据文件的指针。主键索引和辅助索引是独立的。<br>InnoDB不保存表的具体行数，而MyISAM用一个变量保存了整个表的行数<br>InnoDB不支持全文索引，而MyISAM支持全文索引，查询效率上MyISAM要高；5.7 已经支持</li>
</ul>
<p>以下语句是否会应用索引？</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">users</span> </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(adddate) &lt; <span class="number">2007</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>不会，因为只要列涉及到运算，MySQL就不会使用索引。</p>
<h3 id="以下三条sql-如何建索引，只建一条怎么建？"><a href="#以下三条sql-如何建索引，只建一条怎么建？" class="headerlink" title="以下三条sql 如何建索引，只建一条怎么建？"></a>以下三条sql 如何建索引，只建一条怎么建？</h3><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WHERE <span class="attribute">a</span>=1 <span class="keyword">AND</span> <span class="attribute">b</span>=1</span><br><span class="line">WHERE <span class="attribute">b</span>=1</span><br><span class="line">WHERE <span class="attribute">b</span>=1 </span><br><span class="line">ORDER BY time DESC</span><br></pre></td></tr></tbody></table></figure>
<p>以顺序b,a,time建立联合索引，</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> table1_b_a_time <span class="keyword">ON</span> index_test01(b,a,<span class="built_in">time</span>)。</span><br></pre></td></tr></tbody></table></figure>

<p>mysql优化器会自动调整where条件中字段的前后顺序，对于上面的第一条sql，如果建立索引为idx_b_a(b,a)也是可以用到索引的，<br>不过建议where后的字段顺序和联合索引保持一致，养成好习惯。</p>
<p>考察的是组合索引和索引排序，至少得建两个吧，idx_a_b(a,b)和idx_b_time(b,time)<br>已知存在下例索引  KEY <code>companyIsdelete</code> (<code>companyId</code>,<code>isDelete</code>)<br>我交换顺序后的解析计划如下，还是用到了该索引 </p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from DB_Message9 where isDelete=1 and companyId=1234\G</span><br><span class="line">*************************** 1.row***************************           </span><br><span class="line">id: 1  </span><br><span class="line">select_type: SIMPLE        </span><br><span class="line">table: DB_Message9         </span><br><span class="line">type: ref</span><br><span class="line">possible_keys: companyIsdelete,companyAnswerUp,customertype,sender,sender2,noAssign          </span><br><span class="line">key: companyIsdelete      </span><br><span class="line">key_len: 6          </span><br><span class="line">ref: const,const         </span><br><span class="line">rows: 1        </span><br><span class="line">Extra: NULL1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></tbody></table></figure>

<p>这三条查询中,b字段的查询频率最高,所以b字段要加入到索引中,多列索引中,索引的列顺序很重</p>
<p>问题19：有A(id,sex,par,c1,c2),B(id,age,c1,c2)两张表，其中A.id与B.id关联，现在要求写出一条SQL语句，将B中age&gt;50的记录的c1,c2更新到A表中同一记录中的c1,c2字段中<br>考点分析<br>这道题主要考察的是MySQL的关联UPDATE语句<br>延伸考点：</p>
<p>MySQL的关联查询语句<br>MySQL的关联UPDATE语句<br>针对刚才这道题，答案可以是如下两种形式的写法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> A,B <span class="keyword">SET</span> A.c1 = B.c1, A.c2 = B.c2 <span class="keyword">WHERE</span> A.id = B.id</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> B <span class="keyword">ON</span> A.id=B.id <span class="keyword">SET</span> A.c1 = B.c1,A.c2=B.c2</span><br></pre></td></tr></tbody></table></figure>
<p>再加上B中age&gt;50的条件：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> A,B <span class="keyword">set</span> A.c1 = B.c1, A.c2 = B.c2 <span class="keyword">WHERE</span> A.id = B.id <span class="keyword">and</span> B.age &gt; <span class="number">50</span>;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> B <span class="keyword">ON</span> A.id = B.id <span class="keyword">set</span> A.c1 = B.c1,A.c2 = B.c2 <span class="keyword">WHERE</span> B.age &gt; <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://bubbleboy11.github.io/2020/08/21/pymysql-mysqlclient/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="外心人D">
      <meta itemprop="description" content="本博客大多内容为慕课和网上博客，并非原创">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外心人D的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/21/pymysql-mysqlclient/" class="post-title-link" itemprop="url">pymysql mysqlclient</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-20 16:21:41" itemprop="dateCreated datePublished" datetime="2020-08-20T16:21:41Z">2020-08-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-24 13:48:59" itemprop="dateModified" datetime="2021-05-24T13:48:59Z">2021-05-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>单独使用django的model,批量导入数据<br>这是因为 Django 在连接 MySQL 数据库时默认使用的是 MySQLdb 驱动， 然而我们没有安装该驱动， 因为它并不支持 Python3， 我们现在安装的是 PyMySQL 驱动， 如何让当前的 Django 通过 PyMySQL 来<br>连接 MySQL 数据库呢？ 方法很简单。在…/guest/<strong>init</strong>.py 目录下添加：</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MySQLdb  <span class="comment"># pip install mysqlclient</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建数据库链接</span></span><br><span class="line">db = MySQLdb.connect(</span><br><span class="line">    host=<span class="string">'127.0.0.1'</span>,</span><br><span class="line">    user=<span class="string">'root'</span>,</span><br><span class="line">    passwd=<span class="string">''</span>,</span><br><span class="line">    db=<span class="string">'fish_shop'</span></span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">conn = MySQLdb.connect(host=<span class="string">'1.2.3.4'</span>, port=<span class="number">3306</span>,</span><br><span class="line">                       user=<span class="string">'hellokitty'</span>, password=<span class="string">'Hellokitty.618'</span>,</span><br><span class="line">                       database=<span class="string">'zhihu'</span>, charset=<span class="string">'utf8'</span>,</span><br><span class="line">                       autocommit=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_to_db</span>(<span class="params">url, page, digest</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(</span><br><span class="line">                <span class="string">'insert into tb_explore (url, page, digest) values (%s, %s, %s) '</span>,</span><br><span class="line">                (url, page, digest)</span><br><span class="line">            )</span><br><span class="line">    <span class="keyword">except</span> MySQLdb.MySQLError <span class="keyword">as</span> err:</span><br><span class="line">        print(err)</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MysqlAPI</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, db_ip, db_name, db_password, table_name, db_charset</span>):</span></span><br><span class="line">        self.db_ip = db_ip</span><br><span class="line">        self.db_name = db_name</span><br><span class="line">        self.db_password = db_password</span><br><span class="line">        self.table_name = table_name</span><br><span class="line">        self.db_charset = db_charset</span><br><span class="line">        self.conn = MySQLdb.connect(host=self.db_ip,</span><br><span class="line">                                    user=self.db_name,</span><br><span class="line">                                    password=self.db_password,</span><br><span class="line">                                    db=self.table_name,</span><br><span class="line">                                    charset=self.db_charset)</span><br><span class="line">        self.cur = self.conn.cursor()</span><br></pre></td></tr></tbody></table></figure>


<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#连接mysql</span></span><br><span class="line">con = pymysql.connect(<span class="string">'localhost'</span>,<span class="string">'root'</span>,<span class="string">'123456'</span>,<span class="string">'db2'</span>,charset=<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建操作mysql的游标</span></span><br><span class="line">cur = con.cursor()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 将所有需要事物的sql语句放在一个try里</span></span><br><span class="line">    sql1 = <span class="string">'insert into bank values("lili",500)'</span></span><br><span class="line">    sql2 = <span class="string">'insert into bank values("bob",1000)'</span>    </span><br><span class="line">  </span><br><span class="line">    <span class="comment">#执行  </span></span><br><span class="line">    cur.execute(sql1)</span><br><span class="line">    cur.execute(sql2)</span><br><span class="line">    <span class="comment">#提交</span></span><br><span class="line">    con.commit()</span><br><span class="line"><span class="comment">#异常    </span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'-----rollback------'</span>)    </span><br><span class="line">    <span class="comment">#回滚</span></span><br><span class="line">    con.rollback()</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭游标</span></span><br><span class="line">cur.close()</span><br><span class="line"><span class="comment">#关闭连接mysql</span></span><br><span class="line">con.close()</span><br></pre></td></tr></tbody></table></figure>

<p>使用pymysql向数据表中添加数据，并记录时间戳</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#建立连接</span></span><br><span class="line">con = pymysql.connect(<span class="string">'mysql服务端ip'</span>,<span class="string">'用户'</span>,<span class="string">'该用户mysql密码'</span>,<span class="string">'库名'</span>,charset=<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#游标</span></span><br><span class="line">cur = con.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment">#准备200万条数据</span></span><br><span class="line">data_list = []</span><br><span class="line">t1 = time.time()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2000000</span>):</span><br><span class="line">    name = <span class="string">'Tom_%s'</span>(i)</span><br><span class="line">    data_list.append(name)</span><br><span class="line">t2 = time.time()</span><br><span class="line">print(<span class="string">'name is ready ! cost %s seconds'</span>%(t2 - t1))</span><br><span class="line"></span><br><span class="line">sql = <span class="string">'insert into students(name) value(%s)'</span></span><br><span class="line">cur.executemany(sql,data_list)</span><br><span class="line">con.commit()</span><br><span class="line"></span><br><span class="line">t3  =time.time()</span><br><span class="line">print(<span class="string">'insert is over !! cost %s seconds'</span>%(t3 - t2))</span><br><span class="line"></span><br><span class="line">cur.close()</span><br><span class="line">con.close()</span><br></pre></td></tr></tbody></table></figure>

<p>mysql中测试有索引查询和无索引查询的时间差异</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#开启运行时间检测</span></span><br><span class="line">show variables like <span class="string">'%pro%'</span>;</span><br><span class="line"><span class="comment">#若其中profiling显示off，执行下面命令开启一下</span></span><br><span class="line">set profiling=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行查询语句，查最后一个(无索引)</span></span><br><span class="line">select name <span class="keyword">from</span> students where name=<span class="string">'Tom_99999'</span>;</span><br><span class="line"><span class="comment">#查看执行时间</span></span><br><span class="line">show profiles;</span><br><span class="line"></span><br><span class="line"><span class="comment">#在name字段创建索引</span></span><br><span class="line"><span class="comment">#语法：create index 索引名(一般与字段名一样) on 表名(要加索引的字段)</span></span><br><span class="line">create index name on students(name);</span><br><span class="line"><span class="comment">#执行查询语句(有索引),可能Mysql开了查询缓存，你查另外一个值</span></span><br><span class="line">select name <span class="keyword">from</span> students where name=<span class="string">'Tom_88888'</span>;</span><br><span class="line"><span class="comment">#查看执行时间</span></span><br><span class="line">show profiles;</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭运行时间检测</span></span><br><span class="line">set profiling=<span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight scheme"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>```</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">外心人D</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
