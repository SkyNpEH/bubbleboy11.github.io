<!DOCTYPE html>
<html  lang="zh-CN" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <meta name="description" content="本博客大多内容为慕课和网上博客，并非原创">
  <link rel="icon" href="/img/logo.png">
  <title>旅游网景点详细页面</title>
  
  
  <meta property="og:title" content="旅游网景点详细页面">
  
  
  <meta property="og:url" content="https://bubbleboy11.github.io/2020/08/21/lu-you-wang-jing-dian-xiang-xi-ye-mian/index.html">
  
  
  <meta property="og:img" content="/img/author_img.png">
  
  
  <meta property="og:img" content="本博客大多内容为慕课和网上博客，并非原创">
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:published_time" content="2020-08-20">
  <meta property="og:article:modified_time" content="2021-04-02">
  <meta property="og:article:author" content="外心人D">
  
  
  <meta property="og:article:tag" content="剑指offer">
  
  <meta property="og:article:tag" content="Vue">
  
  
  
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
<link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">

  
  
  
  
<meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="外心人D的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/img/logo.png" alt="logo">
      
      <span class="navbar-logo-dsc">外心人D</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">
    
    首页
    
    </a>
    
    <a href="/archives" class="navbar-menu-item">
    
    归档
    
    </a>
    
    <a href="/tags" class="navbar-menu-item">
    
    标签
    
    </a>
    
    <a href="/categories" class="navbar-menu-item">
    
    分类
    
    </a>
    
    <a href="/about" class="navbar-menu-item">
    
    关于
    
    </a>
    
    <a href="/links" class="navbar-menu-item">
    
    友链
    
    </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
    <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size: 1.2rem; font-weight: 400;"></i></a>
  </div>
</nav>
    
    <div id="local-search" style="display: none;">
      <input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容...">
      <div id="search-content"></div>
    </div>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      旅游网景点详细页面
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2020-08-20T16:21:41.000Z">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2020-08-20</span>
    </time>
    
    <span class="dot"></span>
    
    <a href="/categories/旅游网项目/" class="post-meta-link">旅游网项目</a>
    
    
    
    <span class="dot"></span>
    <span>11.8k 字</span>
    
  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/剑指offer/" class="post-meta-link">剑指offer</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/Vue/" class="post-meta-link">Vue</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <h1 id="旅游网景点详细页面"><a href="#旅游网景点详细页面" class="headerlink" title="旅游网景点详细页面"></a>旅游网景点详细页面</h1><h3 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h3><ul>
<li>面向组件方式编程</li>
<li>单页面应用</li>
</ul>
<p>如何在Vue项目中实现“多页面”<br>VueRouter用来在单页面应用中实现“多页面”<br>通过url的规则进行匹配，<br>满足url规则1，展示组件1的内容<br>满足url规则2，展示组件2的内容<br>满足url规则3，展示组件3的内容</p>
<h3 id="Vue中的路由管理"><a href="#Vue中的路由管理" class="headerlink" title="Vue中的路由管理"></a>Vue中的路由管理</h3><ul>
<li><p>Vue Router是Vue.js官方的路由管理器</p>
</li>
<li><p>新建项目</p>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre class=" language-hljs bash">&gt;&gt; <span class="hljs-built_in">cd</span> C:/Vue<br>&gt;&gt; npm create <span class="hljs-built_in"><code class="language-hljs bash">&gt;&gt; <span class="hljs-built_in">cd</span> C:/Vue<br>&gt;&gt; npm create <span class="hljs-built_in">test</span><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>安装<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre class=" language-hljs bash"><code class="language-hljs bash">>> cnpm install vue-router -S<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h3 id="路由的使用"><a href="#路由的使用" class="headerlink" title="路由的使用"></a>路由的使用</h3><ul>
<li>新建<code>/src/router.js</code></li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-comment">// VueRouter是Vue.js的一个插件</span><br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span><br>Vue.use(VueRouter)  <span class="hljs-comment"><code class="language-hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-comment">// VueRouter是Vue.js的一个插件</span><br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span><br>Vue.use(VueRouter)  <span class="hljs-comment">// 使用这个插件</span><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>设置路由规则<br><code>/src/router.js</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">const</span> routes = [<br>  <span class="hljs-comment">// 页面1 匹配指定规则，匹配/home在对应的组件中显示首页的内容</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>, <span class="hljs-attr">component</span>: HomePage, <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span>},<br>  <span class="hljs-comment">// 页面2</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr"><code class="language-hljs js"><span class="hljs-keyword">const</span> routes = [<br>  <span class="hljs-comment">// 页面1 匹配指定规则，匹配/home在对应的组件中显示首页的内容</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>, <span class="hljs-attr">component</span>: HomePage, <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span>},<br>  <span class="hljs-comment">// 页面2</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: AboutPage}<br>]<br></code></pre></td></tr></tbody></table></figure></li>
<li>配置路由规则<br><code>/src/router.js</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({<br>  routes <span class="hljs-comment">// (缩写) 相当于 routes: routes</span><br>})<br><span class="hljs-keyword">new</span> Vue({<br>  el: <span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({<br>  routes <span class="hljs-comment">// (缩写) 相当于 routes: routes</span><br>})<br><span class="hljs-keyword">new</span> Vue({<br>  el: <span class="hljs-string">'#app'</span>,<br>  router<br>})<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>/src/router.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword"><code class="language-hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> route<br></code></pre></td></tr></tbody></table></figure>

<p><code>/src/main.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span><br><br><span class="hljs-keyword">new</span> Vue({<br>  <span class="hljs-comment">// router: router,</span><br>  router,<br>}).$mount(<span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span><br><br><span class="hljs-keyword">new</span> Vue({<br>  <span class="hljs-comment">// router: router,</span><br>  router,<br>}).$mount(<span class="hljs-string">'#app'</span>)<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><p>设置路由切换后页面的显示位置<br>在模板中指定路由切换后组件的渲染位置<br><code>&lt;router-view&gt;&lt;/router-view&gt;</code><br><code>/src/App.vue&gt;</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <div id="app"><br>    <!-- 路由变化之后，在这里显示组件的内容 --><br>    <router-view></router-view><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>在模板中实现路由跳转 转换成html的a标签<br><code>&lt;router-link to="/about"&gt;&lt;/router-link&gt;</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre class=" language-hljs to```的跳转地址就是```router.js```中的```path```值"><code class="language-hljs to```的跳转地址就是```router.js```中的```path```值">```/src/App.vue>```<br>```vue<br><template><br>  <div id="app"><br>    <router-link to="/home">首页</router-link> | <br>    <router-link to="/about">关于</router-link><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h3 id="Vue-js中的路由中的参数传递"><a href="#Vue-js中的路由中的参数传递" class="headerlink" title="Vue.js中的路由中的参数传递"></a>Vue.js中的路由中的参数传递</h3><p>景点详情的路由如何设计？</p>
<ul>
<li><p>get参数通过问号<br><code>/detail?id=1</code><br><code>/detail?id=2</code><br><code>/detail?id=3</code></p>
</li>
<li><p>django里的url设计原则<br><code>/detail/1</code><br><code>/detail/2</code><br><code>/detail/3</code></p>
</li>
</ul>
<h3 id="动态路由匹配"><a href="#动态路由匹配" class="headerlink" title="动态路由匹配"></a>动态路由匹配</h3><ul>
<li>设置动态匹配规则<ul>
<li>动态路由参数<br><code>/src/router.js</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> DetailPage <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Detail.vue'</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({<br>  routes: [<br>    <span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br>    {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr"><code class="language-hljs js"><span class="hljs-keyword">import</span> DetailPage <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Detail.vue'</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({<br>  routes: [<br>    <span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br>    {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr">component</span>: DetailPage}<br>    ]<br>})<br></code></pre></td></tr></tbody></table></figure>
等同于<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br><span class="hljs-keyword">const</span> routes = [<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr">component</span>: DetailPage}<br>]<br><br><span class="hljs-keyword">const</span> route = <span class="hljs-keyword">new</span> VueRouter({<br>  <span class="hljs-comment">// routes: routes</span><br>  routes <span class="hljs-comment"><code class="language-hljs js"><span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br><span class="hljs-keyword">const</span> routes = [<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr">component</span>: DetailPage}<br>]<br><br><span class="hljs-keyword">const</span> route = <span class="hljs-keyword">new</span> VueRouter({<br>  <span class="hljs-comment">// routes: routes</span><br>  routes <span class="hljs-comment">// (缩写) 相当于 routes: routes</span><br>})<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
</li>
</ul>
<p><code>App.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><script><br>export default {<br>  data () {<br>    return {<br>      id: '',<br>      name: '',<br>      type: ''<br>    }<br>  }<br>}<br></script>    <br></code></pre></td></tr></tbody></table></figure>

<p>新建<code>/test/src/views/Detail.vue</code></p>
<ul>
<li><p>在组件中获取匹配参数和查询</p>
<ul>
<li><p>在JS中获取参数</p>
<figure class="highlight plain"><figcaption><span>``` 获取当前路由</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre class=" language-hljs $route"><code class="language-hljs $route">```Detial.vue```<br>```vue<br><script><br>export default {<br>  created () {<br>    let id = this.$route.params.id<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>响应参数的变化<br><code>Detial.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><script><br>export default {<br>  watch: {<br>    $route(to, from) {<br>      // 对路由变化作出响应...<br>      console.log('to:', to)<br>      console.log('from:', from)<br>      this.id = this.$route.params.id<br>    },<br>    id (to, from) {<br>      console.log('to-id:', to)<br>      console.log('from-id:', from)<br>    }<br>  }<br>}<br></script>  <br></code></pre></td></tr></tbody></table></figure>
</li>
</ul>
</li>
<li><p>URL中的查询参数<br><code>/sight/list?name=ashe</code></p>
</li>
<li><p>获取方式<br><code>Detail.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <h1>详情页：{{ id }} : {{ name }} : {{ type }}</h1><br></template><br><br><script><br>export default {<br>  created () {<br>    let name = this.$route.query.name<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h3 id="路由的跳转"><a href="#路由的跳转" class="headerlink" title="路由的跳转"></a>路由的跳转</h3><ul>
<li>在模板中标签跳转 router-link<br><code>App.vue</code><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <div id="app"><br>    <router-link to="/d/123/type1">详情1</router-link>|<br>    <!-- <HelloWorld msg="Welcome to Your Vue.js App"/> --><br>    <!-- 路由变化之后，在这里显示组件的内容 --><br>    <router-view></router-view><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>
在浏览器点击点我回到详情1跳转<br><code>http://localhost:8080/#/d/123/type1</code></li>
</ul>
<ul>
<li><p>路由命名 方便URL修改<br><code>rounter.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> DetailPage <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Detail.vue'</span><br><br><span class="hljs-comment">// 定义路由规则</span><br><span class="hljs-keyword">const</span> routes = [<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>, <span class="hljs-attr">component</span>: HomePage, <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span>},<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: AboutPage},<br>  <span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr">component</span>: DetailPage, <span class="hljs-attr">name</span>: <span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">import</span> DetailPage <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Detail.vue'</span><br><br><span class="hljs-comment">// 定义路由规则</span><br><span class="hljs-keyword">const</span> routes = [<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>, <span class="hljs-attr">component</span>: HomePage, <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span>},<br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: AboutPage},<br>  <span class="hljs-comment">// http://localhost:8080/#/detail/1234/type1?name=ashe&amp;sort=asc</span><br>  {<span class="hljs-attr">path</span>: <span class="hljs-string">'/d/:id/:types'</span>, <span class="hljs-attr">component</span>: DetailPage, <span class="hljs-attr">name</span>: <span class="hljs-string">'detail-page'</span>}<br>]<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>按照名称跳转</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <div id="app"><br>    <router-link :to='"/d/" + id + "/" + types'>详情2</router-link>|<br>    <router-link :to='{path: "/d/" + id + "/" + types, query: {name: "abc", sort: "desc"}}'>详情3</router-link>|<br>    <router-link :to='{name: "detail-page", params: {id: "abc123", types: "type3"}, query: {name: "abc", sort: "desc"}}'>详情4</router-link>|<br>    <router-view></router-view><br>  </div><br></template><br><br><script><br>// import HelloWorld from './components/HelloWorld.vue'<br><br>export default {<br>  name: 'App',<br>  data () {<br>    return {<br>      id: 456,<br>      types: 'type2'<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>
<p>在浏览器点击点我回到详情2跳转<br><code>http://localhost:8080/#/d/456/type2</code><br>在浏览器点击点我回到详情3跳转<br><code>http://localhost:8080/#/d/456/type2?name=abc&amp;sort=desc</code><br>在浏览器点击点我回到详情4跳转<br><code>http://localhost:8080/#/d/abc123/type3?name=abc&amp;sort=desc</code></p>
</li>
</ul>
<ul>
<li>在JS中事件跳转<figure class="highlight plain"><figcaption><span>vue```得到的实例</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs this```vue的实例，在```main.js```通过```new"><code class="language-hljs this```vue的实例，在```main.js```通过```new">>传参是 ```router```，接收参数是 ```route```<br>```$router```表示vue实例上所挂载的在```main.js```的```new vue```中的```router```这个对象，<br>跳转到不同的url，但这个方法会向history栈添加一个记录，点击后退会返回到上一个页面。<br><br>```App.vue```<br>```vue<br><template><br>  <div id="app"><br>    <-- 字符串 --><br>    this.$router.push('/home')  <br>    <-- 对象 --><br>    this.$router.push({path:'/home'})<br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>③ query 传参，相当于get请求，页面跳转时参数会在地址栏中显示，通过this.$route.query.id获取</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-comment">// 变成 /user?id=2</span><br><span class="hljs-built_in">this</span>.$router.push({ <br>    path:<span class="hljs-string">'/user'</span>,<br>    query:{<br>        id:<span class="hljs-built_in"><code class="language-hljs js"><span class="hljs-comment">// 变成 /user?id=2</span><br><span class="hljs-built_in">this</span>.$router.push({ <br>    path:<span class="hljs-string">'/user'</span>,<br>    query:{<br>        id:<span class="hljs-built_in">this</span>.id<br>    }<br>})<br></code></pre></td></tr></tbody></table></figure>
<p>④ params 传参，相当于post请求，页面跳转时参数不会在地址栏中显示,通过this.$route.params.id获取</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-built_in">this</span>.$router.push({ <br>    path:<span class="hljs-string">'/user'</span>,<br>    params:{<br>        id:<span class="hljs-built_in"><code class="language-hljs js"><span class="hljs-built_in">this</span>.$router.push({ <br>    path:<span class="hljs-string">'/user'</span>,<br>    params:{<br>        id:<span class="hljs-built_in">this</span>.id<br>    }<br>})<br></code></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <div id="app"><br>    <a href="javascript:;" @click="goHome">点我跳转</a><br>  </div><br></template><br><br><script><br>export default {<br>  name: 'App',<br>  data () {<br>    return {<br>      id: 456,<br>      types: 'type2'<br>    }<br>  },<br>  methods: {<br>    goHome () {<br>      this.$router.push('/home')<br>      // this.$router.push({name: 'home'})<br>      // this.$router.push({name: "detail-page", params: {id: "abc123", types: "type3"}, query: {name: "abc", sort: "desc"}})<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<p>在浏览器点击点我回到首页跳转<br><code>http://localhost:8080/#/home</code></p>
<h3 id="路由的跳转方式"><a href="#路由的跳转方式" class="headerlink" title="路由的跳转方式"></a>路由的跳转方式</h3><ul>
<li>页面跳转</li>
</ul>
<p><code>this.$router.push(location, onComplete?, onAbort?)</code></p>
<ul>
<li>页面前进或后退<br><code>this.$router.go(n)</code><br>n可为正数可为负数。正数返回上一个页面。<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-comment">// 在浏览器记录中前进1步，相当于history.forward()</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">1</span>)<br><br><span class="hljs-comment">// 后退一步记录，等同于history.back()</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">-1</span>)<br><br><span class="hljs-comment">// 前进三步记录</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">3</span>)<br><br><span class="hljs-comment">// 如果history记录不够用，就会失败</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">100</span>)<br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number"><code class="language-hljs js"><span class="hljs-comment">// 在浏览器记录中前进1步，相当于history.forward()</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">1</span>)<br><br><span class="hljs-comment">// 后退一步记录，等同于history.back()</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">-1</span>)<br><br><span class="hljs-comment">// 前进三步记录</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">3</span>)<br><br><span class="hljs-comment">// 如果history记录不够用，就会失败</span><br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">100</span>)<br><span class="hljs-built_in">this</span>.$router.go(<span class="hljs-number">-100</span>)<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <div id="app"><br>    <a href="javascript:;" @click="goBack">点我跳转</a><br>  </div><br></template><br><br><script><br>export default {<br>  name: 'App',<br>  data () {<br>    return {<br>      id: 456,<br>      types: 'type2'<br>    }<br>  },<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>替换浏览历史记录<br>同样是跳转到指定的url，但是这个方法不会向history里面添加新的记录，点击返回，会跳转到上上一个页面。上一个记录是不存在的。<br>场景是用户登录了后退，支付成功后退，不能回到原来的页面</li>
</ul>
<p><code>this.$router.replace(location, onComplete?, onAbort?)</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><script><br>export default {<br>  name: 'App',<br>  data () {<br>    return {<br>      id: 456,<br>      types: 'type2'<br>    }<br>  },<br>  methods: {<br>    goHome () {<br>      this.$router.replace({name: 'home'})<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<h3 id="景点搜索页面"><a href="#景点搜索页面" class="headerlink" title="景点搜索页面"></a>景点搜索页面</h3><p>实现步骤</p>
<ul>
<li>查找Vant中可以使用的组件</li>
<li>实现组件模板部分</li>
<li>模型层准备数据</li>
<li>模拟数据，实现效果</li>
</ul>
<p>使用Vant中可用的组件<br>复用景点列表组件<br>结合VueRouter实现页面跳转</p>
<p>新建<code>/src/views/Search.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 搜索页面 --><br>  <div class="page-search"><br>    <!-- 标题 --><br>    <van-nav-bar title="搜索景点"<br>      left-text="返回"<br>      left-arrow<br>      @click-left="goBack"<br>      v-if="isHome"/><br>    <!-- 搜索框 --><br>    <van-search<br>      v-model="sightName"<br>      show-action<br>      label="景点"<br>      placeholder="请输入搜索关键词"<br>      @search="onSearch"<br>    ><br>      <template #action><br>        <div @click="onSearch">搜索</div><br>      </template><br>    </van-search><br>    <!-- 景点列表 --><br>    <div class="sight-list"><br>      <sight-item v-for="item in dataList"<br>        :key="item.id"<br>        :item="item"/><br>    </div><br>    <!-- 分页 --><br>    <van-pagination v-model="currentPage"<br>    :total-items="totalItems"<br>    :items-per-page="perPage" /><br>    <!-- 底部导航 --><br>    <TripFooter/><br>  </div><br></template><br><br><script><br>// 景点列表的每一项<br>import SightItem from '@/components/common/ListSight'<br>// 底部导航<br>import TripFooter from '@/components/common/Footer'<br>export default {<br>  data () {<br>    return {<br>      // 景点名称<br>      sightName: '',<br>      // 景点列表的数据<br>      dataList: [],<br>      // 总记录数<br>      totalItems: 0,<br>      // 当前的页码<br>      currentPage: 1,<br>      // 每页数据的大小<br>      perPage: 5<br>    }<br>  },<br>  components: {<br>    SightItem,<br>    TripFooter<br>  },<br>  methods: {<br>    onSearch () {<br>      console.log('onSearch ')<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<p><code>/src/router/index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> Search <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Search.vue'</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  {<br>    path: <span class="hljs-string">'/search'</span>,<br>    name: <span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">import</span> Search <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Search.vue'</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  {<br>    path: <span class="hljs-string">'/search'</span>,<br>    name: <span class="hljs-string">'Search'</span>,<br>    component: Search<br>  }<br>]<br></code></pre></td></tr></tbody></table></figure>

<p>点击底部导航跳转到搜索<br><code>/src/components/common/Footer.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 底部导航（公共组件） --><br>  <div><br>    <!-- 开启路由模式，默认为false --><br>    <van-tabbar v-model="active" route><br>      <van-tabbar-item name="home" icon="wap-home-o" :to="{name: 'Home'}">首页</van-tabbar-item><br>      <van-tabbar-item name="search" icon="search" :to="{name: 'Search'}">搜索</van-tabbar-item>    <br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

<h3 id="搭建前端详情页"><a href="#搭建前端详情页" class="headerlink" title="搭建前端详情页"></a>搭建前端详情页</h3><h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li><p>设计URL路由规则<br><code>/src/router/index.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> SightList <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightList.vue'</span><br><span class="hljs-keyword">import</span> SightDetail <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightDetail.vue'</span><br><span class="hljs-keyword">import</span> SightInfo <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightInfo.vue'</span><br><span class="hljs-keyword">import</span> SightComment <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightComment.vue'</span><br><span class="hljs-keyword">import</span> SightImage <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightImage.vue'</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  <span class="hljs-comment">// 景点列表</span><br>  {<br>    path: <span class="hljs-string">'/sight/list'</span>,<br>    name: <span class="hljs-string">'SightList'</span>,<br>    component: SightList<br>  },<br>  <span class="hljs-comment">// 景点详情</span><br>  {<br>    path: <span class="hljs-string">'/sight/detail/:id'</span>,<br>    name: <span class="hljs-string">'SightDetail'</span>,<br>    component: SightDetail<br>  },<br>  <span class="hljs-comment">// 景点介绍</span><br>  {<br>    path: <span class="hljs-string">'/sight/info/:id'</span>,<br>    name: <span class="hljs-string">'SightInfo'</span>,<br>    component: SightInfo<br>  },<br>  <span class="hljs-comment">// 评论列表</span><br>  {<br>    path: <span class="hljs-string">'/sight/comment/:id'</span>,<br>    name: <span class="hljs-string">'SightComment'</span>,<br>    component: SightComment<br>  },<br>  <span class="hljs-comment">// 景点下的图片</span><br>  {<br>    path: <span class="hljs-string">'/sight/image/:id'</span>,<br>    name: <span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">import</span> SightList <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightList.vue'</span><br><span class="hljs-keyword">import</span> SightDetail <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightDetail.vue'</span><br><span class="hljs-keyword">import</span> SightInfo <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightInfo.vue'</span><br><span class="hljs-keyword">import</span> SightComment <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightComment.vue'</span><br><span class="hljs-keyword">import</span> SightImage <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/sight/SightImage.vue'</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  <span class="hljs-comment">// 景点列表</span><br>  {<br>    path: <span class="hljs-string">'/sight/list'</span>,<br>    name: <span class="hljs-string">'SightList'</span>,<br>    component: SightList<br>  },<br>  <span class="hljs-comment">// 景点详情</span><br>  {<br>    path: <span class="hljs-string">'/sight/detail/:id'</span>,<br>    name: <span class="hljs-string">'SightDetail'</span>,<br>    component: SightDetail<br>  },<br>  <span class="hljs-comment">// 景点介绍</span><br>  {<br>    path: <span class="hljs-string">'/sight/info/:id'</span>,<br>    name: <span class="hljs-string">'SightInfo'</span>,<br>    component: SightInfo<br>  },<br>  <span class="hljs-comment">// 评论列表</span><br>  {<br>    path: <span class="hljs-string">'/sight/comment/:id'</span>,<br>    name: <span class="hljs-string">'SightComment'</span>,<br>    component: SightComment<br>  },<br>  <span class="hljs-comment">// 景点下的图片</span><br>  {<br>    path: <span class="hljs-string">'/sight/image/:id'</span>,<br>    name: <span class="hljs-string">'SightImage'</span>,<br>    component: SightImage<br>  }<br>]<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>新建详情页页面</p>
<ul>
<li><p>新建目录<code>/src/views/sight</code></p>
</li>
<li><p>新建<code>/src/views/sight/SightList.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点列表 --><br>  <div class="page-sight-list"></div><br></template><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>新建<code>/src/views/sight/SightDetail.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"></div><br></template><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>新建<code>/src/views/sight/SightInfo.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点介绍 --><br>  <div class="page-sight-info"></div><br></template><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>新建<code>/src/views/sight/SightComment.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点评论 --><br>  <div class="page-sight-comment"></div><br></template><br></code></pre></td></tr></tbody></table></figure></li>
<li><p>新建<code>/src/views/sight/SightImage.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点图片 --><br>  <div class="page-sight-image"></div><br></template><br></code></pre></td></tr></tbody></table></figure>
</li>
</ul>
</li>
<li><p>修改景点列表组件，支持路由跳转<br>从景点列表跳到景点详情<br><code>/src/components/common/ListSight.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <router-link class="sight-item"<br>    :to="{name: 'SightDetail', params: {id: item.id}}"><br>    </div><br>  </router-link><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p>从标题热门景点和更多跳到景点列表<br>从热门景点的地点跳到对应景点详情<br><code>/src/components/home/Hot.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 热门景点 --><br>  <div class="home-hot-box"><br>    <!-- 顶上导航 --><br>    <van-cell<br>      :to="{name: 'SightList', query: {name: '热门推荐'}}"/><br>    <!-- // 顶上导航 --><br>    <!-- 景点列表 --><br>    <div class="box-main"><br>      <router-link class="hot-item"<br>        :to="{name: 'SightDetail', params: {id: item.id}}"><br>        <div class="img"><br>      </router-link><br>    </div><br>    <!-- //景点列表 --><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

<p>从标题精选景点和更多跳到景点列表<br>从精选景点的地点跳到对应景点列表<br><code>/src/components/home/Fine.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 精选景点 --><br>  <div class="home-fine-box"><br>    <!-- 顶上导航 --><br>    <van-cell<br>      title="精选景点"<br>      :to="{name: 'SightList', query: {name: '精选景点'}}"/><br>    <!-- // 顶上导航 --><br>    <!-- 景点的列表 --><br>    <div class="box-main"><br>      <sight-item v-for="item in dataList"<br>        :key="item.id"<br>        :item="item"/><br>        <!-- 不需要:to --><br>    </div><br>    <!-- //景点的列表 -->    <br></template><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>拆分详情页组件<br><code>/src/views/sight/SightDetail.vue</code><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"><br>    <!-- 页面头部 --><br>    <van-nav-bar<br>    left-text="返回"<br>    left-arrow<br>    fixed<br>    @click-left="goBack"<br>  /><br>    <!-- 大图 --><br>    <!-- //大图 --><br>    <!-- 评分、景点介绍 --><br>    <!-- //评分、景点介绍 --><br>    <!-- 地址信息 --><br>    <!-- //地址信息 --><br>    <!-- 门票列表 --><br>    <!-- //门票列表 --><br>    <!-- 用户评价 --><br>    <!-- //用户评价 --><br>  </div><br></template><br><script><br>export default {<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    }<br>  }<br>}<br></script><br><style lang="less"><br>.page-sight-detail {<br>  // 导航栏  <br>  .van-nav-bar {<br>    background-color: transparent;<br>  }<br>}<br></style><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h3 id="景点大图部分"><a href="#景点大图部分" class="headerlink" title="景点大图部分"></a>景点大图部分</h3><h4 id="实现步骤-1"><a href="#实现步骤-1" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>查找Vant中可以使用的组件</li>
<li>实现组件模板部分<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre class=" language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 大图 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-banner"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">van-image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/home/hot/h1_max.jpg"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tips"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pic-sts"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"{name: 'SightImage', params: {id: 123}}"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"video-o"</span> /&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>10 图片<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>景点标题<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //大图 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br><br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 景点大图<br><span class="css">  <span class="hljs-selector-class">.sight-banner</span>{</span><br>    position: relative;<br><span class="css">    <span class="hljs-selector-class">.tips</span> {</span><br>      position: absolute;<br>      left: 10px;<br>      bottom: 10px;<br>      font-size: 16px;<br><span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><br><span class="css">      <span class="hljs-selector-class">.pic-sts</span> {</span><br><span class="css">        <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#fff</span>;</span><br>        border-radius: 30px;<br>        font-size: 14px;<br><span class="css">        <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-tag">rgba</span>(0,0,0,0<span class="hljs-selector-class">.4</span>);</span><br>      }<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name"><code class="language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 大图 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-banner"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">van-image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/home/hot/h1_max.jpg"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tips"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pic-sts"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"{name: 'SightImage', params: {id: 123}}"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"video-o"</span> /&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>10 图片<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>景点标题<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //大图 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br><br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 景点大图<br><span class="css">  <span class="hljs-selector-class">.sight-banner</span>{</span><br>    position: relative;<br><span class="css">    <span class="hljs-selector-class">.tips</span> {</span><br>      position: absolute;<br>      left: 10px;<br>      bottom: 10px;<br>      font-size: 16px;<br><span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><br><span class="css">      <span class="hljs-selector-class">.pic-sts</span> {</span><br><span class="css">        <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#fff</span>;</span><br>        border-radius: 30px;<br>        font-size: 14px;<br><span class="css">        <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-tag">rgba</span>(0,0,0,0<span class="hljs-selector-class">.4</span>);</span><br>      }<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>></span><br></code></pre></td></tr></tbody></table></figure></li>
<li>模型层准备数据</li>
<li>模拟数据，实现效果</li>
</ul>
<h3 id="评分、景点介绍"><a href="#评分、景点介绍" class="headerlink" title="评分、景点介绍"></a>评分、景点介绍</h3><h4 id="实现步骤-2"><a href="#实现步骤-2" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>查找Vant中可以使用的组件</li>
<li>实现组件模板部分<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre class=" language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 评分、景点介绍 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-info"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-title"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>5分<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>很棒<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-tips"</span>&gt;</span>50 评论<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-title"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>景点介绍<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-tips"</span>&gt;</span>开放时间、贴士<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //评分、景点介绍 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 评分、景点介绍<br><span class="css">  <span class="hljs-selector-class">.sight-info</span> {</span><br>    display: flex;<br><span class="css">    <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><span class="css">    <span class="hljs-selector-tag">border-bottom</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br><br>    &amp; &gt; div {<br>      flex: 1;<br>      position: relative;<br>    }<br><span class="css">    <span class="hljs-selector-class">.right</span> {</span><br><span class="css">      <span class="hljs-selector-tag">border-left</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br>    }<br><span class="css">    <span class="hljs-selector-class">.info-title</span> {</span><br>      text-align: left;<br>      padding: 5px 10px;<br>      strong {<br><span class="css">        <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#ff8300</span>;</span><br>      }<br>    }<br><span class="css">    <span class="hljs-selector-class">.info-tips</span> {</span><br><span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#999</span>;</span><br>      font-size: 12px;<br>      text-align: left;<br>      padding: 5px 10px;<br>    }<br><span class="css">    <span class="hljs-selector-class">.van-icon</span> {</span><br>      position: absolute;<br>      right: 5px;<br>      top: 5px<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name"><code class="language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 评分、景点介绍 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-info"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-title"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>5分<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>很棒<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-tips"</span>&gt;</span>50 评论<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-title"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>景点介绍<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info-tips"</span>&gt;</span>开放时间、贴士<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //评分、景点介绍 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 评分、景点介绍<br><span class="css">  <span class="hljs-selector-class">.sight-info</span> {</span><br>    display: flex;<br><span class="css">    <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><span class="css">    <span class="hljs-selector-tag">border-bottom</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br><br>    &amp; &gt; div {<br>      flex: 1;<br>      position: relative;<br>    }<br><span class="css">    <span class="hljs-selector-class">.right</span> {</span><br><span class="css">      <span class="hljs-selector-tag">border-left</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br>    }<br><span class="css">    <span class="hljs-selector-class">.info-title</span> {</span><br>      text-align: left;<br>      padding: 5px 10px;<br>      strong {<br><span class="css">        <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#ff8300</span>;</span><br>      }<br>    }<br><span class="css">    <span class="hljs-selector-class">.info-tips</span> {</span><br><span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#999</span>;</span><br>      font-size: 12px;<br>      text-align: left;<br>      padding: 5px 10px;<br>    }<br><span class="css">    <span class="hljs-selector-class">.van-icon</span> {</span><br>      position: absolute;<br>      right: 5px;<br>      top: 5px<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>></span><br></code></pre></td></tr></tbody></table></figure></li>
<li>模型层准备数据</li>
<li>模拟数据，实现效果</li>
</ul>
<h3 id="地址信息"><a href="#地址信息" class="headerlink" title="地址信息"></a>地址信息</h3><h4 id="实现步骤-3"><a href="#实现步骤-3" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>查找Vant中可以使用的组件</li>
<li>实现组件模板部分<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre class=" language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 地址信息 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"广东省广州市番禺区番禺大道"</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"location-o"</span></span><br><span class="hljs-tag">      <span class="hljs-attr">is-link</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:title-style</span>=<span class="hljs-string">"{'text-align': 'left'}"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">right-icon</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">van-cell</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //地址信息 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```   <br><br>### 门票列表<br>#### 实现步骤<br>- 查找Vant中可以使用的组件<br>- 实现组件模板部分<br>```html<br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 门票列表 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-ticket"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"门票"</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"bookmark-o"</span> <span class="hljs-attr">title-style</span>=<span class="hljs-string">"text-align:left"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ticket-item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"i in 5"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"i"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>成人票<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tips"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"clock-o"</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>7点之前可以预定<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tags"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-tag</span> <span class="hljs-attr">mark</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>标签1<span class="hljs-tag">&lt;/<span class="hljs-name">van-tag</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"price"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>￥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>65<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"#"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>&gt;</span>预定<span class="hljs-tag">&lt;/<span class="hljs-name">van-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //门票列表 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br><br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 门票列表<br><span class="css">  <span class="hljs-selector-class">.sight-ticket</span> {</span><br>    margin-top: 10px;<br><span class="css">    <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><br><span class="css">    <span class="hljs-selector-class">.ticket-item</span> {</span><br>      display: flex;<br><span class="css">      <span class="hljs-selector-tag">border-bottom</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br>      padding-bottom: 10px;<br><br><span class="css">      <span class="hljs-selector-class">.left</span> {</span><br>        flex: 1;<br>        text-align: left;<br>        padding: 5px 10px;<br><br><span class="css">        <span class="hljs-selector-class">.title</span> {</span><br>          padding: 5px 0;<br>        }<br><span class="css">        <span class="hljs-selector-class">.tips</span> {</span><br>          font-size: 12px;<br>        }<br>      }<br><span class="css">      <span class="hljs-selector-class">.right</span> {</span><br>        width: 100px;<br><span class="css">        <span class="hljs-selector-class">.price</span> {</span><br><span class="css">          <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#ff9800</span>;</span><br>          strong {<br>            font-size: 20px;<br>          }<br>        }<br>      }<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name"><code class="language-hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 地址信息 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"广东省广州市番禺区番禺大道"</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"location-o"</span></span><br><span class="hljs-tag">      <span class="hljs-attr">is-link</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:title-style</span>=<span class="hljs-string">"{'text-align': 'left'}"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">right-icon</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"arrow"</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">van-cell</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //地址信息 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```   <br><br>### 门票列表<br>#### 实现步骤<br>- 查找Vant中可以使用的组件<br>- 实现组件模板部分<br>```html<br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 景点详情 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sight-detail"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 门票列表 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sight-ticket"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"门票"</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"bookmark-o"</span> <span class="hljs-attr">title-style</span>=<span class="hljs-string">"text-align:left"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ticket-item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"i in 5"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"i"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>成人票<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tips"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"clock-o"</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>7点之前可以预定<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tags"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-tag</span> <span class="hljs-attr">mark</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>标签1<span class="hljs-tag">&lt;/<span class="hljs-name">van-tag</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"price"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>￥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>65<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"#"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">van-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>&gt;</span>预定<span class="hljs-tag">&lt;/<span class="hljs-name">van-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- //门票列表 --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>```    <br><br>```vue<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.page-sight-detail</span> {</span><br>  // 门票列表<br><span class="css">  <span class="hljs-selector-class">.sight-ticket</span> {</span><br>    margin-top: 10px;<br><span class="css">    <span class="hljs-selector-tag">background-color</span>: <span class="hljs-selector-id">#fff</span>;</span><br><br><span class="css">    <span class="hljs-selector-class">.ticket-item</span> {</span><br>      display: flex;<br><span class="css">      <span class="hljs-selector-tag">border-bottom</span>: 1<span class="hljs-selector-tag">px</span> <span class="hljs-selector-tag">solid</span> <span class="hljs-selector-id">#f6f6f6</span>;</span><br>      padding-bottom: 10px;<br><br><span class="css">      <span class="hljs-selector-class">.left</span> {</span><br>        flex: 1;<br>        text-align: left;<br>        padding: 5px 10px;<br><br><span class="css">        <span class="hljs-selector-class">.title</span> {</span><br>          padding: 5px 0;<br>        }<br><span class="css">        <span class="hljs-selector-class">.tips</span> {</span><br>          font-size: 12px;<br>        }<br>      }<br><span class="css">      <span class="hljs-selector-class">.right</span> {</span><br>        width: 100px;<br><span class="css">        <span class="hljs-selector-class">.price</span> {</span><br><span class="css">          <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#ff9800</span>;</span><br>          strong {<br>            font-size: 20px;<br>          }<br>        }<br>      }<br>    }<br>  }<br>}<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>></span><br></code></pre></td></tr></tbody></table></figure></li>
<li>模型层准备数据</li>
<li>模拟数据，实现效果</li>
</ul>
<h3 id="用户评价列表"><a href="#用户评价列表" class="headerlink" title="用户评价列表"></a>用户评价列表</h3><h4 id="实现步骤-4"><a href="#实现步骤-4" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>查找Vant中可以使用的组件</li>
<li>实现组件模板部分</li>
</ul>
<p>当<code>key=value</code>，<code>key:value</code>等同于<code>key</code><br><code>params: {id: id}</code>等同于<code>params: {id}</code><br><code>/src/views/sight/SightDetail.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"><br>    <!-- 用户评价 --><br>    <div class="sight-comment"><br>      <van-cell title="热门评论" icon="comment-o" title-style="text-align:left"/><br>      <comment-item/><br>      <router-link class="link-more" :to="{name: 'SightComment', params: {id}}">查看更多</router-link><br>    </div><br>    <!-- //用户评价 --><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>
<p>点击查看更多跳到景点评价</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><script><br>export default {<br>  data () {<br>    return {<br>      id: ''<br>    }<br>  },<br>  created () {<br>    this.id = this.$route.params.id<br>  }<br>  // 查看更多<br>  .link-more {<br>    display: block;<br>    color: #666;<br>    padding: 10px;<br>  }<br>}<br></script>    <br>```    <br><br>```vue<br><style lang="less"><br>.page-sight-detail {<br>  // 评论列表<br>  .sight-comment {<br>    margin-top: 10px;<br>    background-color: #fff;<br>  }<br>}<br></style><br></code></pre></td></tr></tbody></table></figure>

<p>评价列表只在景点模块的详情页和查看更多复用<br>新建目录<code>/src/components/sight</code><br>新建<code>/src/components/sight/CommentItem.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 评论列表的每一项 --><br>  <div class="comment-item-box"><br>    <div class="cmt-header"><br>      <div class="rate"><br>        <van-rate v-model="value"<br>        allow-half<br>        readonly<br>        void-icon="star"<br>        void-color="#eee" /><br>      </div><br>      <div class="user">张三*** 2021-3-19</div><br>    </div><br>    <div class="cmt-content"><br>      <p>评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容</p><br>    </div><br>    <!-- 图片列表 --><br>    <div class="cmt-imgs" @click="show=true"><br>      <van-image width="100" height="100" src="https://img.yzcdn.cn/vant/cat.jpeg" /><br>      <van-image width="100" height="100" src="https://img.yzcdn.cn/vant/cat.jpeg" /><br>      <van-image width="100" height="100" src="https://img.yzcdn.cn/vant/cat.jpeg" /><br>    </div><br>    <van-image-preview v-model="show" :images="images" @change="onChange"><br>      <template v-slot:index>第{{ index + 1 }}页</template><br>    </van-image-preview><br>    <!-- //图片列表 --><br>  </div><br></template><br><script><br>export default {<br>  data () {<br>    return {<br>      show: false,<br>      index: 0,<br>      images: [<br>        'https://img.yzcdn.cn/vant/apple-1.jpg',<br>        'https://img.yzcdn.cn/vant/apple-2.jpg'<br>      ],<br>      value: 4.5<br>    }<br>  },<br>  methods: {<br>    onChange (index) {<br>      this.index = index<br>    }<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<p>详情<code>/src/views/sight/SightDetail.vue</code>引入评价模块<br><code>&lt;comment-item/&gt;</code>等同于<code>&lt;CommentItem/&gt;</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"><br>    <!-- 用户评价 --><br>    <div class="sight-comment"><br>      <comment-item/><br>    </div><br>    <!-- //用户评价 --><br>  </div><br></template><br><br><script><br>// 评论项组件<br>import CommentItem from '@/components/sight/CommentItem'<br>export default {<br>  components: {<br>    CommentItem<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>模型层准备数据</li>
<li>模拟数据，实现效果</li>
</ul>
<h3 id="ORM模型设计"><a href="#ORM模型设计" class="headerlink" title="ORM模型设计"></a>ORM模型设计</h3><p>开发步骤</p>
<ul>
<li>分析并设计模型<br>pdman工具</li>
<li>完成ORM模型编码<br>新建一个package<code>utils</code><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommonModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-string">""" 模型公共类 """</span><br>    is_valid = models.BooleanField(<span class="hljs-string">'是否有效'</span>, default=<span class="hljs-literal">True</span>)<br>    created_at = models.DateTimeField(<span class="hljs-string">'创建时间'</span>, auto_now_add=<span class="hljs-literal">True</span>)<br>    updated_at = models.DateTimeField(<span class="hljs-string">'修改时间'</span>, auto_now=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        abstract = <span class="hljs-literal"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommonModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-string">""" 模型公共类 """</span><br>    is_valid = models.BooleanField(<span class="hljs-string">'是否有效'</span>, default=<span class="hljs-literal">True</span>)<br>    created_at = models.DateTimeField(<span class="hljs-string">'创建时间'</span>, auto_now_add=<span class="hljs-literal">True</span>)<br>    updated_at = models.DateTimeField(<span class="hljs-string">'修改时间'</span>, auto_now=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        abstract = <span class="hljs-literal">True</span><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre class=" language-hljs bash"><code class="language-hljs bash">C:\django\trip>python manage.py startapp accounts<br></code></pre></td></tr></tbody></table></figure>

<p><code>accounts/models.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 用户模型 """</span><br>    username = models.CharField(<span class="hljs-string">'用户名'</span>, max_length=<span class="hljs-number">32</span>, unique=<span class="hljs-literal">True</span>)<br>    password = models.CharField(<span class="hljs-string">'密码'</span>, max_length=<span class="hljs-number">256</span>)<br>    avatar = models.ImageField(<span class="hljs-string">'用户头像'</span>, upload_to=<span class="hljs-string">'avatar/%Y%m'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    nickname = models.CharField(<span class="hljs-string">'昵称'</span>, max_length=<span class="hljs-number">32</span>, unique=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 用户模型 """</span><br>    username = models.CharField(<span class="hljs-string">'用户名'</span>, max_length=<span class="hljs-number">32</span>, unique=<span class="hljs-literal">True</span>)<br>    password = models.CharField(<span class="hljs-string">'密码'</span>, max_length=<span class="hljs-number">256</span>)<br>    avatar = models.ImageField(<span class="hljs-string">'用户头像'</span>, upload_to=<span class="hljs-string">'avatar/%Y%m'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    nickname = models.CharField(<span class="hljs-string">'昵称'</span>, max_length=<span class="hljs-number">32</span>, unique=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'account_user'</span><br></code></pre></td></tr></tbody></table></figure>

<p><code>trip\setting.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs python">INSTALLED_APPS = [<br>    <span class="hljs-comment"># 用户账户</span><br>    <span class="hljs-string"><code class="language-hljs python">INSTALLED_APPS = [<br>    <span class="hljs-comment"># 用户账户</span><br>    <span class="hljs-string">'accounts.apps.AccountsConfig'</span><br>]<br></code></pre></td></tr></tbody></table></figure>

<p><code>system/models.py</code>和<code>sight/models.py</code><br>删掉</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre class=" language-hljs ini"><span class="hljs-attr">is_valid</span> = models.BooleanField(<span class="hljs-string">'是否有效'</span>, default=<span class="hljs-literal">True</span>)<br><span class="hljs-attr">created_at</span> = models.DateTimeField(<span class="hljs-string">'创建时间'</span>, auto_now_add=<span class="hljs-literal">True</span>)<br><span class="hljs-attr">updated_at</span> = models.DateTimeField(<span class="hljs-string">'修改时间'</span>, auto_now=<span class="hljs-literal"><code class="language-hljs ini"><span class="hljs-attr">is_valid</span> = models.BooleanField(<span class="hljs-string">'是否有效'</span>, default=<span class="hljs-literal">True</span>)<br><span class="hljs-attr">created_at</span> = models.DateTimeField(<span class="hljs-string">'创建时间'</span>, auto_now_add=<span class="hljs-literal">True</span>)<br><span class="hljs-attr">updated_at</span> = models.DateTimeField(<span class="hljs-string">'修改时间'</span>, auto_now=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure>

<p><code>system/models.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageRelated</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 图片关联 """</span><br>    img = models.ImageField(<span class="hljs-string">'图片'</span>, upload_to=<span class="hljs-string">'%Y%m/file/'</span>, max_length=<span class="hljs-number">256</span>)<br>    summary = models.CharField(<span class="hljs-string">'图片说明'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    user = models.ForeignKey(User,<br>                             on_delete=models.SET(<span class="hljs-literal">None</span>),<br>                             related_name=<span class="hljs-string">'upload_images'</span>,<br>                             verbose_name=<span class="hljs-string">'上传的用户'</span>,<br>                             null=<span class="hljs-literal">True</span>)<br>    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)<br>    object_id = models.IntegerField(<span class="hljs-string">'关联的模型'</span>)<br>    <span class="hljs-comment"># 查到某一个图片要得到关联的某一个模型的对象</span><br>    content_object = GenericForeignKey(<span class="hljs-string">'content_type'</span>, <span class="hljs-string">'object_id'</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string"><code class="language-hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageRelated</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 图片关联 """</span><br>    img = models.ImageField(<span class="hljs-string">'图片'</span>, upload_to=<span class="hljs-string">'%Y%m/file/'</span>, max_length=<span class="hljs-number">256</span>)<br>    summary = models.CharField(<span class="hljs-string">'图片说明'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    user = models.ForeignKey(User,<br>                             on_delete=models.SET(<span class="hljs-literal">None</span>),<br>                             related_name=<span class="hljs-string">'upload_images'</span>,<br>                             verbose_name=<span class="hljs-string">'上传的用户'</span>,<br>                             null=<span class="hljs-literal">True</span>)<br>    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)<br>    object_id = models.IntegerField(<span class="hljs-string">'关联的模型'</span>)<br>    <span class="hljs-comment"># 查到某一个图片要得到关联的某一个模型的对象</span><br>    content_object = GenericForeignKey(<span class="hljs-string">'content_type'</span>, <span class="hljs-string">'object_id'</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'system_image_related'</span><br></code></pre></td></tr></tbody></table></figure>

<p><code>sight/models.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.contrib.contenttypes.fields <span class="hljs-keyword">import</span> GenericRelation<br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> system.models <span class="hljs-keyword">import</span> ImageRelated<br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sight</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 景点基础信息 """</span><br><br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">64</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">256</span>)<br>    main_img = models.ImageField(<span class="hljs-string">'主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    banner_img = models.ImageField(<span class="hljs-string">'详情主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    content = models.TextField(<span class="hljs-string">'详细'</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br>    min_price = models.FloatField(<span class="hljs-string">'最低价格'</span>, default=<span class="hljs-number">0</span>)<br>    province = models.CharField(<span class="hljs-string">'省份'</span>, max_length=<span class="hljs-number">32</span>)<br>    city = models.CharField(<span class="hljs-string">'市区'</span>, max_length=<span class="hljs-number">32</span>)<br>    area = models.CharField(<span class="hljs-string">'区/县'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br>    town = models.CharField(<span class="hljs-string">'乡镇'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br><br>    is_top = models.BooleanField(<span class="hljs-string">'是否为精选景点'</span>, default=<span class="hljs-literal">False</span>)<br>    is_hot = models.BooleanField(<span class="hljs-string">'是否为热门景点'</span>, default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-comment"># 反向关联，景点和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             <span class="hljs-comment"># 通过一个景点的模型对象，找到对应id的记录，转换为sight的对象，</span><br>                             <span class="hljs-comment"># 通过其属性找到它的图片</span><br>                             related_query_name=<span class="hljs-string">'rel_sight_iamges'</span>)<br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight'</span><br>        ordering = [<span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.contrib.contenttypes.fields <span class="hljs-keyword">import</span> GenericRelation<br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> system.models <span class="hljs-keyword">import</span> ImageRelated<br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sight</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 景点基础信息 """</span><br><br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">64</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">256</span>)<br>    main_img = models.ImageField(<span class="hljs-string">'主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    banner_img = models.ImageField(<span class="hljs-string">'详情主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    content = models.TextField(<span class="hljs-string">'详细'</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br>    min_price = models.FloatField(<span class="hljs-string">'最低价格'</span>, default=<span class="hljs-number">0</span>)<br>    province = models.CharField(<span class="hljs-string">'省份'</span>, max_length=<span class="hljs-number">32</span>)<br>    city = models.CharField(<span class="hljs-string">'市区'</span>, max_length=<span class="hljs-number">32</span>)<br>    area = models.CharField(<span class="hljs-string">'区/县'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br>    town = models.CharField(<span class="hljs-string">'乡镇'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br><br>    is_top = models.BooleanField(<span class="hljs-string">'是否为精选景点'</span>, default=<span class="hljs-literal">False</span>)<br>    is_hot = models.BooleanField(<span class="hljs-string">'是否为热门景点'</span>, default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-comment"># 反向关联，景点和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             <span class="hljs-comment"># 通过一个景点的模型对象，找到对应id的记录，转换为sight的对象，</span><br>                             <span class="hljs-comment"># 通过其属性找到它的图片</span><br>                             related_query_name=<span class="hljs-string">'rel_sight_iamges'</span>)<br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight'</span><br>        ordering = [<span class="hljs-string">'-updated_at'</span>]<br></code></pre></td></tr></tbody></table></figure>

<p>新建<code>sight/choices.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span>  models<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketTypes</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    ADULT = <span class="hljs-number">11</span>, <span class="hljs-string">'成人票'</span><br>    CHILD = <span class="hljs-number">12</span>, <span class="hljs-string">'儿童票'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketStatus</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    <span class="hljs-string">""" 门票的状态 """</span><br>    OPEN = <span class="hljs-number">1</span>, <span class="hljs-string">'开放购买'</span><br>    CLOSED = <span class="hljs-number">0</span>, <span class="hljs-string">'暂未开放'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntryWay</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    <span class="hljs-string">""" 入园方式 """</span><br>    BY_TICKET = <span class="hljs-number">0</span>, <span class="hljs-string">'短信换票入园'</span><br>    BY_CODE = <span class="hljs-number">1</span>, <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span>  models<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketTypes</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    ADULT = <span class="hljs-number">11</span>, <span class="hljs-string">'成人票'</span><br>    CHILD = <span class="hljs-number">12</span>, <span class="hljs-string">'儿童票'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketStatus</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    <span class="hljs-string">""" 门票的状态 """</span><br>    OPEN = <span class="hljs-number">1</span>, <span class="hljs-string">'开放购买'</span><br>    CLOSED = <span class="hljs-number">0</span>, <span class="hljs-string">'暂未开放'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntryWay</span>(<span class="hljs-params">models.IntegerChoices</span>):</span><br>    <span class="hljs-string">""" 入园方式 """</span><br>    BY_TICKET = <span class="hljs-number">0</span>, <span class="hljs-string">'短信换票入园'</span><br>    BY_CODE = <span class="hljs-number">1</span>, <span class="hljs-string">'凭借验证码入园'</span><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><p>检测ORM模型</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre class=" language-hljs bash">python manage.py check<br>``` <br><br>- 第四步，模型同步<br>```bash<br>python manage.py makemigrations<br>python manage.py migrate<br>```  <br><br><span class="hljs-comment">### 重构响应对象</span><br><span class="hljs-comment">#### 开发步骤</span><br>- 设计响应单个对象的基类  接口返回统一的封装<br>对象转为字典，再转为json对象<br>新建```utils/serializers.py```定义两种接口所响应的数据类型， 一个是详情，直接返回响应对象 ，一个是列表，有```meta```和```object```的结构<br>```python<br>class BaseSerializer(object):<br><br>    def __init__(self, obj):<br>        self.obj = obj<br><br>    def to_dict(self):<br>        <span class="hljs-built_in">return</span> {}<br><br><br>class MetaSerializer(object):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 分页元数据 "</span><span class="hljs-string">""</span><br>    def __init__(self, page, page_count, total_count, **kwargs):<br>        <span class="hljs-string">""</span><span class="hljs-string">"</span><br><span class="hljs-string">        :param page: 当前页</span><br><span class="hljs-string">        :param page_count: 总页数</span><br><span class="hljs-string">        :param total_count: 总记录数</span><br><span class="hljs-string">        "</span><span class="hljs-string">""</span><br>        self.page = page<br>        self.page_count = page_count<br>        self.total_count = total_count<br><br>    def to_dict(self):<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'total_count'</span>: self.total_count,<br>            <span class="hljs-string">'page_count'</span>: self.page_count,<br>            <span class="hljs-string">'current_page'</span>: self.page<br>        }<br><br><br>class BaseListPageSerializer(object):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 分页类封装 "</span><span class="hljs-string">""</span><br>    def __init__(self, page_obj, paginator=None, object_list=[]):<br>        <span class="hljs-string">""</span><span class="hljs-string">"</span><br><span class="hljs-string">        :param page_obj: 当前页的对象</span><br><span class="hljs-string">        :param paginator: 分页器的对象</span><br><span class="hljs-string">        :param object_list: 当前页的数据列表</span><br><span class="hljs-string">        "</span><span class="hljs-string">""</span><br>        self.page_obj = page_obj<br>        self.paginator = paginator <span class="hljs-keyword">if</span> paginator <span class="hljs-keyword">else</span> page_obj.paginator<br>        self.object_list = object_list <span class="hljs-keyword">if</span> object_list <span class="hljs-keyword">else</span> page_obj.object_list<br><br>    def get_object(self, obj):<br>        <span class="hljs-string">""</span><span class="hljs-string">" 对象的内容，子类重写 "</span><span class="hljs-string">""</span><br>        <span class="hljs-built_in">return</span> {}<br><br>    def to_dict(self):<br>        page = self.page_obj.number  <span class="hljs-comment"># 当前页</span><br>        page_count = self.paginator.num_pages  <span class="hljs-comment"># 总页数</span><br>        total_count = self.paginator.count  <span class="hljs-comment"># 总记录数</span><br>        meta = MetaSerializer(page=page, page_count=page_count, total_count=total_count).to_dict()<br><br>        objects = []<br>        <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> self.object_list:<br>            objects.append(self.get_object(obj))<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'meta'</span>: meta,<br>            <span class="hljs-string">'objects'</span>: objects<br>        }<br>```  <br><br>```sight/serializers.py```<br>```py<br>from utils.serializers import BaseListPageSerializer<br><br><br>class SightListSerializer(BaseListPageSerializer):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 景点列表 "</span><span class="hljs-string">""</span><br><br>    def get_object(self, obj):<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'main_img'</span>: obj.main_img.url,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-comment"># TODO 评论数量暂时无法获取</span><br>            <span class="hljs-string"><code class="language-hljs bash">python manage.py check<br>``` <br><br>- 第四步，模型同步<br>```bash<br>python manage.py makemigrations<br>python manage.py migrate<br>```  <br><br><span class="hljs-comment">### 重构响应对象</span><br><span class="hljs-comment">#### 开发步骤</span><br>- 设计响应单个对象的基类  接口返回统一的封装<br>对象转为字典，再转为json对象<br>新建```utils/serializers.py```定义两种接口所响应的数据类型， 一个是详情，直接返回响应对象 ，一个是列表，有```meta```和```object```的结构<br>```python<br>class BaseSerializer(object):<br><br>    def __init__(self, obj):<br>        self.obj = obj<br><br>    def to_dict(self):<br>        <span class="hljs-built_in">return</span> {}<br><br><br>class MetaSerializer(object):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 分页元数据 "</span><span class="hljs-string">""</span><br>    def __init__(self, page, page_count, total_count, **kwargs):<br>        <span class="hljs-string">""</span><span class="hljs-string">"</span><br><span class="hljs-string">        :param page: 当前页</span><br><span class="hljs-string">        :param page_count: 总页数</span><br><span class="hljs-string">        :param total_count: 总记录数</span><br><span class="hljs-string">        "</span><span class="hljs-string">""</span><br>        self.page = page<br>        self.page_count = page_count<br>        self.total_count = total_count<br><br>    def to_dict(self):<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'total_count'</span>: self.total_count,<br>            <span class="hljs-string">'page_count'</span>: self.page_count,<br>            <span class="hljs-string">'current_page'</span>: self.page<br>        }<br><br><br>class BaseListPageSerializer(object):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 分页类封装 "</span><span class="hljs-string">""</span><br>    def __init__(self, page_obj, paginator=None, object_list=[]):<br>        <span class="hljs-string">""</span><span class="hljs-string">"</span><br><span class="hljs-string">        :param page_obj: 当前页的对象</span><br><span class="hljs-string">        :param paginator: 分页器的对象</span><br><span class="hljs-string">        :param object_list: 当前页的数据列表</span><br><span class="hljs-string">        "</span><span class="hljs-string">""</span><br>        self.page_obj = page_obj<br>        self.paginator = paginator <span class="hljs-keyword">if</span> paginator <span class="hljs-keyword">else</span> page_obj.paginator<br>        self.object_list = object_list <span class="hljs-keyword">if</span> object_list <span class="hljs-keyword">else</span> page_obj.object_list<br><br>    def get_object(self, obj):<br>        <span class="hljs-string">""</span><span class="hljs-string">" 对象的内容，子类重写 "</span><span class="hljs-string">""</span><br>        <span class="hljs-built_in">return</span> {}<br><br>    def to_dict(self):<br>        page = self.page_obj.number  <span class="hljs-comment"># 当前页</span><br>        page_count = self.paginator.num_pages  <span class="hljs-comment"># 总页数</span><br>        total_count = self.paginator.count  <span class="hljs-comment"># 总记录数</span><br>        meta = MetaSerializer(page=page, page_count=page_count, total_count=total_count).to_dict()<br><br>        objects = []<br>        <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> self.object_list:<br>            objects.append(self.get_object(obj))<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'meta'</span>: meta,<br>            <span class="hljs-string">'objects'</span>: objects<br>        }<br>```  <br><br>```sight/serializers.py```<br>```py<br>from utils.serializers import BaseListPageSerializer<br><br><br>class SightListSerializer(BaseListPageSerializer):<br>    <span class="hljs-string">""</span><span class="hljs-string">" 景点列表 "</span><span class="hljs-string">""</span><br><br>    def get_object(self, obj):<br>        <span class="hljs-built_in">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'main_img'</span>: obj.main_img.url,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-comment"># TODO 评论数量暂时无法获取</span><br>            <span class="hljs-string">'comment_count'</span>: 0<br>        }<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>设计响应列表对象的基类</p>
</li>
<li><p>设计错误基础类<br><code>utils/response.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotFoundJsonResponse</span>(<span class="hljs-params">JsonResponse</span>):</span><br>    <span class="hljs-string">""" 400 对应JSON响应 """</span><br>    status_code = <span class="hljs-number">400</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><br><br>        data = {<br>            <span class="hljs-string">"error_code"</span>: <span class="hljs-string">"404000"</span>,<br>            <span class="hljs-string">"error_msg"</span>: <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotFoundJsonResponse</span>(<span class="hljs-params">JsonResponse</span>):</span><br>    <span class="hljs-string">""" 400 对应JSON响应 """</span><br>    status_code = <span class="hljs-number">400</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><br><br>        data = {<br>            <span class="hljs-string">"error_code"</span>: <span class="hljs-string">"404000"</span>,<br>            <span class="hljs-string">"error_msg"</span>: <span class="hljs-string">"您访问的内容不存在或已被删除。"</span><br>        }<br>        super().__init__(data, *args, **kwargs)<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>sight/views.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> http<br><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> ListView<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> serializers<br><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Sight<br><span class="hljs-keyword">from</span> utils.response <span class="hljs-keyword">import</span> NotFoundJsonResponse<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br>    <span class="hljs-comment"># 每页放5条数据</span><br>    paginate_by = <span class="hljs-number">5</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 重写查询方法 """</span><br>        query = Q(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 1. 热门景点</span><br>        is_hot = self.request.GET.get(<span class="hljs-string">'is_hot'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">if</span> is_hot:<br>            query = query &amp; Q(is_hot=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 2. 精选景点</span><br>        is_top = self.request.GET.get(<span class="hljs-string">'is_top'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">if</span> is_top:<br>            query = query &amp; Q(is_top=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># TODO 3. 景点名称搜索</span><br>        queryset = Sight.objects.filter(query)<br>        <span class="hljs-keyword">return</span> queryset<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]  <span class="hljs-comment"># 当前页的对象</span><br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.SightListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> http<br><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> ListView<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> serializers<br><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Sight<br><span class="hljs-keyword">from</span> utils.response <span class="hljs-keyword">import</span> NotFoundJsonResponse<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br>    <span class="hljs-comment"># 每页放5条数据</span><br>    paginate_by = <span class="hljs-number">5</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 重写查询方法 """</span><br>        query = Q(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 1. 热门景点</span><br>        is_hot = self.request.GET.get(<span class="hljs-string">'is_hot'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">if</span> is_hot:<br>            query = query &amp; Q(is_hot=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 2. 精选景点</span><br>        is_top = self.request.GET.get(<span class="hljs-string">'is_top'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">if</span> is_top:<br>            query = query &amp; Q(is_top=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># TODO 3. 景点名称搜索</span><br>        queryset = Sight.objects.filter(query)<br>        <span class="hljs-keyword">return</span> queryset<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]  <span class="hljs-comment"># 当前页的对象</span><br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.SightListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br></code></pre></td></tr></tbody></table></figure>

<h3 id="景点详情接口开发"><a href="#景点详情接口开发" class="headerlink" title="景点详情接口开发"></a>景点详情接口开发</h3><h4 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li><p>设计接口返回内容及字段</p>
</li>
<li><p>编写接口代码<br><code>sight/urls.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.2 景点详细信息</span><br>    path(<span class="hljs-string">'sight/detail/&lt;int:pk&gt;/'</span>, views.SightDetailView.as_view(), name=<span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.2 景点详细信息</span><br>    path(<span class="hljs-string">'sight/detail/&lt;int:pk&gt;/'</span>, views.SightDetailView.as_view(), name=<span class="hljs-string">"sight_detail"</span>),<br>]<br></code></pre></td></tr></tbody></table></figure>
<p><code>sight/serializers.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseSerializer<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'img'</span>: obj.banner_img.url,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'area'</span>: obj.area,<br>            <span class="hljs-string">'town'</span>: obj.town,<br>            <span class="hljs-comment"># TODO 评论数量暂时无法获取</span><br>            <span class="hljs-string">'comment_count'</span>: <span class="hljs-number"><code class="language-hljs python"><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseSerializer<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'img'</span>: obj.banner_img.url,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'area'</span>: obj.area,<br>            <span class="hljs-string">'town'</span>: obj.town,<br>            <span class="hljs-comment"># TODO 评论数量暂时无法获取</span><br>            <span class="hljs-string">'comment_count'</span>: <span class="hljs-number">0</span><br>        }<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>sight/views.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> DetailView<br><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Sight<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailView</span>(<span class="hljs-params">DetailView</span>):</span><br>    <span class="hljs-string">""" 2.2 景点详细信息 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># return Sight.objects.filter(is_valid=True)</span><br>        <span class="hljs-keyword">return</span> Sight.objects.all()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'object'</span>]<br>        <span class="hljs-keyword">if</span> page_obj:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> page_obj.is_valid:<br>                <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br>            data = serializers.SightDetailSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> DetailView<br><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Sight<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailView</span>(<span class="hljs-params">DetailView</span>):</span><br>    <span class="hljs-string">""" 2.2 景点详细信息 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># return Sight.objects.filter(is_valid=True)</span><br>        <span class="hljs-keyword">return</span> Sight.objects.all()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'object'</span>]<br>        <span class="hljs-keyword">if</span> page_obj:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> page_obj.is_valid:<br>                <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br>            data = serializers.SightDetailSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>模拟HTTP请求，测试验证接口</li>
</ul>
<h3 id="景点评论列表接口开发"><a href="#景点评论列表接口开发" class="headerlink" title="景点评论列表接口开发"></a>景点评论列表接口开发</h3><h4 id="开发步骤-1"><a href="#开发步骤-1" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li>设计接口返回内容及字段<br><code>sight/urls.py</code>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.3 景点下的评论列表</span><br>    path(<span class="hljs-string">'comment/list/&lt;int:pk&gt;/'</span>, views.SightCommentListView.as_view(), name=<span class="hljs-string">"sight_comment_list"</span>),<br>]<br>```  <br><br>新建```system/serializers.py```<br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseSerializer<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseImageSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 序列化基础图片：其它列表需要引用到时使用 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        image = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'img'</span>: image.img.url,<br>            <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.3 景点下的评论列表</span><br>    path(<span class="hljs-string">'comment/list/&lt;int:pk&gt;/'</span>, views.SightCommentListView.as_view(), name=<span class="hljs-string">"sight_comment_list"</span>),<br>]<br>```  <br><br>新建```system/serializers.py```<br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseSerializer<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseImageSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 序列化基础图片：其它列表需要引用到时使用 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        image = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'img'</span>: image.img.url,<br>            <span class="hljs-string">'summary'</span>: image.summary<br>        }<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>sight/serializers.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> system.serializers <span class="hljs-keyword">import</span> BaseImageSerializer<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommentListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 评论列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        user = obj.user<br>        images = []<br>        <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> obj.images.filter(is_valid=<span class="hljs-literal">True</span>):<br>            images.append(BaseImageSerializer(image).to_dict())<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'user'</span>: {<br>                <span class="hljs-string">'pk'</span>: user.pk,<br>                <span class="hljs-string">'nickname'</span>: user.nickname<br>            },<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'is_top'</span>: obj.is_top,<br>            <span class="hljs-string">'love_count'</span>: obj.love_count,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'is_public'</span>: obj.is_public,<br>            <span class="hljs-string">'images'</span>: images,<br>            <span class="hljs-string">'created_at'</span>: obj.created_at.strftime(<span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> system.serializers <span class="hljs-keyword">import</span> BaseImageSerializer<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommentListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 评论列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        user = obj.user<br>        images = []<br>        <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> obj.images.filter(is_valid=<span class="hljs-literal">True</span>):<br>            images.append(BaseImageSerializer(image).to_dict())<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'user'</span>: {<br>                <span class="hljs-string">'pk'</span>: user.pk,<br>                <span class="hljs-string">'nickname'</span>: user.nickname<br>            },<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'is_top'</span>: obj.is_top,<br>            <span class="hljs-string">'love_count'</span>: obj.love_count,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'is_public'</span>: obj.is_public,<br>            <span class="hljs-string">'images'</span>: images,<br>            <span class="hljs-string">'created_at'</span>: obj.created_at.strftime(<span class="hljs-string">'%Y-%m-%d'</span>)<br>        }<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>编写接口代码<br><code>sight/views.py</code>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Comment<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightCommentListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 2.3 景点下的评论列表 """</span><br>    paginate_by = <span class="hljs-number">10</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># 根据景点ID查询景点</span><br>        sight_id = self.kwargs.get(<span class="hljs-string">'pk'</span>, <span class="hljs-literal">None</span>)<br>        sight = Sight.objects.filter(pk=sight_id, is_valid=<span class="hljs-literal">True</span>).first()<br>        <span class="hljs-keyword">if</span> sight:<br>            <span class="hljs-comment"># return Comment.objects.filter(is_valid=True, sight=sight)</span><br>            <span class="hljs-keyword">return</span> sight.comments.filter(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">return</span> Comment.objects.none()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        <span class="hljs-string">""" 重写响应的返回 """</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]  <span class="hljs-comment"># 分页的某一页对象</span><br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.CommentListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Comment<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightCommentListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 2.3 景点下的评论列表 """</span><br>    paginate_by = <span class="hljs-number">10</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># 根据景点ID查询景点</span><br>        sight_id = self.kwargs.get(<span class="hljs-string">'pk'</span>, <span class="hljs-literal">None</span>)<br>        sight = Sight.objects.filter(pk=sight_id, is_valid=<span class="hljs-literal">True</span>).first()<br>        <span class="hljs-keyword">if</span> sight:<br>            <span class="hljs-comment"># return Comment.objects.filter(is_valid=True, sight=sight)</span><br>            <span class="hljs-keyword">return</span> sight.comments.filter(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">return</span> Comment.objects.none()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        <span class="hljs-string">""" 重写响应的返回 """</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]  <span class="hljs-comment"># 分页的某一页对象</span><br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.CommentListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br></code></pre></td></tr></tbody></table></figure></li>
<li>模拟HTTP请求，测试验证接口</li>
</ul>
<h3 id="门票列表接口开发"><a href="#门票列表接口开发" class="headerlink" title="门票列表接口开发"></a>门票列表接口开发</h3><h4 id="开发步骤-2"><a href="#开发步骤-2" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li><p>设计接口返回内容及字段<br><code>sight/urls.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.4 景点下的门票列表</span><br>    path(<span class="hljs-string">'ticket/list/&lt;int:pk&gt;/'</span>, views.SightTicketListView.as_view(), name=<span class="hljs-string">"sight_ticket_list"</span>),<br>]<br>```  <br><br>```sight/serializers.py```  <br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 门票列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'types'</span>: obj.types,<br>            <span class="hljs-string">'price'</span>: obj.price,<br>            <span class="hljs-string">'discount'</span>: obj.discount,<br>            <span class="hljs-string">'total_stock'</span>: obj.total_stock,<br>            <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.4 景点下的门票列表</span><br>    path(<span class="hljs-string">'ticket/list/&lt;int:pk&gt;/'</span>, views.SightTicketListView.as_view(), name=<span class="hljs-string">"sight_ticket_list"</span>),<br>]<br>```  <br><br>```sight/serializers.py```  <br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 门票列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'types'</span>: obj.types,<br>            <span class="hljs-string">'price'</span>: obj.price,<br>            <span class="hljs-string">'discount'</span>: obj.discount,<br>            <span class="hljs-string">'total_stock'</span>: obj.total_stock,<br>            <span class="hljs-string">'remain_stock'</span>: obj.remain_stock<br>        }<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>编写接口代码<br><code>sight/views.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Ticket<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightTicketListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 2.4 景点下的门票列表 """</span><br><br>    paginate_by = <span class="hljs-number">10</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># 根据景点ID查询景点</span><br>        sight_id = self.kwargs.get(<span class="hljs-string">'pk'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">return</span> Ticket.objects.filter(is_valid=<span class="hljs-literal">True</span>, sight__id=sight_id)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        <span class="hljs-string">""" 重写响应的返回 """</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]<br>        <span class="hljs-keyword">if</span> page_obj <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            data = serializers.TicketListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Ticket<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightTicketListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 2.4 景点下的门票列表 """</span><br><br>    paginate_by = <span class="hljs-number">10</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># 根据景点ID查询景点</span><br>        sight_id = self.kwargs.get(<span class="hljs-string">'pk'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">return</span> Ticket.objects.filter(is_valid=<span class="hljs-literal">True</span>, sight__id=sight_id)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        <span class="hljs-string">""" 重写响应的返回 """</span><br>        page_obj = context[<span class="hljs-string">'page_obj'</span>]<br>        <span class="hljs-keyword">if</span> page_obj <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            data = serializers.TicketListSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br></code></pre></td></tr></tbody></table></figure></li>
<li><p>模拟HTTP请求，测试验证接口</p>
</li>
</ul>
<h3 id="景点介绍接口开发"><a href="#景点介绍接口开发" class="headerlink" title="景点介绍接口开发"></a>景点介绍接口开发</h3><h4 id="开发步骤-3"><a href="#开发步骤-3" class="headerlink" title="开发步骤"></a>开发步骤</h4><ul>
<li><p>设计接口返回内容及字段<br><code>sight/urls.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.5 景点介绍</span><br>    path(<span class="hljs-string">'sight/info/&lt;int:pk&gt;/'</span>, views.SightInfoDetailView.as_view(), name=<span class="hljs-string">"sight_info"</span>),<br>]<br>```  <br><br>```sight/serializers.py```  <br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightInfoSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点介绍 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.sight.pk,  <span class="hljs-comment"># 景点ID</span><br>            <span class="hljs-string">'entry_explain'</span>: obj.entry_explain,<br>            <span class="hljs-string">'play_way'</span>: obj.play_way,<br>            <span class="hljs-string">'tips'</span>: obj.tips,<br>            <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br><span class="hljs-keyword">from</span> sight <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># 2.5 景点介绍</span><br>    path(<span class="hljs-string">'sight/info/&lt;int:pk&gt;/'</span>, views.SightInfoDetailView.as_view(), name=<span class="hljs-string">"sight_info"</span>),<br>]<br>```  <br><br>```sight/serializers.py```  <br>```python<br><span class="hljs-keyword">from</span> utils.serializers <span class="hljs-keyword">import</span> BaseListPageSerializer<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightInfoSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点介绍 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.sight.pk,  <span class="hljs-comment"># 景点ID</span><br>            <span class="hljs-string">'entry_explain'</span>: obj.entry_explain,<br>            <span class="hljs-string">'play_way'</span>: obj.play_way,<br>            <span class="hljs-string">'tips'</span>: obj.tips,<br>            <span class="hljs-string">'traffic'</span>: obj.traffic,<br>        }<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>编写接口代码<br><code>sight/views.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Info<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightInfoDetailView</span>(<span class="hljs-params">DetailView</span>):</span><br>    <span class="hljs-string">""" 2.5 景点介绍 """</span><br>    slug_field = <span class="hljs-string">'sight__pk'</span>  <span class="hljs-comment"># url传递过来的这个变化的参数指代的是哪个字段</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> Info.objects.all()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'object'</span>]<br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.SightInfoSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> sight.models <span class="hljs-keyword">import</span> Info<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightInfoDetailView</span>(<span class="hljs-params">DetailView</span>):</span><br>    <span class="hljs-string">""" 2.5 景点介绍 """</span><br>    slug_field = <span class="hljs-string">'sight__pk'</span>  <span class="hljs-comment"># url传递过来的这个变化的参数指代的是哪个字段</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> Info.objects.all()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render_to_response</span>(<span class="hljs-params">self, context, **response_kwargs</span>):</span><br>        page_obj = context[<span class="hljs-string">'object'</span>]<br>        <span class="hljs-keyword">if</span> page_obj:<br>            data = serializers.SightInfoSerializer(page_obj).to_dict()<br>            <span class="hljs-keyword">return</span> http.JsonResponse(data)<br>        <span class="hljs-keyword">return</span> NotFoundJsonResponse()<br></code></pre></td></tr></tbody></table></figure></li>
<li><p>模拟HTTP请求，测试验证接口</p>
</li>
</ul>
<h3 id="景点搜索接口联调"><a href="#景点搜索接口联调" class="headerlink" title="景点搜索接口联调"></a>景点搜索接口联调</h3><h4 id="实现步骤-5"><a href="#实现步骤-5" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li><p>修改景点列表接口，支持搜索<br><code>sight/views.py</code>  </p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> ListView<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br>    <span class="hljs-comment"># 每页放5条数据</span><br>    paginate_by = <span class="hljs-number">5</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 重写查询方法 """</span><br>        query = Q(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 3. 景点名称搜索</span><br>        name = self.request.GET.get(<span class="hljs-string">'name'</span>, <span class="hljs-literal">None</span>)  <span class="hljs-comment"># 从前端获取搜索字段</span><br>        <span class="hljs-keyword">if</span> name:<br>            query = query &amp; Q(name__icontains=name)  <span class="hljs-comment"># 景点名称是否包含搜索字段</span><br>        queryset = Sight.objects.filter(query)<br>        <span class="hljs-keyword">return</span> queryset<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_paginate_by</span>(<span class="hljs-params">self, queryset</span>):</span><br>        <span class="hljs-string">""" 从前端控制每一页的分页大小 """</span><br>        page_size = self.request.GET.get(<span class="hljs-string">'limit'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">return</span> page_size <span class="hljs-keyword"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> ListView<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListView</span>(<span class="hljs-params">ListView</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br>    <span class="hljs-comment"># 每页放5条数据</span><br>    paginate_by = <span class="hljs-number">5</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_queryset</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 重写查询方法 """</span><br>        query = Q(is_valid=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># 3. 景点名称搜索</span><br>        name = self.request.GET.get(<span class="hljs-string">'name'</span>, <span class="hljs-literal">None</span>)  <span class="hljs-comment"># 从前端获取搜索字段</span><br>        <span class="hljs-keyword">if</span> name:<br>            query = query &amp; Q(name__icontains=name)  <span class="hljs-comment"># 景点名称是否包含搜索字段</span><br>        queryset = Sight.objects.filter(query)<br>        <span class="hljs-keyword">return</span> queryset<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_paginate_by</span>(<span class="hljs-params">self, queryset</span>):</span><br>        <span class="hljs-string">""" 从前端控制每一页的分页大小 """</span><br>        page_size = self.request.GET.get(<span class="hljs-string">'limit'</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">return</span> page_size <span class="hljs-keyword">or</span> self.paginate_by   <br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>配置接口地址<br>从首页底部点击搜索，保留底部组件，查询所有<br>从首页点击热门推荐和精选节点更多，去掉底部组件，增加左上角返回按钮，只查询热门推荐和精选景点</p>
</li>
</ul>
<p><code>src\components\home\Hot.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 热门景点 --><br>  <div class="home-hot-box"><br>    <!-- 顶上导航 --><br>    <van-cell<br>      title="热门推荐"<br>      icon="/static/home/hot/fire.png"<br>      is-link<br>      title-style="text-align:left"<br>      value="全部榜单"<br>      :to="{name: 'Search', query: {isHot: 1}}"/><br>    <!-- // 顶上导航 --><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

<p><code>src\components\home\Fine.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 精选景点 --><br>  <div class="home-fine-box"><br>    <!-- 顶上导航 --><br>    <van-cell<br>      title="精选景点"<br>      icon="location-o"<br>      is-link<br>      title-style="text-align:left"<br>      value="更多"<br>      :to="{name: 'Search', query: {isTop: 1}}"/><br>    <!-- // 顶上导航 --><br>  </div><br></template><br></code></pre></td></tr></tbody></table></figure>

<p><code>src\views\Search.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 搜索页面 --><br>  <div class="page-search"><br>    <!-- 标题 --><br>    <van-nav-bar title="搜索景点"<br>      left-text="返回"<br>      left-arrow<br>      @click-left="goBack"<br>      v-if="isHome"/><br>    <van-nav-bar title="搜索景点" v-else/><br>    <!-- 搜索框 --><br>    <van-search<br>      v-model="sightName"<br>      show-action<br>      label="景点"<br>      placeholder="请输入搜索关键词"<br>      @search="onSearch"<br>      @clear="clear"<br>    ><br>      <template #action><br>        <div @click="onSearch">搜索</div><br>      </template><br>    </van-search><br><br>    <h2 v-if="isHot">热门推荐</h2><br>    <h2 v-if="isTop">精选景点</h2><br>    <!-- 景点列表 --><br>    <div class="sight-list"><br>      <sight-item v-for="item in dataList"<br>        :key="item.id"<br>        :item="item"/><br>    </div><br>    <!-- 分页 --><br>    <van-pagination<br>    v-model="currentPage"<br>    :total-items="totalItems"<br>    :items-per-page="perPage"<br>    @change="pageChange" /><br>    <!-- 底部导航 --><br>    <TripFooter v-if="!isHome"/><br>  </div><br></template><br><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>// 景点列表的每一项<br>import SightItem from '@/components/common/ListSight'<br>// 底部导航<br>import TripFooter from '@/components/common/Footer'<br>export default {<br>  data () {<br>    return {<br>      // 景点名称<br>      sightName: '',<br>      // 景点列表的数据<br>      dataList: [],<br>      // 总记录数<br>      totalItems: 0,<br>      // 当前的页码<br>      currentPage: 1,<br>      // 每页数据的大小<br>      perPage: 4,<br>      // 热门景点和精选景点<br>      isHot: '',<br>      isTop: ''<br>    }<br>  },<br>  components: {<br>    SightItem,<br>    TripFooter<br>  },<br>  computed: {<br>    /**<br>     * 是否从首页过来<br>     */<br>    isHome () {<br>      return this.isHot || this.isTop<br>    }<br>  },<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 景点列表接口<br>     */<br>    getDataList () {<br>      ajax.get(SightApis.sightListUrl, {<br>        params: {<br>          page: this.currentPage,<br>          name: this.sightName,<br>          limit: this.perPage,<br>          is_top: this.isTop,<br>          is_hot: this.isHot<br>        }<br>      }).then(({ data: { meta, objects } }) => {<br>        this.dataList = objects<br>        // 总记录数<br>        this.totalItems = meta.total_count<br>      })<br>    },<br>    clear () {<br>      this.dataList = []<br>      this.currentPage = 1<br>      this.getDataList()<br>    },<br>    /**<br>     * 页码发生变化后调用<br>     */<br>    pageChange () {<br>      this.getDataList()<br>    },<br>    onSearch () {<br>      console.log('onSearch ')<br>      // 判断搜索内容是否为空<br>      if (!this.sightName) {<br>        this.$toast('请输入搜索词') // 弹框提示<br>        return<br>      }<br>      // 重置数据<br>      this.dataList = []<br>      this.currentPage = 1<br>      // 执行查询<br>      this.getDataList()<br>    }<br>  },  <br>  mounted () {<br>    // 热门景点和精选景点<br>    this.isHot = this.$route.query.isHot<br>    this.isTop = this.$route.query.isTop<br>    this.getDataList()<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>使用axios获取数据</li>
<li>将数据设置到模型层</li>
</ul>
<h3 id="景点详情和评论接口联调"><a href="#景点详情和评论接口联调" class="headerlink" title="景点详情和评论接口联调"></a>景点详情和评论接口联调</h3><h4 id="实现步骤-6"><a href="#实现步骤-6" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>阅读接口文档</li>
<li>配置接口地址<br><code>src\utils\apis.js</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 景点模块</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> SightApis = {<br>  <span class="hljs-comment">// 景点列表</span><br>  sightListUrl: apiHost + <span class="hljs-string">'/sight/sight/list/'</span>,<br>  <span class="hljs-comment">// 景点详情</span><br>  sightDetailUrl: apiHost + <span class="hljs-string">'/sight/sight/detail/#{id}/'</span>,<br>  <span class="hljs-comment">// 门票列表</span><br>  sightTicketUrl: apiHost + <span class="hljs-string"><code class="language-hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 景点模块</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> SightApis = {<br>  <span class="hljs-comment">// 景点列表</span><br>  sightListUrl: apiHost + <span class="hljs-string">'/sight/sight/list/'</span>,<br>  <span class="hljs-comment">// 景点详情</span><br>  sightDetailUrl: apiHost + <span class="hljs-string">'/sight/sight/detail/#{id}/'</span>,<br>  <span class="hljs-comment">// 门票列表</span><br>  sightTicketUrl: apiHost + <span class="hljs-string">'/sight/ticket/list/#{id}/'</span><br>}<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>src\views\sight\SightDetail.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"><br>    <!-- 大图 --><br>    <div class="sight-banner"><br>      <van-image :src="sightDetail.img" width="100%" height="100%"/><br>      <div class="tips"><br>        <router-link class="pic-sts" :to="{name: 'SightImage', params: {id}}"><br>          <van-icon name="video-o" /><br>          <span>{{ sightDetail.image_count }} 图片</span><br>        </router-link><br>        <div class="title">{{ sightDetail.name }}</div><br>      </div><br>    </div><br>    <!-- //大图 --><br>    <!-- 评分、景点介绍 --><br>    <div class="sight-info"><br>      <div class="left"><br>        <div class="info-title"><br>          <strong>{{ sightDetail.score }}分</strong><br>          <small>很棒</small><br>        </div><br>        <div class="info-tips">{{ sightDetail.comment_count }} 评论</div><br>        <van-icon name="arrow" /><br>      </div><br>      <div class="right"><br>        <div class="info-title"><br>          <span>景点介绍</span><br>        </div><br>        <div class="info-tips">开放时间、贴士</div><br>        <van-icon name="arrow" /><br>      </div><br>    </div><br>    <!-- //评分、景点介绍 --><br>    <!-- 门票列表 --><br>    <div class="sight-ticket"><br>      <van-cell title="门票" icon="bookmark-o" title-style="text-align:left"/><br>      <div class="ticket-item" v-for="item in ticketList" :key="item.pk"><br>        <div class="left"><br>          <div class="title">{{ item.name }}</div><br>          <div class="tips"><br>            <van-icon name="clock-o" /><br>            <span>{{ item.desc }}</span><br>          </div><br>          <div class="tags"><br>            <van-tag mark type="primary">标签1</van-tag><br>          </div><br>        </div><br>        <div class="right"><br>          <div class="price"><br>            <span>￥</span><br>            <strong>{{ item.sell_price }}</strong><br>          </div><br>          <router-link to="#"><br>            <van-button type="warning" size="small">预定</van-button><br>          </router-link><br>        </div><br>      </div><br>    </div><br>    <!-- //门票列表 --><br>  </div><br></template><br><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>// 评论项组件<br>import CommentItem from '@/components/sight/CommentItem'<br>export default {<br>  data () {<br>    return {<br>      id: '',<br>      // 景点详细信息<br>      sightDetail: {},<br>      // 门票列表<br>      ticketList: []<br>    }<br>  },<br>  components: {<br>    CommentItem<br>  },<br>  computed: {<br>    /**<br>     * 地址的全部信息<br>     */<br>    fullArea () {<br>      let area = this.sightDetail.province + this.sightDetail.city<br>      if (this.sightDetail.area) {<br>        area += this.sightDetail.area<br>      }<br>      if (this.sightDetail.town) {<br>        area += this.sightDetail.town<br>      }<br>      return area<br>    }<br>  },<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 获取景点详细信息<br>     */<br>    getSightDetail () {<br>      const url = SightApis.sightDetailUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data }) => {<br>        this.sightDetail = data<br>      })<br>    },<br>    /**<br>      * 门票列表<br>      */<br>    getTicketList () {<br>      const url = SightApis.sightTicketUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data: { objects } }) => {<br>        this.ticketList = objects<br>      })<br>    }<br>  },<br>  created () {<br>    this.id = this.$route.params.id<br>    // 获取景点详细信息<br>    this.getSightDetail()<br>    // 获取门票列表<br>    this.getTicketList()<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<p>详情页的图片数量和评论数量<br><code>sight/models.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-keyword">from</span> django.contrib.contenttypes.fields <span class="hljs-keyword">import</span> GenericRelation<br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> accounts.models <span class="hljs-keyword">import</span> User<br><span class="hljs-keyword">from</span> system.models <span class="hljs-keyword">import</span> ImageRelated<br><span class="hljs-keyword">from</span> sight.choices <span class="hljs-keyword">import</span> TicketTypes, EntryWay, TicketStatus<br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sight</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 景点基础信息 """</span><br><br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">64</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">256</span>)<br>    main_img = models.ImageField(<span class="hljs-string">'主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    banner_img = models.ImageField(<span class="hljs-string">'详情主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    content = models.TextField(<span class="hljs-string">'详细'</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br>    min_price = models.FloatField(<span class="hljs-string">'最低价格'</span>, default=<span class="hljs-number">0</span>)<br>    province = models.CharField(<span class="hljs-string">'省份'</span>, max_length=<span class="hljs-number">32</span>)<br>    city = models.CharField(<span class="hljs-string">'市区'</span>, max_length=<span class="hljs-number">32</span>)<br>    area = models.CharField(<span class="hljs-string">'区/县'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br>    town = models.CharField(<span class="hljs-string">'乡镇'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br><br>    is_top = models.BooleanField(<span class="hljs-string">'是否为精选景点'</span>, default=<span class="hljs-literal">False</span>)<br>    is_hot = models.BooleanField(<span class="hljs-string">'是否为热门景点'</span>, default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-comment"># 反向关联，景点和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             <span class="hljs-comment"># 通过一个景点的模型对象，找到对应id的记录，转换为sight的对象，</span><br>                             <span class="hljs-comment"># 通过其属性找到它的图片</span><br>                             related_query_name=<span class="hljs-string">'rel_sight_iamges'</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight'</span><br>        ordering = [<span class="hljs-string">'-updated_at'</span>]<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">comment_count</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 评论总数 """</span><br>        <span class="hljs-keyword">return</span> self.comments.filter(is_valid=<span class="hljs-literal">True</span>).count()<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">image_count</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 景点图片的数量 """</span><br>        <span class="hljs-keyword">return</span> self.images.filter(is_valid=<span class="hljs-literal">True</span>).count()<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Info</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br>    sight = models.OneToOneField(Sight, on_delete=models.CASCADE)<br>    entry_explain = models.CharField(<span class="hljs-string">'入园参考'</span>, max_length=<span class="hljs-number">1024</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    play_way = models.TextField(<span class="hljs-string">'特色玩法'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    tips = models.TextField(<span class="hljs-string">'温馨提示'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    traffic = models.TextField(<span class="hljs-string">'交通到达'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_info'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ticket</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 门票 """</span><br>    sight = models.ForeignKey(Sight, related_name=<span class="hljs-string">'tickets'</span>, verbose_name=<span class="hljs-string">'景点门票'</span>,<br>                              on_delete=models.PROTECT)<br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">128</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">64</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    types = models.SmallIntegerField(<span class="hljs-string">'类型'</span>,<br>                                     choices=TicketTypes.choices,<br>                                     default=TicketTypes.ADULT,<br>                                     help_text=<span class="hljs-string">'默认为成人票'</span>)<br>    price = models.FloatField(<span class="hljs-string">'价格（原价）'</span>)<br>    discount = models.FloatField(<span class="hljs-string">'折扣'</span>, default=<span class="hljs-number">10</span>)<br>    total_stock = models.PositiveIntegerField(<span class="hljs-string">'总库存'</span>, default=<span class="hljs-number">0</span>)<br>    remain_stock = models.PositiveIntegerField(<span class="hljs-string">'剩余库存'</span>, default=<span class="hljs-number">0</span>)<br>    expire_date = models.IntegerField(<span class="hljs-string">'有效期'</span>, default=<span class="hljs-number">1</span>)<br>    return_policy = models.CharField(<span class="hljs-string">'退改政策'</span>, max_length=<span class="hljs-number">64</span>, default=<span class="hljs-string">'条件退'</span>)<br>    has_invoice = models.BooleanField(<span class="hljs-string">'是否提供发票'</span>, default=<span class="hljs-literal">True</span>)<br>    entry_way = models.SmallIntegerField(<span class="hljs-string">'入园方式'</span>,<br>                                         choices=EntryWay.choices,<br>                                         default=EntryWay.BY_TICKET)<br>    tips = models.TextField(<span class="hljs-string">'预定须知'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    remark = models.TextField(<span class="hljs-string">'其他说明'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    status = models.SmallIntegerField(<span class="hljs-string">'状态'</span>,<br>                                      choices=TicketStatus.choices,<br>                                      default=TicketStatus.OPEN)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_ticket'</span><br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sell_price</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 销售价 = 原价 x 折扣 """</span><br>        <span class="hljs-keyword">return</span> self.price * self.discount / <span class="hljs-number">10</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 评论及回复 """</span><br>    <span class="hljs-comment"># 评论关联到用户</span><br>    user = models.ForeignKey(User, verbose_name=<span class="hljs-string">'评论人'</span>,<br>                             related_name=<span class="hljs-string">'comments'</span>,<br>                             on_delete=models.CASCADE)<br>    <span class="hljs-comment"># 评论关联到景点</span><br>    sight = models.ForeignKey(Sight, verbose_name=<span class="hljs-string">'景点'</span>,<br>                              related_name=<span class="hljs-string">'comments'</span>,<br>                              on_delete=models.CASCADE)<br>    content = models.TextField(<span class="hljs-string">'评论内容'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>)<br>    is_top = models.BooleanField(<span class="hljs-string">'是否置顶'</span>, default=<span class="hljs-literal">False</span>)<br>    love_count = models.IntegerField(<span class="hljs-string">'点赞次数'</span>, default=<span class="hljs-number">0</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br><br>    ip_address = models.CharField(<span class="hljs-string">'IP地址'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">64</span>)<br>    is_public = models.SmallIntegerField(<span class="hljs-string">'是否公开'</span>, default=<span class="hljs-number">1</span>)<br>    reply = models.ForeignKey(<br>        <span class="hljs-string">'self'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>,<br>        related_name=<span class="hljs-string">'reply_comment'</span>,<br>        verbose_name=<span class="hljs-string">'回复'</span>,<br>        on_delete=models.CASCADE)<br>    <span class="hljs-comment"># 反向关联，评论和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             related_query_name=<span class="hljs-string">"rel_comment_images"</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_comment'</span><br>        ordering = [<span class="hljs-string">'-love_count'</span>, <span class="hljs-string"><code class="language-hljs python"><span class="hljs-keyword">from</span> django.contrib.contenttypes.fields <span class="hljs-keyword">import</span> GenericRelation<br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">from</span> accounts.models <span class="hljs-keyword">import</span> User<br><span class="hljs-keyword">from</span> system.models <span class="hljs-keyword">import</span> ImageRelated<br><span class="hljs-keyword">from</span> sight.choices <span class="hljs-keyword">import</span> TicketTypes, EntryWay, TicketStatus<br><span class="hljs-keyword">from</span> utils.models <span class="hljs-keyword">import</span> CommonModel<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sight</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 景点基础信息 """</span><br><br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">64</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">256</span>)<br>    main_img = models.ImageField(<span class="hljs-string">'主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    banner_img = models.ImageField(<span class="hljs-string">'详情主图'</span>, upload_to=<span class="hljs-string">'%Y%m/sight/'</span>, max_length=<span class="hljs-number">256</span>)<br>    content = models.TextField(<span class="hljs-string">'详细'</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br>    min_price = models.FloatField(<span class="hljs-string">'最低价格'</span>, default=<span class="hljs-number">0</span>)<br>    province = models.CharField(<span class="hljs-string">'省份'</span>, max_length=<span class="hljs-number">32</span>)<br>    city = models.CharField(<span class="hljs-string">'市区'</span>, max_length=<span class="hljs-number">32</span>)<br>    area = models.CharField(<span class="hljs-string">'区/县'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br>    town = models.CharField(<span class="hljs-string">'乡镇'</span>, max_length=<span class="hljs-number">32</span>, null=<span class="hljs-literal">True</span>)<br><br>    is_top = models.BooleanField(<span class="hljs-string">'是否为精选景点'</span>, default=<span class="hljs-literal">False</span>)<br>    is_hot = models.BooleanField(<span class="hljs-string">'是否为热门景点'</span>, default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-comment"># 反向关联，景点和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             <span class="hljs-comment"># 通过一个景点的模型对象，找到对应id的记录，转换为sight的对象，</span><br>                             <span class="hljs-comment"># 通过其属性找到它的图片</span><br>                             related_query_name=<span class="hljs-string">'rel_sight_iamges'</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight'</span><br>        ordering = [<span class="hljs-string">'-updated_at'</span>]<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">comment_count</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 评论总数 """</span><br>        <span class="hljs-keyword">return</span> self.comments.filter(is_valid=<span class="hljs-literal">True</span>).count()<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">image_count</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 景点图片的数量 """</span><br>        <span class="hljs-keyword">return</span> self.images.filter(is_valid=<span class="hljs-literal">True</span>).count()<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Info</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br>    sight = models.OneToOneField(Sight, on_delete=models.CASCADE)<br>    entry_explain = models.CharField(<span class="hljs-string">'入园参考'</span>, max_length=<span class="hljs-number">1024</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    play_way = models.TextField(<span class="hljs-string">'特色玩法'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    tips = models.TextField(<span class="hljs-string">'温馨提示'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    traffic = models.TextField(<span class="hljs-string">'交通到达'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_info'</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ticket</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 门票 """</span><br>    sight = models.ForeignKey(Sight, related_name=<span class="hljs-string">'tickets'</span>, verbose_name=<span class="hljs-string">'景点门票'</span>,<br>                              on_delete=models.PROTECT)<br>    name = models.CharField(<span class="hljs-string">'名称'</span>, max_length=<span class="hljs-number">128</span>)<br>    desc = models.CharField(<span class="hljs-string">'描述'</span>, max_length=<span class="hljs-number">64</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    types = models.SmallIntegerField(<span class="hljs-string">'类型'</span>,<br>                                     choices=TicketTypes.choices,<br>                                     default=TicketTypes.ADULT,<br>                                     help_text=<span class="hljs-string">'默认为成人票'</span>)<br>    price = models.FloatField(<span class="hljs-string">'价格（原价）'</span>)<br>    discount = models.FloatField(<span class="hljs-string">'折扣'</span>, default=<span class="hljs-number">10</span>)<br>    total_stock = models.PositiveIntegerField(<span class="hljs-string">'总库存'</span>, default=<span class="hljs-number">0</span>)<br>    remain_stock = models.PositiveIntegerField(<span class="hljs-string">'剩余库存'</span>, default=<span class="hljs-number">0</span>)<br>    expire_date = models.IntegerField(<span class="hljs-string">'有效期'</span>, default=<span class="hljs-number">1</span>)<br>    return_policy = models.CharField(<span class="hljs-string">'退改政策'</span>, max_length=<span class="hljs-number">64</span>, default=<span class="hljs-string">'条件退'</span>)<br>    has_invoice = models.BooleanField(<span class="hljs-string">'是否提供发票'</span>, default=<span class="hljs-literal">True</span>)<br>    entry_way = models.SmallIntegerField(<span class="hljs-string">'入园方式'</span>,<br>                                         choices=EntryWay.choices,<br>                                         default=EntryWay.BY_TICKET)<br>    tips = models.TextField(<span class="hljs-string">'预定须知'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    remark = models.TextField(<span class="hljs-string">'其他说明'</span>, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)<br>    status = models.SmallIntegerField(<span class="hljs-string">'状态'</span>,<br>                                      choices=TicketStatus.choices,<br>                                      default=TicketStatus.OPEN)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_ticket'</span><br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sell_price</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">""" 销售价 = 原价 x 折扣 """</span><br>        <span class="hljs-keyword">return</span> self.price * self.discount / <span class="hljs-number">10</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span>(<span class="hljs-params">CommonModel</span>):</span><br>    <span class="hljs-string">""" 评论及回复 """</span><br>    <span class="hljs-comment"># 评论关联到用户</span><br>    user = models.ForeignKey(User, verbose_name=<span class="hljs-string">'评论人'</span>,<br>                             related_name=<span class="hljs-string">'comments'</span>,<br>                             on_delete=models.CASCADE)<br>    <span class="hljs-comment"># 评论关联到景点</span><br>    sight = models.ForeignKey(Sight, verbose_name=<span class="hljs-string">'景点'</span>,<br>                              related_name=<span class="hljs-string">'comments'</span>,<br>                              on_delete=models.CASCADE)<br>    content = models.TextField(<span class="hljs-string">'评论内容'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>)<br>    is_top = models.BooleanField(<span class="hljs-string">'是否置顶'</span>, default=<span class="hljs-literal">False</span>)<br>    love_count = models.IntegerField(<span class="hljs-string">'点赞次数'</span>, default=<span class="hljs-number">0</span>)<br>    score = models.FloatField(<span class="hljs-string">'评分'</span>, default=<span class="hljs-number">5</span>)<br><br>    ip_address = models.CharField(<span class="hljs-string">'IP地址'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">64</span>)<br>    is_public = models.SmallIntegerField(<span class="hljs-string">'是否公开'</span>, default=<span class="hljs-number">1</span>)<br>    reply = models.ForeignKey(<br>        <span class="hljs-string">'self'</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>,<br>        related_name=<span class="hljs-string">'reply_comment'</span>,<br>        verbose_name=<span class="hljs-string">'回复'</span>,<br>        on_delete=models.CASCADE)<br>    <span class="hljs-comment"># 反向关联，评论和系统的图片关联上</span><br>    images = GenericRelation(ImageRelated,<br>                             verbose_name=<span class="hljs-string">'关联的图片'</span>,<br>                             related_query_name=<span class="hljs-string">"rel_comment_images"</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">'sight_comment'</span><br>        ordering = [<span class="hljs-string">'-love_count'</span>, <span class="hljs-string">'-created_at'</span>]<br></code></pre></td></tr></tbody></table></figure>

<p><code>sight/serializers.py</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre class=" language-hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'main_img'</span>: obj.main_img.url,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'comment_count'</span>: obj.comment_count<br>        }<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'img'</span>: obj.banner_img.url,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'area'</span>: obj.area,<br>            <span class="hljs-string">'town'</span>: obj.town,<br>            <span class="hljs-string">'comment_count'</span>: obj.comment_count,<br>            <span class="hljs-string">'image_count'</span>: obj.image_count,<br>        }<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 门票列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'types'</span>: obj.types,<br>            <span class="hljs-string">'price'</span>: obj.price,<br>            <span class="hljs-string">'sell_price'</span>: obj.sell_price,<br>            <span class="hljs-string">'discount'</span>: obj.discount,<br>            <span class="hljs-string">'total_stock'</span>: obj.total_stock,<br>            <span class="hljs-string"><code class="language-hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 景点列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'main_img'</span>: obj.main_img.url,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'comment_count'</span>: obj.comment_count<br>        }<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SightDetailSerializer</span>(<span class="hljs-params">BaseSerializer</span>):</span><br>    <span class="hljs-string">""" 景点详情 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_dict</span>(<span class="hljs-params">self</span>):</span><br>        obj = self.obj<br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'id'</span>: obj.id,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'img'</span>: obj.banner_img.url,<br>            <span class="hljs-string">'content'</span>: obj.content,<br>            <span class="hljs-string">'score'</span>: obj.score,<br>            <span class="hljs-string">'min_price'</span>: obj.min_price,<br>            <span class="hljs-string">'province'</span>: obj.province,<br>            <span class="hljs-string">'city'</span>: obj.city,<br>            <span class="hljs-string">'area'</span>: obj.area,<br>            <span class="hljs-string">'town'</span>: obj.town,<br>            <span class="hljs-string">'comment_count'</span>: obj.comment_count,<br>            <span class="hljs-string">'image_count'</span>: obj.image_count,<br>        }<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketListSerializer</span>(<span class="hljs-params">BaseListPageSerializer</span>):</span><br>    <span class="hljs-string">""" 门票列表 """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, obj</span>):</span><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'pk'</span>: obj.pk,<br>            <span class="hljs-string">'name'</span>: obj.name,<br>            <span class="hljs-string">'desc'</span>: obj.desc,<br>            <span class="hljs-string">'types'</span>: obj.types,<br>            <span class="hljs-string">'price'</span>: obj.price,<br>            <span class="hljs-string">'sell_price'</span>: obj.sell_price,<br>            <span class="hljs-string">'discount'</span>: obj.discount,<br>            <span class="hljs-string">'total_stock'</span>: obj.total_stock,<br>            <span class="hljs-string">'remain_stock'</span>: obj.remain_stock<br>        }<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>使用axios获取数据</li>
<li>将数据设置到模型层</li>
</ul>
<h3 id="景点评论接口联调"><a href="#景点评论接口联调" class="headerlink" title="景点评论接口联调"></a>景点评论接口联调</h3><h4 id="实现步骤-7"><a href="#实现步骤-7" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul>
<li>阅读接口文档</li>
<li>配置接口地址<br>评论的每一项在景点详情、单独的评论列表，封装成公共组件，<br>获取里面内容在详情页url发生变化的时候，watch监听路由变化，重新获取数据</li>
</ul>
<p><code>src\utils\filters.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 用户名称脱敏处理</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">{*}</span> </span>name 用户名</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unameFormat</span> (<span class="hljs-params">name</span>) </span>{<br>  <span class="hljs-keyword">if</span> (!name) {<br>    <span class="hljs-keyword">return</span> name<br>  }<br>  <span class="hljs-keyword">return</span> name.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) + <span class="hljs-string">'***'</span><br>}<br><br><span class="hljs-keyword"><code class="language-hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 用户名称脱敏处理</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">{*}</span> </span>name 用户名</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unameFormat</span> (<span class="hljs-params">name</span>) </span>{<br>  <span class="hljs-keyword">if</span> (!name) {<br>    <span class="hljs-keyword">return</span> name<br>  }<br>  <span class="hljs-keyword">return</span> name.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) + <span class="hljs-string">'***'</span><br>}<br><br><span class="hljs-keyword">export</span> {<br>  unameFormat<br>}<br></code></pre></td></tr></tbody></table></figure>

<p><code>src\utils\apis.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">const</span> SightApis = {<br>  <span class="hljs-comment">// 评论列表</span><br>  sightCommentUrl: apiHost + <span class="hljs-string"><code class="language-hljs js"><span class="hljs-keyword">const</span> SightApis = {<br>  <span class="hljs-comment">// 评论列表</span><br>  sightCommentUrl: apiHost + <span class="hljs-string">'/sight/comment/list/#{id}/'</span><br>}<br></code></pre></td></tr></tbody></table></figure>

<p><code>src\views\sight\SightComment.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点评论 --><br>  <div class="page-sight-comment"><br>    <!-- 页面头部 --><br>    <van-nav-bar<br>      left-text="返回"<br>      title="景点评论"<br>      left-arrow<br>      @click-left="goBack"<br>    /><br>    <div class="sight-comment"><br>      <comment-item v-for="item in commentList" :key="item.pk" :item="item" /><br>    </div><br>  </div><br></template><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>// 评论项组件<br>import CommentItem from '@/components/sight/CommentItem'<br>export default {<br>  components: {<br>    CommentItem<br>  },<br>  data () {<br>    return {<br>      // 评论列表<br>      commentList: []<br>    }<br>  },<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 评论列表<br>     */<br>    getCommentList () {<br>      const url = SightApis.sightCommentUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data: { objects } }) => {<br>        this.commentList = objects<br>      })<br>    }<br>  },<br>  mounted () {<br>    this.id = this.$route.params.id<br>    this.getCommentList()<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<p><code>src\views\sight\SightDetail.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点详情 --><br>  <div class="page-sight-detail"><br>    <!-- 门票列表 --><br>    <div class="sight-ticket"><br>      <van-cell title="门票" icon="bookmark-o" title-style="text-align:left"/><br>      <div class="ticket-item" v-for="item in ticketList" :key="item.pk"><br>        <div class="left"><br>          <div class="title">{{ item.name }}</div><br>          <div class="tips"><br>            <van-icon name="clock-o" /><br>            <span>{{ item.desc }}</span><br>          </div><br>          <div class="tags"><br>            <van-tag mark type="primary">标签1</van-tag><br>          </div><br>        </div><br>        <div class="right"><br>          <div class="price"><br>            <span>￥</span><br>            <strong>{{ item.sell_price }}</strong><br>          </div><br>          <router-link to="#"><br>            <van-button type="warning" size="small">预定</van-button><br>          </router-link><br>        </div><br>      </div><br>    </div><br>    <!-- //门票列表 --><br>    <!-- 用户评价 --><br>    <div class="sight-comment"><br>      <van-cell title="热门评论" icon="comment-o" title-style="text-align:left"/><br>      <comment-item v-for="item in commentList" :key="item.pk" :item="item" /><br>      <router-link class="link-more" :to="{name: 'SightComment', params: {id}}">查看更多</router-link><br>    </div><br>    <!-- //用户评价 --><br>  </div><br></template><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>// 评论项组件<br>import CommentItem from '@/components/sight/CommentItem'<br>export default {<br>  data () {<br>    return {<br>      id: '',<br>      // 景点详细信息<br>      sightDetail: {},<br>      // 门票列表<br>      ticketList: [],<br>      // 评论列表<br>      commentList: []<br>    }<br>  },<br>  components: {<br>    CommentItem<br>  },<br>  computed: {<br>    /**<br>     * 地址的全部信息<br>     */<br>    fullArea () {<br>      let area = this.sightDetail.province + this.sightDetail.city<br>      if (this.sightDetail.area) {<br>        area += this.sightDetail.area<br>      }<br>      if (this.sightDetail.town) {<br>        area += this.sightDetail.town<br>      }<br>      return area<br>    }<br>  },<br>  watch: {<br>    $route () {<br>      this.loadData()<br>    }<br>  },<br>  methods: {<br>    /**<br>     * 跳转到评论列表<br>     */<br>    goPage () {<br>      this.$router.push({name: 'SightComment', params: {id: this.id}})<br>    },<br>    loadData () {<br>      this.id = this.$route.params.id<br>      // 获取景点详细信息<br>      this.getSightDetail()<br>      // 门票列表<br>      this.getTicketList()<br>      // 评论列表<br>      this.getCommentList()<br>    },<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 获取景点详细信息<br>     */<br>    getSightDetail () {<br>      const url = SightApis.sightDetailUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data }) => {<br>        this.sightDetail = data<br>      })<br>    },<br>    /**<br>     * 门票列表<br>     */<br>    getTicketList () {<br>      const url = SightApis.sightTicketUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data: { objects } }) => {<br>        this.ticketList = objects<br>      })<br>    },<br>    /**<br>     * 评论列表<br>     */<br>    getCommentList () {<br>      const url = SightApis.sightCommentUrl.replace('#{id}', this.id)<br>      ajax.get(url).then(({ data: { objects } }) => {<br>        this.commentList = objects<br>      })<br>    }<br>  },<br>  created () {<br>    this.loadData()<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>使用axios获取数据</li>
<li>将数据设置到模型层</li>
</ul>
<h3 id="前端代码优化"><a href="#前端代码优化" class="headerlink" title="前端代码优化"></a>前端代码优化</h3><ul>
<li>添加loading动画和添加请求拦截<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre class=" language-hljs src\main.js"><code class="language-hljs src\main.js">window.app = new Vue({<br>  router,<br>  store,<br>  render: h => h(App)<br>}).$mount('#app')<br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<p><code>src\utils\ajax.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre class=" language-hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span><br><br>ajax.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{<br>  <span class="hljs-comment">// 在发送请求之前做些什么</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'请求拦截到了'</span>)<br>  <span class="hljs-built_in">window</span>.app.$toast.loading({<br>    message: <span class="hljs-string">'加载中...'</span>,<br>    forbidClick: <span class="hljs-literal">true</span>,<br>    loadingType: <span class="hljs-string">'spinner'</span><br>  })<br>  <span class="hljs-keyword">return</span> config<br>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{<br>  <span class="hljs-comment">// 对请求错误做些什么</span><br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>})<br><br>ajax.interceptors.response.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{<br>  <span class="hljs-comment">// 对响应数据做点什么</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'响应拦截到了'</span>)<br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> response<br>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{<br>  <span class="hljs-comment">// 对响应错误做点什么</span><br>  <span class="hljs-keyword">if</span> (error.response) {<br>    <span class="hljs-keyword">if</span> (error.response.status === <span class="hljs-number">401</span>) {<br>      <span class="hljs-built_in">window</span>.alert(<span class="hljs-string">'未登录，即将跳转到登录页面'</span>)<br>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.response.status === <span class="hljs-number">500</span>) {<br>      <span class="hljs-built_in">window</span>.app.$notify({<br>        message: <span class="hljs-string">'服务器正忙，请稍后重试'</span>,<br>        type: <span class="hljs-string">'danger'</span><br>      })<br>      <span class="hljs-comment">// window.alert('服务器正忙，请稍后重试')</span><br>    }<br>  }<br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in"><code class="language-hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span><br><br>ajax.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{<br>  <span class="hljs-comment">// 在发送请求之前做些什么</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'请求拦截到了'</span>)<br>  <span class="hljs-built_in">window</span>.app.$toast.loading({<br>    message: <span class="hljs-string">'加载中...'</span>,<br>    forbidClick: <span class="hljs-literal">true</span>,<br>    loadingType: <span class="hljs-string">'spinner'</span><br>  })<br>  <span class="hljs-keyword">return</span> config<br>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{<br>  <span class="hljs-comment">// 对请求错误做些什么</span><br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>})<br><br>ajax.interceptors.response.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{<br>  <span class="hljs-comment">// 对响应数据做点什么</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'响应拦截到了'</span>)<br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> response<br>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{<br>  <span class="hljs-comment">// 对响应错误做点什么</span><br>  <span class="hljs-keyword">if</span> (error.response) {<br>    <span class="hljs-keyword">if</span> (error.response.status === <span class="hljs-number">401</span>) {<br>      <span class="hljs-built_in">window</span>.alert(<span class="hljs-string">'未登录，即将跳转到登录页面'</span>)<br>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.response.status === <span class="hljs-number">500</span>) {<br>      <span class="hljs-built_in">window</span>.app.$notify({<br>        message: <span class="hljs-string">'服务器正忙，请稍后重试'</span>,<br>        type: <span class="hljs-string">'danger'</span><br>      })<br>      <span class="hljs-comment">// window.alert('服务器正忙，请稍后重试')</span><br>    }<br>  }<br>  <span class="hljs-built_in">window</span>.app.$toast.clear()<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>})<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><p>修改页面标题<br><code>public\index.html</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre class=" language-hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">""</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,initial-scale=1.0"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"&lt;%= BASE_URL %&gt;favicon.ico"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>旅游网<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name"><code class="language-hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">""</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,initial-scale=1.0"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"&lt;%= BASE_URL %&gt;favicon.ico"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>旅游网<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>></span><br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>添加滚动加载，请求失败，点击重新加载和下拉刷新，<br>在评论列表的场景添加<br><code>src\views\sight\SightComment.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点评论 --><br>  <div class="page-sight-comment"><br>    <van-pull-refresh v-model="refreshing" @refresh="onRefresh"><br>      <van-list<br>        class="sight-comment"<br>        v-model="loading"<br>        :finished="finished"<br>        finished-text="没有更多了"<br>        :error.sync="error"<br>        error-text="请求失败，点击重新加载"<br>        @load="getCommentList"<br>      ><br>        <comment-item v-for="item in commentList" :key="item.pk" :item="item" /><br>      </van-list><br>    </van-pull-refresh><br>  </div><br></template><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>// 评论项组件<br>import CommentItem from '@/components/sight/CommentItem'<br>export default {<br>  components: {<br>    CommentItem<br>  },<br>  data () {<br>    return {<br>      // 评论列表<br>      commentList: [],<br>      // 当前的页码<br>      currentPage: 1,<br>      // 正在加载中<br>      loading: false,<br>      // 所有的内容加载完<br>      finished: false,<br>      // 请求失败<br>      error: false,<br>      // 是否正在下拉刷新中<br>      refreshing: false<br>    }<br>  },<br>  methods: {<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 下拉刷新执行<br>     */<br>    onRefresh () {<br>      // 清空数据<br>      this.commentList = []<br>      this.currentPage = 1<br><br>      this.finished = false<br>      this.error = false<br><br>      // 重新加载数据<br>      this.getCommentList()<br>    },<br>    /**<br>     * 评论列表<br>     */<br>    getCommentList () {<br>      const url = SightApis.sightCommentUrl.replace('#{id}', this.id)<br>      ajax.get(url, {<br>        params: {<br>          page: this.currentPage<br>        }<br>      }).then(({ data: { meta, objects } }) => {<br>        this.commentList = this.commentList.concat(objects)<br>        // 加载状态结束<br>        this.loading = false<br>        // 设置下一页的页码<br>        this.currentPage = meta.current_page + 1<br>        // 数据全部加载完成： 当前页面 == 总页数<br>        if (meta.current_page === meta.page_count) {<br>          this.finished = true<br>        }<br>        this.refreshing = false<br>      }).catch(() => {<br>        this.loading = false<br>        this.error = true<br>        this.refreshing = false<br>      })<br>    }<br>  },<br>  mounted () {<br>    this.id = this.$route.params.id<br>    // this.getCommentList()<br>  }<br>}<br></script><br></code></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h3 id="实现图片列表接口"><a href="#实现图片列表接口" class="headerlink" title="实现图片列表接口"></a>实现图片列表接口</h3><p><code>src\views\sight\SightImage.vue</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre class=" language-hljs vue"><code class="language-hljs vue"><template><br>  <!-- 景点图片 --><br>  <div class="page-sight-image"><br>    <!-- 顶部导航 --><br>    <van-nav-bar title="景点图片" left-text="返回" left-arrow @click-left="goBack" /><br>    <!-- 图片列表 --><br>    <van-pull-refresh v-model="refreshing" @refresh="onRefresh"><br>      <van-list<br>        class="sight-image"<br>        v-model="loading"<br>        :finished="finished"<br>        finished-text="没有更多了"<br>        :error.sync="error"<br>        error-text="请求失败，点击重新加载"<br>        @load="getImageList"<br>      ><br>        <van-row><br>          <van-col span="12" v-for="(item, index) in imageList" :key="index"><br>            <van-image width="100%" height="100%" :src="item.img" @click="showPreview=true"/><br>          </van-col><br>        </van-row><br>      </van-list><br>    </van-pull-refresh><br>    <!-- //图片列表 --><br><br>    <!-- 图片预览 --><br>    <van-image-preview v-model="showPreview" :images="imgUrlList" @change="onChange"><br>      <template v-slot:index>第{{ index + 1 }}页 / 共{{ imageList.length }}张</template><br>    </van-image-preview><br>    <!-- // 图片预览 --><br>  </div><br></template><br><script><br>import { ajax } from '@/utils/ajax'<br>import { SightApis } from '@/utils/apis'<br>export default {<br>  components: {},<br>  data () {<br>    return {<br>      // 图片列表<br>      imageList: [],<br>      // 图片预览<br>      index: 0,<br>      showPreview: false,<br>      // 当前的页码<br>      currentPage: 1,<br>      // 正在加载中<br>      loading: false,<br>      // 所有的内容加载完<br>      finished: false,<br>      // 请求失败<br>      error: false,<br>      // 是否正在下拉刷新中<br>      refreshing: false<br>    }<br>  },<br>  methods: {<br>    /**<br>     * 预览切换图片<br>     */<br>    onChange (index) {<br>      this.index = index<br>    },<br>    goBack () {<br>      this.$router.go(-1)<br>    },<br>    /**<br>     * 下拉刷新执行<br>     */<br>    onRefresh () {<br>      // 清空数据<br>      this.imageList = []<br>      this.currentPage = 1<br><br>      this.finished = false<br>      this.error = false<br>    },<br>    /**<br>     * 图片列表<br>     */<br>    getImageList () {<br>      const url = SightApis.sightImageUrl.replace('#{id}', this.id)<br>      ajax.get(url, {<br>        params: {<br>          page: this.currentPage<br>        }<br>      }).then(({ data: { meta, objects } }) => {<br>        this.imageList = this.imageList.concat(objects)<br>        // 加载状态结束<br>        this.loading = false<br>        // 设置下一页的页码<br>        this.currentPage = meta.current_page + 1<br>        // 数据全部加载完成： 当前页面 == 总页数<br>        if (meta.current_page === meta.page_count) {<br>          this.finished = true<br>        }<br>        this.refreshing = false<br>      }).catch(() => {<br>        this.loading = false<br>        this.error = true<br>        this.refreshing = false<br>      })<br>    }<br>  },<br>  computed: {<br>    /**<br>     * 图片地址<br>     */<br>    imgUrlList () {<br>      return this.imageList.map(item => item.img)<br>    }<br>  },<br>  mounted () {<br>    this.id = this.$route.params.id<br>  }<br>}<br></script><br><style lang="less"><br>.page-sight-image {<br>  padding: 5px;<br>  .van-col {<br>    padding: 5px;<br>  }<br>}<br></style><br><br></code></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
  </div>
  <div>
  
  <div class="post-note note-warning copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">作者：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://bubbleboy11.github.io/about">外心人D</a></p>
    <p><span style="font-weight: bold;">文章链接：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://bubbleboy11.github.io/2020/08/21/lu-you-wang-jing-dian-xiang-xi-ye-mian/">https://bubbleboy11.github.io/2020/08/21/lu-you-wang-jing-dian-xiang-xi-ye-mian/</a></p>
    <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/2020/08/21/jian-zhi-offer-shi-ti/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">上一篇</div>
        
        <div class="nav-title">剑指offer试题 </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/2020/08/21/liu-da-ji-ben-pai-xu/" class="nav-link">
      <div>
        <div class="nav-label">下一篇</div>
        
        <div class="nav-title">六大基本排序 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%85%E6%B8%B8%E7%BD%91%E6%99%AF%E7%82%B9%E8%AF%A6%E7%BB%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">旅游网景点详细页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js"><span class="toc-text">Vue.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86"><span class="toc-text">Vue中的路由管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">路由的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">Vue.js中的路由中的参数传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D"><span class="toc-text">动态路由匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">详情页：{{ id }} : {{ name }} : {{ type }}</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC"><span class="toc-text">路由的跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%96%B9%E5%BC%8F"><span class="toc-text">路由的跳转方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2"><span class="toc-text">景点搜索页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-text">搭建前端详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E5%A4%A7%E5%9B%BE%E9%83%A8%E5%88%86"><span class="toc-text">景点大图部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E5%88%86%E3%80%81%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D"><span class="toc-text">评分、景点介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E4%BF%A1%E6%81%AF"><span class="toc-text">地址信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%AF%84%E4%BB%B7%E5%88%97%E8%A1%A8"><span class="toc-text">用户评价列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1"><span class="toc-text">ORM模型设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点详情接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点评论列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%A8%E7%A5%A8%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">门票列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点介绍接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点搜索接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-5"><span class="toc-text">实现步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">热门推荐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">精选景点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E5%92%8C%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点详情和评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-6"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-7"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-text">前端代码优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3"><span class="toc-text">实现图片列表接口</span></a></li></ol></li></ol></li></ol>
</div></main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/img/author_img.png" class="author-img">

<p class="author-name">外心人D</p>
<p class="author-description">passion & patient</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>165</span>
    <span>文章</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>17</span>
    <span>分类</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>25</span>
    <span>标签</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://www.baidu.com">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://www.baidu.com">
        <i class="iconfont icon-bilibili society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://www.baidu.com">
        <i class="iconfont icon-stackflow society-icon"></i>
      </a>
    </div>
  
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%85%E6%B8%B8%E7%BD%91%E6%99%AF%E7%82%B9%E8%AF%A6%E7%BB%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">旅游网景点详细页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js"><span class="toc-text">Vue.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86"><span class="toc-text">Vue中的路由管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">路由的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">Vue.js中的路由中的参数传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D"><span class="toc-text">动态路由匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">详情页：{{ id }} : {{ name }} : {{ type }}</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC"><span class="toc-text">路由的跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%96%B9%E5%BC%8F"><span class="toc-text">路由的跳转方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2"><span class="toc-text">景点搜索页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-text">搭建前端详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E5%A4%A7%E5%9B%BE%E9%83%A8%E5%88%86"><span class="toc-text">景点大图部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E5%88%86%E3%80%81%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D"><span class="toc-text">评分、景点介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E4%BF%A1%E6%81%AF"><span class="toc-text">地址信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%AF%84%E4%BB%B7%E5%88%97%E8%A1%A8"><span class="toc-text">用户评价列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1"><span class="toc-text">ORM模型设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点详情接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点评论列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%A8%E7%A5%A8%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">门票列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点介绍接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点搜索接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-5"><span class="toc-text">实现步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">热门推荐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">精选景点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E5%92%8C%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点详情和评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-6"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-7"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-text">前端代码优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3"><span class="toc-text">实现图片列表接口</span></a></li></ol></li></ol></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>分类</div>
  <div class="categories-list">
    
      <a href="/categories/旅游网项目/">
        <div class="categories-list-item">
          旅游网项目
          <span class="categories-list-item-badge">26</span>
        </div>
      </a>
    
      <a href="/categories/django/">
        <div class="categories-list-item">
          django
          <span class="categories-list-item-badge">8</span>
        </div>
      </a>
    
      <a href="/categories/python/">
        <div class="categories-list-item">
          python
          <span class="categories-list-item-badge">38</span>
        </div>
      </a>
    
      <a href="/categories/Markdown/">
        <div class="categories-list-item">
          Markdown
          <span class="categories-list-item-badge">63</span>
        </div>
      </a>
    
      <a href="/categories/计算机网络/">
        <div class="categories-list-item">
          计算机网络
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
      <a href="/categories/web/">
        <div class="categories-list-item">
          web
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/测试/">
        <div class="categories-list-item">
          测试
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/docker/">
        <div class="categories-list-item">
          docker
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/hexo/">
        <div class="categories-list-item">
          hexo
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/java/">
        <div class="categories-list-item">
          java
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/数据库/">
        <div class="categories-list-item">
          数据库
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/markdown/">
        <div class="categories-list-item">
          markdown
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/数据结构与算法/">
        <div class="categories-list-item">
          数据结构与算法
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/面试/">
        <div class="categories-list-item">
          面试
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/vue/">
        <div class="categories-list-item">
          vue
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/linux/">
        <div class="categories-list-item">
          linux
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/前端/">
        <div class="categories-list-item">
          前端
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>热门标签</div>
  <div class="tags-list">
    
    <a href="/tags/剑指offer/" title="剑指offer"><div class="tags-list-item">剑指offer</div></a>
    
    <a href="/tags/Leetcode/" title="Leetcode"><div class="tags-list-item">Leetcode</div></a>
    
    <a href="/tags/django/" title="django"><div class="tags-list-item">django</div></a>
    
    <a href="/tags/Vue/" title="Vue"><div class="tags-list-item">Vue</div></a>
    
    <a href="/tags/python/" title="python"><div class="tags-list-item">python</div></a>
    
    <a href="/tags/测试/" title="测试"><div class="tags-list-item">测试</div></a>
    
    <a href="/tags/redis/" title="redis"><div class="tags-list-item">redis</div></a>
    
    <a href="/tags/排序/" title="排序"><div class="tags-list-item">排序</div></a>
    
    <a href="/tags/sql/" title="sql"><div class="tags-list-item">sql</div></a>
    
    <a href="/tags/前端/" title="前端"><div class="tags-list-item">前端</div></a>
    
    <a href="/tags/linux/" title="linux"><div class="tags-list-item">linux</div></a>
    
    <a href="/tags/数据结构和算法/" title="数据结构和算法"><div class="tags-list-item">数据结构和算法</div></a>
    
    <a href="/tags/Unicode/" title="Unicode"><div class="tags-list-item">Unicode</div></a>
    
    <a href="/tags/ASCII/" title="ASCII"><div class="tags-list-item">ASCII</div></a>
    
    <a href="/tags/编码/" title="编码"><div class="tags-list-item">编码</div></a>
    
    <a href="/tags/vue/" title="vue"><div class="tags-list-item">vue</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%85%E6%B8%B8%E7%BD%91%E6%99%AF%E7%82%B9%E8%AF%A6%E7%BB%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">旅游网景点详细页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js"><span class="toc-text">Vue.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86"><span class="toc-text">Vue中的路由管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">路由的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">Vue.js中的路由中的参数传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D"><span class="toc-text">动态路由匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">详情页：{{ id }} : {{ name }} : {{ type }}</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC"><span class="toc-text">路由的跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%96%B9%E5%BC%8F"><span class="toc-text">路由的跳转方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2"><span class="toc-text">景点搜索页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-text">搭建前端详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E5%A4%A7%E5%9B%BE%E9%83%A8%E5%88%86"><span class="toc-text">景点大图部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E5%88%86%E3%80%81%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D"><span class="toc-text">评分、景点介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E4%BF%A1%E6%81%AF"><span class="toc-text">地址信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%AF%84%E4%BB%B7%E5%88%97%E8%A1%A8"><span class="toc-text">用户评价列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-4"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1"><span class="toc-text">ORM模型设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点详情接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点评论列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%A8%E7%A5%A8%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">门票列表接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E4%BB%8B%E7%BB%8D%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">景点介绍接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%90%9C%E7%B4%A2%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点搜索接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-5"><span class="toc-text">实现步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">热门推荐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">精选景点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%A6%E6%83%85%E5%92%8C%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点详情和评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-6"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%E8%81%94%E8%B0%83"><span class="toc-text">景点评论接口联调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-7"><span class="toc-text">实现步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-text">前端代码优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%97%E8%A1%A8%E6%8E%A5%E5%8F%A3"><span class="toc-text">实现图片列表接口</span></a></li></ol></li></ol></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>最近文章</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-02</div>
        <a href="/2021/04/03/admin-de-yi-xie-you-hua-pei-zhi/"><div class="recent-posts-item-content">admin的一些优化配置</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-02</div>
        <a href="/2021/04/02/django-hou-tai-guan-li/"><div class="recent-posts-item-content">Django后台管理</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-01</div>
        <a href="/2021/04/02/lu-you-wang-shan-chu-ding-dan-jie-kou-lian-diao/"><div class="recent-posts-item-content">旅游网删除订单接口联调</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-01</div>
        <a href="/2021/04/02/lu-you-wang-qu-xiao-ding-dan-jie-kou-lian-diao/"><div class="recent-posts-item-content">旅游网取消订单接口联调</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2021 -
          
          2021
        </span>
        &nbsp;
        <a href="/" class="footer-link">外心人D </a>
      </div>
    </div>

    
    <div class="footer-dsc">
      
      Powered by
      <a href="https://hexo.io/" class="footer-link" target="_blank" rel="nofollow noopener noreferrer">&nbsp;Hexo </a>
      
      
      <span>&nbsp;|&nbsp;</span>
      
      
      Theme -
      <a href="https://github.com/theme-kaze" class="footer-link" target="_blank"
        rel="nofollow noopener noreferrer">&nbsp;Kaze</a>
      
    </div>
    
    
    
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton"  aria-label="回到顶部">
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton" aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget" aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a role="button" id="searchbutton" class="basebutton searchwidget" aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a>

  
  
  

  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('aria-label', 'illustration');
      wrapper.style.cssText = 'width: 100%; display: flex; justify-content: center;';
      if (img[i].alt) wrapper.dataset.caption = img[i].alt;
      wrapper.dataset.nolink = true;
      img[i].before(wrapper);
      wrapper.append(img[i]);
      var divWrap = document.createElement('div');
      divWrap.classList.add('gallery');
      wrapper.before(divWrap);
      divWrap.append(wrapper);
    }
    baguetteBox.run('.gallery');
  }
</script>
<script>loadScript("/js/lib/lightbox/baguetteBox.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
</body>

</html>